(window.webpackJsonpfeffery_antd_charts=window.webpackJsonpfeffery_antd_charts||[]).push([[1],Array(52).concat([function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",function(){return AntdDecompositionTree});var _ant_design_graphs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(405),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(70),lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__),_components_graphs_AntdDecompositionTree_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(20);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)!{}.hasOwnProperty.call(r,n)||(t[n]=r[n])}return t}).apply(null,arguments)}function ownKeys(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _callSuper(t,e,n){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,n||[],_getPrototypeOf(t).constructor):e.apply(t,n))}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var AntdDecompositionTree=function(_Component){function AntdDecompositionTree(){return _classCallCheck(this,AntdDecompositionTree),_callSuper(this,AntdDecompositionTree,arguments)}return _inherits(AntdDecompositionTree,_Component),_createClass(AntdDecompositionTree,[{key:"render",value:function render(){var _nodeCfg$style,_nodeCfg$title,_nodeCfg$label,_nodeCfg$items,_nodeCfg$badge,_nodeCfg$percent,_edgeCfg$style,_edgeCfg$label,_this$props=this.props,id=_this$props.id,key=_this$props.key,className=_this$props.className,style=_this$props.style,data=_this$props.data,width=_this$props.width,height=_this$props.height,autoFit=_this$props.autoFit,nodeCfg=_this$props.nodeCfg,edgeCfg=_this$props.edgeCfg,level=_this$props.level,behaviors=_this$props.behaviors,markerCfg=_this$props.markerCfg,animate=_this$props.animate,minimapCfg=_this$props.minimapCfg,layout=_this$props.layout,setProps=_this$props.setProps,loading_state=_this$props.loading_state,config={},config=_objectSpread(_objectSpread({},config),{},{data:data,width:width,height:height,autoFit:autoFit,level:level,behaviors:behaviors,animate:animate,minimapCfg:minimapCfg,layout:layout});return config.nodeCfg=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep)(nodeCfg),null!=nodeCfg&&null!=(_nodeCfg$style=nodeCfg.style)&&_nodeCfg$style.func&&(config.nodeCfg.style=eval(nodeCfg.style.func)),null!=nodeCfg&&null!=(_nodeCfg$title=nodeCfg.title)&&null!=(_nodeCfg$title=_nodeCfg$title.style)&&_nodeCfg$title.func&&(config.nodeCfg.title.style=eval(nodeCfg.title.style.func)),null!=nodeCfg&&null!=(_nodeCfg$label=nodeCfg.label)&&null!=(_nodeCfg$label=_nodeCfg$label.style)&&_nodeCfg$label.func&&(config.nodeCfg.label.style=eval(nodeCfg.label.style.func)),null!=nodeCfg&&null!=(_nodeCfg$items=nodeCfg.items)&&null!=(_nodeCfg$items=_nodeCfg$items.style)&&_nodeCfg$items.func&&(config.nodeCfg.items.style=eval(nodeCfg.items.style.func)),null!=nodeCfg&&null!=(_nodeCfg$badge=nodeCfg.badge)&&null!=(_nodeCfg$badge=_nodeCfg$badge.style)&&_nodeCfg$badge.func&&(config.nodeCfg.badge.style=eval(nodeCfg.badge.style.func)),null!=nodeCfg&&null!=(_nodeCfg$percent=nodeCfg.percent)&&null!=(_nodeCfg$percent=_nodeCfg$percent.style)&&_nodeCfg$percent.func&&(config.nodeCfg.percent.style=eval(nodeCfg.percent.style.func)),config.edgeCfg=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep)(edgeCfg),null!=edgeCfg&&null!=(_edgeCfg$style=edgeCfg.style)&&_edgeCfg$style.func&&(config.edgeCfg.style=eval(edgeCfg.style.func)),null!=edgeCfg&&null!=(_edgeCfg$label=edgeCfg.label)&&null!=(_edgeCfg$label=_edgeCfg$label.style)&&_edgeCfg$label.func&&(config.edgeCfg.label.style=eval(edgeCfg.label.style.func)),config.markerCfg=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep)(markerCfg),null!=markerCfg&&markerCfg.func&&(config.markerCfg=eval(markerCfg.func)),config=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.omitBy)(config,lodash__WEBPACK_IMPORTED_MODULE_2__.isUndefined),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ant_design_graphs__WEBPACK_IMPORTED_MODULE_0__.a,_extends({id:id,key:key,className:className,style:style,onReady:function(t){t.on("canvas:click",function(t){setProps({recentlyNodeClickRecord:{timestamp:(new Date).valueOf(),data:null}})}),t.on("node:mousedown",function(t){setProps({recentlyNodeClickRecord:{timestamp:(new Date).valueOf(),data:{id:t.item._cfg.model.id,value:t.item._cfg.model.value}}})})},"data-dash-is-loading":loading_state&&loading_state.is_loading||void 0},config))}}])}(react__WEBPACK_IMPORTED_MODULE_1__.Component);AntdDecompositionTree.defaultProps=_components_graphs_AntdDecompositionTree_react__WEBPACK_IMPORTED_MODULE_3__.b,AntdDecompositionTree.propTypes=_components_graphs_AntdDecompositionTree_react__WEBPACK_IMPORTED_MODULE_3__.c},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"default",function(){return AntdFundFlow});var _ant_design_graphs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(406),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(70),lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__),_components_graphs_AntdFundFlow_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)!{}.hasOwnProperty.call(r,n)||(t[n]=r[n])}return t}).apply(null,arguments)}function ownKeys(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}function _callSuper(t,e,n){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,n||[],_getPrototypeOf(t).constructor):e.apply(t,n))}function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function(){return!!t})()}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var AntdFundFlow=function(_Component){function AntdFundFlow(){return _classCallCheck(this,AntdFundFlow),_callSuper(this,AntdFundFlow,arguments)}return _inherits(AntdFundFlow,_Component),_createClass(AntdFundFlow,[{key:"render",value:function render(){var _nodeCfg$style,_nodeCfg$title,_nodeCfg$label,_nodeCfg$items,_nodeCfg$badge,_nodeCfg$percent,_edgeCfg$style,_edgeCfg$label,_this$props=this.props,id=_this$props.id,key=_this$props.key,className=_this$props.className,style=_this$props.style,data=_this$props.data,width=_this$props.width,height=_this$props.height,autoFit=_this$props.autoFit,nodeCfg=_this$props.nodeCfg,edgeCfg=_this$props.edgeCfg,behaviors=_this$props.behaviors,markerCfg=_this$props.markerCfg,minimapCfg=_this$props.minimapCfg,layout=_this$props.layout,setProps=_this$props.setProps,loading_state=_this$props.loading_state,config={},config=_objectSpread(_objectSpread({},config),{},{data:data,width:width,height:height,autoFit:autoFit,behaviors:behaviors,minimapCfg:minimapCfg,layout:layout});return config.nodeCfg=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep)(nodeCfg),null!=nodeCfg&&null!=(_nodeCfg$style=nodeCfg.style)&&_nodeCfg$style.func&&(config.nodeCfg.style=eval(nodeCfg.style.func)),null!=nodeCfg&&null!=(_nodeCfg$title=nodeCfg.title)&&null!=(_nodeCfg$title=_nodeCfg$title.style)&&_nodeCfg$title.func&&(config.nodeCfg.title.style=eval(nodeCfg.title.style.func)),null!=nodeCfg&&null!=(_nodeCfg$label=nodeCfg.label)&&null!=(_nodeCfg$label=_nodeCfg$label.style)&&_nodeCfg$label.func&&(config.nodeCfg.label.style=eval(nodeCfg.label.style.func)),null!=nodeCfg&&null!=(_nodeCfg$items=nodeCfg.items)&&null!=(_nodeCfg$items=_nodeCfg$items.style)&&_nodeCfg$items.func&&(config.nodeCfg.items.style=eval(nodeCfg.items.style.func)),null!=nodeCfg&&null!=(_nodeCfg$badge=nodeCfg.badge)&&null!=(_nodeCfg$badge=_nodeCfg$badge.style)&&_nodeCfg$badge.func&&(config.nodeCfg.badge.style=eval(nodeCfg.badge.style.func)),null!=nodeCfg&&null!=(_nodeCfg$percent=nodeCfg.percent)&&null!=(_nodeCfg$percent=_nodeCfg$percent.style)&&_nodeCfg$percent.func&&(config.nodeCfg.percent.style=eval(nodeCfg.percent.style.func)),config.edgeCfg=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep)(edgeCfg),null!=edgeCfg&&null!=(_edgeCfg$style=edgeCfg.style)&&_edgeCfg$style.func&&(config.edgeCfg.style=eval(edgeCfg.style.func)),null!=edgeCfg&&null!=(_edgeCfg$label=edgeCfg.label)&&null!=(_edgeCfg$label=_edgeCfg$label.style)&&_edgeCfg$label.func&&(config.edgeCfg.label.style=eval(edgeCfg.label.style.func)),config.markerCfg=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep)(markerCfg),null!=markerCfg&&markerCfg.func&&(config.markerCfg=eval(markerCfg.func)),config=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.omitBy)(config,lodash__WEBPACK_IMPORTED_MODULE_2__.isUndefined),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ant_design_graphs__WEBPACK_IMPORTED_MODULE_0__.a,_extends({id:id,key:key,className:className,style:style,onReady:function(t){t.on("canvas:click",function(t){setProps({recentlyNodeClickRecord:{timestamp:(new Date).valueOf(),data:null}})}),t.on("node:mousedown",function(t){setProps({recentlyNodeClickRecord:{timestamp:(new Date).valueOf(),data:{id:t.item._cfg.model.id,value:t.item._cfg.model.value}}})})},"data-dash-is-loading":loading_state&&loading_state.is_loading||void 0},config))}}])}(react__WEBPACK_IMPORTED_MODULE_1__.Component);AntdFundFlow.defaultProps=_components_graphs_AntdFundFlow_react__WEBPACK_IMPORTED_MODULE_3__.b,AntdFundFlow.propTypes=_components_graphs_AntdFundFlow_react__WEBPACK_IMPORTED_MODULE_3__.c},,,,,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _ant_design_graphs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(404),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(70),lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__),_components_graphs_AntdRadialTree_react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(33);function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _extends(){return(_extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];for(n in r)!{}.hasOwnProperty.call(r,n)||(t[n]=r[n])}return t}).apply(null,arguments)}function ownKeys(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var AntdRadialTree=function AntdRadialTree(props){var _nodeCfg$style,_nodeCfg$label,_edgeCfg$style,_edgeCfg$label,id=props.id,key=props.key,className=props.className,style=props.style,data=props.data,width=props.width,height=props.height,autoFit=props.autoFit,nodeCfg=props.nodeCfg,edgeCfg=props.edgeCfg,behaviors=props.behaviors,animate=props.animate,minimapCfg=props.minimapCfg,layout=props.layout,setProps=props.setProps,loading_state=props.loading_state,config={},config=_objectSpread(_objectSpread({},config),{},{data:data,width:width,height:height,autoFit:autoFit,behaviors:behaviors,animate:animate,minimapCfg:minimapCfg,layout:layout});return config.nodeCfg=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep)(nodeCfg),null!=nodeCfg&&null!=(_nodeCfg$style=nodeCfg.style)&&_nodeCfg$style.func&&(config.nodeCfg.style=eval(nodeCfg.style.func)),null!=nodeCfg&&null!=(_nodeCfg$label=nodeCfg.label)&&null!=(_nodeCfg$label=_nodeCfg$label.style)&&_nodeCfg$label.func&&(config.nodeCfg.label.style=eval(nodeCfg.label.style.func)),config.edgeCfg=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep)(edgeCfg),null!=edgeCfg&&null!=(_edgeCfg$style=edgeCfg.style)&&_edgeCfg$style.func&&(config.edgeCfg.style=eval(edgeCfg.style.func)),null!=edgeCfg&&null!=(_edgeCfg$label=edgeCfg.label)&&null!=(_edgeCfg$label=_edgeCfg$label.style)&&_edgeCfg$label.func&&(config.edgeCfg.label.style=eval(edgeCfg.label.style.func)),config=Object(lodash__WEBPACK_IMPORTED_MODULE_2__.omitBy)(config,lodash__WEBPACK_IMPORTED_MODULE_2__.isUndefined),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ant_design_graphs__WEBPACK_IMPORTED_MODULE_0__.a,_extends({id:id,key:key,className:className,style:style,onReady:function(t){t.on("canvas:click",function(t){setProps({recentlyNodeClickRecord:{timestamp:(new Date).valueOf(),data:null},recentlyEdgeClickRecord:{timestamp:(new Date).valueOf(),data:null}})}),t.on("canvas:dblclick",function(t){setProps({recentlyNodeDoubleClickRecord:{timestamp:(new Date).valueOf(),data:null},recentlyEdgeDoubleClickRecord:{timestamp:(new Date).valueOf(),data:null}})}),t.on("node:mousedown",function(t){setProps({recentlyNodeClickRecord:{timestamp:(new Date).valueOf(),data:{id:t.item._cfg.model.id,value:t.item._cfg.model.value}}})}),t.on("node:dblclick",function(t){setProps({recentlyNodeDoubleClickRecord:{timestamp:(new Date).valueOf(),data:{id:t.item._cfg.model.id,value:t.item._cfg.model.value}}})}),t.on("edge:mousedown",function(t){setProps({recentlyEdgeClickRecord:{timestamp:(new Date).valueOf(),data:{source:t.item._cfg.model.source,target:t.item._cfg.model.target}}})}),t.on("edge:dblclick",function(t){setProps({recentlyEdgeDoubleClickRecord:{timestamp:(new Date).valueOf(),data:{source:t.item._cfg.model.source,target:t.item._cfg.model.target}}})}),t.on("nodeselectchange",function(t){setProps({selectedNodes:{timestamp:(new Date).valueOf(),data:t.selectedItems.nodes.map(function(t){return{id:t._cfg.model.id,value:t._cfg.model.value}})}})})},"data-dash-is-loading":loading_state&&loading_state.is_loading||void 0},config))};AntdRadialTree.defaultProps=_components_graphs_AntdRadialTree_react__WEBPACK_IMPORTED_MODULE_3__.b,AntdRadialTree.propTypes=_components_graphs_AntdRadialTree_react__WEBPACK_IMPORTED_MODULE_3__.c,__webpack_exports__.default=AntdRadialTree},,,,,,,,,,,,,,function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(286),e),o(n(190),e),o(n(149),e),o(n(150),e),o(n(191),e),o(n(287),e)},,,function(t,e,n){function r(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}Object.defineProperty(e,"__esModule",{value:!0}),e.Base=void 0,r.prototype.layout=function(t){return this.init(t),this.execute(!0)},r.prototype.init=function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]},r.prototype.execute=function(t){},r.prototype.executeWithWorker=function(){},r.prototype.getDefaultCfg=function(){return{}},r.prototype.updateCfg=function(t){t&&Object.assign(this,t)},r.prototype.getType=function(){return"base"},r.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},e.Base=r},function(t,e,n){n.d(e,"i",function(){return r}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return i}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return c}),n.d(e,"f",function(){return u}),n.d(e,"a",function(){return l}),n.d(e,"e",function(){return d}),n.d(e,"l",function(){return h}),n.d(e,"j",function(){return f}),n.d(e,"k",function(){return p});var r={hover:{stroke:"#1890ff",lineWidth:2}},o=[120,40],i={stroke:"#40a9ff"},a=[[0,.5],[1,.5]],s={fill:"#000",fontSize:12},c={fill:"#000",fontSize:12,textAlign:"start",textBaseline:"middle"},u={show:!1,size:[150,100],type:"keyShape"},l={fill:"#fff",stroke:"#40a9ff",radius:2},d=6,h="g",f=4,p={position:"absolute",right:"12px",top:"12px",display:"flex",flexDirection:"column",padding:"6px",borderRadius:"2px",fontSize:"24px",textAlign:"center",lineHeight:"24px",color:"rgba(0,0,0,.65)",backgroundColor:"#fff",boxShadow:"0 0 3px #ccc"}},,,,,,,,function(t,i,e){Object.defineProperty(i,"__esModule",{value:!0}),i.minBy=i.notime=i.time=i.partition=i.maxRank=i.addBorderNode=i.removeEmptyRanks=i.normalizeRanks=i.buildLayerMatrix=i.intersectRect=i.predecessorWeights=i.successorWeights=i.zipObject=i.asNonCompoundGraph=i.simplify=i.addDummyNode=void 0;var a=e(80),s=e(105);i.addDummyNode=function(t,e,n,r){for(var o;o="".concat(r).concat(Math.random()),t.hasNode(o););return n.dummy=e,t.setNode(o,n),o},i.simplify=function(r){var o=(new s.Graph).setGraph(r.graph());return r.nodes().forEach(function(t){o.setNode(t,r.node(t))}),r.edges().forEach(function(t){var e=o.edgeFromArgs(t.v,t.w)||{weight:0,minlen:1},n=r.edge(t);o.setEdge(t.v,t.w,{weight:e.weight+n.weight,minlen:Math.max(e.minlen,n.minlen)})}),o},i.asNonCompoundGraph=function(n){var r=new s.Graph({multigraph:n.isMultigraph()}).setGraph(n.graph());return n.nodes().forEach(function(t){var e;null!=(e=n.children(t))&&e.length||r.setNode(t,n.node(t))}),n.edges().forEach(function(t){r.setEdgeObj(t,n.edge(t))}),r},i.zipObject=function(t,r){return null==t?void 0:t.reduce(function(t,e,n){return t[e]=r[n],t},{})},i.successorWeights=function(r){var o={};return r.nodes().forEach(function(t){var e,n={};null!=(e=r.outEdges(t))&&e.forEach(function(t){n[t.w]=(n[t.w]||0)+((null==(t=r.edge(t))?void 0:t.weight)||0)}),o[t]=n}),o},i.predecessorWeights=function(n){var t=n.nodes(),e=t.map(function(t){var e={};return null!=(t=n.inEdges(t))&&t.forEach(function(t){e[t.v]=(e[t.v]||0)+n.edge(t).weight}),e});return(0,i.zipObject)(t,e)},i.intersectRect=function(t,e){var n,r=Number(t.x),o=Number(t.y),i=Number(e.x)-r,e=Number(e.y)-o,a=Number(t.width)/2,t=Number(t.height)/2;return i||e?(t=Math.abs(e)*a>Math.abs(i)*t?(n=(t=e<0?-t:t)*i/e,t):(n=a=i<0?-a:a)*e/i,{x:r+n,y:o+t}):{x:0,y:0}},i.buildLayerMatrix=function(n){for(var r=[],t=(0,i.maxRank)(n)+1,e=0;e<t;e++)r.push([]);for(n.nodes().forEach(function(t){var e=n.node(t);e&&void 0!==(e=e.rank)&&r[e]&&r[e].push(t)}),e=0;e<t;e++)r[e]=r[e].sort(function(t,e){t=null==(t=n.node(t))?void 0:t.order,e=null==(e=n.node(e))?void 0:e.order;return Number(t)-Number(e)});return r},i.normalizeRanks=function(e){var t=e.nodes().filter(function(t){return void 0!==(null==(t=e.node(t))?void 0:t.rank)}).map(function(t){return e.node(t).rank}),n=Math.min.apply(Math,t);e.nodes().forEach(function(t){t=e.node(t);t.hasOwnProperty("rank")&&n!==1/0&&(t.rank-=n)})},i.removeEmptyRanks=function(n){var t=n.nodes(),e=t.filter(function(t){return void 0!==(null==(t=n.node(t))?void 0:t.rank)}).map(function(t){return n.node(t).rank}),r=Math.min.apply(Math,e),o=[];t.forEach(function(t){var e=((null==(e=n.node(t))?void 0:e.rank)||0)-r;o[e]||(o[e]=[]),o[e].push(t)});for(var i=0,a=n.graph().nodeRankFactor||0,s=0;s<o.length;s++){var c=o[s];void 0===c?s%a!=0&&--i:!i||null!=c&&c.forEach(function(t){t=n.node(t);t&&(t.rank=t.rank||0,t.rank+=i)})}},i.addBorderNode=function(t,e,n,r){var o={width:0,height:0};return(0,a.isNumber)(n)&&(0,a.isNumber)(r)&&(o.rank=n,o.order=r),(0,i.addDummyNode)(t,"border",o,e)},i.maxRank=function(e){var n;return e.nodes().forEach(function(t){t=null==(t=e.node(t))?void 0:t.rank;void 0!==t&&(void 0===n||n<t)&&(n=t)}),n=n||0},i.partition=function(t,e){var n={lhs:[],rhs:[]};return null!=t&&t.forEach(function(t){(e(t)?n.lhs:n.rhs).push(t)}),n},i.time=function(t,e){var n=Date.now();try{return e()}finally{console.log("".concat(t," time: ").concat(Date.now()-n,"ms"))}},i.notime=function(t,e){return e()},i.minBy=function(t,n){return t.reduce(function(t,e){return n(t)>n(e)?e:t})}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var o=n(206);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},,,function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueId=e.getOutEdgesNodeId=e.getNeighbors=e.getEdgesByNodeId=void 0,e.getNeighbors=function(e,t,n){t=(t=void 0===t?[]:t).filter(function(t){return t.source===e||t.target===e});return"target"===n?t.filter(function(t){return t.source===e}).map(function(t){return t.target}):"source"===n?t.filter(function(t){return t.target===e}).map(function(t){return t.source}):t.map(function(t){return t.source===e?t.target:t.source})},e.getOutEdgesNodeId=function(e,t){return t.filter(function(t){return t.source===e})},e.getEdgesByNodeId=function(e,t){return t.filter(function(t){return t.source===e||t.target===e})},e.uniqueId=function(t){void 0===t&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)}},,,,,,,function(D,P,t){function L(t,e){return t===e}var e={},n=(t.r(e),t.d(e,"getAdjMatrix",function(){return q}),t.d(e,"breadthFirstSearch",function(){return at}),t.d(e,"connectedComponent",function(){return ct}),t.d(e,"getDegree",function(){return lt}),t.d(e,"getInDegree",function(){return dt}),t.d(e,"getOutDegree",function(){return ht}),t.d(e,"detectCycle",function(){return mt}),t.d(e,"detectDirectedCycle",function(){return ce}),t.d(e,"detectAllCycles",function(){return yt}),t.d(e,"detectAllDirectedCycle",function(){return gt}),t.d(e,"detectAllUndirectedCycle",function(){return pt}),t.d(e,"depthFirstSearch",function(){return ft}),t.d(e,"dijkstra",function(){return vt}),t.d(e,"findAllPath",function(){return _t}),t.d(e,"findShortestPath",function(){return wt}),t.d(e,"floydWarshall",function(){return Et}),t.d(e,"labelPropagation",function(){return St}),t.d(e,"louvain",function(){return Ft}),t.d(e,"iLouvain",function(){return Gt}),t.d(e,"kCore",function(){return Ut}),t.d(e,"kMeans",function(){return Wt}),t.d(e,"cosineSimilarity",function(){return Xt}),t.d(e,"nodesCosineSimilarity",function(){return Yt}),t.d(e,"minimumSpanningTree",function(){return Kt}),t.d(e,"pageRank",function(){return Zt}),t.d(e,"getNeighbors",function(){return Q}),t.d(e,"Stack",function(){return se}),t.d(e,"GADDI",function(){return ae}),t.d(e,"default",function(){return ue}),{}),r=(t.r(n),t.d(n,"compare",function(){return de}),t.d(n,"getLineIntersect",function(){return he}),t.d(n,"getRectIntersectByPoint",function(){return fe}),t.d(n,"getCircleIntersectByPoint",function(){return pe}),t.d(n,"getEllipseIntersectByPoint",function(){return ge}),t.d(n,"applyMatrix",function(){return ye}),t.d(n,"invertMatrix",function(){return me}),t.d(n,"getCircleCenterByPoints",function(){return ve}),t.d(n,"distance",function(){return be}),t.d(n,"scaleMatrix",function(){return xe}),t.d(n,"floydWarshall",function(){return we}),t.d(n,"getAdjMatrix",function(){return _e}),t.d(n,"translate",function(){return Ee}),t.d(n,"move",function(){return Se}),t.d(n,"scale",function(){return Oe}),t.d(n,"rotate",function(){return Me}),t.d(n,"getDegree",function(){return ke}),t.d(n,"isPointInPolygon",function(){return ze}),t.d(n,"intersectBBox",function(){return Fe}),t.d(n,"isPolygonsIntersect",function(){return Ge}),t.d(n,"Line",function(){return Ue}),t.d(n,"getBBoxBoundLine",function(){return We}),t.d(n,"itemIntersectByLine",function(){return Xe}),t.d(n,"fractionToLine",function(){return Ye}),t.d(n,"getPointsCenter",function(){return Ve}),t.d(n,"squareDist",function(){return He}),t.d(n,"pointLineSquareDist",function(){return qe}),t.d(n,"isPointsOverlap",function(){return Ke}),t.d(n,"pointRectSquareDist",function(){return Ze}),t.d(n,"pointLineDistance",function(){return $e}),t.d(n,"lerp",function(){return Qe}),t.d(n,"lerpArray",function(){return Je}),{}),R=(t.r(r),t.d(r,"getBBox",function(){return pn}),t.d(r,"getLoopCfgs",function(){return gn}),t.d(r,"getLabelPosition",function(){return yn}),t.d(r,"traverseTree",function(){return v}),t.d(r,"traverseTreeUp",function(){return mn}),t.d(r,"getLetterWidth",function(){return vn}),t.d(r,"getTextSize",function(){return bn}),t.d(r,"truncateLabelByLength",function(){return xn}),t.d(r,"plainCombosToTrees",function(){return wn}),t.d(r,"reconstructTree",function(){return _n}),t.d(r,"getComboBBox",function(){return En}),t.d(r,"shouldRefreshEdge",function(){return Sn}),t.d(r,"cloneBesidesImg",function(){return On}),t.d(r,"getAnimateCfgWithCallback",function(){return Mn}),{}),o=(t.r(R),t.d(R,"uniqueId",function(){return An}),t.d(R,"formatPadding",function(){return In}),t.d(R,"cloneEvent",function(){return Tn}),t.d(R,"isViewportChanged",function(){return jn}),t.d(R,"isNaN",function(){return Nn}),t.d(R,"calculationItemsBBox",function(){return Dn}),t.d(R,"processParallelEdges",function(){return Pn}),{}),B=(t.r(o),t.d(o,"getSpline",function(){return lr}),t.d(o,"getControlPoint",function(){return dr}),t.d(o,"pointsToPolygon",function(){return hr}),t.d(o,"pathToPoints",function(){return fr}),t.d(o,"getClosedSpline",function(){return pr}),t.d(o,"roundedHull",function(){return vr}),t.d(o,"paddedHull",function(){return br}),t.d(o,"getStarPath",function(){return _r}),{}),z=(t.r(B),t.d(B,"defaultSubjectColors",function(){return Lr}),{}),F=(t.r(z),t.d(z,"isForce",function(){return Rr}),{}),G=(t.r(F),t.d(F,"mixColor",function(){return y}),t.d(F,"getColorsWithSubjectColor",function(){return to}),t.d(F,"getColorSetsBySubjectColors",function(){return eo}),{}),U=(t.r(G),t.d(G,"proccessToFunc",function(){return co}),t.d(G,"buildTextureData",function(){return uo}),t.d(G,"buildTextureDataWithOneEdgeAttr",function(){return lo}),t.d(G,"buildTextureDataWithTwoEdgeAttr",function(){return ho}),t.d(G,"attributesToTextureData",function(){return fo}),t.d(G,"arrayToTextureData",function(){return po}),t.d(G,"radialLayout",function(){return go}),{}),W=(t.r(U),t.d(U,"gpuDetector",function(){return yo}),{}),rt=(t.r(W),t.d(W,"getBrowserName",function(){return mo}),t(68)),Y=t(67),X={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(t){return Object.assign(this,t),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(n){var t=this,e=this.events;this.graph=n,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||n.get("canvas").set("draggable",!0),Object(Y.each)(e,function(t,e){n.on(e,t)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(n){var t=this.events,e=n.get("canvas").get("draggable");"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||n.get("canvas").set("draggable",!1),Object(Y.each)(t,function(t,e){n.off(e,t)}),n.get("canvas").set("draggable",e)},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}},V=(it.registerBehavior=function(t,e){if(!e)throw new Error("please specify handler for this behavior: ".concat(t));function n(t){var n=this,t=(Object.assign(this,this.getDefaultCfg(),t),this.getEvents()),r=(this.events=null,{});t&&(Object(Y.each)(t,function(t,e){r[e]=Object(Y.wrapBehavior)(n,t)}),this.events=r)}var r=Object(Y.clone)(X);Object.assign(r,e);n.prototype=r,it.types[t]=n},it.hasBehavior=function(t){return!!it.types[t]},it.getBehavior=function(t){return it.types[t]},it.types={},it),i=V,H=t(117),x=t(78),q=function(t,n){var e=t.nodes,t=t.edges,r=[],o={};if(e)return e&&e.forEach(function(t,e){o[t.id]=e,r.push([])}),t&&t.forEach(function(t){var e=t.source,e=o[e],t=o[t.target];!e&&0!==e||!t&&0!==t||(r[e][t]=1,n)||(r[t][e]=1)}),r;throw new Error("invalid nodes data!")},K=(ot.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},ot),Z=(nt.prototype.prepend=function(t){t=new K(t,this.head);return this.head=t,this.tail||(this.tail=t),this},nt.prototype.append=function(t){t=new K(t);return this.head?this.tail.next=t:this.head=t,this.tail=t,this},nt.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},nt.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,e=t.callback,r=void 0===e?void 0:e;if(this.head)for(var o=this.head;o;){if(r&&r(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},nt.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)this.head=null,this.tail=null;else{for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;this.tail=e}return t},nt.prototype.deleteHead=function(){var t;return this.head?(t=this.head,this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t):null},nt.prototype.fromArray=function(t){var e=this;return t.forEach(function(t){return e.append(t)}),this},nt.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},nt.prototype.reverse=function(){for(var t,e=this.head,n=null;e;)t=e.next,e.next=n,n=e,e=t;this.tail=this.head,this.head=n},nt.prototype.toString=function(e){return void 0===e&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},nt),$=(et.prototype.isEmpty=function(){return!this.linkedList.head},et.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},et.prototype.enqueue=function(t){this.linkedList.append(t)},et.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},et.prototype.toString=function(t){return this.linkedList.toString(t)},et),Q=function(e,t,n){t=(t=void 0===t?[]:t).filter(function(t){return t.source===e||t.target===e});return"target"===n?t.filter(function(t){return t.source===e}).map(function(t){return t.target}):"source"===n?t.filter(function(t){return t.target===e}).map(function(t){return t.source}):t.map(function(t){return t.source===e?t.target:t.source})},J=function(e,t){return t.filter(function(t){return t.source===e||t.target===e})},tt=function(t){void 0===t&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(n)};function et(){this.linkedList=new Z}function nt(t){void 0===t&&(t=L),this.head=null,this.tail=null,this.compare=t}function ot(t,e){void 0===e&&(e=null),this.value=t,this.next=e}function it(){}var at=function(t,e,n,r){void 0===r&&(r=!0);var o=function(t){function e(){}var n,r=t=void 0===t?{}:t;n={};return r.allowTraversal=t.allowTraversal||function(t){t=t.next;return!n[t]&&(n[t]=!0)},r.enter=t.enter||e,r.leave=t.leave||e,r}(n),i=new $,n=t.edges,a=void 0===n?[]:n;i.enqueue(e);for(var s="";!i.isEmpty();)!function(){var e=i.dequeue();o.enter({current:e,previous:s}),Q(e,a,r?"target":void 0).forEach(function(t){o.allowTraversal({previous:s,current:e,next:t})&&i.enqueue(t)}),o.leave({current:e,previous:s}),s=e}()},st=function(t){for(var e=t.nodes,a=void 0===e?[]:e,e=t.edges,s=void 0===e?[]:e,c=[],u={},l={},d={},h=[],f=0,n=function n(r){l[r.id]=f,d[r.id]=f,f+=1,c.push(r),u[r.id]=!0;for(var o=Q(r.id,s,"target").filter(function(t){return-1<a.map(function(t){return t.id}).indexOf(t)}),t=0;t<o.length;t++)!function(t){var e=o[t];l[e]||0===l[e]?u[e]&&(d[r.id]=Math.min(d[r.id],l[e])):(0<(t=a.filter(function(t){return t.id===e})).length&&n(t[0]),d[r.id]=Math.min(d[r.id],d[e]))}(t);if(d[r.id]===l[r.id]){for(var e=[];0<c.length;){var i=c.pop();if(u[i.id]=!1,e.push(i),i===r)break}0<e.length&&h.push(e)}},r=0,o=a;r<o.length;r++){var i=o[r];l[i.id]||0===l[i.id]||n(i)}return h};function ct(t,e){if(e)return st(t);for(var e=t.nodes,o=void 0===e?[]:e,i=void 0===(e=t.edges)?[]:e,n=[],a={},s=[],r=function n(t){s.push(t),a[t.id]=!0;for(var r=Q(t.id,i),e=0;e<r.length;++e)!function(t){var e=r[t];a[e]||0<(t=o.filter(function(t){return t.id===e})).length&&n(t[0])}(e)},c=0;c<o.length;c++){var u=o[c];if(!a[u.id]){r(u);for(var l=[];0<s.length;)l.push(s.pop());n.push(l)}}return n}function ut(t){var e={},n=void 0===(n=t.nodes)?[]:n,t=void 0===(t=t.edges)?[]:t;return n.forEach(function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}}),t.forEach(function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++}),e}var lt=ut,dt=function(t,e){return ut(t)[e]?ut(t)[e].inDegree:0},ht=function(t,e){return ut(t)[e]?ut(t)[e].outDegree:0};function ft(t,e,n,r){void 0===r&&(r=!0),function e(n,r,o,i,a){void 0===a&&(a=!0),i.enter({current:r,previous:o});var t=n.edges;Q(r,void 0===t?[]:t,a?"target":void 0).forEach(function(t){i.allowTraversal({previous:o,current:r,next:t})&&e(n,t,r,i,a)}),i.leave({current:r,previous:o})}(t,e,"",function(t){function e(){}var n,r=t=void 0===t?{}:t;n={};return r.allowTraversal=t.allowTraversal||function(t){t=t.next;return!n[t]&&(n[t]=!0)},r.enter=t.enter||e,r.leave=t.leave||e,r}(n),r)}var pt=function(s,c,u){var t;void 0===u&&(u=!0);for(var l=[],e=0,n=ct(s,!1);e<n.length;e++){var r=n[e];if(r.length)for(var r=r[0],o=r.id,d=[r],h=((t={})[o]=r,t),f=((r={})[o]=new Set,r);0<d.length;)for(var p=d.pop(),g=p.id,y=Q(g,s.edges),i=0;i<y.length;i+=1)!function(t){var e=y[t],t=s.nodes.find(function(t){return t.id===e});if(e===g)l.push(((n={})[e]=p,n));else if(e in f){if(!f[g].has(t)){for(var n=!0,r=[t,p],o=h[g];f[e].size&&!f[e].has(o)&&(r.push(o),o!==h[o.id]);)o=h[o.id];if(r.push(o),c&&u?(n=!1,-1<r.findIndex(function(t){return-1<c.indexOf(t.id)})&&(n=!0)):c&&!u&&-1<r.findIndex(function(t){return-1<c.indexOf(t.id)})&&(n=!1),n){for(var i={},a=1;a<r.length;a+=1)i[r[a-1].id]=r[a];r.length&&(i[r[r.length-1].id]=r[0]),l.push(i)}f[e].add(p)}}else h[e]=p,d.push(t),f[e]=new Set([p])}(i)}return l},gt=function(f,p,g){void 0===g&&(g=!0);for(var h=[],y=new Set,m=[],v=[],b={},x={},t=function t(e,n,r){var o=!1;if(!(p&&!1===g&&-1<p.indexOf(e.id))){h.push(e),y.add(e);for(var i=r[e.id],a=0;a<i.length;a+=1)if((d=b[i[a]])===n){for(var s={},c=1;c<h.length;c+=1)s[h[c-1].id]=h[c];h.length&&(s[h[h.length-1].id]=h[0]),v.push(s),o=!0}else y.has(d)||t(d,n,r)&&(o=!0);if(o)for(var u=[e];0<u.length;){var l=u.pop();y.has(l)&&(y.delete(l),m[l.id].forEach(function(t){u.push(t)}),m[l.id].clear())}else for(a=0;a<i.length;a+=1){var d=b[i[a]];m[d.id].has(e)||m[d.id].add(e)}h.pop()}return o},e=f.nodes,n=void 0===e?[]:e,r=0;r<n.length;r+=1){var o=n[r],i=o.id;b[x[i]=r]=o}if(p&&g)for(r=0;r<p.length;r++)!function(t){var e=p[t];x[n[t].id]=x[e],b[x[e]=0]=n.find(function(t){return t.id===e}),b[x[n[t].id]]=n[t]}(r);for(var a=0;a<n.length;){var s=n.filter(function(t){return x[t.id]>=a}),s=st({nodes:s,edges:f.edges}).filter(function(t){return 1<t.length});if(0===s.length)break;var s=function(t){for(var e,n=1/0,r=0;r<t.length;r+=1)for(var o=t[r],i=0;i<o.length;i++){var a=x[o[i].id];a<n&&(n=a,e=r)}for(var s=t[e],c=[],r=0;r<s.length;r+=1){var u=s[r];c[u.id]=[];for(var l=0,d=Q(u.id,f.edges,"target").filter(function(t){return-1<s.map(function(t){return t.id}).indexOf(t)});l<d.length;l++){var h=d[l];h!==u.id||!1===g&&-1<p.indexOf(u.id)?c[u.id].push(x[h]):v.push(((h={})[u.id]=u,h))}}return{component:s,adjList:c,minIdx:n}}(s),c=s.minIdx,u=s.adjList,s=s.component;if(!(1<s.length))break;s.forEach(function(t){m[t.id]=new Set});s=b[c];if(p&&g&&-1===p.indexOf(s.id))return v;t(s,s,u),a=c+1}return v},yt=function(t,e,n,r){return(e?gt:pt)(t,n,r=void 0===r?!0:r)},mt=function(t){var o=null,e=t.nodes,i={},a={},s={},n={};(void 0===e?[]:e).forEach(function(t){a[t.id]=t});for(var r={enter:function(t){var e=t.current,t=t.previous;if(s[e]){o={};for(var n=e,r=t;r!==e;)o[n]=r,r=i[n=r];o[n]=r}else delete a[s[e]=e],i[e]=t},leave:function(t){t=t.current;delete s[n[t]=t]},allowTraversal:function(t){t=t.next;return!o&&!n[t]}};Object.keys(a).length;)ft(t,Object.keys(a)[0],r);return o},vt=function(t,n,o,i){var e=t.nodes,a=void 0===e?[]:e,e=t.edges,s=void 0===e?[]:e,r=[],c={},u={},l={};a.forEach(function(t,e){t=t.id;r.push(t),u[t]=1/0,t===n&&(u[t]=0)});for(var d=a.length,h=0;h<d;h++)!function(){var e,n=function(t,e,n){for(var r,o=1/0,i=0;i<e.length;i++){var a=e[i].id;!n[a]&&t[a]<=o&&(o=t[a],r=e[i])}return r}(u,a,c),r=n.id;if(c[r]=!0,u[r]===1/0)return;(o?(e=r,s.filter(function(t){return t.source===e})):J(r,s)).forEach(function(t){var e=t.target,e=e===r?t.source:e,t=i&&t[i]?t[i]:1;u[e]>u[n.id]+t?(u[e]=u[n.id]+t,l[e]=[n.id]):u[e]===u[n.id]+t&&l[e].push(n.id)})}();l[n]=[n];var f={};for(p in u)u[p]!==1/0&&function t(e,n,r,o){if(e===n)return[e];if(o[n])return o[n];for(var i=[],a=0,s=r[n];a<s.length;a++){var c=t(e,s[a],r,o);if(!c)return;for(var u=0,l=c;u<l.length;u++){var d=l[u];Object(Y.isArray)(d)?i.push(Object(rt.__spreadArray)(Object(rt.__spreadArray)([],d,!0),[n],!1)):i.push([d,n])}}return o[n]=i,o[n]}(n,p,l,f);var p,g={};for(p in f)g[p]=f[p][0];return{length:u,path:g,allPath:f}};function bt(t,e){void 0===e&&(e=void 0);var n=[];return t.forEach(function(t){void 0===e&&n.push(t),void 0!==t[e]&&n.push(t[e])}),n}var xt,wt=function(t,e,n,r,o){t=vt(t,e,r,o);return{length:t.length[n],path:t.path[n],allPath:t.allPath[n]}},_t=function(t,e,n,r){if(e===n)return[[e]];var t=t.edges,o=void 0===t?[]:t,i=[e],a=((t={})[e]=!0,t),s=[],c=[],u=r?Q(e,o,"target"):Q(e,o);for(s.push(u);0<i.length&&0<s.length;){var l,d=s[s.length-1];d.length?((d=d.shift())&&(i.push(d),a[d]=!0,u=r?Q(d,o,"target"):Q(d,o),s.push(u.filter(function(t){return!a[t]}))),i[i.length-1]===n&&(d=i.map(function(t){return t}),c.push(d),l=i.pop(),a[l]=!1,s.pop())):(l=i.pop(),a[l]=!1,s.pop())}return c},Et=function(t,e){for(var n=q(t,e),r=[],o=n.length,i=0;i<o;i+=1){r[i]=[];for(var a=0;a<o;a+=1)i===a?r[i][a]=0:0!==n[i][a]&&n[i][a]?r[i][a]=n[i][a]:r[i][a]=1/0}for(var s=0;s<o;s+=1)for(i=0;i<o;i+=1)for(a=0;a<o;a+=1)r[i][a]>r[i][s]+r[s][a]&&(r[i][a]=r[i][s]+r[s][a]);return r},St=function(t,e,o,n){void 0===e&&(e=!1),void 0===o&&(o="weight"),void 0===n&&(n=1e3);var r=t.nodes,i=void 0===r?[]:r,r=t.edges,r=void 0===r?[]:r,s={},c={},t=(i.forEach(function(t,e){var n=tt();t.clusterId=n,s[n]={id:n,nodes:[t]},c[t.id]={node:t,idx:e}}),q(t,e)),a=[],u={};t.forEach(function(t,e){var n=0,r=i[e].id;u[r]={},t.forEach(function(t,e){t&&(n+=t,e=i[e].id,u[r][e]=t)}),a.push(n)});for(var l=0;l<n&&"break"!==function(){var a=!1;if(i.forEach(function(n){var t,e,r={},o=(Object.keys(u[n.id]).forEach(function(t){var e=u[n.id][t],t=c[t].node.clusterId;r[t]||(r[t]=0),r[t]+=e}),-1/0),i=[];Object.keys(r).forEach(function(t){o<r[t]?(o=r[t],i=[t]):o===r[t]&&i.push(t)}),1===i.length&&i[0]===n.clusterId||(0<=(t=i.indexOf(n.clusterId))&&i.splice(t,1),i&&i.length&&(a=!0,e=(t=s[n.clusterId]).nodes.indexOf(n),t.nodes.splice(e,1),t=Math.floor(Math.random()*i.length),(e=s[i[t]]).nodes.push(n),n.clusterId=e.id))}),!a)return"break";l++}(););Object.keys(s).forEach(function(t){var e=s[t];e.nodes&&e.nodes.length||delete s[t]});var d=[],h={},f=(r.forEach(function(t){var e=t.source,n=t[o]||1,e=c[e].node.clusterId,t=c[t.target].node.clusterId,r="".concat(e,"---").concat(t);h[r]?(h[r].weight+=n,h[r].count++):d.push(h[r]={source:e,target:t,weight:n,count:1})}),[]);return Object.keys(s).forEach(function(t){f.push(s[t])}),{clusters:f,clusterEdges:d}},Ot=(a.prototype.getArr=function(){return this.arr||[]},a.prototype.add=function(t){var e=t.arr;if(null==(t=this.arr)||!t.length)return new a(e);if(null==e||!e.length)return new a(this.arr);if(this.arr.length===e.length){var n,r=[];for(n in this.arr)r[n]=this.arr[n]+e[n];return new a(r)}},a.prototype.subtract=function(t){var e=t.arr;if(null==(t=this.arr)||!t.length)return new a(e);if(null==e||!e.length)return new a(this.arr);if(this.arr.length===e.length){var n,r=[];for(n in this.arr)r[n]=this.arr[n]-e[n];return new a(r)}},a.prototype.avg=function(t){var e=[];if(0!==t)for(var n in this.arr)e[n]=this.arr[n]/t;return new a(e)},a.prototype.negate=function(){var t,e=[];for(t in this.arr)e[t]=-this.arr[t];return new a(e)},a.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(null==(e=this.arr)||!e.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,o=0;for(r in this.arr)o+=Math.pow(this.arr[r]-t.arr[r],2);return o}},a.prototype.euclideanDistance=function(t){var e,n=t.arr;if(null==(e=this.arr)||!e.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,o=0;for(r in this.arr)o+=Math.pow(this.arr[r]-t.arr[r],2);return Math.sqrt(o)}console.error("The two vectors are unequal in length.")},a.prototype.normalize=function(){var t,e=[],n=Object(Y.clone)(this.arr),r=(n.sort(function(t,e){return t-e}),n[n.length-1]),o=n[0];for(t in this.arr)e[t]=(this.arr[t]-o)/(r-o);return new a(e)},a.prototype.norm2=function(){var t;if(null==(t=this.arr)||!t.length)return 0;var e,n=0;for(e in this.arr)n+=Math.pow(this.arr[e],2);return Math.sqrt(n)},a.prototype.dot=function(t){var e,n=t.arr;if(null==(e=this.arr)||!e.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,o=0;for(r in this.arr)o+=this.arr[r]*t.arr[r];return o}console.error("The two vectors are unequal in length.")},a.prototype.equal=function(t){var e,n=t.arr;if((null==(t=this.arr)?void 0:t.length)!==(null==n?void 0:n.length))return!1;for(e in this.arr)if(this.arr[e]!==n[e])return!1;return!0},a);function a(t){this.arr=t}(xt=xt||{}).EuclideanDistance="euclideanDistance";function Mt(t,e,n){var c,u=zt(t,e,n),r=[];return Object.keys(u).length&&(c=Object.values(u).every(function(t){return t.every(function(t){return"number"==typeof t})}),t.forEach(function(a,t){var s=[];Object.keys(u).forEach(function(t){var e=a[t],n=u[t],r=n.findIndex(function(t){return e===t}),o=[];if(c)o.push(e);else for(var i=0;i<n.length;i++)o.push(i===r?1:0);s=s.concat(o)}),r[t]=s})),r}function kt(t,e,n,r){var o=0;return o=(n=void 0===n?xt.EuclideanDistance:n)===xt.EuclideanDistance?new Ot(t).euclideanDistance(new Ot(e)):o}function Ct(t,e,n,r){for(var o=e.length,i=2*r,a=0,s=0;s<o;s++)for(var c=t[s].clusterId,u=0;u<o;u++)c===t[u].clusterId&&(a+=(e[s][u]||0)-(n[s]||0)*(n[u]||0)/i);return a*(1/i)}function At(t,e){for(var n=(t=void 0===t?[]:t).length,r=new Ot([]),o=0;o<n;o++)r=r.add(new Ot(e[o]));for(var i=r.avg(n),a=(i.normalize(),0),o=0;o<n;o++)a+=(u=new Ot(e[o])).squareEuclideanDistance(i);var s=[];for(t.forEach(function(){s.push([])}),o=0;o<n;o++)for(var c,u=new Ot(e[o]),l=t[o].clusterInertial=0;l<n;l++)o!==l?(c=new Ot(e[l]),s[o][l]=u.squareEuclideanDistance(c),t[o].clusterInertial+=s[o][l]):s[o][l]=0;var d=0,h=2*n*a;for(o=0;o<n;o++)for(var f=t[o].clusterId,l=0;l<n;l++){var p=t[l].clusterId;o!==l&&f===p&&(d+=t[o].clusterInertial*t[l].clusterInertial/Math.pow(h,2)-s[o][l]/h)}return Number(d.toFixed(4))}function It(t,e,n){return t===xt.EuclideanDistance?e[n]:[]}function Tt(t,e){return t-e}function jt(t,e,n,r){void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=t=void 0===t?-1:t,this.from=e,this.to=n,this.label=r}function Nt(t,e,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var o=[],i=t.nodes;return e.forEach(function(t,e){o.push(re(i,t,e,n,r))}),o}function Dt(t,n){var r={},o={};return t.forEach(function(t,e){r[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};e=t[n];o[e]||(o[e]=[]),o[e].push(t)}),{nodeMap:r,nodeLabelMap:o}}function Pt(t,n,r){var o={},i={};return t.forEach(function(t,e){o["".concat(tt)]={idx:e,edge:t};e=t[n],i[e]||(i[e]=[]),i[e].push(t),e=r[t.source],e&&(e.degree++,e.outDegree++),e=r[t.target];e&&(e.degree++,e.inDegree++)}),{edgeMap:o,edgeLabelMap:i}}function Lt(a,t,s){var c=t.length,u={};return t.forEach(function(t,e){for(var n,r,o=a[e].id,i=s?0:e+1;i<c;i++)e!==i&&(n=a[i].id,r=t[i],u["".concat(o,"-").concat(n)]=r,s||(u["".concat(n,"-").concat(o)]=r))}),u}function Rt(t,e,n,r){var o,i=null==(o=t[e])?void 0:o.degree,a=null==(o=t[e])?void 0:o.inDegree,s=null==(o=t[e])?void 0:o.outDegree;return void 0===t[e]&&(s=a=i=1/0,r[e].forEach(function(t){var e=n[t.id].degree,e=(e<i&&(i=e),n[t.id].inDegree),e=(e<a&&(a=e),n[t.id].outDegree);e<s&&(s=e)}),t[e]={degree:i,inDegree:a,outDegree:s}),{minPatternNodeLabelDegree:i,minPatternNodeLabelInDegree:a,minPatternNodeLabelOutDegree:s}}function Bt(t,e,n){return e<=t&&t<=n}var zt=function(t,e,r){var n=[],n=null!=e&&e.length?e:(t.forEach(function(t){n=n.concat(Object.keys(t))}),Object(Y.uniq)(n)),o={};return n.forEach(function(e){var n=[];t.forEach(function(t){void 0!==t[e]&&""!==t[e]&&n.push(t[e])}),!n.length||null!=r&&r.includes(e)||(o[e]=Object(Y.uniq)(n))}),o},Ft=function(t,e,f,n,p,r,o,i,g){void 0===e&&(e=!1),void 0===f&&(f="weight"),void 0===n&&(n=1e-4),void 0===p&&(p=!1),void 0===r&&(r=void 0),void 0===o&&(o=[]),void 0===i&&(i=["id"]),void 0===g&&(g=1);var a,s=t.nodes,c=void 0===s?[]:s,s=t.edges,y=void 0===s?[]:s,m=[],u=(p&&(c.forEach(function(t,e){t.properties=t.properties||{},t.originIndex=e}),a=[],c.every(function(t){return t.hasOwnProperty("nodeType")})&&(a=Array.from(new Set(c.map(function(t){return t.nodeType}))),c.forEach(function(e){e.properties.nodeType=a.findIndex(function(t){return t===e.nodeType})})),s=bt(c,r),m=Mt(s,o,i)),1),v={},b={},x=(c.forEach(function(t,e){var n=String(u++);t.clusterId=n,v[n]={id:n,nodes:[t]},b[t.id]={node:t,idx:e}}),q(t,e)),w=[],_={},E=0;x.forEach(function(t,e){var n=0,r=c[e].id;_[r]={},t.forEach(function(t,e){t&&(n+=t,e=c[e].id,_[r][e]=t,E+=t)}),w.push(n)}),E/=2;for(var l,d=1/0,h=0,S=[],O={};;){l=p&&c.every(function(t){return t.hasOwnProperty("properties")})?Ct(c,x,w,E)+At(c,m)*g:Ct(c,x,w,E),0===h&&(d=l,S=c,O=v);var M=0<l&&d<l&&l-d<n;if(d<l&&(S=c.map(function(t){return{node:t,clusterId:t.clusterId}}),O=Object(Y.clone)(v),d=l),M||100<h)break;h++,Object.keys(v).forEach(function(r){var o=0;y.forEach(function(t){var e=t.source,e=b[e].node.clusterId,n=b[t.target].node.clusterId;(e===r&&n!==r||n===r&&e!==r)&&(o+=t[f]||1)}),v[r].sumTot=o}),c.forEach(function(o,i){var a,r,s,c,t=v[o.clusterId],u=0,l=w[i]/(2*E),e=0,n=t.nodes,d=(n.forEach(function(t){t=b[t.id].idx;e+=x[i][t]||0}),e-t.sumTot*l),n=n.filter(function(t){return t.id!==o.id}),h=(n.forEach(function(t,e){e,m[t.originIndex]}),At(n,m)*g),n=_[o.id];Object.keys(n).forEach(function(t){var e,n,r,t=b[t].node.clusterId;t!==o.clusterId&&(r=(t=v[t]).nodes)&&r.length&&(e=0,r.forEach(function(t){t=b[t.id].idx;e+=x[i][t]||0}),n=e-t.sumTot*l,r=r.concat([o]),r.forEach(function(t,e){e,m[t.originIndex]}),r=At(r,m)*g,u<(r=p?n+r-(d+h):n-d))&&(u=r,a=t)}),0<u&&(a.nodes.push(o),r=o.clusterId,o.clusterId=a.id,n=t.nodes.indexOf(o),t.nodes.splice(n,1),c=s=0,y.forEach(function(t){var e=t.source,e=b[e].node.clusterId,n=b[t.target].node.clusterId;(e===a.id&&n!==a.id||n===a.id&&e!==a.id)&&(s+=t[f]||1),(e===r&&n!==r||n===r&&e!==r)&&(c+=t[f]||1)}),a.sumTot=s,t.sumTot=c)})}var k={},C=0,A=(Object.keys(O).forEach(function(t){var e,n=O[t];n.nodes&&n.nodes.length?(e=String(C+1))!==t&&(n.id=e,n.nodes=n.nodes.map(function(t){return{id:t.id,clusterId:e}}),O[e]=n,k[t]=e,delete O[t],C++):delete O[t]}),S.forEach(function(t){var e=t.node;e&&(e.clusterId=t.clusterId,e.clusterId)&&k[e.clusterId]&&(e.clusterId=k[e.clusterId])}),[]),I={},T=(y.forEach(function(t){var e,n=t.source,r=t[f]||1,n=b[n].node.clusterId,t=b[t.target].node.clusterId;n&&t&&(e="".concat(n,"---").concat(t),I[e]?(I[e].weight+=r,I[e].count++):A.push(I[e]={source:n,target:t,weight:r,count:1}))}),[]);return Object.keys(O).forEach(function(t){T.push(O[t])}),{clusters:T,clusterEdges:A}},Gt=function(t,e,n,r,o,i,a,s){return Ft(t,e=void 0===e?!1:e,n=void 0===n?"weight":n,r=void 0===r?1e-4:r,!0,o=void 0===o?void 0:o,i=void 0===i?[]:i,a=void 0===a?["id"]:a,s=void 0===s?1:s)},Ut=function(t,r){var o;void 0===r&&(r=1);for(var t=Object(Y.clone)(t),e=t.nodes,i=void 0===e?[]:e,e=t.edges,a=void 0===e?[]:e;"break"!==function(){var n=lt({nodes:i,edges:a}),t=Object.keys(n),e=(t.sort(function(t,e){return(null==(t=n[t])?void 0:t.degree)-(null==(t=n[e])?void 0:t.degree)}),t[0]);if(!i.length||(null==(o=n[e])?void 0:o.degree)>=r)return"break";t=i.findIndex(function(t){return t.id===e});i.splice(t,1),a=a.filter(function(t){return!(t.source===e||t.target===e)})}(););return{nodes:i,edges:a}},Wt=function(t,e,n,r,o,i){void 0===e&&(e=3),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===o&&(o=["id"]),void 0===i&&(i=xt.EuclideanDistance);var a=t.nodes,s=void 0===a?[]:a,a=t.edges,t=void 0===a?[]:a,a={clusters:[{id:"0",nodes:s}],clusterEdges:[]};if(i===xt.EuclideanDistance&&!s.every(function(t){return t.hasOwnProperty(n)}))return a;var c=[];if(i===xt.EuclideanDistance&&(u=bt(s,n),c=Mt(u,r,o)),!c.length)return a;for(var u=Object(Y.uniq)(c.map(function(t){return t.join("")})),l=Math.min(e,s.length,u.length),d=0;d<s.length;d++)s[d].originIndex=d;var h=[],f=[],p=[];for(d=0;d<l;d++)if(0===d){var g=Math.floor(Math.random()*s.length);i===xt.EuclideanDistance?h[d]=c[g]:h[d]=[],f.push(g),p[d]=[s[g]],s[g].clusterId=String(d)}else{for(var y=-1/0,m=0,v=0;v<s.length;v++)!function(e){if(!f.includes(e)){for(var t=0,n=0;n<h.length;n++){var r=0;t+=r=i===xt.EuclideanDistance?kt(c[s[e].originIndex],h[n],i):r}var o=t/h.length;y<o&&!h.find(function(t){return Object(Y.isEqual)(t,It(i,c,s[e].originIndex))})&&(y=o,m=e)}}(v);h[d]=It(i,c,m),f.push(m),p[d]=[s[m]],s[m].clusterId=String(d)}for(var b=0;;){for(d=0;d<s.length;d++){var x=0,w=1/0;if(0!==b||!f.includes(d)){for(var _=0;_<h.length;_++){var E=0;(E=i===xt.EuclideanDistance?kt(c[d],h[_],i):E)<w&&(w=E,x=_)}if(void 0!==s[d].clusterId)for(var S=p[Number(s[d].clusterId)].length-1;0<=S;S--)p[Number(s[d].clusterId)][S].id===s[d].id&&p[Number(s[d].clusterId)].splice(S,1);s[d].clusterId=String(x),p[x].push(s[d])}}for(var O=!1,d=0;d<p.length;d++){for(var M=p[d],k=new Ot([]),_=0;_<M.length;_++)k=k.add(new Ot(c[M[_].originIndex]));var C=k.avg(M.length);C.equal(new Ot(h[d]))||(O=!0,h[d]=C.getArr())}if(b++,s.every(function(t){return void 0!==t.clusterId})&&O||1e3<=b)break}var A=[],I={};return t.forEach(function(t){var e=t.source,n=t.target,t=null==(t=s.find(function(t){return t.id===e}))?void 0:t.clusterId,r=null==(r=s.find(function(t){return t.id===n}))?void 0:r.clusterId,o="".concat(t,"---").concat(r);I[o]?I[o].count++:A.push(I[o]={source:t,target:r,count:1})}),{clusters:p,clusterEdges:A}},Xt=function(t,e){var e=new Ot(e),n=e.norm2(),t=new Ot(t),r=t.norm2(),e=e.dot(t),t=n*r;return t?e/t:0},Yt=function(t,n,e,r,o){void 0===t&&(t=[]),void 0===e&&(e=void 0),void 0===r&&(r=[]),void 0===o&&(o=[]);var i=Object(Y.clone)(t.filter(function(t){return t.id!==n.id})),a=t.findIndex(function(t){return t.id===n.id}),t=bt(t,e),s=Mt(t,r,o),c=s[a],u=[];return i.forEach(function(t,e){t.id!==n.id&&(e=s[e],e=Xt(e,c),u.push(e),t.cosineSimilarity=e)}),i.sort(function(t,e){return e.cosineSimilarity-t.cosineSimilarity}),{allCosineSimilarity:u,similarNodes:i}},Vt=(Le.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},Le.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},Le.prototype.connected=function(t,e){return this.find(t)===this.find(e)},Le),Ht=(Pe.prototype.getLeft=function(t){return 2*t+1},Pe.prototype.getRight=function(t){return 2*t+2},Pe.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},Pe.prototype.isEmpty=function(){return this.list.length<=0},Pe.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},Pe.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return 0<this.list.length&&(this.list[0]=e,this.moveDown(0)),t},Pe.prototype.insert=function(t){return null!==t&&(this.list.push(t),t=this.list.length-1,this.moveUp(t),!0)},Pe.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&0<t&&0<this.compareFn(this.list[e],this.list[t]);){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},Pe.prototype.moveDown=function(t){var e=t,n=this.getLeft(t),r=this.getRight(t),o=this.list.length;null!==n&&n<o&&0<this.compareFn(this.list[e],this.list[n])?e=n:null!==r&&r<o&&0<this.compareFn(this.list[e],this.list[r])&&(e=r),t!==e&&(n=[this.list[e],this.list[t]],this.list[t]=n[0],this.list[e]=n[1],this.moveDown(e))},Pe),qt=function(t,e){var n=[],r=t.nodes,r=void 0===r?[]:r,t=t.edges,t=void 0===t?[]:t;if(0!==r.length){var o=t.map(function(t){return t});e&&o.sort(function(t,e){return t.weight-e.weight});for(var i=new Vt(r.map(function(t){return t.id}));0<o.length;){var a=o.shift(),s=a.source,c=a.target;i.connected(s,c)||(n.push(a),i.union(s,c))}}return n},Kt=function(t,e,n){return n?{prim:function(t,n){var e=[],r=t.nodes,r=void 0===r?[]:r,t=t.edges,o=void 0===t?[]:t;if(0!==r.length){var t=r[0],i=new Set,a=(i.add(t),new Ht(function(t,e){return n?t.weight-e.weight:0}));for(J(t.id,o).forEach(function(t){a.insert(t)});!a.isEmpty();){var s=a.delMin(),c=s.source,u=s.target;i.has(c)&&i.has(u)||(e.push(s),i.has(c)||(i.add(c),J(c,o).forEach(function(t){a.insert(t)})),i.has(u))||(i.add(u),J(u,o).forEach(function(t){a.insert(t)}))}}return e},kruskal:qt}[n](t,e):qt(t,e)},Zt=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var r=1,o=0,i=1e3,a=t.nodes,s=void 0===a?[]:a,a=t.edges,c=void 0===a?[]:a,u=s.length,l={},d={},h=0;h<u;++h)l[g=(f=s[h]).id]=1/u,d[g]=1/u;for(var f,p=lt(t);0<i&&e<r;){for(h=o=0;h<u;++h){var g=(f=s[h]).id,y=0;if(0===p[f.id].inDegree)l[g]=0;else{for(var m=Q(g,c,"source"),v=0;v<m.length;++v){var b=m[v],x=p[b].outDegree;0<x&&(y+=d[b]/x)}l[g]=n*y,o+=l[g]}}for(o=(1-o)/u,h=r=0;h<u;++h)y=l[g=(f=s[h]).id]+o,r+=Math.abs(y-d[g]),d[g]=y;--i}return d},$t=(De.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},De),Qt=(Ne.prototype.getNodeNum=function(){return this.nodes.length},Ne.prototype.addNode=function(t,e){var n;this.nodeMap[t]||(n=new $t(t,e),this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t))},Ne.prototype.addEdge=function(t,e,n,r){var o;!this.edgeIdAutoIncrease&&void 0!==t||(t=this.counter++),this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t]||(o=new jt(t,e,n,r),this.edges.push(o),this.edgeMap[t]=o,this.nodeMap[e].addEdge(o),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(o),this.directed)||(o=new jt(t,n,e,r),this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o))},Ne),Jt=(je.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},je.prototype.notEqualTo=function(t){return!this.equalTo(t)},je),te=(Te.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},Te.prototype.notEqualTo=function(t){return!this.equalTo(t)},Te.prototype.pushBack=function(t,e,n,r,o){return this.dfsEdgeList.push(new Jt(t,e,n,r,o)),this.dfsEdgeList},Te.prototype.toGraph=function(t,e){var i=new Qt(t=void 0===t?-1:t,!0,e=void 0===e?!1:e);return this.dfsEdgeList.forEach(function(t){var e=t.fromNode,n=t.toNode,t=t.nodeEdgeNodeLabel,r=t.nodeLabel1,o=t.edgeLabel,t=t.nodeLabel2;"-1"!==r&&i.addNode(e,r),"-1"!==t&&i.addNode(n,t),"-1"!==r&&t!==r&&i.addEdge(void 0,e,n,o)}),i},Te.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;0<=e;e--){var n=this.dfsEdgeList[e],r=n.fromNode,n=n.toNode;r<n&&(void 0===t||n===t)&&(this.rmpath.push(e),t=r)}return this.rmpath},Te.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},Te),ee=(Ie.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},Ie.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},Ie),ne=(Ae.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],o=t.nodeMap;return e.edges.forEach(function(t){(n.directed||e.label<=o[t.to].label)&&r.push(t)}),r},Ae.prototype.findBackwardEdge=function(t,e,n,r){if(this.directed||e!==n)for(var o=t.nodeMap,i=o[n.to].edges,a=i.length,s=0;s<a;s++){var c=i[s];if(!r.hasEdge(c)&&c.to===e.from)if(this.directed){if(o[e.from].label<o[n.to].label||o[e.from].label===o[n.to].label&&e.label<=c.label)return c}else if(e.label<c.label||e.label===c.label&&o[e.to].label<=o[n.to].label)return c}return null},Ae.prototype.findForwardPureEdges=function(t,e,n,r){for(var o=[],e=e.to,i=t.nodeMap[e].edges,a=i.length,s=0;s<a;s++){var c=i[s],u=t.nodeMap[c.to];n<=u.label&&!r.hasNode(u)&&o.push(c)}return o},Ae.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var o=[],i=t.nodeMap,a=i[e.to].label,s=i[e.from].edges,c=s.length,u=0;u<c;u++){var l=s[u],d=i[l.to].label;e.to===l.to||d<n||r.hasNode(i[l.to])||(e.label<l.label||e.label===l.label&&a<=d)&&o.push(l)}return o},Ae.prototype.getSupport=function(t){var e={};return t.forEach(function(t){e[t.graphId]||(e[t.graphId]=!0)}),Object.keys(e).length},Ae.prototype.findMinLabel=function(r){var o=void 0;return Object.keys(r).forEach(function(t){var t=r[t],e=t.nodeLabel1,n=t.edgeLabel,t=t.nodeLabel2;(!o||e<o.nodeLabel1||e===o.nodeLabel1&&n<o.edgeLabel||e===o.nodeLabel1&&n===o.edgeLabel&&t<o.nodeLabel2)&&(o={nodeLabel1:e,edgeLabel:n,nodeLabel2:t})}),o},Ae.prototype.isMin=function(){var g,y,m,v,o,t,b=this,x=this.dfsCode;return this.verbose&&console.log("isMin checking",x),1===x.dfsEdgeList.length||(g=this.directed,y=x.toGraph(-1,g),m=y.nodeMap,v=new te,o={},y.nodes.forEach(function(r){b.findForwardRootEdges(y,r).forEach(function(t){var e=m[t.to],n="".concat(r.label,"-").concat(t.label,"-").concat(e.label),e=(o[n]||(o[n]={projected:[],nodeLabel1:r.label,edgeLabel:t.label,nodeLabel2:e.label}),{graphId:y.id,edge:t,preNode:null});o[n].projected.push(e)})}),(t=this.findMinLabel(o))?(v.dfsEdgeList.push(new Jt(0,1,t.nodeLabel1,t.edgeLabel,t.nodeLabel2)),t="".concat(t.nodeLabel1,"-").concat(t.edgeLabel,"-").concat(t.nodeLabel2),function t(r){for(var o=v.buildRmpath(),i=v.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,e=v.dfsEdgeList[o[0]].toNode,a={},s=!1,c=0,n=g?-1:0,u=o.length-1;n<u&&"break"!==function(n){if(s)return"break";r.forEach(function(t){var e=new ee(t),e=b.findBackwardEdge(y,e.edges[o[n]],e.edges[o[0]],e);e&&(a[e.label]||(a[e.label]={projected:[],edgeLabel:e.label}),a[e.label].projected.push({graphId:y.id,edge:a,preNode:t}),c=v.dfsEdgeList[o[n]].fromNode,s=!0)})}(u);u--);if(s)return d=b.findMinLabel(a),v.dfsEdgeList.push(new Jt(e,c,"-1",d.edgeLabel,"-1")),l=v.dfsEdgeList.length-1,b.dfsCode.dfsEdgeList[l]===v.dfsEdgeList[l]&&t(a[d.edgeLabel].projected);for(var l,d,h={},s=!1,f=0,p=(r.forEach(function(n){var t=new ee(n),t=b.findForwardPureEdges(y,t.edges[o[0]],i,t);0<t.length&&(s=!0,f=e,t.forEach(function(t){var e="".concat(t.label,"-").concat(m[t.to].label);h[e]||(h[e]={projected:[],edgeLabel:t.label,nodeLabel2:m[t.to].label}),h[e].projected.push({graphId:y.id,edge:t,preNode:n})}))}),o.length),u=0;u<p&&"break"!==function(t){if(s)return"break";var e=o[t];r.forEach(function(n){var t=new ee(n),t=b.findForwardRmpathEdges(y,t.edges[e],i,t);0<t.length&&(s=!0,f=v.dfsEdgeList[e].fromNode,t.forEach(function(t){var e="".concat(t.label,"-").concat(m[t.to].label);h[e]||(h[e]={projected:[],edgeLabel:t.label,nodeLabel2:m[t.to].label}),h[e].projected.push({graphId:y.id,edge:t,preNode:n})}))})}(u);u++);return!s||(l=b.findMinLabel(h),v.dfsEdgeList.push(new Jt(f,e+1,"-1",l.edgeLabel,l.nodeLabel2)),d=v.dfsEdgeList.length-1,x.dfsEdgeList[d]===v.dfsEdgeList[d]&&t(h["".concat(l.edgeLabel,"-").concat(l.nodeLabel2)].projected))}(o[t].projected)):void 0)},Ae.prototype.report=function(){var t;this.dfsCode.getNodeNum()<this.minNodeNum||(this.counter++,t=this.dfsCode.toGraph(this.counter,this.directed),this.frequentSubgraphs.push(Object(Y.clone)(t)))},Ae.prototype.subGraphMining=function(t){var s,c,u,l,d,h,f=this;this.getSupport(t)<this.minSupport||!this.isMin()||(this.report(),s=this.dfsCode.getNodeNum(),c=this.dfsCode.buildRmpath(),u=this.dfsCode.dfsEdgeList[c[0]].toNode,l=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,d={},h={},t.forEach(function(r){for(var t=f.graphs[r.graphId],o=t.nodeMap,e=new ee(r),n=c.length-1;0<=n;n--){var i,a=f.findBackwardEdge(t,e.edges[c[n]],e.edges[c[0]],e);a&&(i="".concat(f.dfsCode.dfsEdgeList[c[n]].fromNode,"-").concat(a.label),h[i]||(h[i]={projected:[],toNodeId:f.dfsCode.dfsEdgeList[c[n]].fromNode,edgeLabel:a.label}),h[i].projected.push({graphId:r.graphId,edge:a,preNode:r}))}if(!(s>=f.maxNodeNum)){f.findForwardPureEdges(t,e.edges[c[0]],l,e).forEach(function(t){var e="".concat(u,"-").concat(t.label,"-").concat(o[t.to].label);d[e]||(d[e]={projected:[],fromNodeId:u,edgeLabel:t.label,nodeLabel2:o[t.to].label}),d[e].projected.push({graphId:r.graphId,edge:t,preNode:r})});for(n=0;n<c.length;n++)!function(n){f.findForwardRmpathEdges(t,e.edges[c[n]],l,e).forEach(function(t){var e="".concat(f.dfsCode.dfsEdgeList[c[n]].fromNode,"-").concat(t.label,"-").concat(o[t.to].label);d[e]||(d[e]={projected:[],fromNodeId:f.dfsCode.dfsEdgeList[c[n]].fromNode,edgeLabel:t.label,nodeLabel2:o[t.to].label}),d[e].projected.push({graphId:r.graphId,edge:t,preNode:r})})}(n)}}),Object.keys(h).forEach(function(t){var e=h[t],n=e.toNodeId;f.dfsCode.dfsEdgeList.push(new Jt(u,n,"-1",e.edgeLabel,"-1")),f.subGraphMining(h[t].projected),f.dfsCode.dfsEdgeList.pop()}),Object.keys(d).forEach(function(t){var e=d[t],n=e.fromNodeId;f.dfsCode.dfsEdgeList.push(new Jt(n,u+1,"-1",e.edgeLabel,e.nodeLabel2)),f.subGraphMining(d[t].projected),f.dfsCode.dfsEdgeList.pop()}))},Ae.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,u=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,o={},l={},i={};return Object.keys(e).forEach(function(s){var t=e[s],c=t.nodeMap;t.nodes.forEach(function(t,e){var n,a=t.label,r="".concat(s,"-").concat(a);i[r]||(n=o[a]||0,o[a]=++n),i[r]={graphKey:s,label:a},t.edges.forEach(function(t){var e,n=a,r=c[t.to].label,o=(!u&&r<n&&(o=r,r=n,n=o),t.label),t="".concat(s,"-").concat(n,"-").concat(o,"-").concat(r),i="".concat(n,"-").concat(o,"-").concat(r);l[i]||(e=l[i]||0,l[i]=++e),t,0})})}),Object.keys(o).forEach(function(t){var e;o[t]<n||((e={nodes:[],edges:[]}).nodes.push({id:"0",label:t}),r.push(e))}),r},Ae.prototype.run=function(){var e,a,n=this;this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),this.maxNodeNum<2||(e=this.graphs,this.directed,a={},Object.keys(e).forEach(function(o){var t=e[o],i=t.nodeMap;t.nodes.forEach(function(r){n.findForwardRootEdges(t,r).forEach(function(t){var e=i[t.to],n="".concat(r.label,"-").concat(t.label,"-").concat(e.label),e=(a[n]||(a[n]={projected:[],nodeLabel1:r.label,edgeLabel:t.label,nodeLabel2:e.label}),{graphId:o,edge:t,preNode:null});a[n].projected.push(e)})})}),Object.keys(a).forEach(function(t){var t=a[t],e=t.projected;n.dfsCode.dfsEdgeList.push(new Jt(0,1,t.nodeLabel1,t.edgeLabel,t.nodeLabel2)),n.subGraphMining(e),n.dfsCode.dfsEdgeList.pop()}))},Ae),re=function(n,t,r,o,i){var a=[r],s=[],c={};return t.forEach(function(t,e){t<=i&&r!==e&&(a.push(e),s.push(n[e]),e=n[e][o],c[e]?(c[e].count++,c[e].dists.push(t)):c[e]={count:1,dists:[t]})}),Object.keys(c).forEach(function(t){c[t].dists=c[t].dists.sort(function(t,e){return t-e})}),{nodeIdx:r,nodeId:n[r].id,nodeIdxs:a,neighbors:s,neighborNum:a.length-1,nodeLabelCountMap:c}},oe=function(u,l,d,h){var f=d.nodes;return h=h||{},Object.keys(u).forEach(function(e){if(!h||!h[e]){h[e]={nodes:[],edges:[]};var t=u[e],n=null==(n=l[t.start])?void 0:n.nodeIdxs,t=null==(t=l[t.end])?void 0:t.nodeIdxs;if(n&&t){var r=new Set(t),o=n.filter(function(t){return r.has(t)});if(o&&o.length){for(var i={},a=o.length,s=0;s<a;s++){var c=f[o[s]];h[e].nodes.push(c),i[c.id]=!0}d.edges.forEach(function(t){i[t.source]&&i[t.target]&&h[e].edges.push(t)})}}}}),h},ie=function(t,a,s,c){var e,u={},l=(t.nodes.forEach(function(t){u[t.id]=t}),0);return null==(e=null==a?void 0:a.edges)||!e.length||(null==(e=null==a?void 0:a.nodes)?void 0:e.length)<2?0:(t.edges.forEach(function(t){var e=u[t.source][s],n=u[t.target][s],r=null==a?void 0:a.nodes[0][s],o=null==a?void 0:a.nodes[1][s],i=null==a?void 0:a.edges[0][c];t[c]===i&&(e===r&&n===o||e===o&&n===r)&&l++}),l)},ae=function(M,k,C,t,b,A,I){var n,y,m,v,i,z,F,e,r,o,c,u,G,l,d,U;if(void 0===C&&(C=!1),void 0===A&&(A="cluster"),void 0===I&&(I="cluster"),M&&M.nodes){var a=M.nodes.length;if(a){var x=Et(M,C),s=Et(k,C),w=Lt(M.nodes,x,C),W=Lt(k.nodes,s,C),h=Dt(M.nodes,A),T=h.nodeMap,X=h.nodeLabelMap,h=Dt(k.nodes,A),j=h.nodeMap,N=h.nodeLabelMap,D=(Pt(M.edges,I,T),Pt(k.edges,I,j).edgeLabelMap),f=[],_=(null!=s&&s.forEach(function(t){f=f.concat(t)}),b=b||Math.max.apply(Math,Object(rt.__spreadArray)(Object(rt.__spreadArray)([],f,!1),[2],!1)),Nt(M,x,A,t=t||b)),Y=Nt(k,s,A,t);c=a,u=Math.min(100,a*(a-1)/2),h=_,G=x,l=Math.ceil(u/c),d={},U=0,h.forEach(function(t,e){for(var n=0,r=0,o=t.nodeIdxs,i=t.neighborNum-1;n<l;){for(var a=o[1+Math.floor(Math.random()*i)],s=0;(d["".concat(e,"-").concat(a)]||d["".concat(a,"-").concat(e)])&&(a=Math.floor(Math.random()*c),!(++s>2*c)););if(s<2*c&&(d["".concat(e,"-").concat(a)]={start:e,end:a,distance:G[e][a]},n++,++U>=u))return d;if(++r>2*c)break}n<l&&(l=(l+(l-n))/(c-e-1))});var E=oe(d,_,M),s=(t=(s={graphs:E,nodeLabelProp:A,edgeLabelProp:I,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:C}).graphs,n=t,y=a=void 0!==(a=s.directed)&&a,m=h=void 0===(h=s.nodeLabelProp)?"cluster":h,v=r=void 0===(r=s.edgeLabelProp)?"cluster":r,i={},Object.keys(n).forEach(function(t,e){var t=n[t],r=new Qt(e,!0,y),o={};t.nodes.forEach(function(t,e){r.addNode(e,t[m]),o[t.id]=e}),t.edges.forEach(function(t,e){var n=o[t.source];r.addEdge(-1,n,o[t.target],t[v])}),r&&r.getNodeNum()&&(i[r.id]=r)}),t=i,o=s.minSupport,(t=new ne({graphs:t,minSupport:o,maxNodeNum:s.maxNodeNum,minNodeNum:s.minNodeNum,top:s.top,verbose:s.verbose,directed:a})).run(),o=t.frequentSubgraphs,z=h,F=r,e=[],o.forEach(function(t){var n={nodes:[],edges:[]};t.nodes.forEach(function(t){var e;n.nodes.push(((e={id:"".concat(t.id)})[z]=t.label,e))}),t.edges.forEach(function(t){var e;n.edges.push(((e={source:"".concat(t.from),target:"".concat(t.to)})[F]=t.label,e))}),e.push(n)}),e.slice(0,10)),a=s.length,V=[],t=(s.forEach(function(n,r){V[r]={},Object.keys(E).forEach(function(t){var e=E[t],e=ie(e,n,A,I);V[r][t]=e})}),function(s,t,e){for(var c=1/0,u=0,n=0;n<t;n++)!function(t){var i=s[t],e=Object.keys(i).sort(function(t,e){return i[t]-i[e]}),n=[],r=(e.forEach(function(t,e){n[e%10]||(n[e%10]={graphs:[],totalCount:0,aveCount:0}),n[e%10].graphs.push(t),n[e%10].totalCount+=i[t]}),0),a=[],o=(n.forEach(function(e){var t=e.totalCount/e.graphs.length,o=(a.push(e.aveCount=t),0),t=e.length;e.graphs.forEach(function(t,n){var r=i[t];e.graphs.forEach(function(t,e){n!==e&&(o+=Math.abs(r-i[t]))})}),r+=o/=t*(t-1)/2}),r/=n.length,0),e=(a.forEach(function(n,r){a.forEach(function(t,e){r!==e&&(o+=Math.abs(n-t))}),o/=a.length*(a.length-1)/2}),o-r);c<e&&(c=e,u=t)}(n);return{structure:e[u],structureCountMap:s[u]}}(V,a,s)),H=t.structure,S=t.structureCountMap,P=k.nodes[0],p=[],q=null==(h=k.nodes[0])?void 0:h[A],K=-1/0,Z=(k.nodes.forEach(function(t){var e=t[A],n=X[e];(null==n?void 0:n.length)>K&&(K=n.length,p=n,q=e,P=t)}),{}),$={},Q={},J={},O={},L={},R=(Object.keys(N).forEach(function(l,t){O[l]=[],C&&(L[l]=[]);var n=-1/0,e=N[l],r={},d=(e.forEach(function(t){var e=W["".concat(P.id,"-").concat(t.id)];e&&O[l].push(e),n<e&&(n=e),r["".concat(P.id,"-").concat(t.id)]={start:0,end:j[t.id].idx,distance:e},C&&(e=W["".concat(t.id,"-").concat(P.id)])&&L[l].push(e)}),O[l]=O[l].sort(function(t,e){return t-e}),C&&(L[l]=L[l].sort(function(t,e){return t-e})),$=oe(r,Y,k,$),[]);if(Object.keys(r).forEach(function(t){var e;Q[t]||(e=$[t],Q[t]=ie(e,H,A,I)),d.push(Q[t])}),d=d.sort(function(t,e){return e-t}),J["".concat(P.id,"-").concat(l)]=d,l!==q)for(var o=((null==p?void 0:p.length)||0)-1;0<=o;o--)!function(t){var n=p[t],e=_[T[n.id].idx],r=e.nodeLabelCountMap[l],o=N[l].length;if(!r||r.count<o)return p.splice(t,1);for(var i=!1,a=0;a<o;a++)if(r.dists[a]>O[l][a]){i=!0;break}if(i)return p.splice(t,1);for(var s={},c=(e.neighbors.forEach(function(t){var e=w["".concat(n.id,"-").concat(t.id)];s["".concat(n.id,"-").concat(t.id)]={start:T[n.id].idx,end:T[t.id].idx,distance:e}}),E=oe(s,_,M,E),[]),u=(Object.keys(s).forEach(function(t){var e;S[t]||(e=E[t],S[t]=ie(e,H,A,I)),c.push(S[t])}),c=c.sort(function(t,e){return e-t}),!1),a=0;a<o;a++)if(c[a]<d[a]){u=!0;break}u&&p.splice(t,1)}(o)}),[]),tt=(null!=p&&p.forEach(function(t){for(var e,n,r,o,i,a,s,c,u=T[t.id].idx,l=re(M.nodes,x[u],u,A,b).neighbors,u=!1,d=l.length-1;0<=d;d--){if(l.length+1<k.nodes.length)return;var h=l[d],f=h[A];if(N[f]&&N[f].length)if(O[f]&&O[f].length){var p="".concat(t.id,"-").concat(h.id),g=w[p],y=O[f].length-1;if(g>O[f][y])l.splice(d,1);else{if(C){var m="".concat(h.id,"-").concat(t.id),m=w[m],y=L[f].length-1;if(m>L[f][y]){l.splice(d,1);continue}}var v=S[p]||(m=M,y=h,p=T,g=g,e=_,n=H,r=A,o=I,i=S,a=E,c=s=void 0,c="".concat((v=t).id,"-").concat(y.id),i&&i[c]?i[c]:((i=a?a[c]:void 0)||((s={})[c]={start:p[v.id].idx,end:p[y.id].idx,distance:g},i=(a=oe(s,e,m,a))[c]),ie(i,n,r,o))),p="".concat(P.id,"-").concat(f);(v<J[p][J[p].length-1]||(y=Rt(Z,f,j,N).minPatternNodeLabelDegree,T[h.id].degree<y))&&l.splice(d,1)}}else l.splice(d,1);else l.splice(d,1)}u||R.push({nodes:[t].concat(l)})}),vt(k,P.id,!1).length),B={};C?(Object.keys(tt).forEach(function(t){var e=j[t].node[A];B[e]?B[e].push(tt[t]):B[e]=[tt[t]]}),Object.keys(B).forEach(function(t){B[t].sort(function(t,e){return t-e})})):B=O;for(var et=function(t){var o=R[t],e=o.nodes[0],i={},s={},c=(o.nodes.forEach(function(t,e){s[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};e=t[A];i[e]?i[e]++:i[e]=1}),[]),u={};M.edges.forEach(function(t){s[t.source]&&s[t.target]&&(c.push(t),u[t[I]]?u[t[I]]++:u[t[I]]=1,s[t.source].degree++,s[t.target].degree++,s[t.source].outDegree++,s[t.target].inDegree++)});for(var n=Object.keys(D).length,r=!1,a=0;a<n;a++){var l=Object.keys(D)[a];if(!u[l]||u[l]<D[l].length){r=!0;break}}if(r)return R.splice(t,1),"continue";var d=c.length;if(d<k.edges.length)return R.splice(t,1),"break";for(var h=!1,a=d-1;0<=a&&"break"!==function(t){var n,r,o,e=c[t],i=e[I],a=D[i];return a&&a.length&&(n=s[e.source].node[A],r=s[e.target].node[A],o=!1,a.forEach(function(t){var e=j[t.source].node,t=j[t.target].node;e[A]===n&&t[A]===r&&(o=!0),C||e[A]!==r||t[A]!==n||(o=!0)}),o)?void 0:(u[i]--,a&&u[i]<a.length?(h=!0,"break"):(c.splice(t,1),s[e.source].degree--,s[e.target].degree--,s[e.source].outDegree--,s[e.target].inDegree--,"continue"))}(a);a--);if(h)return R.splice(t,1),"continue";o.edges=c;var f=vt(o,o.nodes[0].id,!1).length;if(Object.keys(f).reverse().forEach(function(t){if(t!==o.nodes[0].id&&!h){var e,n;if(f[t]===1/0)return e=s[t].node[A],i[e]--,i[e]<N[e].length?void(h=!0):(n=o.nodes.indexOf(s[t].node),o.nodes.splice(n,1),void(s[t]=void 0));var r=T[t].node[A];B[r]&&B[r].length&&!(f[t]>B[r][B[r].length-1])||(e=s[t].node[A],i[e]--,i[e]<N[e].length?h=!0:(n=o.nodes.indexOf(s[t].node),o.nodes.splice(n,1),s[t]=void 0))}}),h)return R.splice(t,1),"continue";for(var p=!0,g=0;p&&!h;){if(p=!1,C?s[e.id].degree<j[P.id].degree||s[e.id].inDegree<j[P.id].inDegree||s[e.id].outDegree<j[P.id].outDegree:s[e.id].degree<j[P.id].degree){h=!0;break}if(i[e[A]]<N[e[A]].length){h=!0;break}for(var y=o.nodes.length-1;0<=y;y--){var m=o.nodes[y],v=s[m.id].degree,b=s[m.id].inDegree,x=s[m.id].outDegree,w=Rt(Z,m[A],j,N),_=w.minPatternNodeLabelDegree;if(C?v<_||b<w.minPatternNodeLabelInDegree||x<w.minPatternNodeLabelOutDegree:v<_){if(i[m[A]]--,i[m[A]]<N[m[A]].length){h=!0;break}o.nodes.splice(y,1),p=!(s[m.id]=void 0)}}if(h||!p&&0!==g)break;for(var E=c.length-1;0<=E;E--){var S=c[E];if(!s[S.source]||!s[S.target]){c.splice(E,1);var O=S[I];if(u[O]--,s[S.source]&&(s[S.source].degree--,s[S.source].outDegree--),s[S.target]&&(s[S.target].degree--,s[S.target].inDegree--),D[O]&&u[O]<D[O].length){h=!0;break}p=!0}}g++}return h||o.nodes.length<k.nodes.length||c.length<k.edges.length?(R.splice(t,1),"continue"):void 0},g=R.length-1;0<=g&&"break"!==et(g);g--);for(var nt=R.length,g=0;g<=nt-1;g++)!function(t){var r={};R[t].edges.forEach(function(t){t="".concat(t.source,"-").concat(t.target,"-").concat(t.label);r[t]?r[t]++:r[t]=1});for(var e=nt-1;t<e;e--)!function(t){var e={},n=(R[t].edges.forEach(function(t){t="".concat(t.source,"-").concat(t.target,"-").concat(t.label);e[t]?e[t]++:e[t]=1}),!0);Object.keys(e).length!==Object.keys(r).length?n=!1:Object.keys(r).forEach(function(t){e[t]!==r[t]&&(n=!1)}),n&&R.splice(t,1)}(e);nt=R.length}(g);return R}}},se=(Object.defineProperty(Ce.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),Ce.prototype.isEmpty=function(){return!this.linkedList.head},Ce.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},Ce.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},Ce.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},Ce.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},Ce.prototype.toArray=function(){return this.linkedList.toArray().map(function(t){return t.value})},Ce.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},Ce),ce=mt,ue={getAdjMatrix:q,breadthFirstSearch:at,connectedComponent:ct,getDegree:lt,getInDegree:dt,getOutDegree:ht,detectCycle:mt,detectDirectedCycle:ce,detectAllCycles:yt,detectAllDirectedCycle:gt,detectAllUndirectedCycle:pt,depthFirstSearch:ft,dijkstra:vt,findAllPath:_t,findShortestPath:wt,floydWarshall:Et,labelPropagation:St,louvain:Ft,iLouvain:Gt,kCore:Ut,kMeans:Wt,cosineSimilarity:Xt,nodesCosineSimilarity:Yt,minimumSpanningTree:Kt,pageRank:Zt,getNeighbors:Q,Stack:se,GADDI:ae},le=x.a.transform,de=function(n){return function(t,e){return t[n]-e[n]}},he=function(t,e,n,r){var o=n.x-t.x,i=n.y-t.y,a=e.x-t.x,e=e.y-t.y,s=r.x-n.x,r=r.y-n.y,n=a*r-e*s,c=1/n;return 1e-4*(a*a+e*e)*(s*s+r*r)<n*n&&Bt(n=(o*r-i*s)*c,0,1)&&Bt((o*e-i*a)*c,0,1)?{x:t.x+n*a,y:t.y+n*e}:null},fe=function(t,e){var n=t.x,r=t.y,o=t.width,t=t.height,i=[],a={x:n+o/2,y:r+t/2};i.push({x:n,y:r}),i.push({x:n+o,y:r}),i.push({x:n+o,y:r+t}),i.push({x:n,y:r+t}),i.push({x:n,y:r});for(var s=null,c=1;c<i.length&&!(s=he(i[c-1],i[c],a,e));c++);return s},pe=function(t,e){var n,r=t.x,o=t.y,t=t.r,i=e.x-r,e=e.y-o;return i*i+e*e<t*t?null:(n=Math.atan(e/i),{x:r+Math.abs(t*Math.cos(n))*Math.sign(i),y:o+Math.abs(t*Math.sin(n))*Math.sign(e)})},ge=function(t,e){var n=t.rx,r=t.ry,o=t.x,t=t.y,i=e.x-o,e=Math.atan2((e.y-t)/r,i/n);return e<0&&(e+=2*Math.PI),{x:o+n*Math.cos(e),y:t+r*Math.sin(e)}},ye=function(t,e,n){t=[t.x,t.y,n=void 0===n?1:n];return e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]),x.d.transformMat3(t,t,e),{x:t[0],y:t[1]}},me=function(t,e,n){void 0===n&&(n=1),e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]);e=(e=x.b.invert([1,0,0,0,1,0,0,0,1],e))||[1,0,0,0,1,0,0,0,1],t=[t.x,t.y,n];return x.d.transformMat3(t,t,e),{x:t[0],y:t[1]}},ve=function(t,e,n){var r=t.x-e.x,o=t.y-e.y,i=t.x-n.x,a=t.y-n.y,e=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,n=(t.x*t.x-n.x*n.x-n.y*n.y+t.y*t.y)/2,t=o*i-r*a;return{x:-(a*e-o*n)/t,y:-(r*n-i*e)/t}},be=function(t,e){var n=t.x-e.x,t=t.y-e.y;return Math.sqrt(n*n+t*t)},xe=function(t,n){var r=[];return t.forEach(function(t){var e=[];t.forEach(function(t){e.push(t*n)}),r.push(e)}),r},we=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var o=0;o<n;o+=1)r===o?e[r][o]=0:0!==t[r][o]&&t[r][o]?e[r][o]=t[r][o]:e[r][o]=1/0}for(var i=0;i<n;i+=1)for(r=0;r<n;r+=1)for(o=0;o<n;o+=1)e[r][o]>e[r][i]+e[i][o]&&(e[r][o]=e[r][i]+e[i][o]);return e},_e=function(t,n){var e=t.nodes,t=t.edges,r=[],o={};if(e)return e&&e.forEach(function(t,e){o[t.id]=e,r.push([])}),t&&t.forEach(function(t){var e=t.source,e=o[e],t=o[t.target];r[e][t]=1,n||(r[t][e]=1)}),r;throw new Error("invalid nodes data!")},Ee=function(t,e){t.translate(e.x,e.y)},Se=function(t,e,n,r){void 0===r&&(r={duration:500});var o,i,a,s,c,u,l=(l=t.getMatrix())||[1,0,0,0,1,0,0,0,1],d=t.getCanvasBBox(),h=e.x-d.minX,e=e.y-d.minY;n?(o=h*l[0],i=e*l[4],u=c=s=a=0,t.animate(function(t){return l=le(l,[["t",(c=o*t)-a,(u=i*t)-s]]),a=c,s=u,{matrix:l}},r)):(d=le(l,[["t",h,e]]),t.setMatrix(d))},Oe=function(t,e){var n=(n=t.getMatrix())||[1,0,0,0,1,0,0,0,1],r=e;Object(Y.isArray)(e)||(r=[e,e]),Object(Y.isArray)(e)&&1===e.length&&(r=[e[0],e[0]]),n=le(n,[["s",r[0],r[1]]]),t.setMatrix(n)},Me=function(t,e){var n=t.getMatrix();n=le(n=n||[1,0,0,0,1,0,0,0,1],[["r",e]]),t.setMatrix(n)},ke=function(t,e,n){for(var r=[],o=0;o<t;o++)r[o]=0;return n.forEach(function(t){t.source&&(r[e[t.source]]+=1),t.target&&(r[e[t.target]]+=1)}),r};function Ce(t){void 0===t&&(t=10),this.linkedList=new Z,this.maxStep=t}function Ae(t){var e=t.graphs,n=t.minSupport,n=void 0===n?2:n,r=t.minNodeNum,r=void 0===r?1:r,o=t.maxNodeNum,o=void 0===o?4:o,i=t.top,i=void 0===i?10:i,a=t.directed,a=void 0!==a&&a,t=t.verbose,t=void 0!==t&&t;this.graphs=e,this.dfsCode=new te,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=i,this.directed=a,this.counter=0,this.maxNodeNum=o,this.minNodeNum=r,this.verbose=t,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}function Ie(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}function Te(){this.rmpath=[],this.dfsEdgeList=[]}function je(t,e,n,r,o){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||"-1",edgeLabel:r||"-1",nodeLabel2:o||"-1"}}function Ne(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t=void 0===t?-1:t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}function De(t,e){void 0===e&&(e="-1"),this.id=t=void 0===t?-1:t,this.label=e,this.edges=[],this.edgeMap={}}function Pe(t){this.compareFn=t=void 0===t?Tt:t,this.list=[]}function Le(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}function Re(t){var e,n,r,o,i,a;return t?(o=t.nodes,e=t.edges,a=void 0===(a=t.combos)?[]:a,o||e?(r=(o||[]).find(function(t){return!Object(Y.isString)(t.id)}))?(console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(r.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1):(r=(o||[]).map(function(t){return t.id}),o=null==a?void 0:a.map(function(t){return t.id}),i=Object(rt.__spreadArray)(Object(rt.__spreadArray)([],r,!0),o,!0),!(a=(e||[]).find(function(t){return!i.includes(t.source)||!i.includes(t.target)}))||(console.warn("G6 Warning Tips: The source %c".concat(a.source,"%c or the target %c").concat(a.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1)):(n=!0,v(t,function(t){return!!Object(Y.isString)(t.id)||(n=!1)}),n)):(console.error("G6 Error Tips: the data must be defined"),!1)}var Be,ze=function(t,e,n){var r=!1,o=t.length;function i(t){return Math.abs(t)<1e-6?0:t<0?-1:1}if(o<=2)return!1;for(var a,s,c,u=0;u<o;u++){var l=t[u],d=t[(u+1)%o];if(s=d,((c=[e,n])[0]-(a=l)[0])*(s[1]-a[1])==(s[0]-a[0])*(c[1]-a[1])&&Math.min(a[0],s[0])<=c[0]&&c[0]<=Math.max(a[0],s[0])&&Math.min(a[1],s[1])<=c[1]&&c[1]<=Math.max(a[1],s[1]))return!0;0<i(l[1]-n)!=0<i(d[1]-n)&&i(e-(n-l[1])*(l[0]-d[0])/(l[1]-d[1])-l[0])<0&&(r=!r)}return r},Fe=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||t.maxY<e.minY||e.maxY<t.minY)},Ge=function(e,n){function t(t){var e=t.map(function(t){return t[0]}),t=t.map(function(t){return t[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function r(t){for(var e,n=[],r=t.length,o=0;o<r-1;o++){var i=t[o],a=t[o+1];n.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}return 1<n.length&&n.push({from:{x:(e=t[r-1])[0],y:e[1]},to:{x:(e=t[0])[0],y:e[1]}}),n}var o,i,a,s,c;return!(e.length<2||n.length<2||(s=t(e),o=t(n),!Fe(s,o)))&&(i=!1,Object(Y.each)(n,function(t){if(ze(e,t[0],t[1]))return!(i=!0)}),!!i||(Object(Y.each)(e,function(t){if(ze(n,t[0],t[1]))return!(i=!0)}),!!i)||(a=r(e),s=r(n),c=!1,Object(Y.each)(s,function(t){if(e=a,n=t,r=!1,Object(Y.each)(e,function(t){if(he(t.from,t.to,n.from,n.to))return!(r=!0)}),r)return!(c=!0);var e,n,r}),c))},Ue=(Gn.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),r=Math.max(this.y1,this.y2);return{x:t,y:e,minX:t,minY:e,maxX:n,maxY:r,width:n-t,height:r-e}},Gn),We=function(t,e){return{top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]}[e]},Xe=function(t,e){for(var n=["top","left","bottom","right"],r=t.getBBox(),o=0,i=[],a=0;a<4;a++){var s=We(r,n[a]),c=s[0];i[a]=he({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:c,y:s[1]},{x:s[2],y:s[3]}),i[a]&&(o+=1)}return[i,o]},Ye=function(t,e){for(var n=["top","left","bottom","right"],r=t.getBBox(),o=Number.POSITIVE_INFINITY,i=0,a=0;a<4;a++){var s=We(r,n[a]),c=s[0],c=function(t,e){var n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(r){n=n/r,t=((t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1))/r;if(0<=n&&n<=1&&0<=t&&t<=1)return n}return Number.POSITIVE_INFINITY}(e,new Ue(c,s[1],s[2],s[3]));0<=(c=Math.abs(c-.5))&&c<=1&&(i+=1,o=c<o?c:o)}return 0===i?-1:o},Ve=function(t){var e=0,n=0;if(0<t.length){for(var r=0,o=t;r<o.length;r++){var i=o[r];e+=i.x,n+=i.y}e/=t.length,n/=t.length}return{x:e,y:n}},He=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},qe=function(t,e){var n=e.x1,r=e.y1,o=e.x2-n,e=e.y2-r,n=t.x-n,t=t.y-r,r=n*o+t*e,r=r<=0||(r=(n=o-n)*o+(t=e-t)*e)<=0?0:r*r/(o*o+e*e),o=n*n+t*t-r;return o=o<0?0:o},Ke=function(t,e,n){return void 0===n&&(n=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(n,2)},Ze=function(t,e){var n=t.x<e.x,r=e.x+e.width<t.x,o=e.y+e.height<t.y,i=t.y<e.y;return n||r||o||i?!o||n||r?!i||n||r?!n||o||i?!r||o||i?(n=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)))*n+(r=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y)))*r:Math.pow(e.x+e.width-t.x,2):Math.pow(e.x-t.x,2):Math.pow(t.y-e.y,2):Math.pow(e.y+e.height-t.y,2):0},$e=function(t,e){var n=t[0],r=t[1],o=e.x,e=e.y,t=[t[2]-n,t[3]-r];return x.c.exactEquals(t,[0,0])?NaN:(x.c.normalize(t=[-t[1],t[0]],t),Math.abs(x.c.dot([o-n,e-r],t)))},Qe=function(t,e,n){return t+(e-t)*n},Je=function(t,e,n){for(var r=Math.min(t.length,e.length),o=new Array(r),i=0;i<r;i++)o[i]=Qe(t[i],e[i],n);return o},tn="rgb(253, 253, 253)",en="rgb(95, 149, 255)",nn="rgb(95, 149, 255)",rn="rgb(247, 250, 255)",on="rgb(95, 149, 255)",an="rgb(224, 224, 224)",sn="rgb(95, 149, 255)",cn="rgb(224, 224, 224)",un="rgb(95, 149, 255)",w={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:en,fill:"rgb(239, 244, 255)"},size:20,color:en,linkPoints:{size:8,lineWidth:1,fill:rn,stroke:nn}},nodeStateStyles:{active:{fill:rn,stroke:nn,lineWidth:2,shadowColor:en,shadowBlur:10},selected:{fill:"rgb(255, 255, 255)",stroke:on,lineWidth:4,shadowColor:on,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:"rgb(223, 234, 255)",stroke:"#4572d9",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:"rgb(247, 250, 255)",stroke:"rgb(191, 213, 255)",lineWidth:1},disable:{fill:"rgb(250, 250, 250)",stroke:"rgb(224, 224, 224)",lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:an,lineAppendWidth:2},color:an},edgeStateStyles:{active:{stroke:"rgb(95, 149, 255)",lineWidth:1},selected:{stroke:sn,lineWidth:2,shadowColor:sn,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"rgb(95, 149, 255)",lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(234, 234, 234)",lineWidth:1},disable:{stroke:"rgb(245, 245, 245)",lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:tn,lineWidth:1,stroke:cn,r:5,width:20,height:10},size:[20,5],color:cn,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:"rgb(95, 149, 255)",lineWidth:1,fill:"rgb(247, 250, 255)"},selected:{stroke:un,lineWidth:2,fill:tn,shadowColor:un,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:"#4572d9",lineWidth:2,fill:tn,"text-shape":{fontWeight:500}},inactive:{stroke:"rgb(224, 224, 224)",fill:tn,lineWidth:1},disable:{stroke:"rgb(234, 234, 234)",fill:"rgb(250, 250, 250)",lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:"undefined"!=typeof window&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},ln={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},dn=Math.PI,hn=Math.sin,fn=Math.cos,_=hn(dn/8),E=fn(dn/8),pn=function(t,e){var t=t.getBBox(),n={x:t.minX,y:t.minY},t={x:t.maxX,y:t.maxY},e=(e&&(e=e.getMatrix(),n=ye(n,e=e||[1,0,0,0,1,0,0,0,1]),t=ye(t,e)),n.x),n=n.y,r=t.x,t=t.y;return{x:e,y:n,minX:e,minY:n,maxX:r,maxY:t,width:r-e,height:t-n}},gn=function(t){var e=t.sourceNode||t.targetNode,n=(n=e.get("group").getMatrix())||[1,0,0,0,1,0,0,0,1],e=e.getKeyShape(),r=e.getBBox(),o=t.loopCfg||{},i=o.dist||2*Math.max(r.width,r.height),a=o.position||w.defaultLoopPosition,s=[(r.minX+r.maxX)/2+n[6],(r.minY+r.maxY)/2+n[7]],c=[t.startPoint.x,t.startPoint.y],u=[t.endPoint.x,t.endPoint.y],l=r.height/2,d=r.width/2,h=l,f=l,p=h*_,g=h*E,y=f*_,m=f*E,v=e.get("type"),n=Math.min(l/2,d/2),r=Math.min(l,d),b=null!=o&&o.pointPadding?Math.min(r,null==o?void 0:o.pointPadding):n;if(c[0]===u[0]&&c[1]===u[1]){switch(a){case"top":u="circle"===v?(c=[s[0]-p,s[1]-g],[s[0]+y,s[1]-m]):(c=[s[0]-b,s[1]-l],[s[0]+b,s[1]-l]);break;case"top-right":h=l,f=d,u="circle"===v?(c=[s[0]+(p=h*_),s[1]-(g=h*E)],[s[0]+(m=f*E),s[1]-(y=f*_)]):(c=[s[0]+d-b,s[1]-l],[s[0]+d,s[1]-l+b]);break;case"right":f=h=d,u="circle"===v?(c=[s[0]+(g=h*E),s[1]-(p=h*_)],[s[0]+(m=f*E),s[1]+(y=f*_)]):(c=[s[0]+d,s[1]-b],[s[0]+d,s[1]+b]);break;case"bottom-right":h=d,f=l,u="circle"===v?(c=[s[0]+(g=h*E),s[1]+(p=h*_)],[s[0]+(y=f*_),s[1]+(m=f*E)]):(c=[s[0]+d,s[1]+l-b],[s[0]+d-b,s[1]+l]);break;case"bottom":f=h=l,u="circle"===v?(c=[s[0]+(p=h*_),s[1]+(g=h*E)],[s[0]-(y=f*_),s[1]+(m=f*E)]):(c=[s[0]-b,s[1]+l],[s[0]+b,s[1]+l]);break;case"bottom-left":h=l,f=d,u="circle"===v?(c=[s[0]-(p=h*_),s[1]+(g=h*E)],[s[0]-(m=f*E),s[1]+(y=f*_)]):(c=[s[0]-d,s[1]+l-b],[s[0]-d+b,s[1]+l]);break;case"left":f=h=d,u="circle"===v?(c=[s[0]-(g=h*E),s[1]+(p=h*_)],[s[0]-(m=f*E),s[1]-(y=f*_)]):(c=[s[0]-d,s[1]-b],[s[0]-d,s[1]+b]);break;case"top-left":h=d,f=l,u="circle"===v?(c=[s[0]-(g=h*E),s[1]-(p=h*_)],[s[0]-(y=f*_),s[1]-(m=f*E)]):(c=[s[0]-d+b,s[1]-l],[s[0]-d,s[1]-l+b]);break;default:c=[s[0]-(p=(h=d)*_),s[1]-(g=h*E)],u=[s[0]+(y=(f=d)*_),s[1]-(m=f*E)]}!1===o.clockwise&&(e=[c[0],c[1]],c=[u[0],u[1]],u=[e[0],e[1]])}r=(h+i)/h,n=(f+i)/f,!1===o.clockwise&&(r=(f+i)/f,n=(h+i)/h),a=x.c.scale([0,0],[c[0]-s[0],c[1]-s[1]],r),e=[s[0]+a[0],s[1]+a[1]],o=[u[0]-s[0],u[1]-s[1]],i=x.c.scale([0,0],o,n),r=[s[0]+i[0],s[1]+i[1]];return t.startPoint={x:c[0],y:c[1]},t.endPoint={x:u[0],y:u[1]},t.controlPoints=[{x:e[0],y:e[1]},{x:r[0],y:r[1]}],t},yn=function(t,e,n,r,o){var i=[],a=null==t?void 0:t.getPoint(e);if(!a)return{x:0,y:0,angle:0};e<1e-4?i=t.getStartTangent().reverse():.9999<e?i=t.getEndTangent():(t=null==t?void 0:t.getPoint(e+1e-4),i.push([a.x,a.y]),i.push([t.x,t.y]));e=Math.atan2(i[1][1]-i[0][1],i[1][0]-i[0][0]),e<0&&(e+=2*dn),n&&(a.x+=fn(e)*n,a.y+=hn(e)*n),r&&(t=e-dn/2,.5*dn<e&&e<1.5*dn&&(t-=dn),a.x+=fn(t)*r,a.y+=hn(t)*r),i={x:a.x,y:a.y,angle:e};return o?(.5*dn<e&&e<1.5*dn&&(e-=dn),Object(rt.__assign)({rotate:e},i)):i},v=function(t,e){"function"==typeof e&&function t(e,n,r,o){if(!1!==o(e,n,r)){if(e&&e.children)for(var i=e.children.length-1;0<=i;i--)if(!t(e.children[i],e,i,o))return;return 1}}(t,null,-1,e)},mn=function(t,e){"function"==typeof e&&function t(e,n,r,o){if(e&&e.children)for(var i=e.children.length-1;0<=i;i--)if(!t(e.children[i],e,i,o))return;return!1!==o(e,n,r)}(t,null,-1,e)},vn=function(t,e){return e*(ln[t]||1)},bn=function(t,e){var n=0,r=new RegExp("[-]+");return t.split("").forEach(function(t){r.test(t)?n+=e:n+=vn(t,e)}),[n,e]},xn=function(t,e){return"number"!=typeof e||e<=0||e>=t.length?t:t.substring(0,e)+"..."},wn=function(t,e){var i=[],a={},s={},r=(t.forEach(function(t){s[t.id]=t}),t.forEach(function(t,e){var n,r=Object(Y.clone)(t),o=(r.itemType="combo",r.children=void 0,r.parentId===r.id?(console.warn("The parentId for combo ".concat(r.id," can not be the same as the combo's id")),delete r.parentId):r.parentId&&!s[r.parentId]&&(console.warn("The parent combo for combo ".concat(r.id," does not exist!")),delete r.parentId),a[r.id]);o?(r.children=o.children,(o=a[r.id]=r).parentId?(n=a[o.parentId])?n.children?n.children.push(r):n.children=[r]:(a[o.parentId]={id:o.parentId,children:[o]},a[r.id]=r):i.push(o)):(Object(Y.isString)(t.parentId)?(n=a[t.parentId])?n.children?n.children.push(r):n.children=[r]:a[(o={id:t.parentId,children:[r]}).id]=o:i.push(r),a[r.id]=r)}),{}),o=((e||[]).forEach(function(t){r[t.id]=t;var e,n=a[t.comboId];n&&(e={id:t.id,comboId:t.comboId},n.children?n.children.push(e):n.children=[e],e.itemType="node",a[t.id]=e)}),0);return i.forEach(function(t){t.depth=o+10,v(t,function(t){var e=a[t.id].itemType,n="node"===e?a[t.comboId]:a[t.parentId],n=(t.depth=n&&"node"===e?o+1:o+10,o<t.depth&&(o=t.depth),r[t.id]);return n&&(n.depth=t.depth),!0})}),i},_n=function(t,n,r){var o,e,i,a,s=t,c={root:{children:t}},u=!1,l="root",d=((t||[]).forEach(function(t){if(!u)return t.id===n?("combo"===(o=t).itemType?o.parentId=r:o.comboId=r,void(u=!0)):void v(t,function(t){var e;return c[t.id]={children:(null==t?void 0:t.children)||[]},s=null==(e=c[t.parentId||t.comboId||"root"])?void 0:e.children,!t||!t.removed&&n!==t.id||!s||(l=t.parentId||t.comboId||"root","combo"===(o=t).itemType?o.parentId=r:o.comboId=r,!(u=!0))})}),(s=null==(d=c[l])?void 0:d.children)?s.indexOf(o):-1);return-1<d&&s.splice(d,1),u||(o={id:n,itemType:"node",comboId:r},c[n]={children:void 0}),n&&(e=!1,r?(i=0,(t||[]).forEach(function(t){e||v(t,function(t){return r!==t.id||(e=!0,t.children?t.children.push(o):t.children=[o],i=t.depth,"node"===o.itemType?o.depth=i+2:o.depth=i+1,!1)})})):"node"!==o.itemType&&t.push(o),a=o.depth,v(o,function(t){return"node"===t.itemType?a+=2:a+=1,t.depth=a,!0})),t},En=function(t,e,n){var r,o,i,a={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return t&&0!==t.length?(t.forEach(function(t){var t=e.findById(t.id);t&&t.isVisible()&&(t.set("bboxCanvasCache",void 0),(t=t.getCanvasBBox()).x&&t.minX<a.minX&&(a.minX=t.minX),t.y&&t.minY<a.minY&&(a.minY=t.minY),t.x&&a.maxX<t.maxX&&(a.maxX=t.maxX),t.y)&&a.maxY<t.maxY&&(a.maxY=t.maxY)}),a.x=(a.minX+a.maxX)/2,a.y=(a.minY+a.maxY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY,a.centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2,"circle"===(null==n?void 0:n.getKeyShape().get("type"))&&(a.width=Math.hypot(a.height,a.width),a.height=a.width),Object.keys(a).forEach(function(t){a[t]!==1/0&&a[t]!==-1/0||(a[t]=void 0)}),a):(n=(t=(null==n?void 0:n.getModel())||{}).x,r=t.y,t=t.collapsed?t.fixCollapseSize:t.fixSize,{minX:n-(i=[(o=(t=Object(Y.isArray)(t)?t:[t,t])[0])/2,(t=t[1])/2])[0],minY:r-i[1],maxX:n+i[0],maxY:r+i[1],x:n,y:r,width:o,height:t})},Sn=function(t){var e=Object(Y.isNumber)(t.x)||Object(Y.isNumber)(t.y)||t.type||t.anchorPoints||t.size;return e=t.style?e||Object(Y.isNumber)(t.style.r)||Object(Y.isNumber)(t.style.width)||Object(Y.isNumber)(t.style.height)||Object(Y.isNumber)(t.style.rx)||Object(Y.isNumber)(t.style.ry):e},On=function(e){var o={};return Object.keys(e).forEach(function(t){var n,r=e[t];"img"===t&&!Object(Y.isString)(r)||(Object(Y.isObject)(r)&&!Object(Y.isArray)(r)?(n={},Object.keys(r).forEach(function(t){var e=r[t];"img"===t&&!Object(Y.isString)(e)||(n[t]=Object(Y.clone)(e))}),o[t]=n):o[t]=Object(Y.clone)(r))}),o},Mn=function(t){var e,n,r=t.animateCfg,o=t.callback;return r?(e=Object(Y.clone)(r),r.callback?(n=r.callback,e.callback=function(){o(),n()}):e.callback=o):e={duration:500,callback:o},e},kn=(Fn.prototype.formatModes=function(){var t=this.modes;Object(Y.each)(t,function(n){Object(Y.each)(n,function(t,e){Object(Y.isString)(t)&&(n[e]={type:t})})})},Fn.prototype.setBehaviors=function(t){var n,r=this.graph,t=this.modes[t],o=[];Object(Y.each)(t||[],function(t){var e=V.getBehavior(t.type||t);e&&(n=new e(t))&&(n.bind(r),o.push(n))}),this.currentBehaves=o},Fn.mergeBehaviors=function(e,t){return Object(Y.each)(t,function(t){e.indexOf(t)<0&&(Object(Y.isString)(t)&&(t={type:t}),e.push(t))}),e},Fn.filterBehaviors=function(t,n){var r=[];return t.forEach(function(t){var e=Object(Y.isString)(t)?t:t.type;n.indexOf(e)<0&&r.push(t)}),r},Fn.prototype.setMode=function(t){var e=this.modes,n=this.graph,r=t;e[r]&&(n.emit("beforemodechange",{mode:t}),Object(Y.each)(this.currentBehaves,function(t){t.delegate&&t.delegate.remove(),t.unbind(n)}),this.setBehaviors(r),n.emit("aftermodechange",{mode:t}),this.mode=t)},Fn.prototype.getMode=function(){return this.mode},Fn.prototype.manipulateBehaviors=function(t,e,n){var r,o=this;return(r=Object(Y.isArray)(t)?t:[t],Object(Y.isArray)(e))?Object(Y.each)(e,function(t){o.modes[t]?o.modes[t]=n?Fn.mergeBehaviors(o.modes[t]||[],r):Fn.filterBehaviors(o.modes[t]||[],r):n&&(o.modes[t]=r)}):((t=e)||(t=this.mode),this.modes[t]||n&&(this.modes[t]=r),this.modes[t]=n?Fn.mergeBehaviors(this.modes[t]||[],r):Fn.filterBehaviors(this.modes[t]||[],r),this.formatModes(),this.setMode(this.mode)),this},Fn.prototype.updateBehavior=function(t,e,n){Object(Y.isString)(t)&&(t={type:t});var r=[];if(n&&n!==this.mode&&"default"!==n){if(!(r=this.modes[n])||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var o=r.length,i=0;i<o;i++){if((a=r[i]).type===t.type||a===t.type)return a===t.type&&(a={type:a}),Object.assign(a,e),r[i]=a,this;i===o-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(!(r=this.currentBehaves)||!r.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a,s=r.length,i=0;i<s;i++){if((a=r[i]).type===t.type)return a.updateCfg(e),this;i===s-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},Fn.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},Fn),Cn=(Be=t(79).Event,Object(rt.__extends)(zn,Be),zn),An=function(t){return"".concat(t,"-").concat(Math.random()).concat(Date.now())},In=function(t){if(Object(Y.isArray)(t))switch(t.length){case 4:return t;case 3:return t.push(t[1]),t;case 2:return t.concat(t);case 1:return[t[0],t[0],t[0],t[0]];default:return[0,0,0,0]}var e;return Object(Y.isNumber)(t)?[t,t,t,t]:Object(Y.isString)(t)?[e=parseInt(t,10),e,e,e]:[0,0,0,0]},Tn=function(t){var e=new Cn(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},jn=function(t){if(t)for(var e=[1,0,0,0,1,0,0,0,1],n=0;n<9;n++)if(t[n]!==e[n])return!0;return!1},Nn=function(t){return Number.isNaN(Number(t))},Dn=function(t){for(var e=1/0,n=-1/0,r=1/0,o=-1/0,i=0;i<t.length;i++){var a=t[i].getBBox(),s=a.minX,c=a.minY,u=a.maxX,a=a.maxY;s<e&&(e=s),c<r&&(r=c),n<u&&(n=u),o<a&&(o=a)}return{x:Math.floor(e),y:Math.floor(r),width:Math.ceil(n)-Math.floor(e),height:Math.ceil(o)-Math.floor(r),minX:e,minY:r,maxX:n,maxY:o}},Pn=function(t,e,n,r,o){void 0===n&&(n="quadratic"),void 0===r&&(r=void 0),void 0===o&&(o=void 0);for(var i,a=t.length,s=2*(e=void 0===e?15:e),c=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],u={},l=[],d={},h=0;h<a;h++){var f=t[h],p=f.source,g=f.target,y="".concat(p,"-").concat(g);if(!l[h]){u[y]||(u[y]=[]),l[h]=!0,u[y].push(f);for(var m,v,b,x=0;x<a;x++)h!==x&&(v=(m=t[x]).source,b=m.target,l[x]||(p===b&&g===v?(u[y].push(m),l[x]=!0,d["".concat(v,"|").concat(b,"|").concat(u[y].length-1)]=!0):p===v&&g===b&&(u[y].push(m),l[x]=!0)))}}for(i in u)for(var w=u[i],_=w.length,E=0;E<_;E++){var S,O=w[E];O.source!==O.target?1===_&&r&&O.source!==O.target?O.type=r:(O.type=n,S=(E%2==0?1:-1)*(d["".concat(O.source,"|").concat(O.target,"|").concat(E)]?-1:1),O.curveOffset=_%2==1?S*Math.ceil(E/2)*s:S*(Math.floor(E/2)*s+e)):(o&&(O.type=o),O.loopCfg={position:c[E%8],dist:20*Math.floor(E/8)+50})}return t},Ln=t(255),Rn=(Bn.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,n=this.graph.get("width"),e=e.get("height");return{x:(n-t[1]-t[3])/2+t[3],y:(e-t[0]-t[2])/2+t[0]}},Bn.prototype.fitCenter=function(t,e){var n,r,o,i,a,s,c,u=this.graph,l=u.get("group"),d=u.getNodes();0!==(a=d.length>u.get("optimizeThreshold")?(r=n=1/0,i=o=-1/0,d.forEach(function(t){var t=t.getModel(),e=t.x,t=t.y;e<n&&(n=e),t<r&&(r=t),o<e&&(o=e),i<t&&(i=t)}),d=l.getMatrix()||[1,0,0,0,1,0,0,0,1],s=(c=ye({x:n,y:r},d)).x,c=c.y,{minX:s,maxX:a=(d=ye({x:o,y:i},d)).x,minY:c,maxY:d=d.y,width:a-s,height:d-c,x:s,y:c}):l.getCanvasBBox()).width&&0!==a.height&&(d=this.getViewCenter(),s=a.x+a.width/2,c=a.y+a.height/2,u.translate(d.x-s,d.y-c,t,e))},Bn.prototype.animatedFitView=function(t,e,n,r,o,i,a,s){var c,u,l=this.graph,d=(n=n||{duration:500,easing:"easeCubic"},r.x+o.x-i.x-r.minX),i=r.y+o.y-i.y-r.minY;Nn(d)||Nn(i)||(c=Object(Ln.transform)([1,0,0,0,1,0,0,0,1],[["t",d,i]]),s?(r=l.get("minZoom"),d=l.get("maxZoom"),i=a,r&&a<r?(i=r,console.warn("fitview failed, ratio out of range, ratio: %f",a,"graph minzoom has been used instead")):d&&d<a&&(i=d,console.warn("fitview failed, ratio out of range, ratio: %f",a,"graph maxzoom has been used instead")),u=Object(Ln.transform)(c,[["t",-o.x,-o.y],["s",i,i],["t",o.x,o.y]]),s=Mn({animateCfg:n,callback:function(){t.setMatrix(u),l.emit("viewportchange",{action:"translate",matrix:c}),l.emit("viewportchange",{action:"zoom",matrix:u})}}),t.stopAnimate(),t.setMatrix(e),t.animate(function(t){return{matrix:Je(e,u,t)}},s)):(r=Mn({animateCfg:n,callback:function(){l.emit("viewportchange",{action:"translate",matrix:c})}}),t.animate(function(t){return{matrix:Je(e,c,t)}},r)))},Bn.prototype.fitView=function(t,e){var n,r,o,i,a,s,c=this.graph,u=this.getFormatPadding(),l=c.get("width"),d=c.get("height"),h=c.get("group"),f=h.getMatrix()||[1,0,0,0,1,0,0,0,1],p=(h.resetMatrix(),c.getNodes()),p=p.length>c.get("optimizeThreshold")?(r=n=1/0,i=o=-1/0,p.forEach(function(t){var t=t.getModel(),e=t.x,t=t.y;e<n&&(n=e),t<r&&(r=t),o<e&&(o=e),i<t&&(i=t)}),{minX:n,maxX:o,minY:r,maxY:i,width:o-n,height:i-r,x:n,y:r}):h.getCanvasBBox();0!==p.width&&0!==p.height&&(a=this.getViewCenter(),s={x:p.x+p.width/2,y:p.y+p.height/2},l=(l-u[1]-u[3])/p.width,u=(d=(d-u[0]-u[2])/p.height)<l?d:l,t?this.animatedFitView(h,f,e,p,a,s,u,!0):(d=a.x-s.x,l=a.y-s.y,Nn(d)||Nn(l)||(c.translate(d,l),c.zoom(u,a))||console.warn("zoom failed, ratio out of range, ratio: %f",u)))},Bn.prototype.fitViewByRules=function(t,e,n){var r,o,i,a,s,c,u=t.onlyOutOfViewPort,u=void 0!==u&&u,l=t.direction,l=void 0===l?"both":l,t=t.ratioRule,t=void 0===t?"min":t,d=this.graph,h=this.getFormatPadding(),f=d.get("width"),p=d.get("height"),g=d.get("group"),y=g.getMatrix()||[1,0,0,0,1,0,0,0,1],m=(g.resetMatrix(),d.getNodes()),m=m.length>d.get("optimizeThreshold")?(o=r=1/0,a=i=-1/0,m.forEach(function(t){var t=t.getModel(),e=t.x,t=t.y;e<r&&(r=e),t<o&&(o=t),i<e&&(i=e),a<t&&(a=t)}),{minX:r,maxX:i,minY:o,maxY:a,width:i-r,height:a-o,x:r,y:o}):g.getCanvasBBox();0!==m.width&&0!==m.height&&(s=this.getViewCenter(),c={x:m.x+m.width/2,y:m.y+m.height/2},f=(f-h[1]-h[3])/m.width,p=(p-h[0]-h[2])/m.height,h="x"===l?f:"y"===l?p:"max"===t?Math.max(f,p):Math.min(f,p),u&&(h=h<1?h:1),e?this.animatedFitView(g,y,n,m,s,c,h,!0):((l=d.getZoom()*h)<(t=d.get("minZoom"))&&(l=t,console.warn("fitview failed, ratio out of range, ratio: %f",h,"graph minzoom has been used instead")),d.translate(s.x-c.x,s.y-c.y),d.zoomTo(l,s)))},Bn.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return In(t)},Bn.prototype.focusPoint=function(t,e,n){var r,o,i,a,s,c,u=this,l=this.getViewCenter(),l=this.getPointByCanvas(l.x,l.y),d=(d=this.graph.get("group").getMatrix())||[1,0,0,0,1,0,0,0,1];e?(r=(l.x-t.x)*d[0],o=(l.y-t.y)*d[4],c=s=a=i=0,this.graph.get("canvas").animate(function(t){s=r*t,c=o*t,u.graph.translate(s-i,c-a),i=s,a=c},Object(rt.__assign)({},n))):this.graph.translate((l.x-t.x)*d[0],(l.y-t.y)*d[4])},Bn.prototype.getPointByCanvas=function(t,e){var n=this.graph.get("group").getMatrix();return me({x:t,y:e},n=n||[1,0,0,0,1,0,0,0,1])},Bn.prototype.getPointByClient=function(t,e){t=this.graph.get("canvas").getPointByClient(t,e);return this.getPointByCanvas(t.x,t.y)},Bn.prototype.getClientByPoint=function(t,e){var n=this.graph.get("canvas"),t=this.getCanvasByPoint(t,e),e=n.getClientByPoint(t.x,t.y);return{x:e.x,y:e.y}},Bn.prototype.getCanvasByPoint=function(t,e){var n=this.graph.get("group").getMatrix();return ye({x:t,y:e},n=n||[1,0,0,0,1,0,0,0,1])},Bn.prototype.focus=function(t,e,n){var r,o,i,a;(t=Object(Y.isString)(t)?this.graph.findById(t):t)&&(a=i=0,t.getType&&"edge"===t.getType()?(o=t.getSource().get("group").getMatrix(),r=t.getTarget().get("group").getMatrix(),o&&r?(i=(o[6]+r[6])/2,a=(o[7]+r[7])/2):(o||r)&&(i=(o||r)[6],a=(o||r)[7])):(i=(o=(o=t.get("group").getMatrix())||[1,0,0,0,1,0,0,0,1])[6],a=o[7]),this.focusPoint({x:i,y:a},e,n))},Bn.prototype.focusItems=function(t,e,n,r){if(t.length){var o=this.graph,i=this.getFormatPadding(),a=o.get("width"),s=o.get("height"),c=o.get("group"),u=c.getMatrix()||[1,0,0,0,1,0,0,0,1];c.resetMatrix();for(var l,d={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},h=0,f=t;h<f.length;h++){var p=f[h].getBBox();p.minX<d.minX&&(d.minX=p.minX),p.minY<d.minY&&(d.minY=p.minY),d.maxX<p.maxX&&(d.maxX=p.maxX),d.maxY<p.maxY&&(d.maxY=p.maxY)}d.x=d.minX,d.y=d.minY,d.width=d.maxX-d.minX,d.height=d.maxY-d.minY,0!==d.width&&0!==d.height&&(t=this.getViewCenter(),l={x:d.x+d.width/2,y:d.y+d.height/2},a=(a-i[1]-i[3])/d.width,i=(s=(s-i[0]-i[2])/d.height)<a?s:a,n?this.animatedFitView(c,u,r,d,t,l,i,e):(o.translate(t.x-l.x,t.y-l.y),e&&!o.zoom(i,t)&&console.warn("zoom failed, ratio out of range, ratio: %f",i)))}},Bn.prototype.changeSize=function(t,e){var n=this.graph;if(!Object(Y.isNumber)(t)||!Object(Y.isNumber)(e))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:t,height:e}),n.get("canvas").changeSize(t,e),n.get("plugins").forEach(function(t){t.get("gridContainer")&&t.positionInit()})},Bn.prototype.destroy=function(){this.graph=null,this.destroyed=!1},Bn);function Bn(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}function zn(t,e){t=Be.call(this,t,e)||this;return t.item=e.item,t.canvasX=e.canvasX,t.canvasY=e.canvasY,t.wheelDelta=e.wheelDelta,t.detail=e.detail,t}function Fn(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}function Gn(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r}function Un(t){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(t){if("string"!=typeof t)return t;function e(e){if("string"!=typeof e)return e;try{return JSON.parse(e.trim())}catch(t){return e.trim()}}var n=e(t);if("string"!=typeof n)return n;for(var r=function(t){return t[t.length-1]},o=t.trim(),i=[],a=[],s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.some(function(t){return r(a)===t})},c=null,u=0,l="";u<o.length;){var d=o[u],h=s('"',"'");if(h||d.trim()){var f="\\"===o[u-1],p=s("}"),g=s("]"),y=s(","),m=r(i);if(h)r(a)!==d||f?l+=d:(a.pop(),h=e(l),m.push(h),c=h,l="");else if(g&&","===d)l&&(m.push(e(l)),l="");else if(p&&":"===d)a.push(","),l&&(m.push(l),l="");else if(y&&","===d)l&&(m.push(e(l)),l=""),a.pop();else if("}"===d&&(p||y)){l&&(m.push(e(l)),l=""),y&&a.pop();for(var v={},b=1;b<m.length;b+=2)v[m[b-1]]=m[b];i.pop(),i.length&&r(i).push(v),a.pop(),c=v}else"]"===d&&g?(l&&(m.push(e(l)),l=""),i.pop(),i.length&&r(i).push(m),a.pop(),c=m):"{"===d?(i.push([]),a.push("}")):"["===d?(i.push([]),a.push("]")):'"'===d?a.push('"'):"'"===d?a.push("'"):l+=d}u+=1}return c||l}function Xn(r){function o(t){a="function"==typeof r?r(t):r;var a,e=function(t){for(var e,n=a.length,r=[],o=0,i="";o<n;)"{"===a[o]&&"{"===a[o+1]?(r.push(i),i="",o+=2):"}"===a[o]&&"}"===a[o+1]?(r.length&&(e=r.pop(),i=Object(Y.get)(t,i,e.endsWith("=")?'"{'.concat(i,'}"'):i),r.push(e+i)),o+=2,i=""):(i+=a[o],o+=1);return r.push(i),r.map(function(t,e){return r[e-1]&&r[e-1].endsWith("=")?'"{'.concat(t,'}"'):t}).join("")}(t),n=document.createElement("div"),e=(n.innerHTML=e,function t(e,n){void 0===n&&(n={x:0,y:0});var s=Object(rt.__assign)({x:0,y:0,width:0,height:0},n);if(null!=(o=e.children)&&o.length){var r=void 0===(o=e.attrs)?{}:o,o=r.marginTop,i=Object(rt.__assign)({},n);o&&(i.y+=o);for(var a=0;a<e.children.length;a++){e.children[a].attrs.key="".concat(r.key||"root"," -").concat(a," ");var c,u=t(e.children[a],i);u.bbox&&(c=u.bbox,"inline"===u.attrs.next?i.x+=u.bbox.width:i.y+=u.bbox.height,c.width+c.x>s.width&&(s.width=c.width+c.x),c.height+c.y>s.height)&&(s.height=c.height+c.y)}}return e.bbox=function(t,e){var n,r,o=t.attrs,i=void 0===o?{}:o,a={x:e.x||0,y:e.y||0,width:s.width||0,height:s.height||0};switch(t.type){case"maker":case"circle":i.r&&(n=r=2*i.r);break;case"text":i.text&&(r=bn(i.text,i.fontSize||12)[0],a.y+=n=16,a.height=n,a.width=r,t.attrs=Object(rt.__assign)({fontSize:12,fill:"#000"},i));break;default:i.width&&(r=i.width),i.height&&(n=i.height)}return 0<=n&&(a.height=n),0<=r&&(a.width=r),i.marginTop&&(a.y+=i.marginTop),i.marginLeft&&(a.x+=i.marginLeft),a}(e,n),e.attrs=Object(rt.__assign)(Object(rt.__assign)({},e.attrs),e.bbox),e}(function e(o,n){var i={},t=o.getAttributeNames&&o.getAttributeNames()||[],r=o.children&&Array.from(o.children).map(function(t){return e(t,n)}),a={},s=o.tagName?o.tagName.toLowerCase():"group";return"text"===s&&(i.text=o.innerText),"img"===(a.type=s)&&(a.type="image"),Array.from(t).forEach(function(t){var e,n=t.split("-").reduce(function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)}),r=o.getAttribute(t);try{"style"===n||"attrs"===n?(e=Wn(r),i=Object(rt.__assign)(Object(rt.__assign)({},i),e)):a[n]=Wn(r)}catch(t){if("style"===n)throw t;a[n]=r}}),a.attrs=i,n&&n.style&&a.name&&"object"===Un(n.style[a.name])&&(a.attrs=Object(rt.__assign)(Object(rt.__assign)({},a.attrs),n.style[a.name])),n&&n.style&&a.keyshape&&(a.attrs=Object(rt.__assign)(Object(rt.__assign)({},a.attrs),n.style)),r.length&&(a.children=r),a}(n.children[0],t)));return n.remove(),e}var u={};return{draw:function(t,s){var e=o(t),c=s;return function t(e){var n=e.attrs,n=void 0===n?{}:n,r=e.bbox,o=e.type,i=e.children,a=Object(rt.__rest)(e,["attrs","bbox","type","children"]);"group"!==e.type&&(n=s.addShape(e.type,Object(rt.__assign)({attrs:n,origin:{bbox:r,type:o,children:i}},a)),e.keyshape)&&(c=n),e.children&&e.children.forEach(t)}(e),u[t.id]=[e],c},update:function(t,i){u[t.id]||(u[t.id]=[]);function a(t){var e;"group"!==t.type&&n.addShape(t.type,{attrs:t.attrs}),null!=(e=t.children)&&e.length&&t.children.map(a)}function s(e){var t=c.find(function(t){return t.attrs.key===e.attrs.key});t&&n.removeChild(t),null!=(t=e.children)&&t.length&&e.children.map(s)}var n=i.getContainer(),c=n.get("children"),e=o(t),r=function t(e,n){var r=(e||{}).type,o=((null==n?void 0:n.attrs)||{}).key;if(o&&e&&(e.attrs.key=o),!e&&n)return{action:"delete",val:n,type:r,key:o};if(e&&!n)return{action:"add",val:e,type:r};if(!e&&!n)return{action:"same",type:r};var i=[];if(0<(null==(l=e.children)?void 0:l.length)||0<(null==(l=n.children)?void 0:l.length))for(var a=Math.max(null==(l=e.children)?void 0:l.length,null==(l=n.children)?void 0:l.length),s=n.children||[],c=e.children||[],u=0;u<a;u+=1)i.push(t(c[u],s[u]));var l=Object.keys(n.attrs),d=Object.keys(e.attrs);return n.type!==e.type?{action:"restructure",nowTarget:e,formerTarget:n,key:o,children:i}:l.filter(function(t){return"children"!==t}).some(function(t){return e.attrs[t]!==n.attrs[t]||!d.includes(t)})?{action:"change",val:e,children:i,type:r,key:o}:{action:"same",children:i,type:r,key:o}}(e,u[t.id].pop());!function t(e){var n=e.key;if("group"!==e.type){var r,o=c.find(function(t){return t.attrs.key===n});switch(e.action){case"change":o&&(r=e.val.keyshape?i.getOriginStyle():{},o.attr(Object(rt.__assign)(Object(rt.__assign)({},r),e.val.attrs)));break;case"add":a(e.val);break;case"delete":s(e.val);break;case"restructure":s(e.formerTarget),a(e.nowTarget)}}e.children&&e.children.forEach(t)}(r),u[t.id].push(e)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Yn={};function Vn(t){return Yn[t]||(Yn[t]=Object(Y.upperFirst)(t)),Yn[t]}var Hn={defaultShapeType:"defaultType",className:null,getShape:function(t){return this[t]||this[this.defaultShapeType]||this["simple-circle"]},draw:function(t,e,n){var t=this.getShape(t),r=(n.shapeMap={},t.draw(e,n));return t.afterDraw&&t.afterDraw(e,n,r),r},baseUpdate:function(t,e,n,r){var o,t=this.getShape(t);t.update&&(t.mergeStyle=null==(o=t.getOptions)?void 0:o.call(t,e,r),null!=(o=t.update))&&o.call(t,e,n,r),t.afterUpdate&&t.afterUpdate(e,n)},setState:function(t,e,n,r){this.getShape(t).setState(e,n,r)},shouldUpdate:function(t){return!!this.getShape(t).update},getControlPoints:function(t,e){return this.getShape(t).getControlPoints(e)},getAnchorPoints:function(t,e){return this.getShape(t).getAnchorPoints(e)}},qn={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints;return t.anchorPoints||e}},rn=(Kn.registerFactory=function(t,e){var t=Vn(t),n=Hn,n=Object(rt.__assign)(Object(rt.__assign)({},n),e);return(Kn[t]=n).className=t,n},Kn.getFactory=function(t){return Kn[Vn(t)]},Kn.registerNode=function(t,e,n){var r,o=Kn.Node;return(n="string"==typeof e||"function"==typeof e?(r=Xn(e),Object(rt.__assign)(Object(rt.__assign)({},o.getShape("single-node")),r)):e.jsx?(r=Xn(e.jsx),Object(rt.__assign)(Object(rt.__assign)(Object(rt.__assign)({},o.getShape("single-node")),r),e)):(o.getShape(n),r=n?o.getShape(n):qn,Object(rt.__assign)(Object(rt.__assign)({},r),e))).type=t,n.itemType="node",o[t]=n},Kn.registerEdge=function(t,e,n){var r=Kn.Edge,n=n?r.getShape(n):qn,n=Object(rt.__assign)(Object(rt.__assign)({},n),e);return n.type=t,n.itemType="edge",r[t]=n},Kn.registerCombo=function(t,e,n){var r=Kn.Combo,n=n?r.getShape(n):qn,n=Object(rt.__assign)(Object(rt.__assign)({},n),e);return n.type=t,n.itemType="combo",r[t]=n},Kn),s=rn;function Kn(){}rn.registerFactory("node",{defaultShapeType:"circle"}),rn.registerFactory("edge",{defaultShapeType:"line"}),rn.registerFactory("combo",{defaultShapeType:"circle"});d.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),t=pn(t,e);return t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY,t.centerX=(t.minX+t.maxX)/2,t.centerY=(t.minY+t.maxY)/2,t},d.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),t=pn(t,e);return t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY,t.centerX=(t.minX+t.maxX)/2,t.centerY=(t.minY+t.maxY)/2,t},d.prototype.drawInner=function(){var t=this.get("shapeFactory"),e=this.get("group"),n=this.get("model"),r=(e.clear(),n.visible);void 0===r||r||this.changeVisibility(r),t&&(this.updatePosition(n),n=(r=this.getShapeCfg(n)).type,(r=t.draw(n,r,e))&&(this.set("keyShape",r),r.set("isKeyShape",!0),r.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",n),this.restoreStates(t,n))},d.prototype.setOriginStyle=function(){var t=this.get("group"),e=t.get("children"),n=this.getKeyShape(),s=this,c=n.get("name");if(this.get("originStyle")){for(var u=this.get("originStyle"),l=(c&&!u[c]&&(u[c]={}),this.getCurrentStatesStyle()),r=0;r<e.length;r++)!function(t){var n,r,o,t=e[t],i=t.get("name"),a=t.attr();i&&i!==c?(n=l[i],u[i]||(u[i]={}),n?Object.keys(a).forEach(function(t){var e=a[t];e!==n[t]&&(u[i][t]=e)}):u[i]="image"!==t.get("type")?Object(Y.clone)(a):s.getShapeStyleByName(i)):(r=t.attr(),o={},Object.keys(l).forEach(function(t){var e=l[t];t!==c&&Object(Y.isPlainObject)(e)||(o[t]=e)}),Object.keys(r).forEach(function(t){var e=r[t];o[t]!==e&&(c?u[c][t]=e:u[t]=e)}))}(r);delete u.path,delete u.matrix,delete u.x,delete u.y,u[c]&&(delete u[c].x,delete u[c].y,delete u[c].matrix,delete u[c].path),s.set("originStyle",u)}else{for(var o={},r=0;r<e.length;r++){var i,a,d=e[r],h=d.get("type"),f=d.get("name");f&&f!==c?(o[f]="image"!==h?Object(Y.clone)(d.attr()):s.getShapeStyleByName(f),"text"===h&&o[f]&&(delete o[f].x,delete o[f].y,delete o[f].matrix)):(delete(i=s.getShapeStyleByName()).path,delete i.matrix,c?f?o[c]=i:(a=An("shape"),d.set("name",a),t.shapeMap[a]=d,o[a]="image"!==h?Object(Y.clone)(d.attr()):s.getShapeStyleByName(f)):Object.assign(o,i))}s.set("originStyle",o)}},d.prototype.restoreStates=function(e,n){var r=this,t=r.get("states");Object(Y.each)(t,function(t){e.setState(n,t,!0,r)})},d.prototype.init=function(){var t=s.getFactory(this.get("type"));this.set("shapeFactory",t)},d.prototype.get=function(t){return this._cfg[t]},d.prototype.set=function(t,e){Object(Y.isPlainObject)(t)?this._cfg=Object(rt.__assign)(Object(rt.__assign)({},this._cfg),t):this._cfg[t]=e},d.prototype.getDefaultCfg=function(){return{}},d.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},d.prototype.beforeDraw=function(){},d.prototype.afterDraw=function(){},d.prototype.afterUpdate=function(){},d.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},d.prototype.getShapeStyleByName=function(e){var n,t=this.get("group");return(t=e?t.shapeMap[e]||t.find(function(t){return t.get("name")===e}):this.getKeyShape())?(n={},Object(Y.each)(t.attr(),function(t,e){"img"===e&&!Object(Y.isString)(t)||(n[e]=t)}),n):{}},d.prototype.getShapeCfg=function(t,e){var n,r=this.get("styles");return r?((n=t).style=Object(rt.__assign)(Object(rt.__assign)({},r),t.style),n):t},d.prototype.getStateStyle=function(t){var e=this.get("styles");return e&&e[t]},d.prototype.getOriginStyle=function(){return this.get("originStyle")},d.prototype.getCurrentStatesStyle=function(){var e=this,n={},t=e.getStates();return t&&t.length?(Object(Y.each)(e.getStates(),function(t){n=Object.assign(n,e.getStateStyle(t))}),n):this.get("originStyle")},d.prototype.setState=function(t,e){var n=this.get("states"),r=this.get("shapeFactory"),o=t,i=t,a=(Object(Y.isString)(e)&&(o="".concat(t,":").concat(e),i="".concat(t,":")),n);if(Object(Y.isBoolean)(e)){var s=n.indexOf(i);if(e){if(-1<s)return;n.push(o)}else-1<s&&n.splice(s,1)}else Object(Y.isString)(e)&&(0<(s=n.filter(function(t){return t.includes(i)})).length&&this.clearStates(s),(a=a.filter(function(t){return!t.includes(i)})).push(o),this.set("states",a));r&&(n=this.get("model").type,r.setState(n,t,e,this))},d.prototype.clearStates=function(e){var n=this,t=n.getStates(),r=n.get("shapeFactory"),o=n.get("model").type,t=(e=e||t,Object(Y.isString)(e)&&(e=[e]),t.filter(function(t){return-1===e.indexOf(t)}));n.set("states",t),e.forEach(function(t){r.setState(o,t,!1,n)})},d.prototype.setOptimize=function(t){this.optimize=t},d.prototype.getContainer=function(){return this.get("group")},d.prototype.getKeyShape=function(){return this.get("keyShape")},d.prototype.getModel=function(){return this.get("model")},d.prototype.getType=function(){return this.get("type")},d.prototype.getID=function(){return this.get("id")},d.prototype.isItem=function(){return!0},d.prototype.getStates=function(){return this.get("states")},d.prototype.hasState=function(t){return 0<=this.getStates().indexOf(t)},d.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},d.prototype.getUpdateType=function(t){},d.prototype.update=function(t,e){void 0===e&&(e=void 0);var n,r,o,i,a=this.get("model");"move"===e?this.updatePosition(t):(a.visible!==(n=t.visible)&&void 0!==n&&this.changeVisibility(n),n=a.x,r=a.y,t.x=isNaN(+t.x)?a.x:+t.x,t.y=isNaN(+t.y)?a.y:+t.y,o=this.get("styles"),t.stateStyles&&(i=t.stateStyles,Object(Y.mix)(o,i),delete t.stateStyles),Object.assign(a,t),n===t.x&&r===t.y||this.updatePosition(t),this.updateShape(e)),this.afterUpdate(),this.clearCache()},d.prototype.updateShape=function(t){var e=this.get("shapeFactory"),n=this.get("model"),r=n.type;e.shouldUpdate(r)&&r===this.get("currentShape")?(n=this.getShapeCfg(n,t),e.baseUpdate(r,n,this,t),"move"!==t&&this.setOriginStyle()):this.draw(),this.restoreStates(e,r)},d.prototype.updatePosition=function(t){var e=this.get("model"),n=isNaN(+t.x)?+e.x:+t.x,t=isNaN(+t.y)?+e.y:+t.y,r=this.get("group");if(isNaN(n)||isNaN(t))return!1;e.x=n,e.y=t;e=r.getMatrix();return!(e&&e[6]===n&&e[7]===t||(r.resetMatrix(),Ee(r,{x:n,y:t}),this.clearCache(),0))},d.prototype.getBBox=function(){var t=this.get("bboxCache");return t||(t=this.calculateBBox(),this.set("bboxCache",t)),t},d.prototype.getCanvasBBox=function(){var t=this.get("bboxCanvasCache");return t||(t=this.calculateCanvasBBox(),this.set("bboxCanvasCache",t)),t},d.prototype.toFront=function(){this.get("group").toFront()},d.prototype.toBack=function(){this.get("group").toBack()},d.prototype.show=function(){this.changeVisibility(!0)},d.prototype.hide=function(){this.changeVisibility(!1)},d.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},d.prototype.isVisible=function(){return this.get("visible")},d.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},d.prototype.destroy=function(){var t,e;this.destroyed||(t=this.get("animate"),e=this.get("group"),t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0)};var Zn,$n,Qn,nn=d,Jn={source:"start",target:"end"},tr=(Qn=nn,Object(rt.__extends)(l,Qn),l.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},l.prototype.setEnd=function(t,e){var n=Jn[t]+"Point",t=t+"Node",r=this.get(t);r&&!r.destroyed&&r.removeEdge(this),Object(Y.isPlainObject)(e)?(this.set(n,e),this.set(t,null)):e&&(e.addEdge(this),this.set(t,e),this.set(n,null))},l.prototype.getLinkPoint=function(t,e,n){var r,o=t+"Node",i=this.get(Jn[t]+"Point");return i||(o=this.get(o),r=t+"Anchor",n=this.getPrePoint(t,n),e=e[r],i=(i=Object(Y.isNil)(e)?i:o.getLinkPointByAnchor(e))||o.getLinkPoint(n),Object(Y.isNil)(i.index))||this.set("".concat(t,"AnchorIndex"),i.index),i},l.prototype.getPrePoint=function(t,e){return e&&e.length?e["source"===t?0:e.length-1]:this.getEndPoint("source"===t?"target":"source")},l.prototype.getEndPoint=function(t){var e=Jn[t]+"Point",t=this.get(t+"Node");return t&&!t.destroyed?t.get("model"):this.get(e)},l.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),n=this.getEndPoint("target"),r=this.get("shapeFactory"),t=t.type;return r.getControlPoints(t,{startPoint:e,endPoint:n})},l.prototype.getEndCenter=function(t){var e=Jn[t]+"Point",t=this.get(t+"Node");return t?{x:(t=t.getBBox()).centerX,y:t.centerY}:this.get(e)},l.prototype.init=function(){Qn.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},l.prototype.getShapeCfg=function(t,e){var n=this.get("linkCenter"),e=null!=e&&e.includes("move")?t:Qn.prototype.getShapeCfg.call(this,t);return n?(e.startPoint=this.getEndCenter("source"),e.endPoint=this.getEndCenter("target")):(n=e.controlPoints||this.getControlPointsByCenter(e),e.startPoint=this.getLinkPoint("source",t,n),e.endPoint=this.getLinkPoint("target",t,n)),e.sourceNode=this.get("sourceNode"),e.targetNode=this.get("targetNode"),e},l.prototype.getModel=function(){var t=this.get("model"),e=this.get("source".concat("Node")),n=this.get("target".concat("Node"));return e?delete t["source".concat("Node")]:t.source=this.get("start".concat("Point")),n?delete t["target".concat("Node")]:t.target=this.get("end".concat("Point")),Object(Y.isString)(t.source)||Object(Y.isPlainObject)(t.source)||(t.source=t.source.getID()),Object(Y.isString)(t.target)||Object(Y.isPlainObject)(t.target)||(t.target=t.target.getID()),t},l.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},l.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},l.prototype.getSource=function(){return this.get("source")},l.prototype.getTarget=function(){return this.get("target")},l.prototype.updatePosition=function(){return!1},l.prototype.update=function(t,e){void 0===e&&(e=void 0);var n=this.get("model"),r=n.visible,o=t.visible,r=(r!==o&&void 0!==o&&this.changeVisibility(o),this.get("source")),o=this.get("target");r&&!r.destroyed&&o&&!o.destroyed&&(r=this.get("styles"),t.stateStyles&&(o=t.stateStyles,Object(Y.mix)(r,o),delete t.stateStyles),Object.assign(n,t),this.updateShape(e),this.afterUpdate(),this.clearCache())},l.prototype.destroy=function(){var t=this.get("source".concat("Node")),e=this.get("target".concat("Node"));t&&!t.destroyed&&t.removeEdge(this),e&&!e.destroyed&&e.removeEdge(this),Qn.prototype.destroy.call(this)},l),er=($n=nn,Object(rt.__extends)(u,$n),u.prototype.getNearestPoint=function(t,e){for(var n=0,r=t[0],o=be(t[0],e),i=0;i<t.length;i++){var a=t[i],s=be(a,e);s<o&&(r=a,o=s,n=i)}return r.anchorIndex=n,r},u.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},u.prototype.getEdges=function(){return this.get("edges")},u.prototype.getInEdges=function(){var e=this;return this.get("edges").filter(function(t){return t.get("target")===e})},u.prototype.getOutEdges=function(){var e=this;return this.get("edges").filter(function(t){return t.get("source")===e})},u.prototype.getNeighbors=function(t){var e=this,n=this.get("edges");return"target"===t?n.filter(function(t){return t.getSource()===e}).map(function(t){return t.getTarget()}):"source"===t?n.filter(function(t){return t.getTarget()===e}).map(function(t){return t.getSource()}):n.map(function(t){return t.getSource()===e?t.getTarget():t.getSource()})},u.prototype.getLinkPointByAnchor=function(t){return this.getAnchorPoints()[t]},u.prototype.getLinkPoint=function(t){var e,n,r=this.get("keyShape").get("type"),o=this.get("type"),i=this.getBBox(),a="combo"===o?(e=i.centerX||(i.maxX+i.minX)/2,i.centerY||(i.maxY+i.minY)/2):(e=i.centerX,i.centerY),o=this.getAnchorPoints();switch(r){case"circle":n=pe({x:e,y:a,r:i.width/2},t);break;case"ellipse":n=ge({x:e,y:a,rx:i.width/2,ry:i.height/2},t);break;default:n=fe(i,t)}r=n;return r=(r=o.length?this.getNearestPoint(o,r=r||t):r)||{x:e,y:a}},u.prototype.getAnchorPoints=function(){var n,t,e,r,o=this.get("anchorPointsCache");return o||(o=[],r=this.get("shapeFactory"),n=this.getBBox(),e=this.get("model"),t=this.getShapeCfg(e),e=e.type,r=r.getAnchorPoints(e,t)||[],Object(Y.each)(r,function(t,e){t={x:n.minX+t[0]*n.width,y:n.minY+t[1]*n.height,anchorIndex:e};o.push(t)}),this.set("anchorPointsCache",o)),o},u.prototype.addEdge=function(t){this.get("edges").push(t)},u.prototype.lock=function(){this.set("locked",!0)},u.prototype.unlock=function(){this.set("locked",!1)},u.prototype.hasLocked=function(){return this.get("locked")},u.prototype.removeEdge=function(t){var e=this.getEdges(),t=e.indexOf(t);-1<t&&e.splice(t,1)},u.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},u.prototype.getUpdateType=function(t){var e,n,r;if(t)return e=!Object(Y.isNil)(t.x),n=!Object(Y.isNil)(t.y),1===(r=Object.keys(t)).length&&(e||n)||2===r.length&&e&&n?"move":Object(Y.isNumber)(t.x)||Object(Y.isNumber)(t.y)||t.type||t.anchorPoints||t.size||null!=t&&t.style&&(null!=(e=null==t?void 0:t.style)&&e.r||null!=(n=null==t?void 0:t.style)&&n.width||null!=(e=null==t?void 0:t.style)&&e.height||null!=(n=null==t?void 0:t.style)&&n.rx||null!=(e=null==t?void 0:t.style)&&e.ry)?"bbox|label":r.includes("label")||r.includes("labelCfg")?"style|label":"style"},u.prototype.setState=function(t,e){var n=this;this.optimize?$n.prototype.setState.call(this,t,e):this.runWithBBoxAffected(function(){return $n.prototype.setState.call(n,t,e)})},u.prototype.clearStates=function(t){var e=this;this.optimize?$n.prototype.clearStates.call(this,t):this.runWithBBoxAffected(function(){return $n.prototype.clearStates.call(e,t)})},u.prototype.runWithBBoxAffected=function(t){var e=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),r={};Object.keys(this.getKeyShape().attr()).forEach(function(t){e.includes(t)&&(r[t]=n[t])}),t();for(var o=this.getKeyShape().attr(),i=0;i<e.length;i++){var a=e[i];if(o[a]!==r[a]){this.clearCache(),this.getEdges().forEach(function(t){return t.refresh()});break}}},u),nr=(Zn=er,Object(rt.__extends)(c,Zn),c.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},c.prototype.getShapeCfg=function(t){var e,n,r,o=this.get("styles"),i=this.get("bbox");return o&&i?(e=t,n=Object(Y.isNumber)(t.size)?[t.size,t.size]:t.size,r=Object(Y.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,n=n||r||w.defaultCombo.size,r={r:(Math.max(i.width,i.height)||Math.max(n[0],n[1]))/2,width:i.width||n[0],height:i.height||n[1]},e.style=Object(rt.__assign)(Object(rt.__assign)(Object(rt.__assign)({},o),t.style),r),i=t.padding||w.defaultCombo.padding,Object(Y.isNumber)(i)?(r.r+=i,r.width+=2*i,r.height+=2*i):(r.r=r.r+Math.max.apply(Math,i),r.width+=i[1]+i[3]||2*i[1],r.height+=i[0]+i[2]||2*i[0]),this.set("sizeCache",r),e):t},c.prototype.calculateCanvasBBox=function(){var t,e,n,r,o;if(!this.destroyed)return t=this.get("keyShape"),o=this.get("group"),e=(n=this.get("bboxCache")||{}).x,n=n.x,r=this.get("sizeCache"),(o=pn(t,o)).centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2,r?(r.width=Math.max(r.width,o.width),r.height=Math.max(r.height,o.height),this.set("sizeCache",r),"circle"===t.get("type")?(o.width=2*r.r,o.height=2*r.r):(o.width=r.width,o.height=r.height),o.minX=o.centerX-o.width/2,o.minY=o.centerY-o.height/2,o.maxX=o.centerX+o.width/2,o.maxY=o.centerY+o.height/2):(o.width=o.maxX-o.minX,o.height=o.maxY-o.minY,o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2),o.x=o.minX,o.y=o.minY,o.x===e&&o.y===n||this.set("anchorPointsCache",null),o},c.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},c.prototype.getNodes=function(){return this.get("nodes")},c.prototype.getCombos=function(){return this.get("combos")},c.prototype.addChild=function(t){switch(t.getType()){case"node":this.addNode(t);break;case"combo":this.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},c.prototype.addCombo=function(t){return this.get("combos").push(t),!0},c.prototype.addNode=function(t){return this.get("nodes").push(t),!0},c.prototype.removeChild=function(t){switch(t.getType()){case"node":this.removeNode(t);break;case"combo":this.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},c.prototype.removeCombo=function(t){var e;if(t)return-1<(t=(e=this.getCombos()).indexOf(t))&&(e.splice(t,1),!0)},c.prototype.removeNode=function(t){var e;if(t)return-1<(t=(e=this.getNodes()).indexOf(t))&&(e.splice(t,1),!0)},c.prototype.getUpdateType=function(t){},c.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},c.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},c.prototype.destroy=function(){var t,e;this.destroyed||(t=this.get("animate"),e=this.get("group"),t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0)},c),rr=(ar.prototype.addItem=function(t,n){var r,e,o,i,a=this.graph,s="vedge"===t?"edge":t,c=a.get("".concat(s,"Group"))||a.get("group"),u=Object(Y.upperFirst)(s),l=null,d=a.get(s+Object(Y.upperFirst)("stateStyles"))||{},h=a.get("default"+u),u=(n.stateStyles&&(d=n.stateStyles),h&&Object(Y.each)(h,function(t,e){Object(Y.isObject)(t)&&!Object(Y.isArray)(t)?n[e]=Object(Y.deepMix)({},t,n[e]):Object(Y.isArray)(t)?n[e]=n[e]||Object(Y.clone)(h[e]):n[e]=n[e]||h[e]}),a.get(s+"Mapper"));if(u&&((r=u(n)).stateStyles&&(d=r.stateStyles,delete r.stateStyles),Object(Y.each)(r,function(t,e){Object(Y.isObject)(t)&&!Object(Y.isArray)(t)?n[e]=Object(Y.deepMix)({},n[e],t):n[e]=r[e]||n[e]})),a.emit("beforeadditem",{type:t,model:n}),"edge"===t||"vedge"===t){var s=void 0,u=void 0,s=n.source,u=n.target;if(s&&Object(Y.isString)(s)&&(s=a.findById(s)),u&&Object(Y.isString)(u)&&(u=a.findById(u)),!s||!u)return void console.warn("The source or target node of edge ".concat(n.id," does not exist!"));s.getType&&"combo"===s.getType()&&(n.isComboEdge=!0),u.getType&&"combo"===u.getType()&&(n.isComboEdge=!0),l=new tr({model:n,source:s,target:u,styles:d,linkCenter:a.get("linkCenter"),group:c.addGroup()})}else"node"===t?l=new er({model:n,styles:d,group:c.addGroup()}):"combo"===t&&(s=n.children,u=En(s,a),e=o=void 0,isNaN(u.x)?isNaN(n.x)&&(o=100*Math.random()):o=u.x,isNaN(u.y)?isNaN(n.y)&&(e=100*Math.random()):e=u.y,isNaN(n.x)||isNaN(n.y)?(n.x=o,n.y=e):(o=n.x-o,this.updateComboSucceeds(n.id,o,n.y-e,s)),(o=c.addGroup()).setZIndex(n.depth),l=new nr({model:n,styles:d,animate:a.get("animate"),bbox:n.collapsed?En([],a):u,group:o}),n.collapsed||"circle"!==l.getKeyShape().get("type")||(u.width=Math.hypot(u.height,u.width),u.height=u.width,l.set("bbox",u),l.refresh()),i=l.getModel(),(s||[]).forEach(function(t){var e=a.findById(t.id);l.addChild(e),t.depth=i.depth+2}));if(l)return l.setOptimize(a.getNodes().length>a.get("optimizeThreshold")),a.get("".concat(t,"s")).push(l),a.get("itemMap")[l.get("id")]=l,a.emit("afteradditem",{item:l,model:n}),l},ar.prototype.updateItem=function(e,n){var t,r,o,i,a,s,c,u,l=this,d=this.graph;(e=Object(Y.isString)(e)?d.findById(e):e)&&!e.destroyed&&(t="",e.getType&&(t=e.getType()),c=d.get(t+"Mapper"),u=(r=e.getModel()).x,o=r.y,i=e.getUpdateType(n),c?(c=c(Object(Y.deepMix)({},r,n)),a=Object(Y.deepMix)({},r,c,n),c.stateStyles&&(e.set("styles",a.stateStyles),delete a.stateStyles),Object(Y.each)(a,function(t,e){n[e]=t})):Object(Y.each)(n,function(t,e){r[e]&&Object(Y.isObject)(t)&&!Object(Y.isArray)(t)&&(n[e]=Object(rt.__assign)(Object(rt.__assign)({},r[e]),n[e]))}),d.emit("beforeupdateitem",{item:e,cfg:n}),"edge"===t?(n.source&&(c=n.source,Object(Y.isString)(c)&&(c=d.findById(c)),e.setSource(c)),n.target&&(a=n.target,Object(Y.isString)(a)&&(a=d.findById(a)),e.setTarget(a)),e.update(n)):"node"===t?(e.update(n,i),c=e.getEdges(),"move"===i?Object(Y.each)(c,function(t){l.edgeToBeUpdateMap[t.getID()]={edge:t,updateType:i},l.throttleRefresh()}):null!=i&&i.includes("bbox")&&Object(Y.each)(c,function(t){t.refresh(i)})):"combo"===t&&(e.update(n,i),isNaN(n.x)&&isNaN(n.y)||(a=n.x-u||0,this.updateComboSucceeds(r.id,a,n.y-o||0)),s=e.getEdges(),null!=i&&i.includes("bbox")||"move"===i)&&"combo"===t&&(c=e.get("shapeFactory"),u=r.type||"circle",(void 0===r.animate||void 0===n.animate?null!=(o=null==(a=c[u])?void 0:a.options)&&o.animate:r.animate||n.animate)?setTimeout(function(){var t;e&&!e.destroyed&&(t=e.getKeyShape())&&!t.destroyed&&Object(Y.each)(s,function(t){t&&!t.destroyed&&t.refresh()})},201):Object(Y.each)(s,function(t){t.refresh()})),e.setOptimize(d.getNodes().length>d.get("optimizeThreshold")),d.emit("afterupdateitem",{item:e,cfg:n}))},ar.prototype.updateCombo=function(e,t,n){var r,o,i,a=this,s=this.graph;(e=Object(Y.isString)(e)?s.findById(e):e)&&!e.destroyed&&(r=e.getModel(),s=(t=En(t,s,e)).x,o=t.y,e.set("bbox",t),t=s,i=o,i=n?(t=isNaN(r.x)?s:r.x,isNaN(r.y)?o:r.y):(t=isNaN(s)?r.x:s,isNaN(o)?r.y:o),e.update({x:t,y:i}),n=e.get("shapeFactory"),s=r.type||"circle",(void 0===r.animate?null!=(t=null==(o=n[s])?void 0:o.options)&&t.animate:r.animate)?setTimeout(function(){var t;e&&!e.destroyed&&(t=e.getKeyShape())&&!t.destroyed&&(e.getShapeCfg(r),a.updateComboEdges(e))},201):this.updateComboEdges(e))},ar.prototype.updateComboEdges=function(t){for(var e,n=t.getEdges()||[],r=0;r<n.length;r++){var o=n[r];null!=o&&o.destroyed||null!=(e=null==o?void 0:o.getSource())&&e.destroyed||null!=(e=null==o?void 0:o.getTarget())&&e.destroyed||o.refresh()}},ar.prototype.collapseCombo=function(t,e){void 0===e&&(e=!0);var n=this.graph,t=(t=Object(Y.isString)(t)?n.findById(t):t).getChildren();t.nodes.forEach(function(t){n.hideItem(t,e)}),t.combos.forEach(function(t){n.hideItem(t,e)})},ar.prototype.updateComboSucceeds=function(e,n,r,t){var o,i=this,a=(void 0===t&&(t=[]),this.graph);(n||r)&&(null!=(o=t)&&o.length||null!=(t=a.get("comboTrees"))&&t.forEach(function(t){v(t,function(t){return t.id!==e||(o=t.children,!1)})}),null!=o)&&o.forEach(function(t){var e=a.findById(t.id);e&&(e=e.getModel(),i.updateItem(t.id,{x:(e.x||0)+n,y:(e.y||0)+r}))})},ar.prototype.expandCombo=function(t,e){void 0===e&&(e=!0);var n=this.graph,t=(t=Object(Y.isString)(t)?n.findById(t):t).getChildren(),r=new Set;t.nodes.forEach(function(t){n.showItem(t,e),t.getEdges().forEach(function(t){return r.add(t)})}),t.combos.forEach(function(t){t.getModel().collapsed?t.show():n.showItem(t,e),t.getEdges().forEach(function(t){return r.add(t)})}),r.forEach(function(t){return t.refresh()})},ar.prototype.removeItem=function(t){var e=this,n=this.graph;if((t=Object(Y.isString)(t)?n.findById(t):t)&&!t.destroyed){var r=Object(Y.clone)(t.getModel()),o="",i=(t.getType&&(o=t.getType()),n.emit("beforeremoveitem",{item:r,type:o}),n.get("".concat(o,"s"))),a=i.indexOf(t),i=(-1<a&&i.splice(a,1),"edge"===o&&-1<(a=(i=n.get("v".concat(o,"s"))).indexOf(t))&&i.splice(a,1),t.get("id")),a=(delete n.get("itemMap")[i],n.get("comboTrees")),s=t.get("id");if("node"===o){var c,u,i=t.getModel().comboId;a&&i&&(u=!1,(c=a).forEach(function(t){u||v(t,function(t){var e;return t.id===s&&c?(e=c.indexOf(t),c.splice(e,1),!(u=!0)):(c=t.children,!0)})}));for(var l=(h=t.getEdges()).length-1;0<=l;l--)n.removeItem(h[l],!1);i&&n.updateCombo(i)}else if("combo"===o){var d,h,i=t.getModel().parentId,f=!1;for((a||[]).forEach(function(t){f||v(t,function(t){return t.id!==s||(d=t,!(f=!0))})}),d.removed=!0,d&&d.children&&d.children.forEach(function(t){e.removeItem(t.id)}),l=(h=t.getEdges()).length;0<=l;l--)n.removeItem(h[l],!1);i&&n.updateCombo(i)}t.destroy(),n.emit("afterremoveitem",{item:r,type:o})}},ar.prototype.setItemState=function(t,e,n){var r=this.graph,o=e;Object(Y.isString)(n)&&(o="".concat(e,":").concat(n)),t.hasState(o)===n&&n||Object(Y.isString)(n)&&t.hasState(o)||(r.emit("beforeitemstatechange",{item:t,state:o,enabled:n}),t.setState(e,n),r.autoPaint(),r.emit("afteritemstatechange",{item:t,state:o,enabled:n}))},ar.prototype.priorityState=function(t,e){var n=this.graph,r=t;Object(Y.isString)(t)&&(r=n.findById(t)),this.setItemState(r,e,!1),this.setItemState(r,e,!0)},ar.prototype.clearItemStates=function(t,e){var n=this.graph;Object(Y.isString)(t)&&(t=n.findById(t)),n.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),n.emit("afteritemstatesclear",{item:t,states:e})},ar.prototype.refreshItem=function(t){var e=this.graph;Object(Y.isString)(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},ar.prototype.addCombos=function(t,r){var o=this,e=this.graph,t=((t||[]).forEach(function(t){mn(t,function(e){var n;return r.forEach(function(t){t.id===e.id&&(t.children=e.children,t.depth=e.depth,n=t)}),n&&o.addItem("combo",n),!0})}),e.get("comboGroup"));t&&t.sort()},ar.prototype.changeItemVisibility=function(t,e){var n,r,o,i,a,s=this,c=this.graph;if(t=Object(Y.isString)(t)?c.findById(t):t)return c.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&"node"===t.getType()?(n=t.getEdges(),Object(Y.each)(n,function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&s.changeItemVisibility(t,e)})):t.getType&&"combo"===t.getType()&&(r=c.get("comboTrees"),o=t.get("id"),a=!(i=[]),(r||[]).forEach(function(t){a||t.children&&0!==t.children.length&&v(t,function(t){return t.id!==o||(i=t.children,!(a=!0))})}),!i||e&&t.getModel().collapsed||i.forEach(function(t){t=c.findById(t.id);s.changeItemVisibility(t,e)}),n=t.getEdges(),Object(Y.each)(n,function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&s.changeItemVisibility(t,e)})),c.emit("afteritemvisibilitychange",{item:t,visible:e}),t;console.warn("The item to be shown or hidden does not exist!")},ar.prototype.destroy=function(){this.graph=null,this.destroyed=!0},ar),or=(ir.prototype.updateState=function(e,t,n){var r=this.graph.get("states"),o=t;r[o=Object(Y.isString)(n)?"".concat(t,":").concat(n):o]||(r[o]=[]),n?r[o].push(e):r[o]=r[o].filter(function(t){return t!==e}),this.graph.set("states",r),this.graph.emit("graphstatechange",{states:r})},ir.prototype.updateStates=function(n,t,r){var o=this.graph.get("states");(Object(Y.isString)(t)?[t]:t).forEach(function(t){var e=t;o[e]||(o[e]=[]),Object(Y.isString)(r)&&(e="".concat(t,":").concat(r)),r?o[e].push(n):o[e]=o[e].filter(function(t){return t!==n})}),this.graph.set("states",o),this.graph.emit("graphstatechange",{states:t})},ir.prototype.destroy=function(){this.graph=null,this.destroyed=!0},ir);function ir(t){this.graph=t,this.destroyed=!1}function ar(t){var n=this;this.edgeToBeUpdateMap={},this.throttleRefresh=Object(Y.throttle)(function(t){var e=n.graph;e&&!e.get("destroyed")&&(e=n.edgeToBeUpdateMap)&&(e=Object.values(e)).length&&(e.forEach(function(t){var e,n,r=t.edge;r&&!r.destroyed&&(e=r.getSource(),n=r.getTarget(),e)&&!e.destroyed&&n&&!n.destroyed&&r.refresh(t.updateType)}),n.edgeToBeUpdateMap={})},16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}function c(){return null!==Zn&&Zn.apply(this,arguments)||this}function u(){return null!==$n&&$n.apply(this,arguments)||this}function l(){return null!==Qn&&Qn.apply(this,arguments)||this}function d(t){this._cfg={},this.destroyed=!1,this.optimize=!1;this._cfg=Object.assign({id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]},this.getDefaultCfg(),t);var e=this.get("model"),n=e.id,r=this.get("type"),t=(void 0===n?n=An(r):"string"!=typeof n&&(n=String(n)),this.get("model").id=n,this.set("id",n),t.group),t=(t&&(t.set("item",this),t.set("id",n)),this.init(),this.draw(),e.shape||e.type||("edge"===r?"line":"circle")),n=this.get("shapeFactory");n&&n[t]&&(r=n[t].options)&&r.stateStyles&&(n=this.get("styles")||e.stateStyles,n=Object(Y.deepMix)({},r.stateStyles,n),this.set("styles",n))}var S=t(69),en="\t\n\v\f\r \u2028\u2029",sr=new RegExp("([a-z])["+en+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+en+"]*,?["+en+"]*)+)","ig"),cr=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+en+"]*,?["+en+"]*","ig");function ur(t){var i,a;return t?Object(Y.isArray)(t)?t:(i={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},a=[],String(t).replace(sr,function(t,e,n){var r=[],o=e.toLowerCase();if(n.replace(cr,function(t,e){e&&r.push(+e)}),"m"===o&&2<r.length&&(a.push([e].concat(r.splice(0,2))),o="l",e="m"===e?"l":"L"),"o"===o&&1===r.length&&a.push([e,r[0]]),"r"===o)a.push([e].concat(r));else for(;i[o]<=r.length&&(a.push([e].concat(r.splice(0,i[o]))),i[o]););return""}),a):null}Math.PI;var lr=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's ".concat(t.length));for(var n=0,r=t;n<r.length;n++){var o=r[n],i=o.x,o=o.y;e.push(i),e.push(o)}var a=function(t,e,n){void 0===n&&(n=[[0,0],[1,1]]);for(var e=!!(e=void 0===e?!1:e),r=[],o=0,i=t.length;o<i;o+=2)r.push([t[o],t[o+1]]);for(var a,s,c,u=function(t,e,n){var r,o=[],i=!!n;if(i){u=n[0],l=n[1];for(var a=0,s=t.length;a<s;a+=1)var c=t[a],u=S.vec2.min([0,0],u,c),l=S.vec2.max([0,0],l,c)}for(var a=0,d=t.length;a<d;a+=1){var h,f,p,g,y,m,v,b,c=t[a];0!==a||e?a!==d-1||e?(m=S.vec2.sub(m=[0,0],f=t[e?(a+1)%d:a+1],h=t[[a?a-1:d-1,a-1][e?0:1]]),m=S.vec2.scale(m,m,.4),0!==(y=(p=S.vec2.distance(c,h))+(g=S.vec2.distance(c,f)))&&(p/=y,g/=y),y=S.vec2.scale([0,0],m,-p),m=S.vec2.scale([0,0],m,g),v=S.vec2.add([0,0],c,y),b=S.vec2.add([0,0],c,m),b=S.vec2.min([0,0],b,S.vec2.max([0,0],f,c)),b=S.vec2.max([0,0],b,S.vec2.min([0,0],f,c)),y=S.vec2.sub([0,0],b,c),y=S.vec2.scale([0,0],y,-p/g),v=S.vec2.add([0,0],c,y),v=S.vec2.min([0,0],v,S.vec2.max([0,0],h,c)),v=S.vec2.max([0,0],v,S.vec2.min([0,0],h,c)),m=S.vec2.sub([0,0],c,v),m=S.vec2.scale([0,0],m,g/p),b=S.vec2.add([0,0],c,m),i&&(v=S.vec2.max([0,0],v,u),v=S.vec2.min([0,0],v,l),b=S.vec2.max([0,0],b,u),b=S.vec2.min([0,0],b,l)),o.push(r),o.push(v),r=b):(v=c,o.push(r),o.push(v)):r=c}return e&&o.push(o.shift()),o}(r,e,n),l=r.length,d=[],o=0;o<l-1;o+=1)a=u[2*o],s=u[2*o+1],d.push(["C",a[0],a[1],s[0],s[1],(c=r[o+1])[0],c[1]]);return e&&(a=u[l],d.push(["C",a[0],a[1],(s=u[l+1])[0],s[1],(c=r[0])[0],c[1]])),d}(e);return a.unshift(["M",t[0].x,t[0].y]),a},dr=function(t,e,n,r){void 0===r&&(r=0);var n={x:(1-(n=void 0===n?0:n))*t.x+n*e.x,y:(1-n)*t.y+n*e.y},o=[0,0],e=(x.c.normalize(o,[e.x-t.x,e.y-t.y]),[-(o=o&&(o[0]||o[1])?o:[0,0])[1]*r,o[0]*r]);return n.x+=e[0],n.y+=e[1],n},hr=function(t,e){var n=t.length;if(!n)return"";for(var r="",o=0;o<n;o++)r+=function(t,n){return t&&n?t.replace(/\\?\{([^{}]+)\}/g,function(t,e){return"\\"===t.charAt(0)?t.slice(1):(t=0===(t=n[e])?"0":t)||""}):t}(0===o?"M{x} {y}":"L{x} {y}",t[o]);return e&&(r+="Z"),r},fr=function(t){var r=[];return t.forEach(function(t){if("A"!==t[0])for(var e=1;e<t.length;e+=2)r.push([t[e],t[e+1]]);else{var n=t.length;r.push([t[n-2],t[n-1]])}}),r},pr=function(t){if(t.length<2)throw new Error("point length must larger than 2, now it's ".concat(t.length));var e=t[0],n=t[1],r=t[t.length-1],o=t[t.length-2];t.unshift(r),t.unshift(o),t.push(e),t.push(n);for(var i=[],a=1;a<t.length-2;a+=1){var s=t[a-1].x,c=t[a-1].y,u=t[a].x,l=t[a].y,d=t[a+1].x,h=t[a+1].y,f=d-((a!==t.length-2?t[a+2].x:d)-u)/6,p=h-((a!==t.length-2?t[a+2].y:h)-l)/6;i.push(["C",u+(d-s)/6,l+(h-c)/6,f,p,d,h])}return i.unshift(["M",r.x,r.y]),i},gr=function(t,e){return x.c.scale([0,0],x.c.normalize([0,0],t),e)},yr=function(t,e){e=[t[1]-e[1],e[0]-t[0]],t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);if(0===t)throw new Error("p0 should not be equal to p1");return[e[0]/t,e[1]/t]},mr=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function vr(t,e){if(!t||t.length<1)return"";if(1===t.length)return r=[t[0][0],t[0][1]-e],n=[t[0][0],t[0][1]+e],"M ".concat(r," A ").concat(e,",").concat(e,",0,0,0,").concat(n," A ").concat(e,",").concat(e,",0,0,0,").concat(r);var n,r,o,i,a;if(2===t.length)return n=t,r=x.c.scale([0,0],yr(n[0],n[1]),e),o=x.c.scale([0,0],r,-1),i=x.c.add([0,0],n[0],r),r=x.c.add([0,0],n[1],r),a=x.c.add([0,0],n[1],o),n=x.c.add([0,0],n[0],o),"M ".concat(i," L ").concat(r," A ").concat([e,e,"0,0,0",a].join(",")," L ").concat(n," A ").concat([e,e,"0,0,0",i].join(","));for(var s=new Array(t.length),c=0;c<s.length;++c){var u=0===c?t[t.length-1]:t[c-1],l=t[c],d=x.c.scale([0,0],yr(u,l),e);s[c]=[x.c.add([0,0],u,d),x.c.add([0,0],l,d)]}var h="A ".concat([e,e,"0,0,0,"].join(","));return(s=s.map(function(t,e){var n="";return(n=0===e?"M ".concat(s[s.length-1][1]," "):n)+"".concat(h+t[0]," L ").concat(t[1])})).join(" ")}function br(n,t){var e,r,o,i,a,s=n.length;if(!n||s<1)return"";if(1===s)return r=[n[0][0],n[0][1]-t],e=[n[0][0],n[0][1]+t],"M ".concat(r," A ").concat([t,t,"0,0,0",e].join(",")," A ").concat([t,t,"0,0,0",r].join(","));if(2===s)return r=mr((e=n)[0],e[1]),o=gr(r,t),i=x.c.add([0,0],e[0],x.c.scale([0,0],o,-1)),e=x.c.add([0,0],e[1],o),o=1.2*t,r=gr(x.c.normalize([0,0],r),o),o=x.c.scale([0,0],r,-1),a=x.c.add([0,0],i,o),o=x.c.add([0,0],e,o),r=x.c.add([0,0],i,r),"M ".concat(i," C ").concat([a,o,e].join(",")," S ").concat([r,i].join(",")," Z");for(var c=n.map(function(t,e){e=n[(e+1)%s];return{p:t,v:x.c.normalize([0,0],mr(t,e))}}),u=0;u<c.length;++u){var l=x.c.normalize([0,0],x.c.add([0,0],c[0<u?u-1:s-1].v,x.c.scale([0,0],c[u].v,-1)));c[u].p=x.c.add([0,0],c[u].p,x.c.scale([0,0],l,t))}return c.map(function(t){t=t.p;return{x:t[0],y:t[1]}})}function xr(t,e,n){return(t.y-n.y)*(e.x-n.x)-(t.x-n.x)*(e.y-n.y)}function wr(t){var e=t.map(function(t){return{x:t.getModel().x,y:t.getModel().y}});e.sort(function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x});for(var n={},r=e.length-1;0<=r;r--){var o=e[r],i=o.x,o=o.y;n["".concat(i,"-").concat(o)]&&e.splice(r,1),n["".concat(i,"-").concat(o)]=!0}if(1===e.length)return e;for(var a=[],r=0;r<e.length;r++){for(;2<=a.length&&xr(a[a.length-2],a[a.length-1],e[r])<=0;)a.pop();a.push(e[r])}var s=[];for(r=e.length-1;0<=r;r--){for(;2<=s.length&&xr(s[s.length-2],s[s.length-1],e[r])<=0;)s.pop();s.push(e[r])}return s.pop(),a.pop(),a.concat(s)}var _r=function(t,e){for(var n=[],r=0;r<5;r++){var o=Math.cos((18+72*r)/180*Math.PI)*t,i=Math.sin((18+72*r)/180*Math.PI)*t,a=Math.cos((54+72*r)/180*Math.PI)*e,s=Math.sin((54+72*r)/180*Math.PI)*e;n.push(0===r?["M",o,-i]:["L",o,-i]),n.push(["L",a,-s])}return n.push(["Z"]),n},Er={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Sr(c,u,r){function o(t,e){return u.cells[t+e*u.width]}function l(t,e){var n=0;return o(t-1,e-1)>=r&&(n+=1),o(t,e-1)>r&&(n+=2),o(t-1,e)>r&&(n+=4),o(t,e)>r&&(n+=8),n}var n=!1;this.march=function(){for(var t=0;t<u.width&&!n;t+=1)for(var e=0;e<u.height&&!n;e+=1)o(t,e)>r&&15!==l(t,e)&&(n=function(t,e){for(var n,r,o=t,i=e,a=0;a<u.width*u.height;a++){if(n=o,r=i,-1<c.findIndex(function(t){return t.x===o&&t.y===i})){if(c[0].x===o&&c[0].y===i)return!0}else c.push({x:o,y:i});var s=l(o,i);switch(s){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:o++;break;case 12:case 14:case 4:o--;break;case 6:0===n&&(-1===r?--o:o+=1);break;case 1:case 13:case 5:i--;break;case 9:1===n&&(0===r?--i:i+=1);break;case 10:case 8:case 11:i++;break;default:return console.warn("Marching squares invalid state: ".concat(s)),!0}}}(t,e));return n}}var Or=function(t,n){var r=Number.POSITIVE_INFINITY,o=null;return t.forEach(function(t){var e=Ye(t,n);0<=e&&e<r&&(o=t,r=e)}),o};function Mr(o,e,t){var n=Object.assign(Er,t),r=Ve(o.map(function(t){return{x:t.getModel().x,y:t.getModel().y}})),i=(o=o.sort(function(t,e){return He({x:t.getModel().x,y:t.getModel().y},r)-He({x:e.getModel().x,y:e.getModel().y},r)}),[]),a=[];o.forEach(function(t){(function(t,e,n,r,o){var i,a,s,c;if(i=t,a=e,s=null,c=Number.POSITIVE_INFINITY,n.forEach(function(t){var e={x:i.getModel().x,y:i.getModel().y},n={x:t.getModel().x,y:t.getModel().y},r=He(e,n),o=new Ue(e.x,e.y,n.x,n.y),e=a.reduce(function(t,e){return 0<Ye(e,o)?t+1:t},0);r*Math.pow(e+1,2)<c&&(s=t,c=r*Math.pow(e+1,2))}),null===(n=s))return[];for(var u=function(t,c,e,u){var l=[],d=[];d.push(t);for(var h=!0,n=0,f=function(e,t){var n=!1;return t.forEach(function(t){n||(Ke(e,{x:t.x1,y:t.y1})||Ke(e,{x:t.x2,y:t.y2}))&&(n=!0)}),n},p=function(t,e){for(var n=0,r=e;n<r.length;n++){var o=r[n].getBBox(),o=[[o.x,o.y],[o.x+o.width,o.y],[o.x,o.y+o.height],[o.x+o.width,o.y+o.height]];if(ze(o,t.x,t.y))return!0}return!1};h&&n<e;)for(h=!1;!h&&d.length;)!function(){var i,t,a=d.pop(),s=Or(c,a);s&&(t=Xe(s,a),i=t[0],2===t[1])&&((t=function(t){for(var e=u,n=kr(s,e,i,t),r=f(n,d)||f(n,l),o=p(n,c);!r&&o&&1<=e;)n=kr(s,e/=1.5,i,t),r=f(n,d)||f(n,l),o=p(n,c);!n||r||t&&o||(d.push(new Ue(a.x1,a.y1,n.x,n.y)),d.push(new Ue(n.x,n.y,a.x2,a.y2)),h=!0)})(!0),h||t(!1)),h||l.push(a),n+=1}();for(;d.length;)l.push(d.pop());return l}(new Ue(t.getModel().x,t.getModel().y,n.getModel().x,n.getModel().y),e,r,o),l=[];0<u.length;){var d=u.pop();if(0===u.length){l.push(d);break}var h=u.pop(),f=new Ue(d.x1,d.y1,h.x2,h.y2);Or(e,f)?(l.push(d),u.push(h)):u.push(f)}return l})(t,e,i,n.maxRoutingIterations,n.morphBuffer).forEach(function(t){a.push(t)}),i.push(t)});for(var s,c,u=function(t,e,n){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},o=[];t.forEach(function(t){o.push(t.getBBox())}),e.forEach(function(t){o.push(t.getBBox())});for(var i=0,a=o;i<a.length;i++){var s=a[i];r.minX=(s.minX<r.minX?s:r).minX-n,r.minY=(s.minY<r.minY?s:r).minY-n,r.maxX=(r.maxX<s.maxX?s:r).maxX+n,r.maxY=(r.maxY<s.maxY?s:r).maxY+n}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}(o,a,n.nodeR0),l=(t=u.width,c=u.height,s=n.pixelGroupSize,t=Math.ceil(t/s),c=Math.ceil(c/s),{cells:new Float32Array(Math.max(0,t*c)).fill(0),width:t,height:c}),d=[],h=[],f=0;f<n.maxMarchingIterations;f++)if(function(t,e,n,l,d,h){function r(t,e){t=Math.floor((t-e)/h.pixelGroupSize);return t<0?0:t}function f(t,e){return t*h.pixelGroupSize+e}function p(t,e){return[Math.min(r(t.minX,e+l.minX),d.width),Math.min(r(t.minY,e+l.minY),d.height),Math.min(r(t.maxX,-e+l.minX),d.width),Math.min(r(t.maxY,-e+l.minY),d.height)]}function o(t,e){for(var n,r,o=t.getBBox(),i=(t=p(o,h.nodeR1))[0],a=t[2],s=t[3],c=t[1];c<s;c+=1)for(var u=i;u<a;u+=1)e<0&&d[u+c*d.width]<=0||(n=f(u,l.minX),r=f(c,l.minY),(n=Ze({x:n,y:r},{x:o.minX,y:o.minY,width:o.width,height:o.height}))<Math.pow(h.nodeR1,2)&&(r=Math.sqrt(n)-h.nodeR1,d.cells[u+c*d.width]+=e*r*r))}var i=(h.nodeR0-h.nodeR1)*(h.nodeR0-h.nodeR1),g=(h.edgeR0-h.edgeR1)*(h.edgeR0-h.edgeR1);h.nodeInfluenceFactor&&t.forEach(function(t){o(t,h.nodeInfluenceFactor/i)}),h.edgeInfluenceFactor&&n.forEach(function(t){for(var e,n,r=t,o=h.edgeInfluenceFactor/g,t=r.getBBox(),i=(t=p(t,h.edgeR1))[0],a=t[2],s=t[3],c=t[1];c<s;c+=1)for(var u=i;u<a;u+=1)o<0&&d.cells[u+c*d.width]<=0||(e=f(u,l.minX),n=f(c,l.minY),(e=qe({x:e,y:n},r))<Math.pow(h.edgeR1,2)&&(n=Math.sqrt(e)-h.edgeR1,d.cells[u+c*d.width]+=o*n*n))}),h.negativeNodeInfluenceFactor&&e.forEach(function(t){o(t,h.negativeNodeInfluenceFactor/i)})}(o,e,a,u,l,n),h=[],new Sr(d=[],l,n.threshold).march()){var p=d.map(function(t){return{x:Math.round(t.x*n.pixelGroupSize+u.minX),y:Math.round(t.y*n.pixelGroupSize+u.minY)}});if(p){var g=p.length;if(1<n.skip)for(g=Math.floor(p.length/n.skip);g<3&&1<n.skip;)--n.skip,g=Math.floor(p.length/n.skip);for(var y=0,m=0;m<g;m+=1,y+=n.skip)h.push({x:p[y].x,y:p[y].y})}if(h&&function(){for(var t=0,e=o;t<e.length;t++){var n=e[t],r=h.map(function(t){return[t.x,t.y]});if(!ze(r,n.getBBox().centerX,n.getBBox().centerY))return}return 1}())return h;if(n.threshold*=.9,f<=.5*n.maxMarchingIterations)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else{if(!(0!==n.nonMemberInfluenceFactor&&0<e.length))break;n.nonMemberInfluenceFactor*=.8}}return h}function kr(t,e,n,r){var o=t.getBBox(),t=n[0],i=n[1],a=n[2],n=n[3],s={x:o.minX-e,y:o.minY-e},c={x:o.maxX+e,y:o.minY-e},u={x:o.minX-e,y:o.maxY+e},e={x:o.maxX+e,y:o.maxY+e},l=o.height*o.width;function d(t,e){return o.width*(.5*(t.y-o.minY+(e.y-o.minY)))}if(i)return t?r?s:e:a?r?u:c:d(i,n)<.5*l?i.y>n.y?r?s:e:r?c:u:i.y<n.y?r?u:c:r?e:s;if(n){if(t)return r?c:u;if(a)return r?e:s}return d(t,a)<.5*l?t.x>a.x?r?s:e:r?u:c:t.x<a.x?r?c:u:r?e:s}Tr.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},Tr.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=0<this.cfg.padding?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},Tr.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},Tr.prototype.calcPath=function(t,e){var n,r,o;switch(this.type){case"round-convex":r=ur(o=vr((n=wr(t)).map(function(t){return[t.x,t.y]}),this.padding));break;case"smooth-convex":2===(n=wr(t)).length?r=ur(o=vr(n.map(function(t){return[t.x,t.y]}),this.padding)):2<n.length&&(o=br(n.map(function(t){return[t.x,t.y]}),this.padding),r=pr(o));break;case"bubble":r=2<=(n=Mr(t,e,this.cfg.bubbleCfg)).length&&pr(n)}return r},Tr.prototype.render=function(){this.group.addShape("path",{attrs:Object(rt.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},Tr.prototype.addMember=function(t){if(t)return Object(Y.isString)(t)&&(t=this.graph.findById(t)),this.members.push(t),-1<(t=this.nonMembers.indexOf(t))&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0},Tr.prototype.addNonMember=function(t){if(t)return Object(Y.isString)(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t),-1<(t=this.members.indexOf(t))&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0},Tr.prototype.removeMember=function(t){if(t)return Object(Y.isString)(t)&&(t=this.graph.findById(t)),-1<(t=this.members.indexOf(t))&&(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0)},Tr.prototype.removeNonMember=function(t){if(t)return Object(Y.isString)(t)&&(t=this.graph.findById(t)),-1<(t=this.nonMembers.indexOf(t))&&(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0)},Tr.prototype.updateData=function(t,e){var n=this;this.group.findById(this.id).remove(),t&&(this.members=t.map(function(t){return Object(Y.isString)(t)?n.graph.findById(t):t})),e&&(this.nonMembers=e.map(function(t){return Object(Y.isString)(t)?n.graph.findById(t):t})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},Tr.prototype.updateStyle=function(t){this.group.findById(this.id).attr(Object(rt.__assign)({},t))},Tr.prototype.updateCfg=function(t){var e=this;this.cfg=Object(Y.deepMix)(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map(function(t){return Object(Y.isString)(t)?e.graph.findById(t):t})),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(t){return Object(Y.isString)(t)?e.graph.findById(t):t})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},Tr.prototype.contain=function(t){var e=this,n=(t=Object(Y.isString)(t)?this.graph.findById(t):t).getKeyShape();return n=(n="path"===t.get("type")?fr(n.attr("path")):[[(t=n.getCanvasBBox()).minX,t.minY],[t.maxX,t.minY],[t.maxX,t.maxY],[t.minX,t.maxY]]).map(function(t){t=e.graph.getPointByCanvas(t[0],t[1]);return[t.x,t.y]}),Ge(n,fr(this.path))},Tr.prototype.destroy=function(){this.group.remove(),this.cfg=null};var Cr,Ar=Tr,Ir=x.a.transform,on=(Cr=H.a,Object(rt.__extends)(h,Cr),h.prototype.init=function(){this.initCanvas();var t=new Rn(this),e=new kn(this),n=new rr(this),r=new or(this);this.set({viewController:t,modeController:e,itemController:n,stateController:r}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},h.prototype.initGroups=function(){var t,e,n,r,o=this.get("canvas");o&&(t=(o.get("el")||{}).id,t=o.addGroup({id:"".concat(o=void 0===t?"g6":t,"-root"),className:w.rootContainerClassName}),this.get("groupByTypes")&&(e=t.addGroup({id:"".concat(o,"-edge"),className:w.edgeContainerClassName}),r=t.addGroup({id:"".concat(o,"-node"),className:w.nodeContainerClassName}),(n=t.addGroup({id:"".concat(o,"-combo"),className:w.comboContainerClassName})).toBack(),this.set({nodeGroup:r,edgeGroup:e,comboGroup:n})),r=t.addGroup({id:"".concat(o,"-delegate"),className:w.delegateContainerClassName}),this.set({delegateGroup:r}),this.set("group",t))},h.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},h.prototype.set=function(t,e){return Object(Y.isPlainObject)(t)?this.cfg=Object(rt.__assign)(Object(rt.__assign)({},this.cfg),t):this.cfg[t]=e,"enabledStack"!==t||!e||this.undoStack||this.redoStack||(this.undoStack=new se(this.cfg.maxStep),this.redoStack=new se(this.cfg.maxStep)),this},h.prototype.get=function(t){var e;return null==(e=this.cfg)?void 0:e[t]},h.prototype.getGroup=function(){return this.get("group")},h.prototype.getContainer=function(){return this.get("container")},h.prototype.getMinZoom=function(){return this.get("minZoom")},h.prototype.setMinZoom=function(t){return this.set("minZoom",t)},h.prototype.getMaxZoom=function(){return this.get("maxZoom")},h.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},h.prototype.getWidth=function(){return this.get("width")},h.prototype.getHeight=function(){return this.get("height")},h.prototype.clearItemStates=function(t,e){Object(Y.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");e=e||t.get("states"),n.clearItemStates(t,e),this.get("stateController").updateStates(t,e,!1)},h.prototype.node=function(t){"function"==typeof t&&this.set("nodeMapper",t)},h.prototype.edge=function(t){"function"==typeof t&&this.set("edgeMapper",t)},h.prototype.combo=function(t){"function"==typeof t&&this.set("comboMapper",t)},h.prototype.findById=function(t){return this.get("itemMap")[t]},h.prototype.find=function(t,n){var r,t=this.get("".concat(t,"s"));return Object(Y.each)(t,function(t,e){if(n(t,e))return r=t}),r},h.prototype.findAll=function(t,n){var r=[];return Object(Y.each)(this.get("".concat(t,"s")),function(t,e){n(t,e)&&r.push(t)}),r},h.prototype.findAllByState=function(t,e,n){return n?this.findAll(t,function(t){return t.hasState(e)&&n(t)}):this.findAll(t,function(t){return t.hasState(e)})},h.prototype.translate=function(t,e,n,r){var o=this,i=this.get("group"),a=(a=Object(Y.clone)(i.getMatrix()))||[1,0,0,0,1,0,0,0,1];n?(r=Mn({animateCfg:r,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:i.getMatrix()})}}),Se(i,{x:i.getCanvasBBox().x+t,y:i.getCanvasBBox().y+e},n,r||{duration:500,easing:"easeCubic"})):(a=Ir(a,[["t",t,e]]),i.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:a}),this.autoPaint())},h.prototype.moveTo=function(t,e,n,r){var o=this.get("group");Se(o,{x:t,y:e},n,r||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},h.prototype.fitView=function(t,e,n,r){t&&this.set("fitViewPadding",t);t=this.get("viewController");e?t.fitViewByRules(e,n,r):t.fitView(n,r),this.autoPaint()},h.prototype.fitCenter=function(t,e){this.get("viewController").fitCenter(t,e),this.autoPaint()},h.prototype.addBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!0),this},h.prototype.removeBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!1),this},h.prototype.updateBehavior=function(t,e,n){return this.get("modeController").updateBehavior(t,e,n),this},h.prototype.zoom=function(t,e,n,r){var o,i,a,s=this,c=this.get("group"),u=Object(Y.clone)(c.getMatrix())||[1,0,0,0,1,0,0,0,1],l=this.get("minZoom"),d=this.get("maxZoom"),h=this.getZoom()||1,f=h*t,p=!1;return l&&f<l?(t=l/h,p=!0):d&&d<f&&(t=d/h,p=!0),u=Ir(u,e?[["t",-e.x,-e.y],["s",t,t],["t",e.x,e.y]]:[["s",t,t]]),n?(o=Object(Y.clone)(c.getMatrix()),i=(o=o||[1,0,0,0,1,0,0,0,1])[0],a=i*t,l=Mn({animateCfg:r,callback:function(){return s.emit("viewportchange",{action:"zoom",matrix:c.getMatrix()})}}),c.animate(function(t){return{matrix:o=1===t?u:(t=Qe(i,a,t)/o[0],Ir(o,e?[["t",-e.x,-e.y],["s",t,t],["t",e.x,e.y]]:[["s",t,t]]))}},l)):(c.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint()),!p},h.prototype.zoomTo=function(t,e,n,r){t/=this.getZoom();return this.zoom(t,e,n,r)},h.prototype.focusItem=function(t,e,n){var r=this.get("viewController"),o=!1,e=(e?o=!0:void 0===e&&(o=this.get("animate")),{});n?e=n:void 0===n&&(e=this.get("animateCfg")),r.focus(t,o,e),this.autoPaint()},h.prototype.focusItems=function(t,e,n,r){this.get("viewController").focusItems(t,e,n,r)},h.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},h.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},h.prototype.getPointByClient=function(t,e){return this.get("viewController").getPointByClient(t,e)},h.prototype.getClientByPoint=function(t,e){return this.get("viewController").getClientByPoint(t,e)},h.prototype.getPointByCanvas=function(t,e){return this.get("viewController").getPointByCanvas(t,e)},h.prototype.getCanvasByPoint=function(t,e){return this.get("viewController").getCanvasByPoint(t,e)},h.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},h.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},h.prototype.showItem=function(t,e){void 0===e&&(e=!0);t=this.get("itemController").changeItemVisibility(t,!0);if(e&&this.get("enabledStack")){var n=t.getID(),r={},o={};switch(t.getType()){case"node":r.nodes=[{id:n,visible:!1}],o.nodes=[{id:n,visible:!0}];break;case"edge":r.nodes=[{id:n,visible:!1}],o.edges=[{id:n,visible:!0}];break;case"combo":r.nodes=[{id:n,visible:!1}],o.combos=[{id:n,visible:!0}]}this.pushStack("visible",{before:r,after:o})}},h.prototype.hideItem=function(t,e){void 0===e&&(e=!0);t=this.get("itemController").changeItemVisibility(t,!1);if(e&&this.get("enabledStack")){var n=t.getID(),r={},o={};switch(t.getType()){case"node":o.nodes=[{id:n,visible:!(r.nodes=[{id:n,visible:!0}])}];break;case"edge":o.edges=[{id:n,visible:!(r.nodes=[{id:n,visible:!0}])}];break;case"combo":o.combos=[{id:n,visible:!(r.nodes=[{id:n,visible:!0}])}]}this.pushStack("visible",{before:r,after:o})}},h.prototype.refreshItem=function(t){this.get("itemController").refreshItem(t)},h.prototype.setAutoPaint=function(t){this.set("autoPaint",t),this.get("canvas").set("autoDraw",t)},h.prototype.remove=function(t,e){this.removeItem(t,e=void 0===e?!0:e)},h.prototype.removeItem=function(t,e){void 0===e&&(e=!0);var n=t;if(!(n=Object(Y.isString)(t)?this.findById(t):n)&&Object(Y.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){t="";if(n.getType&&(t=n.getType()),e&&this.get("enabledStack")){var r=Object(rt.__assign)(Object(rt.__assign)({},n.getModel()),{itemType:t}),o={};switch(t){case"node":o.nodes=[r],o.edges=[];for(var i=n.getEdges(),a=i.length-1;0<=a;a--)o.edges.push(Object(rt.__assign)(Object(rt.__assign)({},i[a].getModel()),{itemType:"edge"}));break;case"edge":o.edges=[r];break;case"combo":o.combos=[r]}this.pushStack("delete",{before:o,after:{}})}"node"===t&&n.getModel().comboId&&this.updateComboTree(n,void 0,!1),this.get("itemController").removeItem(n),"combo"===t&&(e=_n(this.get("comboTrees")),this.set("comboTrees",e))}},h.prototype.innerAddItem=function(n,r,o){var i,t,a,s,e,c,u,l,d;return!!function(t,e){if("node"===t||"combo"===t){if(e.id&&!Object(Y.isString)(e.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(e.id,"%c is not a string."),"font-size: 20px; color: red;",""),0}else if(!("edge"!==t||e.source&&e.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),0;return 1}(n,r)&&(r.id&&this.findById(r.id)?void console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;",""):(t=this.get("comboTrees")||[],"combo"===n?(a=this.get("itemMap"),s=!1,t.forEach(function(t){s||mn(t,function(t){r.parentId===t.id&&(s=!0,e=Object(rt.__assign)({id:r.id,depth:t.depth+2},r),t.children?t.children.push(e):t.children=[e],r.depth=e.depth,i=o.addItem(n,r));var e=a[t.id];return s&&e&&e.getType&&"combo"===e.getType()&&o.updateCombo(e,t.children),!0})}),s||(e=Object(rt.__assign)({id:r.id,depth:0},r),r.depth=e.depth,t.push(e),i=o.addItem(n,r)),this.set("comboTrees",t),r.collapsed&&(this.collapseCombo(i,!1),this.updateCombo(i))):"node"===n&&Object(Y.isString)(r.comboId)&&t?((c=this.findById(r.comboId))&&c.getType&&"combo"!==c.getType()&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),i=o.addItem(n,r),u=this.get("itemMap"),d=l=!1,t.forEach(function(t){d||l||mn(t,function(t){var e;return t.id===r.id?!(d=!0):(r.comboId!==t.id||d||(l=!0,(e=Object(Y.clone)(r)).itemType="node",t.children?t.children.push(e):t.children=[e],e.depth=t.depth+1),l&&u[t.id].getType&&"combo"===u[t.id].getType()&&o.updateCombo(u[t.id],t.children),!0)})})):i=o.addItem(n,r),("node"===n&&r.comboId||"combo"===n&&r.parentId)&&(c=this.findById(r.comboId||r.parentId))&&c.getType&&"combo"===c.getType()&&c.addChild(i),i))},h.prototype.addItem=function(t,e,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var o=this.get("comboSorted"),o=(this.set("comboSorted",o&&!r),this.get("itemController")),r=this.innerAddItem(t,e,o);if(!1!==r&&!0!==r){e=this.get("combos");if(e&&0<e.length&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var i=Object(rt.__assign)(Object(rt.__assign)({},r.getModel()),{itemType:t}),a={};switch(t){case"node":a.nodes=[i];break;case"edge":a.edges=[i];break;case"combo":a.combos=[i]}this.pushStack("add",{before:{},after:a})}}return r},h.prototype.addItems=function(t,e,n){void 0===t&&(t=[]),void 0===e&&(e=!0),void 0===n&&(n=!0);var r=this.get("comboSorted");this.set("comboSorted",r&&!n);for(var o,i=this.get("itemController"),a=[],s=0;s<t.length;s++)"edge"!==(o=t[s]).type&&"vedge"!==o.type?a.push(this.innerAddItem(o.type,o.model,i)):a.push(void 0);for(s=0;s<t.length;s++)"edge"!==(o=t[s]).type&&"vedge"!==o.type||(a[s]=this.innerAddItem(o.type,o.model,i));if(n&&(r=this.get("combos"))&&0<r.length&&this.sortCombos(),this.autoPaint(),e&&this.get("enabledStack")){for(var c={nodes:[],edges:[],combos:[]},s=0;s<t.length;s++){var u=t[s].type,l=a[s];if(l&&!0!==l){var d=Object(rt.__assign)(Object(rt.__assign)({},l.getModel()),{itemType:u});switch(u){case"node":c.nodes.push(d);break;case"edge":c.edges.push(d);break;case"combo":c.combos.push(d)}}}this.pushStack("addItems",{before:{},after:c})}return a},h.prototype.add=function(t,e,n,r){return this.addItem(t,e,n=void 0===n?!0:n,r=void 0===r?!0:r)},h.prototype.updateItem=function(t,e,n){var r=this;void 0===n&&(n=!0);var o,i=this.get("itemController"),a=Object(Y.isString)(t)?this.findById(t):t,t=n&&this.get("enabledStack"),n=(t&&(o=Object(Y.clone)(a.getModel())),""),s=(a.getType&&(n=a.getType()),Object(rt.__spreadArray)([],a.getStates(),!0));if("combo"===n&&Object(Y.each)(s,function(t){return r.setItemState(a,t,!1)}),i.updateItem(a,e),"combo"===n&&Object(Y.each)(s,function(t){return r.setItemState(a,t,!0)}),t){var c={nodes:[],edges:[],combos:[]},u={nodes:[],edges:[],combos:[]},l=Object(rt.__assign)({id:o.id},e);switch(n){case"node":c.nodes.push(o),u.nodes.push(l);break;case"edge":c.edges.push(o),u.edges.push(l);break;case"combo":c.combos.push(o),u.combos.push(l)}this.pushStack("update",{before:c,after:u})}},h.prototype.update=function(t,e,n){this.updateItem(t,e,n=void 0===n?!0:n)},h.prototype.setItemState=function(t,e,n){Object(Y.isString)(t)&&(t=this.findById(t)),this.get("itemController").setItemState(t,e,n),this.get("stateController").updateState(t,e,n)},h.prototype.priorityState=function(t,e){this.get("itemController").priorityState(t,e)},h.prototype.data=function(t){Re(t),this.set("data",t)},h.prototype.render=function(){var n=this,t=(this.set("comboSorted",!1),this.get("data"));if(this.get("enabledStack")&&this.clearStack(),!t)throw new Error("data must be defined first");var e=t.nodes,e=void 0===e?[]:e,r=t.edges,r=void 0===r?[]:r,o=t.combos,o=void 0===o?[]:o,i=(this.clear(!0),this.emit("beforerender"),n.addItems(e.map(function(t){return{type:"node",model:t}}),!1,!1),0!==(null==o?void 0:o.length)&&(e=wn(o,e),this.set("comboTrees",e),n.addCombos(o)),n.addItems(r.map(function(t){return{type:"edge",model:t}}),!1,!1),n.get("animate")),e=((n.get("fitView")||n.get("fitCenter"))&&n.set("animate",!1),n.get("layoutController"));if(e){if(e.layout(a),this.destroyed)return}else a();function a(){(n.get("comboTrees")||[]).forEach(function(t){mn(t,function(t){var e=n.findById(t.id);return"combo"===e.getType()&&t.collapsed&&(n.collapseCombo(t.id,!1),n.updateCombo(e)),!0})}),n.get("fitView")?n.fitView():n.get("fitCenter")&&n.fitCenter(),n.autoPaint(),n.emit("afterrender"),(n.get("fitView")||n.get("fitCenter"))&&n.set("animate",i),setTimeout(function(){var t;null!=(t=n.getCombos())&&t.forEach(function(t){t.set("animate",!0)})},0)}this.get("groupByTypes")||(o&&0!==o.length?this.sortCombos():t.nodes&&t.edges&&t.nodes.length<t.edges.length?this.getNodes().forEach(function(t){t.toFront()}):this.getEdges().forEach(function(t){t.toBack()}))},h.prototype.read=function(t){this.data(t),this.render()},h.prototype.diffItems=function(n,r,t){var o,i=this,a=this.get("itemMap");Object(Y.each)(t,function(t){var e;(o=a[t.id])?(i.get("animate")&&"node"===n&&(e=(e=o.getContainer().getMatrix())||[1,0,0,0,1,0,0,0,1],o.set("originAttrs",{x:e[6],y:e[7]})),i.updateItem(o,t,!1)):o=i.addItem(n,t,!1),o&&r["".concat(n,"s")].push(o)})},h.prototype.changeData=function(t,e){var n=this,r=(void 0===e&&(e=!0),this),t=t||r.get("data");if(Re(t)){this.emit("beforechangedata"),e&&this.get("enabledStack")&&this.pushStack("changedata",{before:r.save(),after:t}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(t){return r.clearItemStates(t)}),this.getEdges().map(function(t){return r.clearItemStates(t)});var o=this.get("canvas"),i=o.get("localRefresh"),a=(o.set("localRefresh",!1),r.get("data")||(r.data(t),r.render()),this.get("itemMap")),s={nodes:[],edges:[]},e=t.combos;e?(l=wn(e,t.nodes),this.set("comboTrees",l)):this.set("comboTrees",[]),this.diffItems("node",s,t.nodes),Object(Y.each)(a,function(t,e){a[e].getModel().depth=0,t.getType&&"edge"===t.getType()||(t.getType&&"combo"===t.getType()?(delete a[e],t.destroy()):s.nodes.indexOf(t)<0&&(delete a[e],r.remove(t,!1)))});for(var c=this.getCombos(),u=c.length-1;0<=u;u--)c[u].destroyed&&c.splice(u,1);e&&(r.addCombos(e),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",s,t.edges),Object(Y.each)(a,function(t,e){(!t.getType||"node"!==t.getType()&&"combo"!==t.getType())&&s.edges.indexOf(t)<0&&(delete a[e],r.remove(t,!1))}),(this.get("comboTrees")||[]).forEach(function(t){mn(t,function(t){return"combo"===n.findById(t.id).getType()&&t.collapsed&&n.collapseCombo(t.id,!1),!0})}),this.set({nodes:s.nodes,edges:s.edges});var l=(this.get("layout")||{}).relayoutAtChangeData,e=void 0===l||l,l=this.get("layoutController");e&&l&&(l.changeData(function(){setTimeout(function(){var t;null!=(t=r.getCombos())&&t.forEach(function(t){t.set("animate",!0)})},0)}),r.get("animate")&&!l.getLayoutType()?(r.positionsAnimate(),null!=(e=r.getCombos())&&e.forEach(function(t){return t.set("animate",!0)})):r.autoPaint()),setTimeout(function(){o.set("localRefresh",i)},16),this.set("data",t),this.emit("afterchangedata")}return this},h.prototype.addCombos=function(t){var e=this.get("comboTrees");this.get("itemController").addCombos(e,t)},h.prototype.createCombo=function(t,e,n){var i=this,a=(void 0===n&&(n=!0),this.get("itemController"));this.set("comboSorted",!1);var r,o="";if(t){if(Object(Y.isString)(t))r={id:o=t};else{if(!(o=t.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");r=t}var s=n&&this.get("enabledStack"),c={nodes:[],combos:[]},t=(s&&e.forEach(function(t){var e=i.findById(t),n=e.getType();"node"!==n&&"combo"!==n||(e=e.getModel(),c["".concat(n,"s")].push({id:t,parentId:"node"===n?e.comboId:e.parentId}))}),this.get("comboTrees")),u=new Set(e),l=new Map,d=(t&&(t.forEach(function(t){mn(t,function(t,e,n){var r,o;return u.has(t.id)&&(e&&(r=i.findById(e.id),o=i.findById(t.id),e.children.splice(n,1),r.removeChild(o),a.updateCombo(r,e.children)),"combo"===t.itemType)&&l.set(t.id,t),!0})}),t=t.filter(function(t){return!u.has(t.id)}),this.set("comboTrees",t)),{nodes:[],combos:[]}),h=e.map(function(t){var e=i.findById(t),n=e.getModel(),r="",t=(e.getType&&(r=e.getType()),l.get(t)||{id:e.getID(),itemType:r});return"combo"===r?(t.parentId=o,n.parentId=o):"node"===r&&(t.comboId=o,n.comboId=o),s&&d["".concat(r,"s")].push({id:n.id,parentId:o}),t}),f=(r.children=h,this.addItem("combo",r,!1),this.set("comboSorted",!1),t&&(t.forEach(function(t){v(t,function(t){return t.id!==o||(t.itemType="combo",t.children=h,!1)})}),this.sortCombos()),s&&(d.combos.push(r),this.pushStack("createCombo",{before:c,after:d})),this.findById(o));!f.getModel().parentId&&f.getChildren().combos.length&&this.updateComboTree(f,void 0,!1),setTimeout(function(){f.set("animate",!0)},0)}},h.prototype.uncombo=function(t,e){var r,n,o,i,a,s,c,u,l,d,h,f=this,p=(void 0===e&&(e=!0),t);!(p=Object(Y.isString)(t)?this.findById(t):p)||p.getType&&"combo"!==p.getType()?console.warn("The item is not a combo!"):(t=p.getModel(),r=p.getModel().parentId,n=(n=this.get("comboTrees"))||[],i=this.get("itemMap"),a=p.get("id"),s=[],c=this.get("combos"),u=this.findById(r),l={},(e=e&&this.get("enabledStack"))&&((l=Object(Y.clone)(t)).children=[]),n.forEach(function(t){o||mn(t,function(t){var e,n;return t.id===a&&(o=t,p.getEdges().map(function(t){return t.getID()}).forEach(function(t){f.removeItem(t,!1)}),e=c.indexOf(p),c.splice(e,1),delete i[a],n=Object(Y.clone)(p.getModel()),p.destroy(),f.emit("afterremoveitem",{item:n,type:"combo"})),!r||!o||t.id!==r||(u.removeCombo(p),-1!==(e=(s=t.children).indexOf(o))&&s.splice(e,1),null!=(n=o.children)&&n.forEach(function(t){var e=f.findById(t.id),n=e.getModel();e.getType&&"combo"===e.getType()?(t.parentId=r,delete t.comboId,n.parentId=r,delete n.comboId):e.getType&&"node"===e.getType()&&(t.comboId=r,n.comboId=r),u.addChild(e),s.push(t)}),f.updateCombo(u),!1)})}),!r&&o&&(t=n.indexOf(o),n.splice(t,1),null!=(t=o.children))&&t.forEach(function(t){t.parentId=void 0;var e=f.findById(t.id).getModel();delete e.parentId,delete e.comboId,"node"!==t.itemType&&n.push(t)}),e&&(d={nodes:[],combos:[]},h={nodes:[],combos:[]},null!=(t=o.children)&&t.forEach(function(t){var e=f.findById(t.id).getType();"node"!==e&&"combo"!==e||(d["".concat(e,"s")].push({id:t.id,parentId:a}),h["".concat(e,"s")].push({id:t.id,parentId:r}))}),d.combos.push(l),this.pushStack("uncombo",{before:d,after:h})))},h.prototype.updateCombos=function(r){var o=this,t=(void 0===r&&(r=!1),this.get("comboTrees")),i=this.get("itemController"),a=this.get("itemMap");(t||[]).forEach(function(t){mn(t,function(t){var e,n;return t&&"combo"===(null==(n=null==(e=a[t.id])?void 0:e.getType)?void 0:n.call(e))&&(n=Object(rt.__spreadArray)([],e.getStates(),!0),Object(Y.each)(n,function(t){return o.setItemState(e,t,!1)}),i.updateCombo(e,t.children,r),Object(Y.each)(n,function(t){return o.setItemState(e,t,!0)})),!0})}),this.sortCombos()},h.prototype.updateCombo=function(t){var r,o,i,a=this,e=t;!(e=Object(Y.isString)(t)?this.findById(t):e)||e.getType&&"combo"!==e.getType()?console.warn("The item to be updated is not a combo!"):(r=e.get("id"),t=this.get("comboTrees"),o=this.get("itemController"),i=this.get("itemMap"),(t||[]).forEach(function(t){mn(t,function(t){var e,n;return t&&(e=i[t.id],r===t.id)&&e&&e.getType&&"combo"===e.getType()&&(n=Object(rt.__spreadArray)([],e.getStates(),!0),Object(Y.each)(n,function(t){e.getStateStyle(t)&&a.setItemState(e,t,!1)}),o.updateCombo(e,t.children),Object(Y.each)(n,function(t){e.getStateStyle(t)&&a.setItemState(e,t,!0)}),r=r&&t.parentId),!0})}))},h.prototype.updateComboTree=function(t,e,n){var r;void 0===n&&(n=!0),this.set("comboSorted",!1);var o,t=(r=Object(Y.isString)(t)?this.findById(t):t).getModel(),i=t.comboId||t.parentId,a="";if(r.getType&&(a=r.getType()),e&&"combo"===a){var s,c=this.get("comboTrees"),u=!0;if((c||[]).forEach(function(t){s||v(t,function(t){if(!s)return t.id===r.getID()&&(s=t),!0})}),v(s,function(t){return t.id!==e||(u=!1)}),!u)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}n&&this.get("enabledStack")&&(c={},n={},"combo"===a?(c.combos=[{id:t.id,parentId:t.parentId}],n.combos=[{id:t.id,parentId:e}]):"node"===a&&(c.nodes=[{id:t.id,parentId:t.comboId}],n.nodes=[{id:t.id,parentId:e}]),this.pushStack("updateComboTree",{before:c,after:n})),(t.parentId||t.comboId)&&(c=this.findById(t.parentId||t.comboId))&&c.removeChild(r),"combo"===a?t.parentId=e:"node"===a&&(t.comboId=e),e&&(o=this.findById(e))&&o.addChild(r),i&&(o=this.findById(i))&&o.removeChild(r);n=_n(this.get("comboTrees"),t.id,e);this.set("comboTrees",n),this.updateCombos()},h.prototype.save=function(){var e=[],n=[],r=[];return Object(Y.each)(this.get("nodes"),function(t){e.push(t.getModel())}),Object(Y.each)(this.get("edges"),function(t){n.push(t.getModel())}),Object(Y.each)(this.get("combos"),function(t){r.push(t.getModel())}),{nodes:e,edges:n,combos:r}},h.prototype.changeSize=function(t,e){return this.get("viewController").changeSize(t,e),this},h.prototype.refresh=function(){var t,e,n;this.emit("beforegraphrefresh"),this.get("animate")?this.positionsAnimate():(t=this.get("nodes"),e=this.get("edges"),n=this.get("edges"),Object(Y.each)(t,function(t){t.refresh()}),Object(Y.each)(e,function(t){t.refresh()}),Object(Y.each)(n,function(t){t.refresh()})),this.emit("aftergraphrefresh"),this.autoPaint()},h.prototype.getNodes=function(){return this.get("nodes")},h.prototype.getEdges=function(){return this.get("edges")},h.prototype.getCombos=function(){return this.get("combos")},h.prototype.getComboChildren=function(t){if((t=Object(Y.isString)(t)?this.findById(t):t)&&(!t.getType||"combo"===t.getType()))return t.getChildren();console.warn("The combo does not exist!")},h.prototype.positionsAnimate=function(t){var a=this,e=(a.emit("beforeanimate"),a.get("animateCfg")),s=e.onFrame,n=t?a.getNodes().concat(a.getCombos()):a.getNodes(),r=n.map(function(t){t=t.getModel();return{id:t.id,x:t.x,y:t.y}}),o=(a.stopAnimate(),a.get("canvas"));a.animating=!0,setTimeout(function(){o.animate(function(i){Object(Y.each)(r,function(t){var e,n,r,o=a.findById(t.id);o&&!o.destroyed&&(e=o.get("originAttrs"),n=o.get("model"),r=o.getContainer().getMatrix(),null==e&&(r&&(e={x:r[6],y:r[7]}),o.set("originAttrs",e||0)),s?(r=s(o,i,t,e||{x:0,y:0}),o.set("model",Object.assign(n,r))):e?(n.x=e.x+(t.x-e.x)*i,n.y=e.y+(t.y-e.y)*i):(n.x=t.x,n.y=t.y))}),a.refreshPositions(t)},{duration:e.duration,easing:e.easing,callback:function(){Object(Y.each)(n,function(t){t.set("originAttrs",null)}),e.callback&&e.callback(),a.emit("afteranimate"),a.animating=!1}})},0)},h.prototype.refreshPositions=function(t){this.emit("beforegraphrefreshposition");function e(t){Object(Y.each)(t,function(t){n=t.getModel();var e=t.get("originAttrs");e&&n.x===e.x&&n.y===e.y||(e=t.updatePosition({x:n.x,y:n.y}),s[n.id]=e,n.comboId&&(s[n.comboId]=s[n.comboId]||e),n.parentId&&(s[n.parentId]=s[n.parentId]||e))})}var n,r=this.get("nodes"),o=this.get("edges"),i=this.get("vedges"),a=this.get("combos"),s={};e(a),e(r),a&&0!==a.length&&(t&&e(a),this.updateCombos()),Object(Y.each)(o,function(t){var e=t.getSource().getModel(),n=t.getTarget();!Object(Y.isPlainObject)(n)&&(n=n.getModel(),s[e.id]||s[n.id]||t.getModel().isComboEdge)&&t.refresh()}),Object(Y.each)(i,function(t){t.refresh()}),this.emit("aftergraphrefreshposition"),this.autoPaint()},h.prototype.stopAnimate=function(){var t=this.get("canvas").cfg.timeline;t&&t.stopAllAnimations()},h.prototype.isAnimating=function(){return this.animating},h.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},h.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},h.prototype.setMode=function(t){return this.get("modeController").setMode(t),this},h.prototype.clear=function(t){var e;return void 0===t&&(t=!1),null!=(e=this.get("canvas"))&&e.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},h.prototype.updateLayout=function(t,o,e,n){var i,a=this,r=(void 0===t&&(t={}),void 0===n&&(n=!0),this.get("layoutController")),e=(Object(Y.isString)(t)&&(t={type:t}),o&&(i=(i=e)||("begin"===o?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),i=this.getPointByCanvas(i.x,i.y),(e=["force","gForce","fruchterman","force2"]).includes(t.type)||!t.type&&e.includes(null==r?void 0:r.layoutType)?t.center=[i.x,i.y]:this.once("afterlayout",function(t){var e=a.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1],e=(i.x=i.x*e[0]+e[6],i.y=i.y*e[0]+e[7],a.getGroup().getCanvasBBox()),n=e.minX,r=e.minY,e={x:(n+e.maxX)/2,y:(r+e.maxY)/2};"begin"===o&&(e.x=n,e.y=r),a.translate(i.x-e.x,i.y-e.y)})),Object(rt.__assign)({},this.get("layout"))),s={};Object.assign(s,e,t),t.pipes&&!t.type?delete s.type:!t.pipes&&s.type&&delete s.pipes,this.set("layout",s),r&&(r.isLayoutTypeSame(s)&&s.gpuEnabled===e.gpuEnabled?r.updateLayoutCfg(s):r.changeLayout(s),n)&&this.get("enabledStack")&&this.pushStack("layout",{before:e,after:s})},h.prototype.destroyLayout=function(){var t=this.get("layoutController");null!=t&&t.destroyLayout()},h.prototype.layout=function(){var t=this.get("layoutController"),e=this.get("layout");e&&t&&(!e.workerEnabled&&null!=(e=t.layoutMethods)&&e.length?t.relayout(!0):t.layout())},h.prototype.collapseCombo=function(t,e){var l,d,n,r,h,f=this;void 0===e&&(e=!0),this.destroyed||((t=Object(Y.isString)(t)?this.findById(t):t)?(this.emit("beforecollapseexpandcombo",{action:"collapse",item:t}),l=t.getModel(),this.get("itemController").collapseCombo(t,e),l.collapsed=!0,e=this.getEdges().concat(this.get("vedges")),d=[],n=this.get("comboTrees"),r=!1,(n||[]).forEach(function(t){r||v(t,function(t){return!(r&&t.depth<=l.depth||((r=l.id===t.id||r)&&(t=f.findById(t.id))&&t.getType&&"combo"===t.getType()&&(d=(d=d.concat(t.getNodes())).concat(t.getCombos())),0))})}),h={},e.forEach(function(t){var e=t.getModel(),n=e.isVEdge,e=e.size,e=void 0===e?1:e;if(!t.isVisible()||n){var r,o=t.getSource(),i=t.getTarget(),a=null;if(o.getModel().id===l.id||d.includes(o)&&!d.includes(i)?(a=i,r=!1):(i.getModel().id===l.id||!d.includes(o)&&d.includes(i))&&(a=o,r=!0),a)if(n)f.removeItem(t,!1);else{for(var s=a.getModel();!a.isVisible();){var c=s.parentId,u=s.comboId,c=c||u;if(!(a=f.findById(c))||!c)return;s=a.getModel()}i=s.id,o=r?{source:i,target:l.id,size:e,isVEdge:!0}:{source:l.id,target:i,size:e,isVEdge:!0},n="".concat(o.source,"-").concat(o.target);h[n]?h[n].size+=e:h[n]=o}}}),this.addItems(Object.values(h).map(function(t){return{type:"vedge",model:t}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})):console.warn("The combo to be collapsed does not exist!"))},h.prototype.expandCombo=function(t,e){var p,g,n,r,y,m=this;void 0===e&&(e=!0),!(t=Object(Y.isString)(t)?this.findById(t):t)||t.getType&&"combo"!==t.getType()?console.warn("The combo to be collapsed does not exist!"):(this.emit("beforecollapseexpandcombo",{action:"expand",item:t}),p=t.getModel(),this.get("itemController").expandCombo(t,e),p.collapsed=!1,e=this.getEdges().concat(this.get("vedges")),g=[],n=this.get("comboTrees"),r=!1,(n||[]).forEach(function(t){r||v(t,function(t){return!(r&&t.depth<=p.depth||((r=p.id===t.id||r)&&(t=m.findById(t.id))&&t.getType&&"combo"===t.getType()&&(g=(g=g.concat(t.getNodes())).concat(t.getCombos())),0))})}),y={},e.forEach(function(t){if(!t.isVisible()||t.getModel().isVEdge){var e,n=t.getSource(),r=t.getTarget(),o=n.get("id"),i=r.get("id"),a=null;if(o===p.id||g.includes(n)&&!g.includes(r)?(a=r,e=!1):i===p.id||!g.includes(n)&&g.includes(r)?(a=n,e=!0):g.includes(n)&&g.includes(r)&&n.isVisible()&&r.isVisible()&&t.show(),a){o=t.getModel(),i=o.isVEdge,o=o.size,o=void 0===o?1:o;if(i)m.removeItem(t,!1);else{for(var s=a.getModel();!a.isVisible();){var c=s.parentId,u=s.comboId,c=c||u;if(!(a=m.findById(c))||!c)return;s=a.getModel()}for(var i=s.id,l=e?r:n,d=l.getModel();!l.isVisible();){var h=d.parentId,f=d.comboId,h=h||f;if(!(l=m.findById(h))||!h)return;if(d.comboId===p.id||d.parentId===p.id)break;d=l.getModel()}t=d.id;i&&(n="".concat((r=e?{source:i,target:t,isVEdge:!0,size:o}:{source:t,target:i,isVEdge:!0,size:o}).source,"-").concat(r.target),y[n]?y[n].size+=o:y[n]=r)}}}}),this.addItems(Object.values(y).map(function(t){return{type:"vedge",model:t}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t}))},h.prototype.collapseExpandCombo=function(t,e){if(void 0===e&&(e=!0),(t=Object(Y.isString)(t)?this.findById(t):t)&&(!t.getType||"combo"===t.getType())){for(var n=t.getModel(),r=this.findById(n.parentId);r;){var o=r.getModel();if(o.collapsed)return void console.warn("Fail to expand the combo since it's ancestor combo is collapsed.");r=this.findById(o.parentId)}n.collapsed?this.expandCombo(t,e):this.collapseCombo(t,e),this.updateCombo(t)}},h.prototype.getNeighbors=function(t,e){var n=t;return(n=Object(Y.isString)(t)?this.findById(t):n).getNeighbors(e)},h.prototype.getNodeDegree=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=!1);var r=t,t=(Object(Y.isString)(t)&&(r=this.findById(t)),this.get("degrees")),o=(t&&!n||(t=lt(this.save()),this.set("degrees",t)),t[r.getID()]),i=0;if(!o)return 0;switch(e){case"in":i=o.inDegree;break;case"out":i=o.outDegree;break;case"all":i=o;break;default:i=o.degree}return i},h.prototype.getUndoStack=function(){return this.undoStack},h.prototype.getRedoStack=function(){return this.redoStack},h.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},h.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},h.prototype.pushStack=function(t,e,n){void 0===t&&(t="update"),void 0===n&&(n="undo"),this.get("enabledStack")?(e=e?Object(Y.clone)(e):{before:{},after:Object(Y.clone)(this.save())},("redo"===n?this.redoStack:this.undoStack).push({action:t,data:e}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})):console.warn(" undo & redo  Graph  enabledStack: true !")},h.prototype.getAdjMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix");return n&&t||(n=q(this.save(),e),this.set("adjMatrix",n)),n},h.prototype.getShortestPathMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var n=this.get("adjMatrix"),r=this.get("shortestPathMatrix");return n&&t||(n=q(this.save(),e),this.set("adjMatrix",n)),r&&t||(r=Et(this.save(),e),this.set("shortestPathMatrix",r)),r},h.prototype.on=function(t,e,n){return Cr.prototype.on.call(this,t,e,n)},h.prototype.destroy=function(){var t;this.emit("beforedestroy"),this.clear(),this.clearStack(),null!=(t=this.get("itemController"))&&t.destroy(),null!=(t=this.get("modeController"))&&t.destroy(),null!=(t=this.get("viewController"))&&t.destroy(),null!=(t=this.get("stateController"))&&t.destroy(),null!=(t=this.get("canvas"))&&t.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},h.prototype.createHull=function(t){var e,n;if(t.members&&!(t.members.length<1))return e=this.get("hullGroup"),(n=this.get("hullMap"))||this.set("hullMap",n={}),e&&!e.get("destroyed")||((e=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",e)),n[t.id]?(console.warn("Existed hull id."),n[t.id]):(e=e.addGroup({id:"".concat(t.id,"-container")}),n[(n=new Ar(this,Object(rt.__assign)(Object(rt.__assign)({},t),{group:e}))).id]=n);console.warn("Create hull failed! The members is empty.")},h.prototype.getHulls=function(){return this.get("hullMap")},h.prototype.getHullById=function(t){return this.get("hullMap")[t]},h.prototype.removeHull=function(t){var e,t=Object(Y.isString)(t)?this.getHullById(t):t;null!=(e=this.get("hullMap"))&&delete e[t.id],t.destroy()},h.prototype.removeHulls=function(){var e=this.getHulls();e&&Object.keys(e).length&&(Object.keys(e).forEach(function(t){e[t].destroy()}),this.set("hullMap",{}))},h);function h(t){var o=Cr.call(this)||this;return o.sortCombos=Object(Y.debounce)(function(){var n,r,t=o.get("comboSorted");!o||o.destroyed||t||(o.set("comboSorted",!0),n=[],r={},(o.get("comboTrees")||[]).forEach(function(t){v(t,function(t){return n[t.depth]?n[t.depth].push(t.id):n[t.depth]=[t.id],r[t.id]=t.depth,!0})}),(o.getEdges().concat(o.get("vedges"))||[]).forEach(function(t){var t=t.getModel(),e=r[t.source]||0,e=Math.max(e,r[t.target]||0);n[e]?n[e].push(t.id):n[e]=[t.id]}),n.forEach(function(t){if(t&&t.length)for(var e=t.length-1;0<=e;e--){var n=o.findById(t[e]);n&&n.toFront()}}))},500,!1),o.cfg=Object(Y.deepMix)(o.getDefaultCfg(),t),o.init(),o.animating=!1,o.destroyed=!1,o.cfg.enabledStack&&(o.undoStack=new se(o.cfg.maxStep),o.redoStack=new se(o.cfg.maxStep)),o}function Tr(e,t){this.cfg=Object(Y.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(t){return Object(Y.isString)(t)?e.findById(t):t}),this.nonMembers=this.cfg.nonMembers.map(function(t){return Object(Y.isString)(t)?e.findById(t):t}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}function jr(t){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Nr=x.a.transform,Dr=["startArrow","endArrow"],an={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Pr={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:an,combo:an},sn={options:{labelCfg:{style:{fontFamily:w.windowFontFamily}},descriptionCfg:{style:{fontFamily:w.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t,e){return"move"===e||null!=e&&e.includes("bbox")?t:Object(Y.deepMix)({},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){e.shapeMap={},this.mergeStyle=this.getOptions(t);var n=this.drawShape(t,e);return n.set("className",this.itemType+"-shape"),e.shapeMap[this.itemType+"-shape"]=n,t.label&&((t=this.drawLabel(t,e)).set("className",this.itemType+"-label"),e.shapeMap[this.itemType+"-label"]=t),n},afterDraw:function(t,e,n){},drawShape:function(t,e){return null},drawLabel:function(t,e){var n,r=(this.mergeStyle||this.getOptions(t)||{}).labelCfg||{},o=this.getLabelStyle(t,r,e),i=o.rotate,r=(delete o.rotate,e.addShape("text",{attrs:o,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0}));if(e.shapeMap["text-shape"]=r,!isNaN(i)&&""!==i){var a=r.getBBox(),s=[1,0,0,0,1,0,0,0,1];if(o.rotateCenter)switch(o.rotateCenter){case"center":s=Nr(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]]);break;case"lefttop":s=Nr(s,[["t",-o.x,-o.y],["r",i],["t",o.x,o.y]]);break;case"leftcenter":s=Nr(s,[["t",-o.x,-o.y-a.height/2],["r",i],["t",o.x,o.y+a.height/2]]);break;default:s=Nr(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]])}else s=Nr(s,[["t",-o.x,-o.y-a.height/2],["r",i],["t",o.x,o.y+a.height/2]]);r.setMatrix(s)}return o.background&&(t=this.drawLabelBg(t,e,r),n=this.itemType+"-label-bg",t.set("classname",n),e.shapeMap[n]=t,r.toFront()),r},drawLabelBg:function(t,e,n){var r=this.options.labelCfg,r=Object(Y.mix)({},r,t.labelCfg),t=this.getLabelBgStyleByPosition(n,r),n=e.addShape("rect",{name:"text-bg-shape",attrs:t,labelRelated:!0});return e.shapeMap["text-bg-shape"]=n},getLabelStyleByPosition:function(t,e,n){return{text:t.label}},getLabelBgStyleByPosition:function(t,e){return{}},getLabelStyle:function(t,e,n){t=this.getLabelStyleByPosition(t,e,n),n="".concat(this.itemType,"Label"),n=w[n]?w[n].style:null;return Object(rt.__assign)(Object(rt.__assign)(Object(rt.__assign)({},n),t),e.style)},getShapeStyle:function(t){return t.style},update:function(t,e,n){this.updateShapeStyle(t,e,n),this.updateLabel(t,e,n)},updateShapeStyle:function(t,e,n){var r,o,i=e.getContainer(),a=e.getKeyShape(),s=Object(Y.mix)({},a.attr(),t.style);for(o in s)!function(e){var t,n=s[e];Object(Y.isPlainObject)(n)?null!=(t=(null==(r=i.shapeMap)?void 0:r[e])||i.find(function(t){return t.get("name")===e}))&&t.attr(n):a.attr(((t={})[e]=n,t))}(o)},updateLabel:function(t,e,n){var r,o,e=e.getContainer(),i=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,i=void 0===i?{}:i,a=this.itemType+"-label",s=e.shapeMap[a]||e.find(function(t){return t.get("className")===a}),c=this.itemType+"-label-bg",u=e.shapeMap[c]||e.find(function(t){return t.get("className")===c});s&&void 0===t.label&&(e.removeChild(s),delete e.shapeMap[a],u)&&(e.removeChild(u),delete e.shapeMap[c]),!t.label&&""!==t.label||(s?(n&&"bbox|label"!==n&&("edge"!==this.itemType||"style"===n)||(i=Object(Y.deepMix)(i,t.labelCfg)),n=this.getLabelStyleByPosition(t,i,e),r=null==(r=t.labelCfg)?void 0:r.style,r=(n=Object(rt.__assign)(Object(rt.__assign)({},n),r)).rotate,delete n.rotate,isNaN(r)||""===r?1!==(null==(o=s.getMatrix())?void 0:o[4])&&s.resetMatrix():(o=Nr(o=[1,0,0,0,1,0,0,0,1],[["t",-n.x,-n.y],["r",r],["t",n.x,n.y]]),n.matrix=o),s.attr(n),u?n.background?(r=this.getLabelBgStyleByPosition(s,i),u.attr(r)):e.removeChild(u):n.background&&((u=this.drawLabelBg(t,e,s)).set("classname",c),e.shapeMap[c]=u,s.toFront())):((o=this.drawLabel(t,e)).set("className",a),e.shapeMap[a]=o))},afterUpdate:function(t,e){},setState:function(t,e,n){var r,o,a=n.get("keyShape");if(a&&!a.destroyed){var s=n.getType(),t=Object(Y.isBoolean)(e)?t:"".concat(t,":").concat(e),i=this.getStateStyle(t,n),t=n.getStateStyle(t);if(t||i){var c=Object(Y.mix)({},t||i),u=n.getContainer(),l={x:1,y:1,cx:1,cy:1,matrix:1};if("combo"===s&&(l.r=1,l.width=1,l.height=1),e)for(h in c)!function(e){var t,n=c[e];Object(Y.isPlainObject)(n)&&!Dr.includes(e)?null!=(t=(null==(o=u.shapeMap)?void 0:o[e])||u.find(function(t){return t.get("name")===e}))&&t.attr(n):a.attr(((t={})[e]=n,t))}(h);else{var d,h,f,p=On(n.getCurrentStatesStyle()),t=n.getModel(),g=Object(Y.mix)({},t.style,On(n.getOriginStyle())),y=a.get("name"),m=a.attr(),v={},b=(Object.keys(m).forEach(function(t){var e;"img"!==t&&((e=m[t])&&"object"===jr(e)?v[t]=Object(Y.clone)(e):v[t]=e)}),{});for(d in c)!function(r){var o,i,t=c[r];Object(Y.isPlainObject)(t)&&!Dr.includes(r)?(o=u.shapeMap[r]||u.find(function(t){return t.get("name")===r}))&&(i=On(o.attr()),Object(Y.each)(t,function(t,e){var n;r===y&&v[e]&&!l[e]?(delete v[e],n=g[r][e]||Pr[s][e],a.attr(e,n)):!i[e]&&0!==i[e]||(delete i[e],n=g[r][e]||Pr[s][e],o.attr(e,n))}),b[r]=i):v[r]&&!l[r]&&(delete v[r],t=g[r]||(g[y]?g[y][r]:void 0)||Pr[s][r],a.attr(r,t))}(d);for(h in y?b[y]=v:Object(Y.mix)(b,v),p)l[h]||(f=p[h],Object(Y.isPlainObject)(f)&&!Dr.includes(h))||(y?(Object(Y.mix)(g[y],((r={})[h]=f,r)),delete g[h]):Object(Y.mix)(g,((r={})[h]=f,r)),delete p[h]);var x,w={},_=(Object(Y.deepMix)(w,g,b,p),!1);for(x in w)!function(e){var t,n=w[e];Object(Y.isPlainObject)(n)&&!Dr.includes(e)?(t=u.shapeMap[e]||u.find(function(t){return t.get("name")===e}))&&("text"!==t.get("type")&&!t.get("labelRelated")||(delete n.x,delete n.y,delete n.matrix),e===y&&("combo"===s&&(delete n.r,delete n.width,delete n.height),_=!0),t.attr(n)):_||(t=n||Pr[s][e],"combo"===s?y||a.attr(((n={})[e]=t,n)):a.attr(((n={})[e]=t,n)))}(x)}}}},getStateStyle:function(t,e){var n=e.getModel(),e=e.getType(),r=this.getOptions(n),o=r.stateStyles,r=r.style,r=void 0===r?{}:r,n=n.stateStyles?n.stateStyles[t]:o&&o[t];return"combo"===e?Object(Y.clone)(n):Object(Y.mix)({},r,n)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){return(null==t?void 0:t.anchorPoints)||(null==(t=this.getCustomConfig(t))?void 0:t.anchorPoints)||(null==(t=this.options)?void 0:t.anchorPoints)}},cn={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:w.nodeLabel.offset,getSize:function(t){var e=(null==(e=this.mergeStyle)?void 0:e.size)||t.size||this.getOptions({}).size||w.defaultNode.size;return Object(Y.isArray)(e)&&1===e.length&&(e=[e[0],e[0]]),e=Object(Y.isArray)(e)?e:[e,e]},getLabelStyleByPosition:function(t,e){var n=e.maxLength,r=t.label,n=(n&&(r=xn(r,n)),e.position||this.labelPosition);if("center"===n)return{x:0,y:0,text:r,textBaseline:"middle",textAlign:"center"};var o=e.offset;Object(Y.isNil)(o)&&(o=this.offset);var i,a=this.getSize(t);switch(n){case"top":i={x:0,y:-a[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":i={x:0,y:a[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":i={x:-a[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:i={x:a[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"}}return i.text=r,i},getLabelBgStyleByPosition:function(t,e){var n,r,o;return t&&(e=null==(e=e.style)?void 0:e.background)?(t=t.getBBox(),n=In(e.padding),r=t.width+n[1]+n[3],o=t.height+n[0]+n[2],Object(rt.__assign)(Object(rt.__assign)({x:t.minX-n[3],y:t.minY-n[0]},e),{width:r,height:o})):{}},drawShape:function(t,e){var n=this.shapeType,t=this.getShapeStyle(t),n=e.addShape(n,{attrs:t,draggable:!0,name:"node-shape"});return e.shapeMap["node-shape"]=n},updateLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,r=e.shapeMap["link-point-left"]||e.find(function(t){return"link-point-left"===t.get("className")}),o=e.shapeMap["link-point-right"]||e.find(function(t){return"link-point-right"===t.get("className")}),i=e.shapeMap["link-point-top"]||e.find(function(t){return"link-point-top"===t.get("className")}),a=e.shapeMap["link-point-bottom"]||e.find(function(t){return"link-point-bottom"===t.get("className")}),n=(r&&(s=r.attr()),o&&!s&&(s=o.attr()),i&&!s&&(s=i.attr()),s=(s=a&&!s?a.attr():s)||n,Object(Y.mix)({},s,t.linkPoints)),s=n.fill,c=n.stroke,u=n.lineWidth,l=(l=n.size/2)||n.r,n=t.linkPoints||{left:void 0,right:void 0,top:void 0,bottom:void 0},d=n.left,h=n.right,f=n.top,n=n.bottom,t=this.getSize(t),p=t[0],t=t[1],l={r:l,fill:s,stroke:c,lineWidth:u};r?d||void 0===d?r.attr(Object(rt.__assign)(Object(rt.__assign)({},l),{x:-p/2,y:0})):(r.remove(),delete e.shapeMap["link-point-left"]):d&&(e.shapeMap[s="link-point-left"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},l),{x:-p/2,y:0}),className:s,name:s,isAnchorPoint:!0})),o?(h||void 0===h||(o.remove(),delete e.shapeMap["link-point-right"]),o.attr(Object(rt.__assign)(Object(rt.__assign)({},l),{x:p/2,y:0}))):h&&(e.shapeMap[c="link-point-right"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},l),{x:p/2,y:0}),className:c,name:c,isAnchorPoint:!0})),i?(f||void 0===f||(i.remove(),delete e.shapeMap["link-point-top"]),i.attr(Object(rt.__assign)(Object(rt.__assign)({},l),{x:0,y:-t/2}))):f&&(e.shapeMap[u="link-point-top"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},l),{x:0,y:-t/2}),className:u,name:u,isAnchorPoint:!0})),a?n||void 0===n?a.attr(Object(rt.__assign)(Object(rt.__assign)({},l),{x:0,y:t/2})):(a.remove(),delete e.shapeMap["link-point-bottom"]):n&&(e.shapeMap[r="link-point-bottom"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},l),{x:0,y:t/2}),className:r,name:r,isAnchorPoint:!0}))},updateShape:function(t,e,n,r,o){e.get("keyShape").attr(Object(rt.__assign)({},n)),this.updateLabel(t,e,o),r&&this.updateIcon(t,e)},updateIcon:function(t,e){var n,r,o,i=this,e=e.getContainer(),a=(this.mergeStyle||this.getOptions(t)).icon,t=t.icon||{show:void 0,text:void 0},s=t.show,t=t.text,c=e.shapeMap["".concat(this.type,"-icon")]||e.find(function(t){return t.get("name")==="".concat(i.type,"-icon")});c?s||void 0===s?(n=void 0===(n=(o=Object(Y.mix)({},c.attr(),a)).width)?20:n,r=void 0===(r=o.height)?20:r,"iconfont"!==o.fontFamily&&!o.hasOwnProperty("text")||(r=n=0),c.attr(Object(rt.__assign)(Object(rt.__assign)({},o),{x:-n/2,y:-r/2}))):(c.remove(),delete e.shapeMap["".concat(this.type,"-icon")]):s&&(o="".concat(this.type,"-icon"),t?e.shapeMap[o]=e.addShape("text",{attrs:Object(rt.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:o,name:o}):(n=a.width,r=a.height,e.shapeMap[o]=e.addShape("image",{attrs:Object(rt.__assign)(Object(rt.__assign)({},a),{x:-n/2,y:-r/2}),className:o,name:o})),c=e.shapeMap["node-label"]||e.find(function(t){return"node-label"===t.get("name")}))&&c.toFront()}},un=Object(rt.__assign)(Object(rt.__assign)({},sn),cn),tn=(s.registerNode("single-node",un),{itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:w.defaultEdge.size,style:{x:0,y:0,stroke:w.defaultEdge.style.stroke,lineAppendWidth:w.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:w.edgeLabel.style.fill,fontSize:w.edgeLabel.style.fontSize,fontFamily:w.windowFontFamily}},stateStyles:Object(rt.__assign)({},w.edgeStateStyles)},getPath:function(t){var n=[];return Object(Y.each)(t,function(t,e){n.push(0===e?["M",t.x,t.y]:["L",t.x,t.y])}),n},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},e=Object(Y.mix)({},e,n,t.style),n=t.size||w.defaultEdge.size,r=(t=this.getPathPoints(t)).startPoint,o=t.endPoint,t=this.getControlPoints(t),r=[r],t=((r=t?r.concat(t):r).push(o),this.getPath(r));return Object(Y.mix)({},w.defaultEdge.style,{stroke:w.defaultEdge.color,lineWidth:n,path:t},e)},updateShapeStyle:function(t,e,n){var r=e.getContainer(),o=(null==(o=e.getKeyShape)?void 0:o.call(e))||r.shapeMap["edge-shape"],e=t.size,r=(t=this.getPathPoints(t)).startPoint,i=t.endPoint,a=this.getControlPoints(t),r=[r],i=((r=a?r.concat(a):r).push(i),o.attr()),s=t.style||{},c=(void 0===s.stroke&&(s.stroke=t.color),t.sourceNode),u=t.targetNode,l={radius:s.radius},r=this.getPath(r,l=a?l:{source:c,target:u,offset:s.offset,radius:s.radius}),a={};"move"===n?a={path:r}:(i.endArrow&&!1===s.endArrow&&(t.style.endArrow={path:""}),i.startArrow&&!1===s.startArrow&&(t.style.startArrow={path:""}),void 0===(a=Object(rt.__assign)({},t.style)).lineWidth&&(a.lineWidth=(Object(Y.isNumber)(e)?e:null==e?void 0:e[0])||i.lineWidth),void 0===a.path&&(a.path=r),void 0===a.stroke&&(a.stroke=i.stroke||t.color)),o&&o.attr(a)},getLabelStyleByPosition:function(t,e,n){var r=e.position||this.labelPosition,o={},n=null==n?void 0:n.shapeMap["edge-shape"],i="start"===r?0:"end"===r?1:.5,a=e.refX||this.refX,s=e.refY||this.refY;return t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y?(o.x=t.startPoint.x+a,o.y=t.startPoint.y+s,o.text=t.label):(e=Object(Y.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate,n=yn(n,i,a,s,e),o.x=n.x,o.y=n.y,o.rotate=n.rotate,o.textAlign=this._getTextAlign(r,n.angle),o.text=t.label),o},getLabelBgStyleByPosition:function(t,e){var n,r,o,i,a;return t&&(n=t.getBBox(),a=e.style&&e.style.background)?(r=a.padding,o=n.width+r[1]+r[3],i=n.height+r[0]+r[2],a=Object(rt.__assign)(Object(rt.__assign)({},a),{width:o,height:i,x:n.minX-r[3],y:n.minY-r[0],matrix:[1,0,0,0,1,0,0,0,1]}),(Object(Y.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate)&&(a.matrix=t.attr("matrix")||[1,0,0,0,1,0,0,0,1]),a):{}},_getTextAlign:function(t,e){var n="center";return e?(e%=2*Math.PI,n="center"!==t?0<=e&&e<=Math.PI/2||1.5*Math.PI<=e&&e<2*Math.PI?t:("start"===(e=t)?e="end":"end"===t&&(e="start"),e):n):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){t=this.getShapeStyle(t),t=e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:t});return e.shapeMap["edge-shape"]=t},drawLabel:function(t,e){var n=this.options.labelCfg,n=Object(Y.deepMix)({},n,t.labelCfg),n=this.getLabelStyle(t,n,e),r=n.rotate,o=(delete n.rotate,e.addShape("text",{attrs:n,name:"text-shape",labelRelated:!0,draggable:!0}));return e.shapeMap["text-shape"]=o,isNaN(r)||""===r||o.rotateAtStart(r),n.background&&(t=this.drawLabelBg(t,e,o,n,r),n=this.itemType+"-label-bg",t.set("classname",n),e.shapeMap[n]=t,o.toFront()),o},drawLabelBg:function(t,e,n,r,o){var i=this.options.labelCfg,i=Object(Y.deepMix)({},i,t.labelCfg),t=this.getLabelBgStyleByPosition(n,i),n=e.addShape("rect",{name:"text-bg-shape",attrs:t,labelRelated:!0});return e.shapeMap["text-bg-shape"]=n}}),rn=Object(rt.__assign)(Object(rt.__assign)({},sn),tn),nn=(s.registerEdge("single-edge",rn),s.registerEdge("line",{getControlPoints:function(){}},"single-edge"),s.registerEdge("spline",{getPath:function(t){return lr(t)}},"single-edge"),s.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint,r=(e.x+n.x)/2,o=(e.y+n.y)/2;if(void 0!==t.controlPoints){if(a=t.controlPoints[0],s=ve(e,a,n),e.x<=n.x&&e.y>n.y?this.clockwise=s.x>a.x?0:1:e.x<=n.x&&e.y<n.y?this.clockwise=s.x>a.x?1:0:e.x>n.x&&e.y<=n.y?this.clockwise=s.y<a.y?0:1:this.clockwise=s.y<a.y?1:0,(a.x-e.x)/(a.y-e.y)==(n.x-e.x)/(n.y-e.y))return[]}else{void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),Object(Y.isArray)(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var i={x:n.x-e.x,y:n.y-e.y},i=Math.atan2(i.y,i.x),a={x:t.curveOffset*Math.cos(-Math.PI/2+i)+r,y:t.curveOffset*Math.sin(-Math.PI/2+i)+o},s=ve(e,a,n)}r=be(e,s);return[{x:r,y:r}]},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),2===t.length?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge"),s.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e,n,r=t.controlPoints;return r&&r.length||(e=t.startPoint,n=t.endPoint,void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),Object(Y.isArray)(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),Object(Y.isArray)(t.curvePosition)&&(t.curvePosition=t.curveOffset[0]),r=[dr(e,n,t.curvePosition,t.curveOffset)]),r},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge"),s.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(t){var e,n,r=t.controlPoints;return void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),Object(Y.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),Object(Y.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),r&&r.length&&!(r.length<2)||(e=t.startPoint,r=[dr(e,n=t.endPoint,t.curvePosition[0],t.curveOffset[0]),dr(e,n,t.curvePosition[1],t.curveOffset[1])]),r},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge"),s.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint,r=(void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),Object(Y.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),Object(Y.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),Object(Y.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),n.y-e.y),o=[0,0];return t.curveOffset?o=t.curveOffset:Math.abs(r)<Math.abs(t.minCurveOffset[0])&&(o=t.minCurveOffset),[{x:e.x,y:e.y+r*this.curvePosition[0]+o[0]},{x:n.x,y:n.y-r*this.curvePosition[1]+o[1]}]}},"cubic"),s.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,n=t.endPoint,r=(void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.minCurveOffset&&(t.minCurveOffset=this.minCurveOffset),Object(Y.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),Object(Y.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),Object(Y.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),n.x-e.x),o=[0,0];return t.curveOffset?o=t.curveOffset:Math.abs(r)<Math.abs(t.minCurveOffset[0])&&(o=t.minCurveOffset),[{x:e.x+r*this.curvePosition[0]+o[0],y:e.y},{x:n.x-r*this.curvePosition[1]+o[1],y:n.y}]}},"cubic"),s.registerEdge("loop",{getPathPoints:function(t){return gn(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic"),{itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:w.comboLabel.refX,refY:w.comboLabel.refY,options:{style:{stroke:w.defaultCombo.style.stroke,fill:w.defaultCombo.style.fill,lineWidth:w.defaultCombo.style.lineWidth},labelCfg:{style:{fill:w.comboLabel.style.fill,fontSize:w.comboLabel.style.fontSize,fontFamily:w.windowFontFamily}},stateStyles:Object(rt.__assign)({},w.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(t){t=Object(Y.clone)(t.size||this.options.size||w.defaultCombo.size);return Object(Y.isArray)(t)&&1===t.length&&(t=[t[0],t[0]]),t=Object(Y.isArray)(t)?t:[t,t]},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,r=t.style,o=t.padding||this.options.padding,i=(Object(Y.isArray)(o)&&(o=Math.max.apply(Math,o)),e.refX),a=e.refY;Object(Y.isNil)(i)&&(i=this.refX),Object(Y.isNil)(a)&&(a=this.refY);var s,e=this.getSize(t),c=(Math.max(r.r,e[0]/2)||e[0]/2)+o;switch(n){case"top":s={x:0,y:-c-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:c+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-c+i,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;default:s={x:c+i,y:0,textAlign:"right"}}return s.text=t.label,s},drawShape:function(t,e){var n=this.shapeType,t=this.getShapeStyle(t);return e.addShape(n,{attrs:t,draggable:!0,name:"combo-shape"})},updateCollapsedIcon:function(t,e,n){var r=t.collapsed,t=t.collapsedSubstituteIcon,t=Object.assign({},this.options.collapsedSubstituteIcon,void 0===t?{}:t),o=t.show,i=t.img,a=t.width,t=t.height,s=e.getContainer(),c=s.find(function(t){return"combo-collapsed-substitute-icon"===t.get("name")}),u=c&&!c.destroyed,e=e.get("keyShape");r&&o?(u?c.show():(r={width:a||2*n.r||n.width,height:t||2*n.r||n.height},c=s.addShape("image",{attrs:Object(rt.__assign)({img:i,x:-r.width/2,y:-r.height/2},r),name:"combo-collapsed-substitute-icon",draggable:!0})),e.hide()):u&&(c.hide(),e.show())},updateShape:function(t,e,n){var r=this,o=e.get("keyShape");e.get("animate")&&(void 0===t.animate?this.options:t).animate&&o.animate?(t.collapsed||this.updateCollapsedIcon(t,e,n),o.animate(n,{duration:200,easing:"easeLinear",callback:function(){t.collapsed&&r.updateCollapsedIcon(t,e,n)}})):(o.attr(Object(rt.__assign)({},n)),this.updateCollapsedIcon(t,e,n)),this.updateLabel(t,e)}}),en=Object(rt.__assign)(Object(rt.__assign)({},sn),nn),H=(s.registerCombo("single-combo",en),s.registerCombo("circle",{options:{size:[w.defaultCombo.size[0],w.defaultCombo.size[0]],padding:Math.max.apply(Math,w.defaultCombo.padding),animate:!0,style:{stroke:w.defaultCombo.style.stroke,fill:w.defaultCombo.style.fill,lineWidth:w.defaultCombo.style.lineWidth},labelCfg:{style:{fill:w.comboLabel.style.fill,fontSize:w.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(rt.__assign)({},w.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){t=this.getShapeStyle(t);return delete t.height,delete t.width,e.addShape("circle",{attrs:t,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;Object(Y.isArray)(n)&&(n=Math.max.apply(Math,n));var r={stroke:t.color},e=Object(Y.mix)({},e,r,t.style),r=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize,n=(r=r?Object(Y.isNumber)(r)?r/2:r[0]/2:(r=this.getSize(t),!Object(Y.isNumber)(e.r)||isNaN(e.r)?r[0]/2||w.defaultCombo.style.r:Math.max(e.r,r[0]/2)||r[0]/2),e.r=r+n,Object(rt.__assign)({x:0,y:0},e));return t.style?t.style.r=r:t.style={r:r},n},update:function(t,e){var n=this.getSize(t),r=t.padding||this.options.padding;Object(Y.isArray)(r)&&(r=Math.max.apply(Math,r));var o=Object(Y.clone)(t.style),i=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize,i=i?Object(Y.isNumber)(i)?i/2:i[0]/2:Math.max(o.r,n[0]/2)||n[0]/2,n=(o.r=i+r,e.get("sizeCache")),r=(n&&(n.r=o.r),{stroke:t.color}),n=e.get("keyShape"),n=Object(Y.mix)({},n.attr(),r,o);t.style?t.style.r=i:t.style={r:i},this.updateShape(t,e,n,!0)}},"single-combo"),s.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:w.defaultCombo.style.stroke,fill:w.defaultCombo.style.fill,lineWidth:w.defaultCombo.style.lineWidth},labelCfg:{style:{fill:w.comboLabel.style.fill,fontSize:w.comboLabel.style.fontSize,fontFamily:w.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(rt.__assign)({},w.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){t=this.getShapeStyle(t);return e.addShape("rect",{attrs:t,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(t,e){var n=e.position||this.labelPosition,r=t.style,o=t.padding||this.options.padding,i=(Object(Y.isNumber)(o)&&(o=[o,o,o,o]),e.refX),a=e.refY;Object(Y.isNil)(i)&&(i=this.refX),Object(Y.isNil)(a)&&(a=this.refY);var s,c=-r.width/2-o[3],u=r.width/2+o[1],l=-r.height/2-o[0],d=r.height/2+o[2];switch(n){case"top":s={x:c+i,y:l+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:d+a,textBaseline:"top",textAlign:"center"};break;case"left":s={x:c+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;case"top-center":s={x:0,y:l+a,textBaseline:"top",textAlign:"center"};break;default:s={x:u+i,y:0,textAlign:"right"}}return s.text=t.label,s},getShapeStyle:function(t){var e=this.options.style,n=t.padding||this.options.padding;Object(Y.isNumber)(n)&&(n=[n,n,n,n]);var r,o={stroke:t.color},e=Object(Y.mix)({},e,o,t.style),o=this.getSize(t),i=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize,i=i?Object(Y.isNumber)(i)?r=i:(r=i[0],i[1]):(r=!Object(Y.isNumber)(e.width)||isNaN(e.width)?o[0]||w.defaultCombo.style.width:Math.max(e.width,o[0])||o[0],!Object(Y.isNumber)(e.height)||isNaN(e.height)?o[1]||w.defaultCombo.style.height:Math.max(e.height,o[1])||o[1]),o=-r/2-n[3],a=-i/2-n[0],n=(e.width=r+n[1]+n[3],e.height=i+n[0]+n[2],Object(rt.__assign)({x:o,y:a},e));return t.style?(t.style.width=r,t.style.height=i):t.style={width:r,height:i},n},update:function(t,e){var n=this.getSize(t),r=t.padding||this.options.padding;Object(Y.isNumber)(r)&&(r=[r,r,r,r]);var o,i=Object(Y.clone)(t.style),a=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize,a=a?Object(Y.isNumber)(a)?o=a:(o=a[0],a[1]):(o=Math.max(i.width,n[0])||n[0],Math.max(i.height,n[1])||n[1]),n=(i.width=o+r[1]+r[3],i.height=a+r[0]+r[2],e.get("sizeCache")),n=(n&&(n.width=i.width,n.height=i.height),i.x=-o/2-r[3],i.y=-a/2-r[0],{stroke:t.color}),r=e.get("keyShape"),r=Object(Y.mix)({},r.attr(),n,i);t.style?(t.style.width=o,t.style.height=a):t.style={width:o,height:a},this.updateShape(t,e,r,!1)}},"single-combo"),s.registerNode("simple-circle",{options:{size:w.defaultNode.size,style:{x:0,y:0,stroke:w.defaultNode.style.stroke,fill:w.defaultNode.style.fill,lineWidth:w.defaultNode.style.lineWidth},labelCfg:{style:{fill:w.nodeLabel.style.fill,fontSize:w.nodeLabel.style.fontSize,fontFamily:w.windowFontFamily}},stateStyles:Object(rt.__assign)({},w.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(t,e){var t=this.getShapeStyle(t),n="".concat(this.type,"-keyShape"),t=e.addShape("circle",{attrs:t,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return e.shapeMap[n]=t},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},e=Object(Y.deepMix)({},e,n),n=this.getSize(t)[0]/2;return Object(rt.__assign)({x:0,y:0,r:n},e)},update:function(t,e,n){var r=this.getSize(t),r={stroke:t.color,r:r[0]/2},o=e.get("keyShape"),o=Object(Y.deepMix)({},o.attr(),r,t.style);this.updateShape(t,e,o,!0,n)}},"single-node"),s.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:w.defaultNode.style.stroke,fill:w.defaultNode.style.fill,lineWidth:w.defaultNode.style.lineWidth},labelCfg:{style:{fill:w.nodeLabel.style.fill,fontSize:w.nodeLabel.style.fontSize,fontFamily:w.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(rt.__assign)({},w.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(t,e){t=this.getShapeStyle(t);return e.addShape("rect",{attrs:t,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0})},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},e=Object(Y.mix)({},e,n),n=this.getSize(t),t=e.width||n[0],n=e.height||n[1];return Object(rt.__assign)({x:-t/2,y:-n/2,width:t,height:n},e)},update:function(t,e,n){e.getContainer();var r=(this.mergeStyle||this.getOptions(t)).style,o=this.getSize(t),i=e.get("keyShape"),o=(t.size||(o[0]=i.attr("width")||r.width,o[1]=i.attr("height")||r.height),{stroke:t.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]}),r=Object(Y.mix)({},r,i.attr(),o),r=Object(Y.mix)(r,t.style);this.updateShape(t,e,r,!1,n)}},"single-node"),s.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:w.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var n=this.shapeType,r=this.getShapeStyle(t),e=(delete r.fill,e.addShape(n,{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}));return this.drawClip(t,e),e},drawClip:function(t,e){var n,r,o,i,a,s,c,u,t=(this.mergeStyle||this.getOptions(t)).clipCfg;t.show&&(r=t.x,o=t.y,i=t.style,"circle"===(n=t.type)?(c=t.r,e.setClip({type:"circle",attrs:Object(rt.__assign)({r:c,x:r,y:o},i)})):"rect"===n?(a=r-(c=t.width)/2,s=o-(u=t.height)/2,e.setClip({type:"rect",attrs:Object(rt.__assign)({x:a,y:s,width:c,height:u},i)})):"ellipse"===n?(a=t.rx,s=t.ry,e.setClip({type:"ellipse",attrs:Object(rt.__assign)({x:r,y:o,rx:a,ry:s},i)})):"polygon"===n?(c=t.points,e.setClip({type:"polygon",attrs:Object(rt.__assign)({points:c},i)})):"path"===n&&(u=t.path,e.setClip({type:"path",attrs:Object(rt.__assign)({path:u},i)})))},getShapeStyle:function(t){var e=this.mergeStyle||this.getOptions(t),n=e.style,e=e.img,t=this.getSize(t),r=t[0],o=t[1];return n&&(r=n.width||t[0],o=n.height||t[1]),Object(rt.__assign)({x:-r/2,y:-o/2,width:r,height:o,img:e},n)},updateShapeStyle:function(t,e){var n=e.getContainer(),r="".concat(this.itemType,"-shape"),n=n.shapeMap[r]||n.find(function(t){return t.get("className")===r})||e.getKeyShape(),e=this.getShapeStyle(t);n&&!n.destroyed&&n.attr(e)}},"single-node"),{collapse:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t+n-4,e]]},expand:function(t,e,n){return[["M",t-n,e],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",t-n+4,e],["L",t-n+2*n-4,e],["M",t-n+n,e-n+4],["L",t,e+n-4]]},upTriangle:function(t,e,n){var r=n*Math.cos(Math.PI/6),o=n*Math.sin(Math.PI/6);return[["M",t-r,e+o],["L",t+r,e+o],["L",t,e-n],["Z"]]},downTriangle:function(t,e,n){var r=n*Math.cos(Math.PI/6),o=n*Math.sin(Math.PI/6);return[["M",t-r,e-o],["L",t+r,e-o],["L",t,e+n],["Z"]]}}),an=s,Lr=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Rr=function(t){return"force"===t||"g6force"===t||"gForce"===t||"force2"===t},cn=x.a.transform,Br=Object(rt.__assign)(Object(rt.__assign)(Object(rt.__assign)(Object(rt.__assign)(Object(rt.__assign)(Object(rt.__assign)(Object(rt.__assign)({},R),r),o),n),B),z),{transform:cn,mat3:x.b}),un=(p.prototype.initLayout=function(){},p.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},p.prototype.getLayoutCfgType=function(t){var e=t.type;return e||(e=t.pipes,Array.isArray(e)?e.map(function(t){return(null==t?void 0:t.type)||""}):null)},p.prototype.isLayoutTypeSame=function(t){var n=this.getLayoutCfgType(t),e=Array.isArray(this.layoutType),r=Array.isArray(n);return e&&r?this.layoutType.every(function(t,e){return t===n[e]}):!Array.isArray(n)&&!Array.isArray(this.layoutType)&&(null==t?void 0:t.type)===this.layoutType},p.prototype.refreshLayout=function(){var t,e=this.graph,n=this.layoutType,r=this.layoutCfg;e&&(t=void 0===(r=(void 0===r?{}:r).animate)&&("force"===n||"force2"===n),r=Rr(n)&&(r||t),e.get("animate")&&!r?e.positionsAnimate("comboCombined"===n):e.refreshPositions("comboCombined"===n))},p.prototype.changeLayout=function(t){var e=t.disableTriggerLayout,t=Object(rt.__rest)(t,["disableTriggerLayout"]);this.layoutCfg=t,this.layoutType=t.type||this.layoutType,e||this.layout()},p.prototype.changeData=function(t){this.layout(t)},p.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods,n=[];return null!=t&&t.forEach(function(t){var e=null==(e=t.getType)?void 0:e.call(t);e&&n.push(e),t.destroy()}),this.layoutMethods=[],n},p.prototype.destroyLayout=function(){this.destoryLayoutMethods();var t=this.graph;t&&!t.get("destroyed")&&t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},p.prototype.setDataFromGraph=function(){for(var t,e=[],n=[],r=[],o=[],i=[],a=[],s=[],c=this.graph.getNodes(),u=this.graph.getEdges(),l=this.graph.getCombos(),d=c.length,h=0;h<d;h++){var f,p=c[h];p&&!p.destroyed&&(f=p.getModel(),(p.isVisible()?e:n).push(f))}for(var g=u.length,h=0;h<g;h++){var y=u[h];y&&!y.destroyed&&(f=y.getModel(),(y.isVisible()?f.isComboEdge?i:r:o).push(f))}var m=l.length;for(h=0;h<m;h++){var v=l[h];v.destroyed||(f=v.getModel(),(v.isVisible()?a:s).push(f))}return{nodes:e,hiddenNodes:n,edges:r,hiddenEdges:o,combos:a,hiddenCombos:s,comboEdges:i,vedges:null==(t=this.graph.get("vedges"))?void 0:t.map(function(t){return t.getModel()})}},p.prototype.relayout=function(t){var o=this,e=this.graph,i=this.layoutMethods,a=this.layoutCfg;if(e&&!e.get("destroyed")){var s=Promise.resolve();if(t){this.data=this.setDataFromGraph();t=this.data.nodes;if(!t)return!1;s=this.initPositions(a.center,t)}e.emit("beforelayout"),null!=i&&i.forEach(function(t,n){var r=a[n]||a;s=s.then(function(){var t,e=o.execLayoutMethod(r,n);return n!==i.length-1||null!=(t=a.onAllLayoutEnd)&&t.call(a),e})})}},p.prototype.filterLayoutData=function(t,e){var n,r,o=t.nodes,i=t.edges,a=Object(rt.__rest)(t,["nodes","edges"]);return o?(r=Object(Y.isFunction)(null==e?void 0:e.nodesFilter)?e.nodesFilter:function(){return!0},o=o.filter(r),r=Object(Y.isFunction)(null==e?void 0:e.edgesFilter)?e.edgesFilter:(n=o.reduce(function(t,e){return t[e.id]=!0,t},{}),function(t){return n[t.source]&&n[t.target]}),Object(rt.__assign)({nodes:o,edges:i.filter(r)},a)):t},p.prototype.getLayoutBBox=function(t){var e=this.graph,e=Object(Y.groupBy)(e.getNodes(),function(t){return t.getModel().layoutOrder}),e=Object.values(e).map(function(t){t=Dn(t);return t.size=[t.width,t.height],t});return{groupNodes:Object.values(Object(Y.groupBy)(t,"layoutOrder")),layoutNodes:e}},p.prototype.layoutAnimate=function(){},p.prototype.moveToZero=function(){var t=this.graph.get("data").nodes;if(void 0!==t[0].x&&null!==t[0].x&&!Nn(t[0].x)){for(var e=[0,0],n=t.length,r=0;r<n;r++){var o=t[r];e[0]+=o.x,e[1]+=o.y}for(e[0]/=t.length,e[1]/=t.length,r=0;r<n;r++)(o=t[r]).x-=e[0],o.y-=e[1]}},p.prototype.initPositions=function(h,e){var n;return Object(rt.__awaiter)(this,void 0,void 0,function(){var u,l,d;return Object(rt.__generator)(this,function(t){return u=this.graph,null!=e&&e.length?(l=e.filter(function(t){return Nn(t.x)||Nn(t.y)}),(d=l?l.length:0)?[2,null==(n=this.initWithPreset)?void 0:n.call(this,function(){},function(){var t=.85*u.get("width"),e=.85*u.get("height"),n=Math.ceil(Math.sqrt(d)*(t/e)),r=t/(n-1),o=e/(Math.ceil(d/n)-1);isFinite(r)&&r||(r=0),isFinite(o)&&r||(o=0);for(var i=h[0]-t/2,a=h[1]-e/2,s=0;s<d;s++){var c=l[s];Nn(+c.x)&&(c.x=s%n*r+i),Nn(+c.y)&&(c.y=Math.floor(s/n)*o+a)}})]:[2]):[2,Promise.resolve()]})})},p.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},p),tn=an.registerNode,rn=an.registerEdge,sn=an.registerCombo,zr=i.registerBehavior,f=w,nn=(an.registerNode,an.registerEdge,an.registerCombo,i.registerBehavior,t(256)),Fr=t(103),Gr=t(126),N=t(81),en=t(279),Ur=t.n(en),R=t(285),Wr=t.n(R),Xr=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function p(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}function Yr(t,e,n){return(n=60<=Math.round(t.h)&&Math.round(t.h)<=240?n?Math.round(t.h)-2*e:Math.round(t.h)+2*e:n?Math.round(t.h)+2*e:Math.round(t.h)-2*e)<0?n+=360:360<=n&&(n-=360),n}function Vr(t,e,n){return 0===t.h&&0===t.s?t.s:(1<(t=n?t.s-.16*e:4===e?t.s+.16:t.s+.05*e)&&(t=1),(t=n&&5===e&&.1<t?.1:t)<.06&&(t=.06),Number(t.toFixed(2)))}function Hr(t,e,n){return 1<(n=n?t.v+.05*e:t.v-.15*e)&&(n=1),Number(n.toFixed(2))}function qr(t,e){for(var n=1<arguments.length&&void 0!==e?e:{},r=[],o=Wr()(t),i=5;0<i;--i){var a=o.toHsv(),a=Wr()({h:Yr(a,i,!0),s:Vr(a,i,!0),v:Hr(a,i,!0)}).toHexString();r.push(a)}r.push(o.toHexString());for(var s=1;s<=4;s+=1){var c=o.toHsv(),c=Wr()({h:Yr(c,s),s:Vr(c,s),v:Hr(c,s)}).toHexString();r.push(c)}return"dark"===n.theme?Xr.map(function(t){var e=t.index;return Wr.a.mix(n.backgroundColor||"#141414",r[e],100*t.opacity).toHexString()}):r}function Kr(t,n){t.isGroup()&&n.isGroup()&&null!=(e=t.get("children"))&&e.forEach(function(t,e){e=n.get("children")[e];Kr(t,e)});var e=t.get("type"),r=n.get("type");"image"===e&&"image"===r&&(e=t.get("clipShape"))&&n.setClip({type:e.get("type"),attrs:e.attr()})}var Zr,$r={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Qr={},Jr={},y=(Object.keys($r).forEach(function(t){Qr[t]=qr($r[t]),Qr[t].primary=Qr[t][5],Jr[t]=qr($r[t],{theme:"dark",backgroundColor:"#141414"}),Jr[t].primary=Jr[t][5]}),function(t,e,n){t=Ur()(t),e=Ur()(e);return Ur()([(1-n)*t.red()+n*e.red(),(1-n)*t.green()+n*e.green(),(1-n)*t.blue()+n*e.blue()]).rgb()}),to=function(t,e,n,r){return void 0===e&&(e="#fff"),void 0===r&&(r="rgb(150, 150, 150)"),"default"===(n=void 0===n?"default":n)?(void 0===(r="rgb(150, 150, 150)")&&(r="rgb(150, 150, 150)"),i=y(n=void 0===(n=e)?"#fff":n,o=t,.05).rgb().toString(),a=y(n,o,.1).rgb().toString(),s=y(n,o,.2).rgb().toString(),c=y(n,o,.4).rgb().toString(),u=y(n,r,.02).rgb().toString(),l=y(n,r,.05).rgb().toString(),d=y(n,r,.1).rgb().toString(),h=y(n,r,.2).rgb().toString(),r=y(n,r,.3).rgb().toString(),f=qr(o,{theme:"default",backgroundColor:n}),p=Ur()(o).hex().toLowerCase(),p=f.indexOf(p),{mainStroke:g=o,mainFill:a,activeStroke:o,activeFill:i,inactiveStroke:c,inactiveFill:i,selectedStroke:o,selectedFill:n,highlightStroke:g=-1!==p?f[p+1]:g,highlightFill:s,disableStroke:r,disableFill:l,edgeMainStroke:r,edgeActiveStroke:o,edgeInactiveStroke:h,edgeSelectedStroke:o,edgeHighlightStroke:o,edgeDisableStroke:d,comboMainStroke:r,comboMainFill:u,comboActiveStroke:o,comboActiveFill:i,comboInactiveStroke:r,comboInactiveFill:u,comboSelectedStroke:o,comboSelectedFill:u,comboHighlightStroke:g,comboHighlightFill:u,comboDisableStroke:h,comboDisableFill:l}):(void 0===(a="#777")&&(a="#777"),f=y(c=void 0===(c=e)?"#fff":c,n=t,.2).rgb().toString(),p=y(c,n,.3).rgb().toString(),s=y(c,n,.6).rgb().toString(),d=y(c,n,.8).rgb().toString(),i=y(c,a,.2).rgb().toString(),r=y(c,a,.25).rgb().toString(),o=y(c,a,.3).rgb().toString(),g=y(c,a,.4).rgb().toString(),u=y(c,a,.5).rgb().toString(),c=qr(n,{theme:"dark",backgroundColor:c}),h=Ur()(n).hex().toLowerCase(),h=c.indexOf(h),{mainStroke:d,mainFill:f,activeStroke:l=n,activeFill:p,inactiveStroke:d,inactiveFill:f,selectedStroke:n,selectedFill:f,highlightStroke:n,highlightFill:s,disableStroke:u,disableFill:r,edgeMainStroke:a,edgeActiveStroke:n,edgeInactiveStroke:a,edgeSelectedStroke:n,edgeHighlightStroke:n,edgeDisableStroke:o,comboMainStroke:g,comboMainFill:r,comboActiveStroke:n,comboActiveFill:i,comboInactiveStroke:g,comboInactiveFill:r,comboSelectedStroke:n,comboSelectedFill:i,comboHighlightStroke:l=-1!==h?c[h+1]:l,comboHighlightFill:r,comboDisableStroke:g,comboDisableFill:i});var o,i,a,s,c,u,l,d,h,f,p,g},eo=function(t,e,n,r){void 0===e&&(e="#fff"),void 0===n&&(n="default"),void 0===r&&(r="rgb(150, 150, 150)");var o=[];return t.forEach(function(t){o.push(to(t,e,n,r))}),o},r=to("rgb(95, 149, 255)","rgb(255, 255, 255)"),no={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:r.mainStroke,fill:r.mainFill},size:20,color:r.mainStroke,linkPoints:{size:8,lineWidth:1,fill:r.activeFill,stroke:r.activeStroke}},nodeStateStyles:{active:{fill:r.activeFill,stroke:r.activeStroke,lineWidth:2,shadowColor:r.mainStroke,shadowBlur:10},selected:{fill:r.selectedFill,stroke:r.selectedStroke,lineWidth:4,shadowColor:r.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:r.highlightFill,stroke:r.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:r.inactiveFill,stroke:r.inactiveStroke,lineWidth:1},disable:{fill:r.disableFill,stroke:r.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:r.edgeMainStroke,lineAppendWidth:2},color:r.edgeMainStroke},edgeStateStyles:{active:{stroke:r.edgeActiveStroke,lineWidth:1},selected:{stroke:r.edgeSelectedStroke,lineWidth:2,shadowColor:r.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:r.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:r.edgeInactiveStroke,lineWidth:1},disable:{stroke:r.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:r.comboMainFill,lineWidth:1,stroke:r.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:r.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:r.comboActiveStroke,lineWidth:1,fill:r.comboActiveFill},selected:{stroke:r.comboSelectedStroke,lineWidth:2,fill:r.comboSelectedFill,shadowColor:r.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:r.comboHighlightStroke,lineWidth:2,fill:r.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:r.comboInactiveStroke,fill:r.comboInactiveFill,lineWidth:1},disable:{stroke:r.comboDisableStroke,fill:r.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},ro=Br.cloneEvent,oo=Br.isViewportChanged,io=(Zr=function(t){this.graph=t,this.destroyed=!1,this.initEvents()},Object(rt.__extends)(xo,Zr),xo.prototype.initEvents=function(){var t=this.graph,e=this.extendEvents,e=void 0===e?[]:e,n=t.get("canvas"),r=n.get("el"),o=Object(Y.wrapBehavior)(this,"onCanvasEvents"),i=Object(Y.wrapBehavior)(this,"onExtendEvents"),a=Object(Y.wrapBehavior)(this,"onWheelEvent");n.off("*").on("*",o),this.canvasHandler=o,e.push(Object(N.a)(r,"wheel",a)),"undefined"!=typeof window&&(e.push(Object(N.a)(window,"keydown",i)),e.push(Object(N.a)(window,"keyup",i)),e.push(Object(N.a)(window,"focus",i))),this.resetHandler&&t.off("afterchangedata",this.resetHandler),this.resetHandler=Object(Y.wrapBehavior)(this,"resetStatus"),t.on("afterchangedata",this.resetHandler)},xo.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},xo.prototype.onCanvasEvents=function(t){var e=this,n=this.graph,r=n.get("canvas"),o=t.target,i=t.type;switch(i){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"mouseup":setTimeout(function(){return e.mousedown=!1});break;case"click":if(!this.mousedown)return}t.canvasX=t.x,t.canvasY=t.y;var a={x:t.canvasX,y:t.canvasY},s=n.get("group").getMatrix();oo(s=s||[1,0,0,0,1,0,0,0,1])&&(a=n.getPointByClient(t.clientX,t.clientY)),t.x=a.x,t.y=a.y,t.currentTarget=n,o===r?("mousemove"!==i&&"mouseleave"!==i||this.handleMouseMove(t,"canvas"),t.target=r,t.item=null,n.emit(i,t),n.emit("canvas:".concat(i),t)):(s=xo.getItemRoot(o))?(a=s.get("item")).destroyed||(r=a.getType(),t.target=o,t.item=a,t.canvasX===t.x&&t.canvasY===t.y&&(s=n.getCanvasByPoint(t.x,t.y),t.canvasX=s.x,t.canvasY=s.y),t.name&&!t.name.includes(":")?(n.emit("".concat(r,":").concat(i),t),n.emit(i,t)):t.name&&n.emit(t.name,t),"dragstart"===i&&(this.dragging=!0),"dragend"===i&&(this.dragging=!1),"mousemove"===i&&this.handleMouseMove(t,r)):n.emit(i,t)},xo.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},xo.prototype.onWheelEvent=function(t){Object(Y.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},xo.prototype.handleMouseMove=function(t,e){var n=this.graph,r=this.preItem,n=n.get("canvas"),n=t.target===n?null:t.item;t=ro(t),r&&r!==n&&!r.destroyed&&(t.item=r,this.emitCustomEvent(r.getType(),"mouseleave",t),this.dragging)&&this.emitCustomEvent(r.getType(),"dragleave",t),n&&r!==n&&(t.item=n,this.emitCustomEvent(e,"mouseenter",t),this.dragging)&&this.emitCustomEvent(e,"dragenter",t),this.preItem=n},xo.prototype.emitCustomEvent=function(t,e,n){n.type=e,this.graph.emit("".concat(t,":").concat(e),n)},xo.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},xo.prototype.destroy=function(){var t=this.graph,e=this.canvasHandler,n=this.extendEvents;t.get("canvas").off("*",e),Object(Y.each)(n,function(t){t.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},xo),m=t(188),o=t(216),ao=t.n(o),so=Br.traverseTree,co=function(e,n){return e?Object(Y.isNumber)(e)?function(t){return e}:e:function(t){return n||1}},uo=function(t,e){for(var n=[],r=[],o={},i=0,i=0;i<t.length;i++){var a=t[i];o[a.id]=i,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(i=0;i<e.length;i++){var s=e[i];r[o[s.source]].push(o[s.target]),r[o[s.target]].push(o[s.source])}var c=0;for(i=0;i<t.length;i++){var u=r[i],l=u.length;n[4*i+2]=n.length,n[4*i+3]=u.length;for(var c=Math.max(c,u.length),d=0;d<l;++d){var h=u[d];n.push(+h)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},lo=function(t,e,n){for(var r=[],o=[],i={},a=0,a=0;a<t.length;a++){var s=t[a];i[s.id]=a,r.push(s.x),r.push(s.y),r.push(0),r.push(0),o.push([])}for(a=0;a<e.length;a++){var c=e[a];o[i[c.source]].push(i[c.target]),o[i[c.source]].push(n(c)),o[i[c.target]].push(i[c.source]),o[i[c.target]].push(n(c))}var u=0;for(a=0;a<t.length;a++){var l=o[a],d=l.length;r[4*a+2]=r.length,r[4*a+3]=d/2;for(var u=Math.max(u,d/2),h=0;h<d;++h){var f=l[h];r.push(+f)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:u}},ho=function(t,e,n,r){for(var o=[],i=[],a={},s=0,s=0;s<t.length;s++){var c=t[s];a[c.id]=s,o.push(c.x),o.push(c.y),o.push(0),o.push(0),i.push([])}for(s=0;s<e.length;s++){var u=e[s];i[a[u.source]].push(a[u.target]),i[a[u.source]].push(n(u)),i[a[u.source]].push(r(u)),i[a[u.source]].push(0),i[a[u.target]].push(a[u.source]),i[a[u.target]].push(n(u)),i[a[u.target]].push(r(u)),i[a[u.target]].push(0)}var l=0;for(s=0;s<t.length;s++){var d=i[s],h=d.length;o[4*s+2]=o.length+1048576*h/4,o[4*s+3]=0;for(var l=Math.max(l,h/4),f=0;f<h;++f){var p=d[f];o.push(+p)}}for(;o.length%4!=0;)o.push(0);return{array:new Float32Array(o),maxEdgePerVetex:l}},fo=function(t,e){var r=[],o=t.length,i={};return e.forEach(function(n){t.forEach(function(t,e){if(void 0===i[n[t]]&&(i[n[t]]=Object.keys(i).length),r.push(i[n[t]]),e===o-1)for(;r.length%4!=0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(i).length}},po=function(t){for(var r=[],o=t.length,e=t[0].length,n=0;n<e;n++)!function(n){t.forEach(function(t,e){if(r.push(t[n]),e===o-1)for(;r.length%4!=0;)r.push(0)})}(n);return new Float32Array(r)},go=function(r,t){var o={x:1/0,y:1/0},e={x:-1/0,y:-1/0},i="x",a="y",n=(t&&0<=["V","TB","BT"].indexOf(t)&&(a="x",i="y"),0),s=(so(r,function(t){return n++,t.x>e.x&&(e.x=t.x),t.x<o.x&&(o.x=t.x),e.y<t.y&&(e.y=t.y),t.y<o.y&&(o.y=t.y),!0}),2*Math.PI/n),c=e[a]-o[a];return 0!=c&&so(r,function(t){var e=(t[a]-o[a])/c*(2*Math.PI-s)+s,n=Math.abs("x"===i?t.x-r.x:t.y-r.y);return t.x=n*Math.cos(e),t.y=n*Math.sin(e),!0}),r},yo=function r(){return"undefined"==typeof window||"undefined"==typeof document?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=(window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.']:['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.']).join("\n")),t},addGetWebGLMessage:function(t){var e=void 0!==(t=t||{}).parent?t.parent:document.body,t=void 0!==t.id?t.id:"oldie",n=r().getWebGLErrorMessage();n.id=t,e.appendChild(n)}}},mo=function(){var t=navigator.userAgent.toLowerCase();return-1<t.indexOf("firefox")?"firefox":-1<t.indexOf("safari")?"safari":-1<t.indexOf("opr")?"opera":-1<t.indexOf("chrome")?"chrome":-1<t.indexOf("trident")?"ie 11":-1<t.indexOf("ie")?"ie":"unknown"},n=Object(rt.__assign)(Object(rt.__assign)(Object(rt.__assign)(Object(rt.__assign)(Object(rt.__assign)({},Br),F),G),U),W),vo=n.radialLayout,B=(bo.prototype.init=function(t){var e=this;this.data=t,this.radial?this.layoutMethod=function(t){t=ao.a[e.type](t,e.config);return vo(t),t}:this.layoutMethod=function(t){return ao.a[e.type](t,e.config)}},bo.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},bo.prototype.layout=function(t){return this.init(t),this.execute()},bo);function bo(t){this.type=t.type,this.radial=t.radial,this.config=t}function xo(t){var e=Zr.call(this,t)||this;return e.extendEvents=[],e.dragging=!1,e.mousedown=!1,e.preItem=null,e.destroy(),e.graph=t,e.destroyed=!1,e.initEvents(),e}Object(m.registerLayout)("grid",m.GridLayout),Object(m.registerLayout)("random",m.RandomLayout),Object(m.registerLayout)("force",m.ForceLayout),Object(m.registerLayout)("circular",m.CircularLayout),Object(m.registerLayout)("dagre",m.DagreLayout),Object(m.registerLayout)("dagreCompound",m.DagreCompoundLayout),Object(m.registerLayout)("radial",m.RadialLayout),Object(m.registerLayout)("concentric",m.ConcentricLayout),Object(m.registerLayout)("mds",m.MDSLayout),Object(m.registerLayout)("fruchterman",m.FruchtermanLayout),Object(m.registerLayout)("fruchterman-gpu",m.FruchtermanGPULayout),Object(m.registerLayout)("gForce",m.GForceLayout),Object(m.registerLayout)("force2",m.Force2Layout),Object(m.registerLayout)("gForce-gpu",m.GForceGPULayout),Object(m.registerLayout)("comboForce",m.ComboForceLayout),Object(m.registerLayout)("comboCombined",m.ComboCombinedLayout),Object(m.registerLayout)("forceAtlas2",m.ForceAtlas2Layout);function wo(t,e){return t=t.toString(),e=new Blob(["importScripts('".concat(e,"');(").concat(t,")()")],{type:"text/javascript"}),new Worker(URL.createObjectURL(e))}function _o(t){return new wo(function(){var d="LAYOUT_RUN",h="LAYOUT_END",f="LAYOUT_ERROR",p="GPU_LAYOUT_RUN";layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(t){var e;(e=t.data.type)!==d&&e!==p||function(t){var e=this;switch(t.data.type){case d:var n,r=t.data,o=r.nodes,i=r.edges,r=r.layoutCfg,a=(r=void 0===r?{}:r).type;(s=layout.getLayoutByName(a))?(r.onLayoutEnd=function(){e.postMessage({type:h,nodes:o}),null!=n&&n.destroy()},(n=new s(r)).init({nodes:o,edges:i}),n.execute()):this.postMessage({type:f,message:"layout ".concat(a," not found")});break;case p:var s,c=t.data,u=c.nodes,l=(i=c.edges,c.layoutCfg),r=void 0===l?{}:l,l=c.canvas,a=r.type;(s=layout.getLayoutByName(a))?"gpu"!==a.split("-")[1]?this.postMessage({type:f,message:"layout ".concat(a," does not support GPU")}):((c=new s(r)).init({nodes:u,edges:i}),c.executeWithWorker(l,this)):this.postMessage({type:f,message:"layout ".concat(a," not found")})}}(t)}},t=void 0===t?"https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js":t)}function Eo(t){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function So(t){return setTimeout(t,16)}function Oo(t){return clearTimeout(t)}function Mo(t){return("undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||So)(t)}function ko(t){("undefined"!=typeof window&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||Oo)(t)}var Co,Ao=["fruchterman","gForce"],Io=["force","grid","circular"],To=(Co=un,Object(rt.__extends)(jo,Co),jo.prototype.initLayout=function(){},jo.prototype.getWorker=function(){return this.worker||("undefined"==typeof Worker?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=_o(this.layoutCfg.workerScriptURL)),this.worker},jo.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(ko(t.requestId),t.requestId=null),t.requestId2)&&(ko(t.requestId2),t.requestId2=null)},jo.prototype.execLayoutMethod=function(g,y){var t=this;return new Promise(function(f,p){return Object(rt.__awaiter)(t,void 0,void 0,function(){var o,i,a,s,c,u,l,d,h;return Object(rt.__generator)(this,function(t){switch(t.label){case 0:if(!(o=this.graph)||o.get("destroyed"))return[2];i=g.type,g.onLayoutEnd=function(){o.emit("aftersublayout",{type:i}),f()},i&&this.isGPU&&(Do(i)?i="".concat(i,"-gpu"):console.warn("The '".concat(i,"' layout does not support GPU calculation for now, it will run in CPU."))),Br.isForce(i)?(a=g.onTick,c=void 0===(s=g.animate)&&("force"===i||"force2"===i),d=function(){a&&a(),(s||c)&&o.refreshPositions()},g.tick=d):"comboForce"!==i&&"comboCombined"!==i||(g.comboTrees=o.get("comboTrees"));try{u=new m.Layouts[i](g),this.layoutMethods[y]&&this.layoutMethods[y].destroy(),this.layoutMethods[y]=u}catch(t){console.warn("The layout method: '".concat(i,"' does not exist! Please specify it first.")),p()}return u.enableTick&&(l=g.onTick,d=function(){l&&l(),o.refreshPositions()},u.tick=d),e=h=this.filterLayoutData(this.data,g),n=y,null!=(r=null==e?void 0:e.nodes)&&r.length&&e.nodes.forEach(function(t){t.layoutOrder=n}),u.init(h),o.emit("beforesublayout",{type:i}),[4,u.execute()];case 1:return t.sent(),u.isCustomLayout&&g.onLayoutEnd&&g.onLayoutEnd(),[2]}var e,n,r})})})},jo.prototype.updateLayoutMethod=function(c,u){var e=this;return new Promise(function(s,t){return Object(rt.__awaiter)(e,void 0,void 0,function(){var e,n,r,o,i,a;return Object(rt.__generator)(this,function(t){switch(t.label){case 0:return e=this.graph,n=null==u?void 0:u.type,u.onLayoutEnd=function(){e.emit("aftersublayout",{type:n}),s()},Br.isForce(n)&&(r=u.onTick,i=void 0===(o=u.animate)&&("force"===n||"force2"===n),u.tick=function(){null!=r&&r(),(o||i)&&e.refreshPositions()}),a=this.filterLayoutData(this.data,u),c.init(a),c.updateCfg(u),e.emit("beforesublayout",{type:n}),[4,c.execute()];case 1:return t.sent(),c.isCustomLayout&&u.onLayoutEnd&&u.onLayoutEnd(),[2]}})})})},jo.prototype.layout=function(t){var e,n,r,o,i,a,s,c,u,l=this,d=this.graph;if(d&&!d.get("destroyed"))return this.data=this.setDataFromGraph(),u=this.data,e=u.nodes,u=u.hiddenNodes,!!e&&(r=d.get("width"),s=d.get("height"),n={},Object.assign(n,{width:r,height:s,center:[r/2,s/2]},this.layoutCfg),r=(this.layoutCfg=n).type,o=!1,null!=(s=this.layoutMethods)&&s.forEach(function(t){return o=!(null==(t=t.nodes)||!t.length)||o}),s=this.destoryLayoutMethods(),d.emit("beforelayout"),i=Promise.resolve(),o&&r&&1===(null==s?void 0:s.length)&&s[0]===r?this.tweakInit():i=this.initPositions(n.center,e),this.initPositions(n.center,u).then(),this.isGPU=Po(n,r),a=n.onLayoutEnd,s=n.layoutEndFormatted,c=n.adjust,s||(n.layoutEndFormatted=!0,n.onAllLayoutEnd=function(){return Object(rt.__awaiter)(l,void 0,void 0,function(){return Object(rt.__generator)(this,function(t){switch(t.label){case 0:return a&&a(e),this.refreshLayout(),c&&n.pipes?[4,this.adjustPipesBox(this.data,c)]:[3,2];case 1:t.sent(),this.refreshLayout(),t.label=2;case 2:return d.emit("afterlayout"),[2]}})})}),this.stopWorker(),!(!n.workerEnabled||!this.layoutWithWorker(this.data,t))||(u=!1,n.type?(u=!0,i=i.then(function(){return Object(rt.__awaiter)(l,void 0,void 0,function(){return Object(rt.__generator)(this,function(t){switch(t.label){case 0:return[4,this.execLayoutMethod(n,0)];case 1:return[2,t.sent()]}})})})):n.pipes&&(u=!0,n.pipes.forEach(function(e,n){i=i.then(function(){return Object(rt.__awaiter)(l,void 0,void 0,function(){return Object(rt.__generator)(this,function(t){switch(t.label){case 0:return[4,this.execLayoutMethod(e,n)];case 1:return[2,t.sent()]}})})})})),u?i.then(function(){n.onAllLayoutEnd&&n.onAllLayoutEnd(),t&&t()}).catch(function(t){console.warn("graph layout failed,",t)}):(d.refreshPositions(),null!=t&&t()),!1))},jo.prototype.tweakInit=function(){var o,n,r,t=this.data,e=this.graph,i=t.nodes,t=t.edges;null!=i&&i.length&&(o={},i.forEach(function(t){var e=t.x,n=t.y;isNaN(e)||isNaN(n)||(o[t.id]={x:e,y:n},t.mass=t.mass||2)}),t.forEach(function(t){var e=t.source,t=t.target,n=o[e],r=o[t];!n&&r?o[e]={x:r.x+80*(Math.random()-.5),y:r.y+80*(Math.random()-.5)}:!r&&n&&(o[t]={x:n.x+80*(Math.random()-.5),y:n.y+80*(Math.random()-.5)})}),n=e.get("width"),r=e.get("height"),i.forEach(function(t){var e=o[t.id]||{x:n/2+20*(Math.random()-.5),y:r/2+20*(Math.random()-.5)};t.x=e.x,t.y=e.y}))},jo.prototype.initWithPreset=function(a,s){var e=this;return new Promise(function(i,t){return Object(rt.__awaiter)(e,void 0,void 0,function(){var e,n,r,o;return Object(rt.__generator)(this,function(t){switch(t.label){case 0:return e=(n=this).layoutCfg,n=n.data,null!=(r=e.preset)&&r.type&&m.Layouts[null==r?void 0:r.type]?(o=Po(r,r.type),o=o?"".concat(r.type,"-gpu"):r.type,o=new m.Layouts[o](r),delete e.preset,o.init(n),[4,o.execute()]):(null!=s&&s(),i(),[2,!1]);case 1:return t.sent(),null!=a&&a(),i(),[2,!0]}})})})},jo.prototype.layoutWithWorker=function(e,t){var n=this,r=this.layoutCfg,o=this.graph,i=this.getWorker(),a=this.workerData;if(!i)return!1;a.requestId=null,a.requestId2=null,a.currentTick=null,a.currentTickData=null,o.emit("beforelayout");var s=Promise.resolve(),a=!1;if(r.type)a=!0,s=s.then(function(){return n.runWebworker(i,e,r)});else if(r.pipes)for(var a=!0,c=0,u=r.pipes;c<u.length;c++)!function(t){s=s.then(function(){return n.runWebworker(i,e,t)})}(u[c]);return a&&s.then(function(){r.onAllLayoutEnd&&r.onAllLayoutEnd(),null!=t&&t()}).catch(function(t){console.error("layout failed",t)}),!0},jo.prototype.runWebworker=function(t,e,r){var n,o,i=this,a=this.isGPU,s=this.filterLayoutData(e,r),e=s.nodes,c=s.edges,u=document.createElement("canvas"),a=a&&"undefined"!=typeof window&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in u,l=(o={},(n=r)&&"object"===Eo(n)?(Object.keys(n).forEach(function(t){n.hasOwnProperty(t)&&"function"!=typeof n[t]&&(o[t]=n[t])}),o):n);return a?(a=u.transferControlToOffscreen(),l.type="".concat(l.type,"-gpu"),t.postMessage({type:"GPU_LAYOUT_RUN",nodes:e,edges:c,layoutCfg:l,canvas:a},[a])):t.postMessage({type:"LAYOUT_RUN",nodes:e,edges:c,layoutCfg:l}),new Promise(function(e,n){t.onmessage=function(t){i.handleWorkerMessage(e,n,t,s,r)}})},jo.prototype.handleWorkerMessage=function(t,e,n,r,o){function i(){o.onTick&&o.onTick()}var a=this.graph,s=this.workerData,c=n.data,n=c.type;switch(n){case"LAYOUT_TICK":s.currentTick=c.currentTick,s.currentTickData=c,s.requestId||(s.requestId=Mo(function(){No(r,c),a.refreshPositions(),i(),c.currentTick===c.totalTicks?t():s.currentTick===c.totalTicks&&(s.requestId2=Mo(function(){No(r,s.currentTickData),a.refreshPositions(),s.requestId2=null,i(),t()})),s.requestId=null}));break;case"LAYOUT_END":null==s.currentTick&&(No(r,c),t());break;case"GPU_LAYOUT_END":if(null==s.currentTick){for(var u=r.nodes,l=c.vertexEdgeData,d=u.length,h=0;h<d;h++){var f=u[h],p=l[4*h],g=l[4*h+1];f.x=p,f.y=g}t()}break;case"LAYOUT_ERROR":console.warn("Web-Worker layout error!",c.message),e();break;default:e()}},jo.prototype.updateLayoutCfg=function(t){var r,o,e,i=this,n=this.graph,a=this.layoutMethods;n&&!n.get("destroyed")&&(e=t.disableTriggerLayout,t=Object(rt.__rest)(t,["disableTriggerLayout"]),r=Object(Y.mix)({},this.layoutCfg,t),this.layoutCfg=r,e||(null!=a&&a.length?(this.data=this.setDataFromGraph(),this.stopWorker(),t.workerEnabled&&this.layoutWithWorker(this.data,null)||(n.emit("beforelayout"),o=Promise.resolve(),e=!1,1===(null==a?void 0:a.length)?(e=!0,o=o.then(function(){return Object(rt.__awaiter)(i,void 0,void 0,function(){return Object(rt.__generator)(this,function(t){switch(t.label){case 0:return[4,this.updateLayoutMethod(a[0],r)];case 1:return[2,t.sent()]}})})})):null!=a&&a.length&&(e=!0,a.forEach(function(e,t){var n=r.pipes[t];o=o.then(function(){return Object(rt.__awaiter)(i,void 0,void 0,function(){return Object(rt.__generator)(this,function(t){switch(t.label){case 0:return[4,this.updateLayoutMethod(e,n)];case 1:return[2,t.sent()]}})})})})),e&&o.then(function(){r.onAllLayoutEnd&&r.onAllLayoutEnd()}).catch(function(t){console.warn("layout failed",t)}))):this.layout()))},jo.prototype.adjustPipesBox=function(o,s){var c=this;return new Promise(function(t){var e=o.nodes,n=(null!=e&&e.length||t(),Io.includes(s)||(console.warn("The adjust type ".concat(s," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),t()),{center:c.layoutCfg.center,nodeSize:function(t){return Math.max(t.height,t.width)},preventOverlap:!0,onLayoutEnd:function(){}}),e=c.getLayoutBBox(e),i=e.groupNodes,r=e.layoutNodes,a=Object(Y.clone)(r);n.onLayoutEnd=function(){null!=r&&r.forEach(function(t,e){var n,r=t.x-(null==(n=a[e])?void 0:n.x),o=t.y-(null==(n=a[e])?void 0:n.y);null!=(t=i[e])&&t.forEach(function(t){t.x+=r,t.y+=o})}),t()},new m.Layouts[s](n).layout({nodes:r})})},jo.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},jo);function jo(t){var e=Co.call(this,t)||this;return e.graph=t,e.layoutCfg=t.get("layout")||{},e.layoutType=e.getLayoutType(),e.worker=null,e.workerData={},e.initLayout(),e}function No(t,e){for(var n=t.nodes,r=e.nodes,o=n.length,i=0;i<o;i++){var a=n[i];a.x=r[i].x,a.y=r[i].y}}function Do(t){return Ao.includes(t)}function Po(t,e){var n=e,e=(e&&"gpu"===e.split("-")[1]&&(n=e.split("-")[0],t.gpuEnabled=!0),!1);return t.gpuEnabled&&(e=!0,yo().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),e=!1)),e&&!Do(n)&&(console.warn("The '".concat(n,"' layout does not support GPU calculation for now, it will run in CPU.")),e=!1),e}var Lo,Ro=x.a.transform,z=(Lo=on,Object(rt.__extends)(g,Lo),g.prototype.initLayoutController=function(){var t=new To(this);this.set({layoutController:t})},g.prototype.initEventController=function(){var t=new io(this);this.set({eventController:t})},g.prototype.initCanvas=function(){var t=this.get("container");if("string"==typeof t&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e=t.clientWidth,n=t.clientHeight,r=this.get("width")||e,o=this.get("height")||n;this.get("width")||this.get("height")||(this.set("width",e),this.set("height",n)),t="svg"===this.get("renderer")?new Gr.Canvas({container:t,width:r,height:o}):(e={container:t,width:r,height:o},(n=this.get("pixelRatio"))&&(e.pixelRatio=n,window.devicePixelRatio=n),new Fr.Canvas(e)),this.set("canvas",t)},g.prototype.initPlugins=function(){var e=this;Object(Y.each)(e.get("plugins"),function(t){!t.destroyed&&t.initPlugin&&t.initPlugin(e)})},g.prototype.downloadImageWatermark=function(r,o,i,a){return Object(rt.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(rt.__generator)(this,function(t){switch(t.label){case 0:return e=r.style.backgroundImage,e=e.slice(5,e.length-2),(n=new Image).src=e,[4,new Promise(function(e){n.onload=function(){var t=o.createPattern(n,"repeat");o.rect(0,0,i,a),o.fillStyle=t,o.fill(),e("")}})];case 1:return t.sent(),[2]}})})},g.prototype.asyncToDataUrl=function(c,u,l,d,h,t){var e=this,f=document.querySelector(".g6-graph-watermarker"),n=this.get("canvas"),p=n.getRenderer(),g=t||n.get("el"),y="";c=c||"image/png",setTimeout(function(){return Object(rt.__awaiter)(e,void 0,void 0,function(){var e,n,r,o,i,a,s;return Object(rt.__generator)(this,function(t){switch(t.label){case 0:return"svg"!==p?[3,1]:(e=g.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(s=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s)).replaceChild(e,s.documentElement),e=(new XMLSerializer).serializeToString(s),y="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(e)),[3,4]);case 1:return n=void 0,r=g.getContext("2d"),o=d||this.get("width"),i=h||this.get("height"),a=void 0,f?[4,this.downloadImageWatermark(f,r,o,i)]:[3,3];case 2:t.sent(),t.label=3;case 3:if(u){s="undefined"!=typeof window?window.devicePixelRatio:1;try{n=r.getImageData(0,0,o*s,i*s),a=r.globalCompositeOperation,r.globalCompositeOperation="destination-over",r.fillStyle=u,r.fillRect(0,0,o,i)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}y=g.toDataURL(c),u&&(r.clearRect(0,0,o,i),r.putImageData(n,0,0),r.globalCompositeOperation=a),t.label=4;case 4:return l&&l(y),[2]}})})},16)},g.prototype.toDataURL=function(t,e){var n=this.get("canvas"),r=n.getRenderer(),n=n.get("el"),o=(t=t||"image/png","");if("svg"===r)var r=n.cloneNode(!0),i=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),i=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",i),r=(i.replaceChild(r,i.documentElement),(new XMLSerializer).serializeToString(i)),o="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(r));else{var i=void 0,r=n.getContext("2d"),a=Math.max(this.get("width"),500),s=Math.max(this.get("height"),500),c=void 0;if(e){var u="undefined"!=typeof window&&window.devicePixelRatio||1;try{i=r.getImageData(0,0,a*u,s*u),c=r.globalCompositeOperation,r.globalCompositeOperation="destination-over",r.fillStyle=e,r.fillRect(0,0,a,s)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}o=n.toDataURL(t),e&&(r.clearRect(0,0,a,s),r.putImageData(i,0,0),r.globalCompositeOperation=c)}return o},g.prototype.toFullDataURL=function(o,i,t){var e=this.get("group").getCanvasBBox(),n=e.height,r=e.width,a=this.get("renderer"),s=Object(N.b)('<div id="virtual-image"></div>'),c=t?t.backgroundColor:void 0,t=t?t.padding:void 0,u=(t?Object(Y.isNumber)(t)&&(t=[t,t,t,t]):t=[0,0,0,0],n+t[0]+t[2]),l=r+t[1]+t[3],s={container:s,height:u,width:l,quickHit:!0},s=new("svg"===a?Gr:Fr).Canvas(s),d=this.get("group").clone(),h=(h=Object(Y.clone)(d.getMatrix()))||[1,0,0,0,1,0,0,0,1],f=(e.maxX+e.minX)/2,e=(e.maxY+e.minY)/2,p=(h=Ro(h,[["t",-f,-e],["t",r/2+t[3],n/2+t[0]]]),d.resetMatrix(),d.setMatrix(h),s.add(d),s.get("el")),g="";i=i||"image/png",setTimeout(function(){if("svg"===a){var t=p.cloneNode(!0),e=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),e=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",e),t=(e.replaceChild(t,e.documentElement),(new XMLSerializer).serializeToString(e));g="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(t))}else{var e=void 0,t=p.getContext("2d"),n=void 0;if(c){var r="undefined"!=typeof window?window.devicePixelRatio:1;try{e=t.getImageData(0,0,l*r,u*r),n=t.globalCompositeOperation,t.globalCompositeOperation="destination-over",t.fillStyle=c,t.fillRect(0,0,l,u)}catch(t){console.error("Download image failed. Out of memory at ImageData creation")}}g=p.toDataURL(i),c&&(t.clearRect(0,0,l,u),t.putImageData(e,0,0),t.globalCompositeOperation=n)}o&&o(g)},16)},g.prototype.downloadFullImage=function(r,o,t){var i=this,e=this.get("group").getCanvasBBox(),n=e.height,a=e.width,s=this.get("renderer"),c=Object(N.b)('<div id="virtual-image"></div>'),u=document.querySelector(".g6-graph-watermarker"),l=t?t.backgroundColor:void 0,t=t?t.padding:void 0,d=(t?Object(Y.isNumber)(t)&&(t=[t,t,t,t]):t=[0,0,0,0],n+t[0]+t[2]),h=a+t[1]+t[3];u&&(f=(u=this.get("graphWaterMarker").cfg||{}).width,u=u.height,d=Math.ceil(d/u)*u,h=Math.ceil(h/f)*f);var u={container:c,height:d,width:h},f=new("svg"===s?Gr:Fr).Canvas(u),c=(u=(c=this.get("group")).clone(),Kr(c,u),u),u=(u=Object(Y.clone)(c.getMatrix()))||[1,0,0,0,1,0,0,0,1],p=(e.maxX+e.minX)/2,e=(e.maxY+e.minY)/2,p=(u=Ro(u,[["t",-p,-e],["t",a/2+t[3],n/2+t[0]]]),c.resetMatrix(),c.setMatrix(u),f.add(c),f.get("el"));o=o||"image/png",this.asyncToDataUrl(o,l,function(t){var e=document.createElement("a"),n=(r||"graph")+("svg"===s?".svg":".".concat(o.split("/")[1])),t=(i.dataURLToImage(t,s,e,n),document.createEvent("MouseEvents"));t.initEvent("click",!1,!1),e.dispatchEvent(t)},h,d,p)},g.prototype.downloadImage=function(t,e,n){var r=this,o=(this.stopAnimate(),this.get("canvas").getRenderer()),i=(e=e||"image/png",(t||"graph")+("svg"===o?".svg":".".concat(e.split("/")[1]))),a=document.createElement("a");this.asyncToDataUrl(e,n,function(t){r.dataURLToImage(t,o,a,i);t=document.createEvent("MouseEvents");t.initEvent("click",!1,!1),a.dispatchEvent(t)})},g.prototype.dataURLToImage=function(t,e,n,r){if(t&&"data:"!==t){if("undefined"!=typeof window)if(window.Blob&&window.URL&&"svg"!==e){var o,e=t.split(","),i="";e&&0<e.length&&(o=e[0].match(/:(.*?);/))&&2<=o.length&&(i=o[1]);for(var a=atob(e[1]),s=a.length,c=new Uint8Array(s);s--;)c[s]=a.charCodeAt(s);var u=new Blob([c],{type:i});window.navigator.msSaveBlob?window.navigator.msSaveBlob(u,r):n.addEventListener("click",function(){n.download=r,n.href=window.URL.createObjectURL(u)})}else n.addEventListener("click",function(){n.download=r,n.href=t})}else console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items")},g.prototype.addPlugin=function(t){t.destroyed||(this.get("plugins").push(t),t.initPlugin(this))},g.prototype.removePlugin=function(t){var e=this.get("plugins"),n=e.indexOf(t);0<=n&&(t.destroyPlugin(),e.splice(n,1))},g.prototype.setImageWaterMarker=function(t,e){void 0===t&&(t=no.waterMarkerImage);var n,r,o,i,a,s=this.get("container"),c=((s=Object(Y.isString)(s)?document.getElementById(s):s).style.position||(s.style.position="relative"),this.get("graphWaterMarker")),e=Object(Y.deepMix)({},no.imageWaterMarkerConfig,e),u=e.width,l=e.height,d=e.compatible,h=e.image;t?(c?c.clear():(e={container:s,width:u,height:l,capture:!1},(u=this.get("pixelRatio"))&&(e.pixelRatio=u,window.devicePixelRatio=u),c=new Fr.Canvas(e),this.set("graphWaterMarker",c)),c.get("el").style.display="none",n=c.get("context"),r=h.rotate,o=h.x,i=h.y,n.rotate(-r*Math.PI/180),(a=new Image).crossOrigin="anonymous",a.src=t,a.onload=function(){var t;n.drawImage(a,o,i,h.width,h.height),n.rotate(r*Math.PI/180),d?s.style.cssText="background-image: url(".concat(c.get("el").toDataURL("image/png"),");background-repeat:repeat;"):((t=document.querySelector(".g6-graph-watermarker"))||((t=document.createElement("div")).className="g6-graph-watermarker"),t.className="g6-graph-watermarker",c.destroyed||(t.style.cssText="background-image: url(".concat(c.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),s.appendChild(t)))}):((l=d?s:document.querySelector(".g6-graph-watermarker"))&&(l.style.cssText=void 0),c&&c.clear())},g.prototype.setTextWaterMarker=function(t,e){var n=this.get("container"),r=((n=Object(Y.isString)(n)?document.getElementById(n):n).style.position||(n.style.position="relative"),this.get("graphWaterMarker")),e=Object(Y.deepMix)({},no.textWaterMarkerConfig,e),o=e.width,i=e.height,a=e.compatible,e=e.text;if(null!=t&&t.length){r?r.clear():(o={container:n,width:o,height:i,capture:!1},(i=this.get("pixelRatio"))&&(o.pixelRatio=i,window.devicePixelRatio=i),r=new Fr.Canvas(o),this.set("graphWaterMarker",r)),r.get("el").style.display="none";var s=r.get("context"),i=e.rotate,o=e.fill,c=e.fontFamily,u=e.fontSize,l=e.baseline,d=e.x,h=e.y,f=e.lineHeight;s.rotate(-i*Math.PI/180),s.font="".concat(u,"px ").concat(c),s.fillStyle=o,s.textBaseline=l;for(var p=Object(Y.isString)(t)?[t]:t,g=p.length-1;0<=g;g--)s.fillText(p[g],d,h+g*f);s.rotate(i*Math.PI/180),a?n.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;"):((e=document.querySelector(".g6-graph-watermarker"))||((e=document.createElement("div")).className="g6-graph-watermarker"),e.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(e))}else(u=a?n:document.querySelector(".g6-graph-watermarker"))&&(u.style.cssText=void 0),r&&r.clear()},g.prototype.destroy=function(){Object(Y.each)(this.get("plugins"),function(t){t.destroyPlugin()});var t,e=this.get("tooltips");if(e)for(var n=0;n<e.length;n++){var r,o=e[n];o&&(r=o.parentElement)&&r.removeChild(o)}null!=(t=this.get("eventController"))&&t.destroy(),null!=(t=this.get("layoutController"))&&t.destroy(),null!=(t=this.get("graphWaterMarker"))&&t.destroy(),null!=(t=document.querySelector(".g6-graph-watermarker"))&&t.remove(),Lo.prototype.destroy.call(this)},g);function g(t){var t=Lo.call(this,t)||this,e=t.get("defaultNode");return e||t.set("defaultNode",{type:"circle"}),e.type||(e.type="circle",t.set("defaultNode",e)),t.destroyed=!1,t}function Bo(t){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zo,Fo,Go,Uo,Wo=n.radialLayout,Xo=n.traverseTree,cn=(Uo=z,Object(rt.__extends)(b,Uo),b.prototype.getLayout=function(){var e=this.get("layout");return e?"function"==typeof e?e:(e.type||(e.type="dendrogram"),e.direction||(e.direction="indented"===e.type?"LR":"TB"),e.radial?function(t){t=ao.a[e.type](t,e);return Wo(t),t}:function(t){return ao.a[e.type](t,e)}):null},b.indexOfChild=function(t,n){var r=-1;return Object(Y.each)(t,function(t,e){if(n===t.id)return r=e,!1}),r},b.prototype.getDefaultCfg=function(){var t=Uo.prototype.getDefaultCfg.call(this);return t.animate=!0,t},b.prototype.innerAddChild=function(t,e,n){var r=this,o=t.data,i=(o&&(o.x=t.x,o.y=t.y,o.depth=t.depth),r.addItem("node",o,!1));return e&&(i.set("parent",e),n&&((o=e.get("originAttrs"))?i.set("originAttrs",o):(o=e.getModel(),i.set("originAttrs",{x:o.x,y:o.y}))),(o=e.get("children"))?o.push(i):e.set("children",[i]),r.addItem("edge",{source:e.get("id"),target:i.get("id"),id:"".concat(e.get("id"),":").concat(i.get("id"))},!1)),Object(Y.each)(t.children||[],function(t){r.innerAddChild(t,i,n)}),r.emit("afteraddchild",{item:i,parent:e}),i},b.prototype.innerUpdateChild=function(t,e,n){var r=this,o=r.findById(t.id);if(o){Object(Y.each)(t.children||[],function(t){r.innerUpdateChild(t,o,n)});var i,a,s=o.get("children");if(s&&0<s.length)for(var c=s.length-1;0<=c;c--){var u=s[c].getModel();-1===b.indexOfChild(t.children||[],u.id)&&(r.innerRemoveChild(u.id,{x:t.x,y:t.y},n),s.splice(c,1))}o.get("originAttrs")&&(i=o.get("originAttrs").x,a=o.get("originAttrs").y);var l=o.getModel();n&&o.set("originAttrs",{x:l.x,y:l.y}),o.set("model",Object.assign(l,t.data)),i===t.x&&a===t.y||o.updatePosition({x:t.x,y:t.y})}else r.innerAddChild(t,e,n)},b.prototype.innerRemoveChild=function(t,e,n){var r,o=this,t=o.findById(t);t&&(Object(Y.each)(t.get("children"),function(t){o.innerRemoveChild(t.getModel().id,e,n)}),n?(r=t.getModel(),t.set("to",e),t.set("originAttrs",{x:r.x,y:r.y}),o.get("removeList").push(t)):o.removeItem(t,!1))},b.prototype.changeData=function(t,e){void 0===e&&(e=!0);var n=this;this.getNodes().map(function(t){return n.clearItemStates(t)}),this.getEdges().map(function(t){return n.clearItemStates(t)}),e&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},b.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon"),this.updateLayout(t)},b.prototype.updateLayout=function(t,e,n,r){var o;void 0===r&&(r=!0),t?(r&&this.get("enabledStack")&&this.pushStack("layout",{before:this.get("layout"),after:t}),this.set("layout",t),this.set("layoutMethod",this.getLayout()),this.layout(),e&&(r=(r=n)||("begin"===e?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),r=this.getPointByCanvas(r.x,r.y),t=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1],r.x=r.x*t[0]+t[6],r.y=r.y*t[0]+t[7],n={x:((t=(n=this.getGroup().getCanvasBBox()).minX)+n.maxX)/2,y:((o=n.minY)+n.maxY)/2},"begin"===e&&(n.x=t,n.y=o),this.translate(r.x-n.x,r.y-n.y))):console.warn("layout cannot be null")},b.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon"),this.layout(t)},b.prototype.layout=function(t){var i,o=this,e=this.get("data"),n=this.get("layoutMethod"),r=this.get("layout"),a=e,r=(null!=r&&r.excludeInvisibles?(e=Object(Y.clone)(this.get("data")),i={},Xo(e,function(t){var e=t.children;if(null==e||!e.length)return!0;for(var n=e.length-1;0<=n;n--){var r=o.findById(e[n].id);(r?r.isVisible():!1!==e[n].visible)||(i[t.id]=i[t.id]||[],i[t.id].push({idx:n,child:e.splice(n,1)[0]}))}}),a=n?n(e,this.get("layout")):e,Xo(a,function(t){var e=i[t.id];if(null!=e&&e.length)for(var n=e.length-1;0<=n;n--){var r=e[n],o=r.idx;t.children.splice(o,0,r.child)}})):a=n?n(e,this.get("layout")):e,this.get("animate"));this.emit("beforerefreshlayout",{data:e,layoutData:a}),this.emit("beforelayout"),this.innerUpdateChild(a,void 0,r),t&&this.get("viewController").fitView(),r?this.layoutAnimate(a):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:e,layoutData:a}),this.emit("afterlayout")},b.prototype.addChild=function(t,e,n){void 0===n&&(n=!0),this.emit("beforeaddchild",{model:t,parent:e}),Object(Y.isString)(e)||(e=e.get("id"));var r=this.findDataById(e);r&&(r.children||(r.children=[]),r.children.push(t),this.findById(e).refresh(),this.changeData(void 0,n))},b.prototype.updateChildren=function(t,e,n){void 0===n&&(n=!0);var r=this.findById(e);e&&r?(this.findDataById(e).children=t,r.refresh(),this.changeData(void 0,n)):console.warn("Update children failed! There is no node with id '".concat(e,"'"))},b.prototype.updateChild=function(t,e,n){var r,o;void 0===n&&(n=!0),e&&this.findById(e)?(r=this.findDataById(e),o=this.findById(t.id),r.children||(r.children=[]),o?-1<(o=b.indexOfChild(r.children,t.id))&&(r.children[o]=t):r.children.push(t),null!=(o=this.findById(e))&&o.refresh(),this.changeData(void 0,n)):this.changeData(t,n)},b.prototype.removeChild=function(e,t){void 0===t&&(t=!0);var n,r,o=this.findById(e);(o=o?null==o?void 0:o.get("parent"):this.getNodes().find(function(t){return!!(t.getModel().children||[]).find(function(t){return t.id===e})}))&&!o.destroyed&&(n=o.get("id"),n=(n=this.findDataById(n))&&n.children||[],r=b.indexOfChild(n,e),n.splice(r,1),o.refresh()),this.changeData(void 0,t)},b.prototype.findDataById=function(e,t){var n,r=this;return t=t||r.get("data"),e===t.id?t:(n=null,Object(Y.each)(t.children||[],function(t){return t.id===e?(n=t,!1):!(n=r.findDataById(e,t))&&void 0}),n)},b.prototype.layoutAnimate=function(a,s){var c=this,t=this.get("animateCfg");c.emit("beforeanimate",{data:a}),c.getEdges().forEach(function(t){var e=t.get("model");e.sourceAnchor||(e.sourceAnchor=t.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(i){Xo(a,function(t){var e,n,r,o=c.findById(t.id);return o&&(e=o.get("originAttrs"),n=o.get("model"),e||(e={x:n.x,y:n.y},o.set("originAttrs",e)),s?(r=s(o,i,e,a),o.set("model",Object.assign(n,r))):(n.x=e.x+(t.x-e.x)*i,n.y=e.y+(t.y-e.y)*i)),!0}),Object(Y.each)(c.get("removeList"),function(t){var e=t.getModel(),n=t.get("originAttrs"),t=t.get("to");e.x=n.x+(t.x-n.x)*i,e.y=n.y+(t.y-n.y)*i}),c.refreshPositions()},{duration:t.duration,easing:t.ease,callback:function(){Object(Y.each)(c.getNodes(),function(t){t.set("originAttrs",null)}),Object(Y.each)(c.get("removeList"),function(t){c.removeItem(t,!1)}),c.set("removeList",[]),t.callback&&t.callback(),c.emit("afteranimate",{data:a})},delay:t.delay})},b.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},b.prototype.isLayoutAnimating=function(){return this.layoutAnimating},b.prototype.render=function(t){void 0===t&&(t=!0);var e=this.get("data");if(!e||!Object(Y.isObject)(e)||!Object.keys(e).length)throw new Error("data must be defined first");this.clear(),t&&this.get("enabledStack")&&this.clearStack(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},b.prototype.save=function(){return this.get("data")},b.prototype.data=function(t){Uo.prototype.data.call(this,t),this.set("originData",function(e){try{return structuredClone(e)}catch(t){return function t(e,n){if(void 0===n&&(n=new WeakMap),null===e)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if("object"!==Bo(e))return e;if(n.get(e))return n.get(e);var r,o=Array.isArray(e)?[]:{};for(r in n.set(e,o),e)e.hasOwnProperty(r)&&void 0!==e[r]&&(o[r]=t(e[r],n));return o}(e)}}(t))},b),i=(Ho.prototype.getDefaultCfgs=function(){return{}},Ho.prototype.initPlugin=function(n){var r=this,t=(r.set("graph",n),r.getEvents()),o={};Object(Y.each)(t,function(t,e){t=Object(Y.wrapBehavior)(r,t);o[e]=t,n.on(e,t)}),this._events=o,this.init()},Ho.prototype.getEvents=function(){return{}},Ho.prototype.get=function(t){var e;return null==(e=this._cfgs)?void 0:e[t]},Ho.prototype.set=function(t,e){this._cfgs[t]=e},Ho.prototype.destroy=function(){},Ho.prototype.destroyPlugin=function(){this.destroy();var n=this.get("graph"),t=this._events;Object(Y.each)(t,function(t,e){n.off(e,t)}),this._events=null,this._cfgs=null,this.destroyed=!0},Ho),Yo=(zo=function(t,e){return(zo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},"url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)"),en=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}zo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(Vo,Go=i),Vo.prototype.getDefaultCfgs=function(){return{img:Yo,follow:!0}},Vo.prototype.init=function(){var t=this.get("graph"),e=t.get("container"),t=t.get("canvas").get("el"),n=this.get("img")||Yo,r=(n.includes("url(")||(n='url("'.concat(n,'")')),Object(N.b)("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>")),n=Object(N.b)("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: ".concat(n,";\n        user-select: none\n        '></div>"));this.set("container",r),this.set("gridContainer",n),this.positionInit(),r.appendChild(n),e.insertBefore(r,t)},Vo.prototype.positionInit=function(){var t=this.get("graph"),e=t.get("minZoom"),n=t.get("width"),t=t.get("height"),n=(Object(N.e)(this.get("container"),{width:"".concat(n,"px"),height:"".concat(t,"px")}),80*n/e),t=80*t/e;Object(N.e)(this.get("gridContainer"),{width:"".concat(n,"px"),height:"".concat(t,"px"),left:"-".concat(n/2,"px"),top:"-".concat(t/2,"px")})},Vo.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},Vo.prototype.updateGrid=function(t){var e=this.get("gridContainer"),t=(t=t.matrix)||[1,0,0,0,1,0,0,0,1],n=this.get("follow"),n="matrix(".concat(t[0],", ").concat(t[1],", ").concat(t[3],", ").concat(t[4],", ").concat(n?t[6]:"0",", ").concat(n?t[7]:"0",")");Object(N.e)(e,{transform:n})},Vo.prototype.getContainer=function(){return this.get("container")},Vo.prototype.destroy=function(){var t=this.get("graph").get("container"),e=this.get("container");t.removeChild(e)},Vo),R=t(112),r=t.n(R),o=(Fo=function(t,e){return(Fo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Fo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function Vo(t){return Go.call(this,t)||this}function Ho(t){this._cfgs=Object(Y.deepMix)(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}function b(t){t=Uo.call(this,t)||this;return t.layoutAnimating=!1,t.set("removeList",[]),t.set("layoutMethod",t.getLayout()),t}"undefined"!=typeof document&&r()("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");o(ei,$o=i),ei.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(t){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>1</li>\n            <li>2</li>\n          </ul>\n        "},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},ei.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},ei.prototype.init=function(){var t=this.get("className"),t=Object(N.b)("<div class=".concat(t||"g6-component-contextmenu","></div>"));Object(N.e)(t,{top:"0px",position:"absolute",visibility:"hidden"});var e=(e=this.get("container"))||this.get("graph").get("container");(e=Object(Y.isString)(e)?document.getElementById(e):e).appendChild(t),this.set("menu",t)},ei.prototype.onMenuShow=function(e){var n,r,t,o,i,a,s,c,u,l,d,h=this,f=(e.preventDefault(),this.get("itemTypes"));if(e.item){if(e.item.getType&&-1===f.indexOf(e.item.getType()))return void h.onMenuHide()}else if(-1===f.indexOf("canvas"))return void h.onMenuHide();this.get("shouldBegin")(e)&&(f=this.get("menu"),u=this.get("getContent"),n=this.get("graph"),u=u(e,n),Object(Y.isString)(u)?f.innerHTML=u:f.innerHTML=u.outerHTML,this.removeMenuEventListener(),(r=this.get("handleMenuClick"))&&(this.set("handleMenuClickWrapper",u=function(t){r(t.target,e.item,n)}),f.addEventListener("click",u)),u=n.get("width"),t=n.get("height"),o=f.getBoundingClientRect(),d=this.get("offsetX")||0,i=this.get("offsetY")||0,a=n.getContainer().offsetTop,s=n.getContainer().offsetLeft,(c=e.canvasX+s+d)+o.width>u&&(c=e.canvasX-o.width-d+s),(u=(u=e.canvasY+a+i)+o.height>t?e.canvasY-o.height-i+a:u)<0&&(u=0),Object(N.e)(f,{top:"".concat(u,"px"),left:"".concat(c,"px"),visibility:"visible"}),l="click"===this.get("trigger"),d=function(t){l?l=!1:h.onMenuHide()},document.body.addEventListener("click",d),this.set("handler",d))},ei.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");t&&(this.get("menu").removeEventListener("click",t),this.set("handleMenuClickWrapper",null)),e&&document.body.removeEventListener("click",e)},ei.prototype.onMenuHide=function(){var t=this.get("menu");t&&Object(N.e)(t,{visibility:"hidden"}),this.removeMenuEventListener()},ei.prototype.destroy=function(){var t,e=this.get("menu");this.removeMenuEventListener(),e&&(t=(t=this.get("container"))||this.get("graph").get("container"),(t=Object(Y.isString)(t)?document.getElementById(t):t).removeChild(e))};var qo,Ko,Zo,$o,F=ei,G=(Zo=function(t,e){return(Zo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Zo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Qo=function(){return(Qo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Jo=Math.max,ti=x.a.transform,U=(G(O,Ko=i),O.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},O.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},O.prototype.disableRefresh=function(){this.set("refresh",!1)},O.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},O.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},O.prototype.initViewport=function(){var t,e,n,o,i,a,s,c,u,l,d,h,f,r,p,g=this,y=this._cfgs,m=y.size,v=y.graph;this.destroyed||(t=this.get("canvas").get("container"),e=-1<navigator.userAgent.toLowerCase().indexOf("firefox"),n=-1<navigator.userAgent.toLowerCase().indexOf("safari"),o=Object(N.b)("\n      <div\n        class=".concat(y.viewportClassName,"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff;\n          cursor:move'\n        draggable=").concat(!n&&!e,"\n      </div>")),s=!1,f=h=d=l=u=c=a=i=0,o.addEventListener(n||e?"mousedown":"dragstart",function(e){var t,n;if(e.dataTransfer){var r=new Image;r.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null!=(n=(t=e.dataTransfer).setDragImage)&&n.call(t,r,0,0);try{e.dataTransfer.setData("text/html","view-port-minimap")}catch(t){e.dataTransfer.setData("text","view-port-minimap")}}y.refresh=!1,e.target===o&&(n=o.style,c=parseInt(n.left,10),u=parseInt(n.top,10),l=parseInt(n.width,10),d=parseInt(n.height,10),l>m[0]||d>m[1]||(f=v.getZoom(),h=g.get("ratio"),s=!0,i=e.clientX,a=e.clientY))},!1),r=function(t){var e,n;!s||Object(Y.isNil)(t.clientX)||Object(Y.isNil)(t.clientY)||(e=i-t.clientX,n=a-t.clientY,(c-e<0||c-e+l>=m[0])&&(e=0),(u-n<0||u-n+d>=m[1])&&(n=0),c-=e,u-=n,Object(N.e)(o,{left:"".concat(c,"px"),top:"".concat(u,"px")}),v.translate(e*f/h,n*f/h),i=t.clientX,a=t.clientY)},n||e||o.addEventListener("drag",r,!1),o.addEventListener(n||e?"mouseup":"dragend",p=function(){s=!1,y.refresh=!0},!1),t.addEventListener("mouseleave",p),t.addEventListener("mouseup",p),(n||e)&&t.addEventListener("mousemove",r,!1),this.set("viewport",o),t.appendChild(o))},O.prototype.updateViewport=function(){var t,e,n,r,o,i,a,s,c;this.destroyed||(t=this.get("ratio"),i=this.get("totaldx"),c=this.get("totaldy"),o=this.get("graph"),e=this.get("size"),r=o.get("canvas").get("el"),n=o.get("width")||r.scrollWidth||500,r=o.get("height")||r.scrollHeight||500,a=o.getPointByCanvas(0,0),o=o.getPointByCanvas(n,r),(n=this.get("viewport"))||this.initViewport(),r=(o.x-a.x)*t,o=(o.y-a.y)*t,s=(i=a.x*t+i)+r,c=(a=a.y*t+c)+o,i<0&&(r+=i,i=0),s>e[0]&&(r-=s-e[0]),a<0&&(o+=a,a=0),c>e[1]&&(o-=c-e[1]),this.set("ratio",t),s="".concat(i,"px"),c="".concat(a,"px"),Object(N.e)(n,{left:s,top:c,width:"".concat(r,"px"),height:"".concat(o,"px")}))},O.prototype.updateGraphShapes=function(){var e,t=this._cfgs.graph,n=this.get("canvas"),r=t.get("group");r.destroyed||(n.clear(),this.get("hideEdge")?(e=n.addGroup(),r.get("children").forEach(function(t){t.get("id").includes("-edge")||e.add(t.clone())})):((e=r.clone()).resetMatrix(),n.add(e)),"svg"===t.get("renderer")&&this.updateVisible(e))},O.prototype.updateVisible=function(t){var e,n=this;t.isGroup()||t.get("visible")?(e=t.get("children"))&&e.length&&e.forEach(function(t){t.get("visible")||t.hide(),n.updateVisible(t)}):t.hide()},O.prototype.updateKeyShapes=function(){var e,n=this,t=this._cfgs.graph,r=this.get("canvas"),o=r.get("children")[0]||r.addGroup(),i=(this.get("hideEdge")||Object(Y.each)(t.getEdges(),function(t){n.updateOneEdgeKeyShape(t,o)}),Object(Y.each)(t.getNodes(),function(t){n.updateOneNodeKeyShape(t,o)}),t.getCombos());i&&i.length&&(e=o.find(function(t){return"comboGroup"===t.get("name")})||o.addGroup({name:"comboGroup"}),setTimeout(function(){n.destroyed||(Object(Y.each)(i,function(t){n.updateOneComboKeyShape(t,e)}),null!=e&&e.sort(),null!=e&&e.toBack(),n.updateCanvas())},250)),this.clearDestroyedShapes()},O.prototype.updateOneComboKeyShape=function(t,e){var n,r,o,i,a,s;this.destroyed||(r=(n=this.get("itemMap")||{})[t.get("id")],o=t.getBBox(),s=(i=t.get("keyShape").clone()).attr(),a={x:o.centerX,y:o.centerY},r?a=Object.assign(s,a):e.add(r=i),"rect"!==(s=r.get("type"))&&"image"!==s||(a.x=o.minX,a.y=o.minY),r.attr(a),t.isVisible()?r.show():r.hide(),r.exist=!0,e=t.getModel().depth,isNaN(e)||r.set("zIndex",e),n[t.get("id")]=r,this.set("itemMap",n))},O.prototype.updateOneNodeKeyShape=function(t,e){var n=this.get("itemMap")||{},r=n[t.get("id")],o=t.getBBox(),i=t.get("keyShape").clone(),a=i.attr(),s={x:o.centerX,y:o.centerY},a=(r?(s=Object.assign(a,s),r.toFront()):e.add(r=i),r.get("type")),e=("rect"!==a&&"image"!==a||(s.x=o.minX,s.y=o.minY),r.attr(s),t.isVisible()?r.show():r.hide(),r.exist=!0,t.getModel().depth);isNaN(e)||r.set("zIndex",e),n[t.get("id")]=r,this.set("itemMap",n)},O.prototype.updateDelegateShapes=function(){var e,n=this,t=this._cfgs.graph,r=this.get("canvas"),o=r.get("children")[0]||r.addGroup(),i=(this.get("hideEdge")||Object(Y.each)(t.getEdges(),function(t){n.updateOneEdgeKeyShape(t,o)}),Object(Y.each)(t.getNodes(),function(t){n.updateOneNodeDelegateShape(t,o)}),t.getCombos());i&&i.length&&(e=o.find(function(t){return"comboGroup"===t.get("name")})||o.addGroup({name:"comboGroup"}),setTimeout(function(){n.destroyed||(Object(Y.each)(i,function(t){n.updateOneComboKeyShape(t,e)}),null!=e&&e.sort(),null!=e&&e.toBack(),n.updateCanvas())},250)),this.clearDestroyedShapes()},O.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(e&&0!==e.length)for(var n=e.length-1;0<=n;n--){var r=t[e[n]],o=r.exist;r.exist=!1,o||(r.remove(),delete t[e[n]])}},O.prototype.updateOneEdgeKeyShape=function(t,e){var n,r=this.get("itemMap")||{},o=r[t.get("id")];o?(n=t.get("keyShape").attr("path"),o.attr("path",n)):(o=t.get("keyShape").clone(),e.add(o)),t.isVisible()?o.show():o.hide(),o.exist=!0,r[t.get("id")]=o,this.set("itemMap",r)},O.prototype.updateOneNodeDelegateShape=function(t,e){var n,r=this.get("delegateStyle"),o=this.get("itemMap")||{},i=o[t.get("id")],a=t.getBBox();i?(n={x:a.minX,y:a.minY,width:a.width,height:a.height},i.attr(n),i.toFront()):i=e.addShape("rect",{attrs:Qo({x:a.minX,y:a.minY,width:a.width,height:a.height},r),name:"minimap-node-shape"}),t.isVisible()?i.show():i.hide(),i.exist=!0,o[t.get("id")]=i,this.set("itemMap",o)},O.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},O.prototype.initContainer=function(){var t=this.get("graph"),e=this.get("size"),n=this.get("className"),r=this.get("container"),n=Object(N.b)("<div class='".concat(n,"' style='width: ").concat(e[0],"px; height: ").concat(e[1],"px; overflow: hidden'></div>"));((r=Object(Y.isString)(r)?document.getElementById(r):r)||t.get("container")).appendChild(n),this.set("container",n);r=Object(N.b)('<div class="g6-minimap-container" style="position: relative;"></div>');n.appendChild(r),r.addEventListener("dragenter",function(t){t.preventDefault()}),r.addEventListener("dragover",function(t){t.preventDefault()}),n=new("svg"===t.get("renderer")?Gr:Fr).Canvas({container:r,width:e[0],height:e[1]}),this.set("canvas",n),this.updateCanvas()},O.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("size"),n=this.get("canvas"),r=this.get("type"),o=this.get("padding");if(!n.destroyed){switch(r){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var i,a,s,c,u,r=n.get("children")[0];r&&(r.resetMatrix(),n=r.getCanvasBBox(),i=t.get("canvas").getCanvasBBox(),t=t.getZoom()||1,c=i.width/t,i=i.height/t,Number.isFinite(n.width)&&(c=Jo(n.width,c),i=Jo(n.height,i)),c+=2*o,i+=2*o,t=Math.min(e[0]/c,e[1]/i),u=[1,0,0,0,1,0,0,0,1],s=a=0,Number.isFinite(n.minX)&&(a=-n.minX),Number.isFinite(n.minY)&&(s=-n.minY),n=(e[0]-(c-2*o)*t)/2,c=(e[1]-(i-2*o)*t)/2,u=ti(u,[["t",a,s],["s",t,t],["t",n,c]]),r.setMatrix(u),this.set("ratio",t),this.set("totaldx",n+a*t),this.set("totaldy",c+s*t),this.set("dx",n),this.set("dy",c),this.updateViewport())}}}},O.prototype.getCanvas=function(){return this.get("canvas")},O.prototype.getViewport=function(){return this.get("viewport")},O.prototype.getContainer=function(){return this.get("container")},O.prototype.destroy=function(){null!=(t=this.get("canvas"))&&t.destroy();var t=this.get("container");null!=t&&t.parentNode&&t.parentNode.removeChild(t)},O);function O(t){var n=Ko.call(this,t)||this;return n.handleUpdateCanvas=Object(Y.debounce)(function(t){var e=n;e.destroyed||e.updateCanvas()},100,!1),n}function ei(t){return $o.call(this,t)||this}function ni(t,e,n){var r=t.x-e.x,t=t.y-e.y;return!n||Math.abs(r)>n||Math.abs(t)>n?Math.sqrt(r*r+t*t):n}function ri(t,e){var n=(e.source.y-e.target.y)/(e.source.x-e.target.x),t=(n*n*e.source.x+n*(t.y-e.source.y)+t.x)/(n*n+1);return{x:t,y:n*(t-e.source.x)+e.source.y}}qo=function(t,e){return(qo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}qo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(M,si=i),M.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},M.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick");this.set("tick",function(){e&&e(),t.refreshPositions()})},M.prototype.bundling=function(t){var i=this;if(i.set("data",t),!i.isTicking()){var e=t.edges||[],a={},n=!1;if((t.nodes||[]).forEach(function(t){null!==t.x&&null!==!t.y&&void 0!==t.x||(n=!0),a[t.id]=t}),n)throw new Error("please layout the graph or assign x and y for nodes first");i.set("nodeIdMap",a);var s=i.get("divisions"),r=i.get("divRate"),c=i.divideEdges(s),t=(i.set("edgePoints",c),i.getEdgeBundles());i.set("edgeBundles",t);for(var o=i.get("cycles"),u=i.get("iterations"),l=i.get("iterRate"),d=i.get("lambda"),h=0;h<o;h++){for(var f=0;f<u;f++)!function(){var o=[];e.forEach(function(t,e){if(t.source!==t.target){var n=a[t.source],t=a[t.target];o[e]=i.getEdgeForces({source:n,target:t},e,s,d);for(var r=0;r<s+1;r++)c[e][r].x+=o[e][r].x,c[e][r].y+=o[e][r].y}})}();d/=2,s*=r,u*=l,c=i.divideEdges(s),i.set("edgePoints",c)}e.forEach(function(t,e){t.source!==t.target&&(t.type="polyline",t.controlPoints=c[e].slice(1,c[e].length-1))}),i.get("graph").refresh()}},M.prototype.updateBundling=function(e){var t,n=this,r=e.data;r&&n.set("data",r),n.get("ticking")&&n.set("ticking",!1),Object.keys(e).forEach(function(t){n.set(t,e[t])}),e.onTick&&(t=this.get("graph"),n.set("tick",function(){e.onTick(),t.refresh()})),n.bundling(r)},M.prototype.divideEdges=function(r){var o=this,t=o.get("data").edges,u=o.get("nodeIdMap"),l=o.get("edgePoints");return l&&void 0!==l||(l=[]),t.forEach(function(t,i){l[i]&&void 0!==l[i]||(l[i]=[]);var e,a,s,c,n=u[t.source],t=u[t.target];1===r?(l[i].push({x:n.x,y:n.y}),l[i].push({x:.5*(n.x+t.x),y:.5*(n.y+t.y)}),l[i].push({x:t.x,y:t.y})):(a=(null!=(e=l[i])&&e.length?o.getEdgeLength(l[i]):ni({x:n.x,y:n.y},{x:t.x,y:t.y}))/(r+1),s=a,c=[{x:n.x,y:n.y}],l[i].forEach(function(t,e){if(0!==e){for(var n=ni(t,l[i][e-1]);s<n;){var r=s/n,o={x:l[i][e-1].x,y:l[i][e-1].y};o.x+=r*(t.x-l[i][e-1].x),o.y+=r*(t.y-l[i][e-1].y),c.push(o),n-=s,s=a}s-=n}}),c.push({x:t.x,y:t.y}),l[i]=c)}),l},M.prototype.getEdgeLength=function(n){var r=0;return n.forEach(function(t,e){0!==e&&(r+=ni(t,n[e-1]))}),r},M.prototype.getEdgeBundles=function(){var a=this,e=a.get("data").edges||[],s=a.get("bundleThreshold"),c=a.get("nodeIdMap"),u=(u=a.get("edgeBundles"))||[];return e.forEach(function(t,e){u[e]&&void 0!==u[e]||(u[e]=[])}),e.forEach(function(t,r){var o=c[t.source],i=c[t.target];e.forEach(function(t,e){var n;e<=r||(n=c[t.source],t=c[t.target],a.getBundleScore({source:o,target:i},{source:n,target:t})>=s&&(u[r].push(e),u[e].push(r)))})}),u},M.prototype.getBundleScore=function(t,e){return t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=ni({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=ni({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),this.getAngleScore(t,e)*this.getScaleScore(t,e)*this.getPositionScore(t,e)*this.getVisibilityScore(t,e)},M.prototype.getAngleScore=function(t,e){return n={x:t.vx,y:t.vy},r={x:e.vx,y:e.vy},(n.x*r.x+n.y*r.y)/(t.length*e.length);var n,r},M.prototype.getScaleScore=function(t,e){var n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n)},M.prototype.getPositionScore=function(t,e){var n=(t.length+e.length)/2;return n/(n+ni({x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},{x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2}))},M.prototype.getVisibilityScore=function(t,e){var n=this.getEdgeVisibility(t,e),e=this.getEdgeVisibility(e,t);return n<e?n:e},M.prototype.getEdgeVisibility=function(t,e){var n=ri(e.source,t),e=ri(e.target,t),r={x:(n.x+e.x)/2,y:(n.y+e.y)/2},t={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*ni(r,t)/ni(n,e))},M.prototype.getEdgeForces=function(t,e,n,r){for(var o=this.get("edgePoints"),i=this.get("K")/(ni(t.source,t.target)*(n+1)),a=[{x:0,y:0}],s=1;s<n;s++){var c={x:0,y:0},u=this.getSpringForce({pre:o[e][s-1],cur:o[e][s],next:o[e][s+1]},i),l=this.getElectrostaticForce(s,e);c.x=r*(u.x+l.x),c.y=r*(u.y+l.y),a.push(c)}return a.push({x:0,y:0}),a},M.prototype.getSpringForce=function(t,e){var n=t.pre.x+t.next.x-2*t.cur.x,t=t.pre.y+t.next.y-2*t.cur.y;return{x:n*=e,y:t*=e}},M.prototype.getElectrostaticForce=function(n,r){var o=this.get("eps"),t=this.get("edgeBundles"),i=this.get("edgePoints"),t=t[r],a={x:0,y:0};return t.forEach(function(t){var e={x:i[t][n].x-i[r][n].x,y:i[t][n].y-i[r][n].y};(Math.abs(e.x)>o||Math.abs(e.y)>o)&&(t=1/ni(i[t][n],i[r][n]),a.x+=e.x*t,a.y+=e.y*t)}),a},M.prototype.isTicking=function(){return this.get("ticking")},M.prototype.getSimulation=function(){return this.get("forceSimulation")},M.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),si.prototype.destroy.call(this)};W=M;ai=function(t,e){return(ai=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};var oi,ii,ai,si,ci=function(){return(ci=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ui={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},un=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ai(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(li,ii=i),li.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Object(Y.clone)(ui),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},li.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"}}return t},li.prototype.init=function(){var t=this.get("r"),e=(this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",t*t),this.get("d"));this.set("molecularParam",(e+1)*t)},li.prototype.createDelegate=function(t){var e=this,n=this,r=n.get("delegate");r&&!r.destroyed||(n.magnify(t),(r=n.get("delegate")).on("dragstart",function(t){n.set("delegateCenterDiff",{x:r.attr("x")-t.x,y:r.attr("y")-t.y})}),r.on("drag",function(t){n.magnify(t)}),"wheel"===this.get("scaleDBy")&&r.on("mousewheel",function(t){e.scaleDByWheel(t)}),"wheel"===this.get("scaleRBy")&&r.on("mousewheel",function(t){n.scaleRByWheel(t)}))},li.prototype.scaleRByWheel=function(t){var e,n,r,o,i,a;t&&t.originalEvent&&(t.preventDefault&&t.preventDefault(),e=this.get("graph"),n=((n=this.get("delegate"))?{x:n.attr("x"),y:n.attr("y")}:void 0)||e.getPointByClient(t.clientX,t.clientY),r=t.originalEvent.wheelDelta<0?.95:1/.95,a=this.get("maxR"),o=this.get("minR"),((i=this.get("r"))>(a||e.get("height"))&&1<r||i<(o||.05*e.get("height"))&&r<1)&&(r=1),this.set("r",i*=r),this.set("r2",i*i),a=this.get("d"),this.set("molecularParam",(a+1)*i),this.set("delegateCenterDiff",void 0),this.magnify(t,n))},li.prototype.scaleRByDrag=function(t){var e,n,r,o,i,a;t&&(r=this.get("dragPrePos"),n=(e=this.get("graph")).getPointByClient(t.clientX,t.clientY),r=t.x-r.x<0?.95:1/.95,a=this.get("maxR"),o=this.get("minR"),((i=this.get("r"))>(a||e.get("height"))&&1<r||i<(o||.05*e.get("height"))&&r<1)&&(r=1),this.set("r",i*=r),this.set("r2",i*i),a=this.get("d"),this.set("molecularParam",(a+1)*i),this.magnify(t,n),this.set("dragPrePos",{x:t.x,y:t.y}))},li.prototype.scaleDByWheel=function(t){var e,n,r;(t||t.originalEvent)&&(t.preventDefault&&t.preventDefault(),r=t.originalEvent.wheelDelta<(r=0)?-.1:.1,r=this.get("d")+r,e=this.get("maxD"),n=this.get("minD"),r<e)&&n<r&&(this.set("d",r),e=this.get("r"),this.set("molecularParam",(r+1)*e),r=(n=this.get("delegate"))?{x:n.attr("x"),y:n.attr("y")}:void 0,this.set("delegateCenterDiff",void 0),this.magnify(t,r))},li.prototype.scaleDByDrag=function(t){var e=this.get("dragPrePos"),e=0<t.x-e.x?.1:-.1,e=this.get("d")+e,n=this.get("maxD"),r=this.get("minD");e<n&&r<e&&(this.set("d",e),n=this.get("r"),this.set("molecularParam",(e+1)*n),this.magnify(t)),this.set("dragPrePos",{x:t.x,y:t.y})},li.prototype.magnify=function(t,e){this.restoreCache();var n=this.get("graph"),r=this.get("cachedMagnifiedModels"),o=this.get("cachedOriginPositions"),i=this.get("showLabel"),a=this.get("r"),s=this.get("r2"),c=this.get("d"),u=this.get("molecularParam"),l=n.getNodes(),d=l.length,h=e?{x:e.x,y:e.y}:{x:t.x,y:t.y},e=(!this.get("dragging")||"mousemove"!==this.get("trigger")&&"click"!==this.get("trigger")||(h=this.get("cacheCenter")),this.get("delegateCenterDiff"));e&&(h.x+=e.x,h.y+=e.y),this.updateDelegate(h,a);for(var f=0;f<d;f++){var p=l[f].getModel(),g=p.x,y=p.y;if(!isNaN(g)&&!isNaN(y)){var m=(g-h.x)*(g-h.x)+(y-h.y)*(y-h.y);if(!isNaN(m)&&m<s&&0!=m){var m=Math.sqrt(m),v=u*m/(c*m+a),b=(g-h.x)/m,x=(y-h.y)/m;if(p.x=b*v+h.x,p.y=x*v+h.y,o[p.id]||(o[p.id]={x:g,y:y,texts:[]}),r.push(p),i&&2*m<a)for(var w=l[f].getContainer().getChildren(),_=w.length,E=0;E<_;E++){var S=w[E];"text"===S.get("type")&&(o[p.id].texts.push({visible:S.get("visible"),shape:S}),S.set("visible",!0))}}}}n.refreshPositions()},li.prototype.restoreCache=function(){for(var t=this.get("cachedMagnifiedModels"),e=this.get("cachedOriginPositions"),n=t.length,r=0;r<n;r++){var o=t[r],i=e[o.id];o.x=i.x,o.y=i.y;for(var a=i.texts.length,s=0;s<a;s++){var c=i.texts[s];c.shape.set("visible",c.visible)}}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},li.prototype.updateParams=function(t){var e=t.r,n=t.d,r=t.trigger,o=t.minD,i=t.maxD,a=t.minR,s=t.maxR,c=t.scaleDBy,u=t.scaleRBy;isNaN(t.r)||(this.set("r",e),this.set("r2",e*e)),isNaN(n)||this.set("d",n),isNaN(i)||this.set("maxD",i),isNaN(o)||this.set("minD",o),isNaN(s)||this.set("maxR",s),isNaN(a)||this.set("minR",a);var l,t=this.get("d"),e=this.get("r");this.set("molecularParam",(t+1)*e),"mousemove"!==r&&"click"!==r&&"drag"!==r||this.set("trigger",r),("drag"===c||"wheel"===c||"unset"===c)&&(this.set("scaleDBy",c),this.get("delegate").remove(),this.get("delegate").destroy(),l=this.get("dPercentText"))&&(l.remove(),l.destroy()),("drag"===u||"wheel"===u||"unset"===u)&&(this.set("scaleRBy",u),this.get("delegate").remove(),this.get("delegate").destroy(),l=this.get("dPercentText"))&&(l.remove(),l.destroy())},li.prototype.updateDelegate=function(t,e){var n,r,o=this,i=this,a=i.get("graph"),s=i.get("delegate");!s||s.destroyed?(n=a.get("group"),r=i.get("delegateStyle")||ui,s=n.addShape("circle",{attrs:ci({r:e/1.5,x:t.x,y:t.y},r),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?s.on("mousewheel",function(t){i.scaleRByWheel(t)}):"drag"===this.get("scaleRBy")&&(s.on("dragstart",function(t){i.set("dragging",!0),i.set("cacheCenter",{x:t.x,y:t.y}),i.set("dragPrePos",{x:t.x,y:t.y})}),s.on("drag",function(t){i.scaleRByDrag(t)}),s.on("dragend",function(t){i.set("dragging",!1)})),"wheel"===this.get("scaleDBy")?s.on("mousewheel",function(t){o.scaleDByWheel(t)}):"drag"===this.get("scaleDBy")&&(s.on("dragstart",function(t){i.set("dragging",!0),i.set("cacheCenter",{x:t.x,y:t.y}),i.set("dragPrePos",{x:t.x,y:t.y})}),s.on("drag",function(t){o.scaleDByDrag(t)}),s.on("dragend",function(t){i.set("dragging",!1)})))):s.attr({x:t.x,y:t.y,r:e/1.5}),i.get("showDPercent")&&(n=Math.round((i.get("d")-i.get("minD"))/(i.get("maxD")-i.get("minD"))*100),r=i.get("dPercentText"),e=t.y+e/1.5+16,!r||r.destroyed?(r=a.get("group").addShape("text",{attrs:{text:"".concat(n,"%"),x:t.x,y:e,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),i.set("dPercentText",r)):r.attr({text:"".concat(n,"%"),x:t.x,y:e})),i.set("delegate",s)},li.prototype.clear=function(){var t=this.get("graph"),t=(this.restoreCache(),t.refreshPositions(),this.get("delegate")),t=(t&&!t.destroyed&&(t.remove(),t.destroy()),this.get("dPercentText"));t&&!t.destroyed&&(t.remove(),t.destroy())},li.prototype.destroy=function(){this.clear()},li),on=(oi=function(t,e){return(oi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}oi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function li(t){return ii.call(this,t)||this}function M(t){return si.call(this,t)||this}"undefined"!=typeof document&&r()("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");on(fi,hi=i),fi.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(t){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},fi.prototype.init=function(){var e=this,n=this.get("graph"),t=this.get("getContent")(n),r=t,t=(Object(Y.isString)(t)&&(r=Object(N.b)(t)),this.get("className"));r.setAttribute("class",t||"g6-component-toolbar");var t=(t=this.get("container"))||this.get("graph").get("container"),o=((t=Object(Y.isString)(t)?document.getElementById(t):t).appendChild(r),this.set("toolBar",r),this.get("handleClick")),t=(r.addEventListener("click",function(t){var t=function(t){if(!t)return[];if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;){if(e.push(n),"HTML"===n.tagName)return e.push(document,window),e;n=n.parentElement}return e}(t).filter(function(t){return"LI"===t.nodeName});0!==t.length&&(t=t[0].getAttribute("code"))&&(o?o(t,n):e.handleDefaultOperator(t))}),this.get("position"));t&&Object(N.e)(r,{top:"".concat(t.y,"px"),left:"".concat(t.x,"px")}),this.bindUndoRedo()},fi.prototype.bindUndoRedo=function(){var t=this.get("graph"),n=document.querySelector('.g6-component-toolbar li[code="undo"]'),r=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),o=document.querySelector('.g6-component-toolbar li[code="redo"]'),i=document.querySelector('.g6-component-toolbar li[code="redo"] svg');n&&r&&o&&i&&(n.setAttribute("style","cursor: not-allowed"),r.setAttribute("style","opacity: 0.4"),o.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(t){var e=t.undoStack.length,t=t.redoStack.length;0===e?(n.setAttribute("style","cursor: not-allowed"),r.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),r.removeAttribute("style")),0===t?(o.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(o.removeAttribute("style"),i.removeAttribute("style"))}))},fi.prototype.undo=function(){var n=this.get("graph"),t=n.getUndoStack();if(t&&0!==t.length){var e=t.pop();if(e){var t=e.action,r=(n.pushStack(t,Object(Y.clone)(e.data),"redo"),e.data.before);if(r="add"===t?e.data.after:r)switch(t){case"visible":Object.keys(r).forEach(function(t){t=r[t];t&&t.forEach(function(t){var e=n.findById(t.id);t.visible?n.showItem(e,!1):n.hideItem(e,!1)})});break;case"render":case"update":Object.keys(r).forEach(function(t){t=r[t];t&&t.forEach(function(t){var e=n.findById(t.id);delete t.id,n.updateItem(e,t,!1),"combo"===e.getType()&&n.updateCombo(e)})});break;case"changedata":n.changeData(r,!1);break;case"delete":Object.keys(r).forEach(function(t){t=r[t];t&&t.forEach(function(t){var e=t.itemType;delete t.itemType,n.addItem(e,t,!1)})});break;case"add":Object.keys(r).forEach(function(t){t=r[t];t&&t.forEach(function(t){n.removeItem(t.id,!1)})});break;case"updateComboTree":Object.keys(r).forEach(function(t){t=r[t];t&&t.forEach(function(t){n.updateComboTree(t.id,t.parentId,!1)})});break;case"createCombo":var o=e.data.after.combos,o=o[o.length-1];Object.keys(r).forEach(function(t){t=r[t];t&&t.forEach(function(t){n.updateComboTree(t.id,t.parentId,!1)})}),n.removeItem(o.id,!1);break;case"uncombo":var i=r.combos[r.combos.length-1],o=r.nodes.concat(r.combos).map(function(t){return t.id}).filter(function(t){return t!==i.id});n.createCombo(i,o,!1);break;case"layout":n.updateLayout(r,void 0,void 0,!1)}}}},fi.prototype.redo=function(){var n=this.get("graph"),t=n.getRedoStack();if(t&&0!==t.length){var e=t.pop();if(e){var t=e.action,r=e.data.after;if(n.pushStack(t,Object(Y.clone)(e.data)),r="delete"===t?e.data.before:r)switch(t){case"visible":Object.keys(r).forEach(function(t){t=r[t];t&&t.forEach(function(t){var e=n.findById(t.id);t.visible?n.showItem(e,!1):n.hideItem(e,!1)})});break;case"render":case"update":Object.keys(r).forEach(function(t){t=r[t];t&&t.forEach(function(t){var e=n.findById(t.id);delete t.id,n.updateItem(e,t,!1),"combo"===e.getType()&&n.updateCombo(e)})});break;case"changedata":n.changeData(r,!1);break;case"delete":r.edges&&r.edges.forEach(function(t){n.removeItem(t.id,!1)}),r.nodes&&r.nodes.forEach(function(t){n.removeItem(t.id,!1)}),r.combos&&r.combos.forEach(function(t){n.removeItem(t.id,!1)});break;case"add":Object.keys(r).forEach(function(t){t=r[t];t&&t.forEach(function(t){var e=t.itemType;delete t.itemType,n.addItem(e,t,!1)})});break;case"updateComboTree":Object.keys(r).forEach(function(t){t=r[t];t&&t.forEach(function(t){n.updateComboTree(t.id,t.parentId,!1)})});break;case"createCombo":var o=r.combos[r.combos.length-1];n.createCombo(o,o.children.map(function(t){return t.id}),!1);break;case"uncombo":o=e.data.before.combos,o=o[o.length-1];n.uncombo(o.id,!1);break;case"layout":n.updateLayout(r,void 0,void 0,!1)}}}},fi.prototype.zoomOut=function(){var t=this.get("graph"),e=t.getZoom(),n=1/(1-.05*this.get("zoomSensitivity"));n*e>(this.get("maxZoom")||t.get("maxZoom"))||t.zoomTo(e*n)},fi.prototype.zoomIn=function(){var t=this.get("graph"),e=t.getZoom(),n=1-.05*this.get("zoomSensitivity");n*e<(this.get("minZoom")||t.get("minZoom"))||t.zoomTo(e*n)},fi.prototype.realZoom=function(){this.get("graph").zoomTo(1)},fi.prototype.autoZoom=function(){this.get("graph").fitView([20,20])},fi.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom()}},fi.prototype.destroy=function(){var t=this.get("toolBar"),e=(t&&(e=(e=this.get("container"))||this.get("graph").get("container"),(e=Object(Y.isString)(e)?document.getElementById(e):e).removeChild(t)),this.get("handleClick"));e&&t.removeEventListener("click",e)};var di,hi,R=fi,o=(di=function(t,e){return(di=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}di(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function fi(t){return hi.call(this,t)||this}"undefined"!=typeof document&&r()("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");o(Ri,pi=i),Ri.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(t){return"\n          <h4 class='tooltip-type'>".concat(t.item.getType(),"</h4>\n          <span class='tooltip-id'>ID").concat(t.item.getID(),"</span>\n        ")},shouldBegin:function(t){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},Ri.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},Ri.prototype.init=function(){var e=this,t=e.get("className")||"g6-component-tooltip",n=Object(N.b)("<div class='".concat(t,"'></div>")),t=(t=e.get("container"))||e.get("graph").get("container");Object(Y.isString)(t)&&(t=document.getElementById(t)),Object(N.e)(n,{position:"absolute",visibility:"hidden",display:"none"}),t.appendChild(n),"click"!==e.get("trigger")&&(n.addEventListener("mouseenter",function(t){Object(N.e)(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(t){e.hideTooltip()})),e.set("tooltip",n)},Ri.prototype.onClick=function(t){var e,n=this.get("itemTypes");t.item&&t.item.getType&&-1===n.indexOf(t.item.getType())||(n=t.item,e=this.get("graph"),this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),e.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),e.emit("tooltipchange",{item:t.item,action:"show"})))},Ri.prototype.onMouseEnter=function(t){var e,n=this.get("itemTypes");t.item&&t.item.getType&&-1===n.indexOf(t.item.getType())||(n=t.item,e=this.get("graph"),this.currentTarget=n,this.showTooltip(t),e.emit("tooltipchange",{item:t.item,action:"show"}))},Ri.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&-1===e.indexOf(t.item.getType())||this.currentTarget&&t.item===this.currentTarget&&this.showTooltip(t)},Ri.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},Ri.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},Ri.prototype.showTooltip=function(t){var e,n;t.item&&(e=this.get("itemTypes"),t.item.getType&&-1===e.indexOf(t.item.getType())||(e=this.get("tooltip"),n=this.get("getContent")(t),Object(Y.isString)(n)?e.innerHTML=n:(this.clearContainer(),e.appendChild(n)),this.updatePosition(t)))},Ri.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Object(N.e)(t,{visibility:"hidden",display:"none"})},Ri.prototype.updatePosition=function(t){var e,n,r,o,i,a,s=this.get("shouldBegin"),c=this.get("tooltip");s(t)?(e=(s=this.get("graph")).get("width"),n=s.get("height"),r=this.get("offsetX")||0,o=this.get("offsetY")||0,a=s.getPointByClient(t.clientX,t.clientY),i=this.get("fixToNode"),(t=t.item).getType&&"node"===t.getType()&&i&&Object(Y.isArray)(i)&&2<=i.length&&(a={x:(t=t.getBBox()).minX+t.width*i[0],y:t.minY+t.height*i[1]}),i=(t=s.getCanvasByPoint(a.x,a.y)).x,a=t.y,s={x:i+(t=s.getContainer()).offsetLeft+r,y:a+t.offsetTop+o},Object(N.e)(c,{visibility:"visible",display:"unset"}),i+(t=c.getBoundingClientRect()).width+r>e&&(s.x-=t.width+r),n<a+t.height+o&&(s.y-=t.height+o,s.y<0)&&(s.y=0),Object(N.e)(c,{left:"".concat(s.x,"px"),top:"".concat(s.y,"px")})):Object(N.e)(c,{visibility:"hidden",display:"none"})},Ri.prototype.hide=function(){this.onMouseLeave()},Ri.prototype.destroy=function(){var t,e=this.get("tooltip");e&&(t=(t=this.get("container"))||this.get("graph").get("container"),(t=Object(Y.isString)(t)?document.getElementById(t):t).removeChild(e))};var pi,G=Ri,gi=(Li.prototype.render=function(){var t=this.className,e=(this.x,this.y,this.backgroundColor),n=this.textColor,r=this.text,o=this.padding,i=this.opacity,a=this.fontSize,s=this.container,t=Object(N.b)("<div class='".concat(t,"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: ").concat(i,'"></div>')),i=((s=Object(Y.isString)(s)?document.getElementById(s):s).appendChild(t),this.parentHeight=s.offsetHeight,this.parentWidth=s.offsetWidth,Object(N.e)(t,{visibility:"hidden",top:0,left:0}),Object(N.b)("\n      <div style='position: absolute; white-space:nowrap; background-color: ".concat(e,"; font-size: ").concat(a,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(n,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>"))),s=(i.innerHTML=r,t.appendChild(i),this.backgroundDOM=i,Object(N.b)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(e,"'></div>")));t.appendChild(s),this.arrowDOM=s,this.container=t},Li.prototype.show=function(t){var e=t.text,t=t.x,e=(this.backgroundDOM.innerHTML=e,this.backgroundDOM.offsetWidth),n=this.backgroundDOM.offsetHeight,r=this.arrowDOM.offsetWidth,o=this.arrowDOM.offsetHeight,o=(Object(N.e)(this.container,{top:"".concat(-n-o,"px"),left:"".concat(t,"px"),visibility:"visible"}),Object(N.e)(this.backgroundDOM,{marginLeft:"".concat(-e/2,"px")}),Object(N.e)(this.arrowDOM,{marginLeft:"".concat(-r/2,"px"),top:"".concat(n,"px")}),t-e/2),r=t+e/2;o<0?Object(N.e)(this.backgroundDOM,{marginLeft:"".concat(-e/2-o,"px")}):r>this.parentWidth&&Object(N.e)(this.backgroundDOM,{marginLeft:"".concat(-e/2-r+this.parentWidth+12,"px")})},Li.prototype.hide=function(){Object(N.e)(this.container,{top:0,left:0,visibility:"hidden"})},Li),yi=function(){return(yi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},mi=(Pi.prototype.update=function(t){this.config=Object(Y.deepMix)({},this.config,t),this.updateElement(),this.renderMarker()},Pi.prototype.init=function(){this.initElement(),this.renderMarker()},Pi.prototype.initElement=function(){var t=this.config,e=t.group,t=t.style,n=t.scale,n=void 0===n?1:n,r=t.offsetX,o=t.offsetY,r=this.config.x+(void 0===r?0:r),o=this.config.y+(void 0===o?0:o),i=e.addGroup({name:"playPauseBtn"}),e=(this.startMarkerGroup=i.addGroup({name:"playPauseBtn"}),this.circle=e.addShape("circle",{attrs:yi({x:r,y:o,r:this.config.r*n},t),name:"playPauseBtn"}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(r,o,n),fill:t.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=i.addGroup({name:"playPauseBtn"}),.25*this.config.r*n),i=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:r-.375*this.config.r*n,y:o-i/2,width:e,height:i,fill:t.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:r+1/8*this.config.r*n,y:o-i/2,width:e,height:i,fill:t.stroke||"#aaa",lineWidth:0}})},Pi.prototype.updateElement=function(){var t=this.config.style,e=t.scale,e=void 0===e?1:e,n=t.offsetX,t=t.offsetY,n=this.config.x+(void 0===n?0:n),t=this.config.y+(void 0===t?0:t),r=(this.circle.attr("x",n),this.circle.attr("y",t),this.circle.attr("r",this.config.r*e),this.startMarker.attr("path",this.getStartMarkerPath(n,t,e)),.25*this.config.r*e),o=.5*this.config.r*Math.sqrt(3)*e;this.pauseLeftMarker.attr("x",n-.375*this.config.r*e),this.pauseLeftMarker.attr("y",t-o/2),this.pauseLeftMarker.attr("width",r),this.pauseLeftMarker.attr("height",o),this.pauseRightMarker.attr("x",n+1/8*this.config.r*e),this.pauseRightMarker.attr("y",t-o/2),this.pauseRightMarker.attr("width",r),this.pauseRightMarker.attr("height",o)},Pi.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},Pi.prototype.getStartMarkerPath=function(t,e,n){n=.5*this.config.r*Math.sqrt(3)*n;return[["M",t-n/Math.sqrt(3)/2,e-n/2],["L",t+n/Math.sqrt(3),e],["L",t-n/Math.sqrt(3)/2,e+n/2]]},Pi),k=function(){return(k=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},vi=x.a.transform,bi={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},xi={fill:"#fff"},wi={fill:"green"},_i={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},Ei={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Si={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:_i,timeTypeControllerStyle:Ei},Oi="single",Mi="range",ki=(Di.prototype.init=function(){this.renderPlayButton()},Di.prototype.getNextMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t+n,e],["L",t,e+n],["Z",t,e-n],["M",t,e],["L",t-n,e-n],["L",t-n,e+n],["Z"]]},Di.prototype.getPreMarkerPath=function(t,e,n){return[["M",t,e-n],["L",t-n,e],["L",t,e+n],["L",t,e-n],["M",t,e],["L",t+n,e-n],["L",t+n,e+n],["Z"]]},Di.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,n=t.height,r=t.x,o=t.y,i=t.hideTimeTypeController,a=t.fill,a=void 0===a?"#aaa":a,s=t.stroke,s=void 0===s?"green":s,c=t.containerStyle,c=void 0===c?{}:c,u=k(k({},bi),t.playBtnStyle||{}),l=k(k({},xi),t.preBtnStyle||{}),t=k(k({},wi),t.nextBtnStyle||{}),d=n/2-5,o=o+10,r=this.controllerGroup.addShape("rect",{attrs:k({x:r,y:o,width:e,height:n,stroke:s,fill:a},c),name:"container-rect"}),n=(this.playButton?this.playButton.update({x:e/2,y:o,r:d}):this.playButton=new mi({group:this.controllerGroup,x:e/2,y:o+d+5,r:d,isPlay:this.isPlay,style:u}),l.offsetX||0),s=l.offsetY||0,a=(l.scale||1)*d,c=(this.controllerGroup.addShape("path",{attrs:k({path:this.getPreMarkerPath(e/2-5*d+n,o+d+5+s,.5*a)},l),name:"preStepBtn"}),t.offsetX||0),u=t.offsetY||0,n=(t.scale||1)*d,s=(this.controllerGroup.addShape("path",{attrs:k({path:this.getNextMarkerPath(e/2+5*d+c,o+d+5+u,.5*n)},t),name:"nextStepBtn"}),r.toBack(),this.renderSpeedBtn(),i||this.renderToggleTime(),this.bindEvent(),this.controllerCfg.scale),a=void 0===s?1:s,l=this.controllerGroup.getCanvasBBox(),e=(l.maxX+l.minX)/2,c=(l.maxY+l.minY)/2,o=vi([1,0,0,0,1,0,0,0,1],[["t",-e,-c],["s",a,a],["t",e,c]]);this.controllerGroup.setMatrix(o)},Di.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,n=t.width,r=t.hideTimeTypeController,t=k(k({},_i),this.controllerCfg.speedControllerStyle||{}),o=t.scroller,i=void 0===o?{}:o,o=t.text,o=void 0===o?{}:o,a=t.pointer,a=void 0===a?{}:a,s=t.scale,s=void 0===s?1:s,c=t.offsetX,c=void 0===c?0:c,t=t.offsetY,t=void 0===t?0:t,u=this.controllerGroup.addGroup({name:"speed-group"}),l=(this.speedGroup=u,[]),d=5;this.speedAxisY=[19,22,26,32,39];for(var h=0;h<5;h++){var f=e+this.speedAxisY[h],p=n-(r?50:110);u.addShape("line",{attrs:k({x1:p,x2:15+p,y1:f,y2:f},i),speed:d,name:"speed-rect"}),this.speedAxisY[h]=f,l.push(d),--d}this.speedText=u.addShape("text",{attrs:k({x:n-(r?50:110)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},o),name:"speed-text"}),this.speedPoint=u.addShape("path",{attrs:k({path:this.getPointerPath(n-(r?50:110),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},a),name:"speed-pointer"});var o=this.speedGroup.getCanvasBBox(),a=(o.maxX+o.minX)/2,o=(o.maxY+o.minY)/2,g=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1],g=vi(g,[["t",-a,-o],["s",s,s],["t",a+c*s,o+t*s]]);this.speedGroup.setMatrix(g)},Di.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},Di.prototype.renderToggleTime=function(){var t=this.controllerCfg,e=t.width,t=t.defaultTimeType,n=k(k({},Ei),this.controllerCfg.timeTypeControllerStyle||{}),r=n.scale,r=void 0===r?1:r,o=n.offsetX,o=void 0===o?0:o,i=n.offsetY,i=void 0===i?0:i,a=n.box,a=void 0===a?{}:a,s=n.check,s=void 0===s?{}:s,n=n.text,n=void 0===n?{}:n,t=(this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"}),t===Oi),t=(this.toggleGroup.addShape("rect",{attrs:k({x:e-50,y:this.speedAxisY[0]+3.5},a),isChecked:t,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:k({path:[["M",e-50+3,this.speedAxisY[1]+6],["L",e-50+7,this.speedAxisY[1]+10],["L",e-50+12,this.speedAxisY[1]+4]]},s),capture:!1,name:"check-icon"}),t||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:k({text:t?(null==(a=this.controllerCfg)?void 0:a.timeRangeControllerText)||"":(null==(s=this.controllerCfg)?void 0:s.timePointControllerText)||"",x:e-50+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},n),name:"checked-text"}),this.toggleGroup.getCanvasBBox()),a=(t.maxX+t.minX)/2,s=(t.maxY+t.minY)/2,e=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1],e=vi(e,[["t",-a,-s],["s",r,r],["t",a+o*r,s+i*r]]);this.toggleGroup.setMatrix(e)},Di.prototype.bindEvent=function(){var i=this;this.speedGroup.on("speed-rect:click",function(t){var t=t.target.attr("y1"),e=i.speedPoint.attr("matrix"),n=i.speedAxisY.indexOf(e[7]||0),t=i.speedAxisY.indexOf(t),n=i.speedAxisY[t]-i.speedAxisY[n],e=vi(e,[["t",0,n]]);i.speedPoint.setMatrix(e),i.currentSpeed=i.speedAxisY.length-t,i.speedText.attr("text","".concat(i.currentSpeed,".0X")),i.group.emit("timebarConfigChanged",{speed:i.currentSpeed,type:i.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var n,r=(e=i.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1])[7],o=i.speedAxisY.indexOf(r),t=(-1===o&&(n=1/0,i.speedAxisY.forEach(function(t,e){t=Math.abs(t-r);t<n&&(n=t,o=e)})),o=0<t.originalEvent.deltaY?Math.max(0,o-1):Math.min(i.speedAxisY.length-1,o+1),i.speedAxisY[o]-r),e=vi(e,[["t",0,t]]);i.speedPoint.setMatrix(e),i.currentSpeed=i.speedAxisY.length-o,i.speedText.attr("text","".concat(i.currentSpeed,".0X")),i.group.emit("timebarConfigChanged",{speed:i.currentSpeed,type:i.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var e,n=t.target.get("isChecked");n?(i.checkedIcon.hide(),i.checkedText.attr("text",(null==(e=i.controllerCfg)?void 0:e.timePointControllerText)||""),i.currentType=Mi):(i.checkedIcon.show(),i.checkedText.attr("text",(null==(e=i.controllerCfg)?void 0:e.timeRangeControllerText)||""),i.currentType=Oi),t.target.set("isChecked",!n),i.group.emit("timebarConfigChanged",{type:i.currentType,speed:i.currentSpeed})})},Di.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},Di),Ci=function(){return(Ci=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ai=x.a.transform,Ii={fill:"#5B8FF9"},Ti={fill:"#e6e8e9"},ji=(Ni.prototype.renderSlices=function(){var s=this,t=this,c=t.width,e=t.height,u=t.padding,n=t.data,r=t.start,o=t.end,l=t.tickLabelFormatter,d=t.selectedTickStyle,h=t.unselectedTickStyle,f=t.tickLabelStyle,p=e-(3*u+4+10)-2*u,g=n.length,y=(c-2*u-2*(g-1))/g,m=(this.tickWidth=y,this.sliceGroup),v=[],b=[],x=Math.round(g*r),w=Math.round(g*o),_=(this.startTickRectId=x,this.endTickRectId=w,f.rotate),t=(delete f.rotate,n.forEach(function(t,e){var n=m.addShape("rect",{attrs:Ci({x:u+e*(2+y),y:u,width:y,height:p},x<=e&&e<=w?d:h),draggable:!0,name:"tick-rect-".concat(e)}),r=m.addShape("rect",{attrs:{x:u+e*y+2*(2*e-1)/2,y:u,width:0===e||e===g-1?1+y:2+y,height:p,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(e)});r.toFront();var o,i=n.getBBox(),a=(i.minX+i.maxX)/2;v.push({rect:n,pickRect:r,value:t.date,x:a,y:i.minY}),l?(o=l(t),Object(Y.isString)(o)||(o=o&&t.date)):e%Math.round(g/10)==0&&(o=t.date),o&&(b.push(o),n=i.maxY+2*u,m.addShape("line",{attrs:{stroke:"#BFBFBF",x1:a,y1:n,x2:a,y2:n+4},name:"tick-line"}),(t=(e=m.addShape("text",{attrs:Ci({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:a,y:r=n+4+u,textAlign:"center",text:o,textBaseline:"top",fontSize:10,fontFamily:s.fontFamily||"Arial, sans-serif"},f),capture:!1,name:"tick-label"})).getBBox()).maxX>c?e.attr("textAlign","right"):t.minX<0&&e.attr("textAlign","left"),Object(Y.isNumber)(_)&&10!==b.length&&(i=Ai([1,0,0,0,1,0,0,0,1],[["t",-a,-r],["r",_],["t",a-5,r+2]]),e.attr({textAlign:"left",matrix:i})),1===b.length?e.attr({textAlign:"left"}):10===b.length&&e.attr({textAlign:"right"}))}),this.tickRects=v,this.group);this.currentSpeed=1,this.controllerBtnGroup=new ki(Ci({group:t,x:this.x,y:this.y+e+5,width:c,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},Ni.prototype.initEvent=function(){var c=this,t=this.sliceGroup,t=(t.on("click",function(t){var e,n,r,t=t.target;"rect"===t.get("type")&&t.get("name")&&(t=parseInt(t.get("name").split("-")[2],10),isNaN(t)||(e=c.tickRects,n=c.unselectedTickStyle,e.forEach(function(t){t.rect.attr(n)}),r=c.selectedTickStyle,e[t].rect.attr(r),c.startTickRectId=t,r=(c.endTickRectId=t)/e.length,c.graph.emit("valuechange",{value:[r,r]})))}),t.on("dragstart",function(t){var e=c.tickRects,n=c.unselectedTickStyle,t=(e.forEach(function(t){t.rect.attr(n)}),t.target),t=parseInt(t.get("name").split("-")[2],10),r=c.selectedTickStyle,r=(e[t].rect.attr(r),(c.startTickRectId=t)/e.length);c.graph.emit("valuechange",{value:[r,r]}),c.dragging=!0}),t.on("dragover",function(t){if(c.dragging&&"rect"===t.target.get("type")){for(var e=parseInt(t.target.get("name").split("-")[2],10),n=c.startTickRectId,r=c.tickRects,o=c.selectedTickStyle,i=c.unselectedTickStyle,a=0;a<r.length;a++)r[a].rect.attr(n<=a&&a<=e?o:i);var t=r.length,s=(c.endTickRectId=e,n/t);c.graph.emit("valuechange",{value:[s,e/t]})}}),t.on("drop",function(t){var e,n,r;c.dragging&&(c.dragging=!1,"rect"===t.target.get("type"))&&(e=c.startTickRectId,(t=parseInt(t.target.get("name").split("-")[2],10))<e||(r=c.selectedTickStyle,(n=c.tickRects)[t].rect.attr(r),c.endTickRectId=t,r=n.length,c.graph.emit("valuechange",{value:[e/r,t/r]})))}),this.tooltipBackgroundColor),n=this.tooltipFomatter,r=this.canvas,o=new gi({container:r.get("container"),backgroundColor:t}),i=this.tickRects,t=(i.forEach(function(t){t=t.pickRect;t.on("mouseenter",function(t){var e,t=t.target;"rect"===t.get("type")&&(t=parseInt(t.get("name").split("-")[2],10),e=r.getClientByPoint(i[t].x,i[t].y),o.show({x:i[t].x,y:i[t].y,clientX:e.x,clientY:e.y,text:n?n(i[t].value):i[t].value}))}),t.on("mouseleave",function(t){o.hide()})}),this.group);t.on("".concat("playPauseBtn",":click"),function(){c.isPlay=!c.isPlay,c.changePlayStatus()}),t.on("".concat("nextStepBtn",":click"),function(){c.updateStartEnd(1)}),t.on("".concat("preStepBtn",":click"),function(){c.updateStartEnd(-1)}),t.on("timebarConfigChanged",function(t){t.type,c.currentSpeed=t.speed})},Ni.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timebarstartplay",null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t)&&this.graph.emit("timebarendplay",null)},Ni.prototype.startPlay=function(){var e=this;return"undefined"!=typeof window?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)==0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},Ni.prototype.updateStartEnd=function(t){var e=this.tickRects,n=e.length,r=this.unselectedTickStyle,o=this.selectedTickStyle,i=this.endTickRectId;if(0<t?this.endTickRectId++:(e[this.endTickRectId].rect.attr(r),this.endTickRectId--),i!==this.startTickRectId)this.endTickRectId<this.startTickRectId&&(this.startTickRectId=this.endTickRectId);else{for(var a=this.startTickRectId;a<=this.endTickRectId-1;a++)e[a].rect.attr(r);this.startTickRectId=this.endTickRectId}e[this.endTickRectId]&&(e[this.endTickRectId].rect.attr(o),t=this.startTickRectId/n,i=this.endTickRectId/n,this.graph.emit("valuechange",{value:[t,i]}))},Ni.prototype.destory=function(){var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach(function(t){t=t.pickRect;t.off("mouseenter"),t.off("mouseleave")}),this.tickRects.length=0,t.off("".concat("playPauseBtn",":click")),t.off("".concat("nextStepBtn",":click")),t.off("".concat("preStepBtn",":click")),t.off("timebarConfigChanged"),this.sliceGroup.destroy()},Ni);function Ni(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,n=t.canvas,r=t.group,o=t.width,i=t.height,a=t.padding,s=t.data,c=t.start,u=t.end,l=t.x,l=void 0===l?0:l,d=t.y,d=void 0===d?0:d,h=t.tickLabelFormatter,f=t.selectedTickStyle,f=void 0===f?Ii:f,p=t.unselectedTickStyle,p=void 0===p?Ti:p,g=t.tooltipBackgroundColor,y=t.tooltipFomatter,m=t.tickLabelStyle,t=t.controllerCfg,t=void 0===t?{speed:1}:t;this.graph=e,this.group=r,this.sliceGroup=r.addGroup({name:"slice-group"}),this.canvas=n,this.width=o,this.height=i,this.padding=a,this.data=s,this.start=c,this.end=u,this.tickLabelFormatter=h,this.tickLabelStyle=m||{},this.selectedTickStyle=f,this.unselectedTickStyle=p,this.controllerCfg=t,this.currentSpeed=t.speed||1,this.x=l,this.y=d,this.tooltipBackgroundColor=g,this.tooltipFomatter=y,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}function Di(t){this.controllerCfg=Object(Y.deepMix)({},Si,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Mi,this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}function Pi(t){this.config=Object(Y.deepMix)({},t),this.init()}function Li(t){var e=t.x,e=void 0===e?0:e,n=t.y,n=void 0===n?0:n,r=t.text,o=t.padding,o=void 0===o?[4,4,4,4]:o,i=t.className,i=void 0===i?"g6-component-timebar-tooltip":i,a=t.backgroundColor,a=void 0===a?"#000":a,s=t.textColor,s=void 0===s?"#fff":s,c=t.opacity,c=void 0===c?.8:c,u=t.fontSize,u=void 0===u?12:u;this.container=t.container,this.className=i,this.backgroundColor=a,this.textColor=s,this.x=e,this.y=n,this.text=r,this.padding=o,this.opacity=c,this.fontSize=u,this.render()}function Ri(t){return pi.call(this,t)||this}new RegExp("([a-z])[\t\n\v\f\r \u2028\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\t\n\v\f\r \u2028\u2029]*,?[\t\n\v\f\r \u2028\u2029]*)+)","ig"),new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[\t\n\v\f\r \u2028\u2029]*,?[\t\n\v\f\r \u2028\u2029]*","ig"),Math.PI;var Bi=t(102);function zi(t){return t=t,Object(Y.map)(t,function(t,e){return[0===e?"M":"L",t[0],t[1]]})}function Fi(t,n,r,e){void 0===e&&(e=!0);var o,i,a,s=new Bi.b({values:t}),c=new Bi.a({values:Object(Y.map)(t,function(t,e){return e})}),t=Object(Y.map)(t,function(t,e){return[c.scale(e)*n,r-s.scale(t)*r]});return e?(e=t).length<=2?zi(e):(o=[],Object(Y.each)(e,function(t){Object(Y.isEqual)(t,o.slice(o.length-2))||o.push(t[0],t[1])}),i=function(t,e,n){void 0===n&&(n=[[0,0],[1,1]]);for(var e=!!(e=void 0===e?!1:e),r=[],o=0,i=t.length;o<i;o+=2)r.push([t[o],t[o+1]]);for(var a,s,c,u=function(t,e,n){var r,o=[],i=!!n;if(i){u=n[0],l=n[1];for(var a=0,s=t.length;a<s;a+=1)var c=t[a],u=S.vec2.min([0,0],u,c),l=S.vec2.max([0,0],l,c)}for(var a=0,d=t.length;a<d;a+=1){var h,f,p,g,y,m,v,b,c=t[a];0!==a||e?a!==d-1||e?(m=S.vec2.sub(m=[0,0],f=t[e?(a+1)%d:a+1],h=t[[a?a-1:d-1,a-1][e?0:1]]),m=S.vec2.scale(m,m,.4),0!==(y=(p=S.vec2.distance(c,h))+(g=S.vec2.distance(c,f)))&&(p/=y,g/=y),y=S.vec2.scale([0,0],m,-p),m=S.vec2.scale([0,0],m,g),v=S.vec2.add([0,0],c,y),b=S.vec2.add([0,0],c,m),b=S.vec2.min([0,0],b,S.vec2.max([0,0],f,c)),b=S.vec2.max([0,0],b,S.vec2.min([0,0],f,c)),y=S.vec2.sub([0,0],b,c),y=S.vec2.scale([0,0],y,-p/g),v=S.vec2.add([0,0],c,y),v=S.vec2.min([0,0],v,S.vec2.max([0,0],h,c)),v=S.vec2.max([0,0],v,S.vec2.min([0,0],h,c)),m=S.vec2.sub([0,0],c,v),m=S.vec2.scale([0,0],m,g/p),b=S.vec2.add([0,0],c,m),i&&(v=S.vec2.max([0,0],v,u),v=S.vec2.min([0,0],v,l),b=S.vec2.max([0,0],b,u),b=S.vec2.min([0,0],b,l)),o.push(r),o.push(v),r=b):(v=c,o.push(r),o.push(v)):r=c}return e&&o.push(o.shift()),o}(r,e,n),l=r.length,d=[],o=0;o<l-1;o+=1)a=u[2*o],s=u[2*o+1],d.push(["C",a[0],a[1],s[0],s[1],(c=r[o+1])[0],c[1]]);return e&&(a=u[l],d.push(["C",a[0],a[1],(s=u[l+1])[0],s[1],(c=r[0])[0],c[1]])),d}(o,!1),a=(e=Object(Y.head)(e))[0],i.unshift(["M",a,e[1]]),i):zi(t)}function Gi(t,n,r,e){void 0===e&&(e=5);for(var o,i,a,s,c,u=new Bi.b({values:t}),l=new Bi.a({values:Object(Y.map)(t,function(t,e){return e})}),d=Object(Y.map)(t,function(t,e){return[l.scale(e)*n,r-u.scale(t)*r]}),h=[],f=0;f<d.length;f++){var p=d[f],p=(p={x:p[0],y:p[1],y0:r,size:e},a=c=s=a=i=o=void 0,a=p.x,s=p.y,c=p.y0,p=p.size,c=Object(Y.isArray)(s)?(o=s[0],s[1]):(o=c,s),s=Object(Y.isArray)(a)?(i=a[0],a[1]):(i=a-p/2,a+p/2),(a=[{x:i,y:o},{x:i,y:c}]).push({x:s,y:c},{x:s,y:o}),a);h.push.apply(h,p)}var g=h,t=void 0,y=(void 0===t&&(t=!0),[]),m=g[0];y.push(["M",m.x,m.y]);for(var v=1,b=g.length;v<b;v++)y.push(["L",g[v].x,g[v].y]);return t&&(y.push(["L",m.x,m.y]),y.push(["z"])),y}function Ui(t,e,n,r){var o,t=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||((r=r||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],t,!0),r=(n=n,r=new Bi.b({values:r}),o=Math.max(0,r.min),n-r.scale(o)*n);return t.push(["L",e,r]),t.push(["L",0,r]),t.push(["Z"]),t}var Wi=function(){return(Wi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Xi={stroke:"#C5C5C5",strokeOpacity:.85},Yi={fill:"#CACED4",opacity:.85},Vi=(pa.prototype.renderLine=function(){var t=this,e=t.x,n=t.y,r=t.width,o=t.height,i=t.data,a=t.smooth,s=t.isArea,c=t.lineStyle,t=t.areaStyle,u=this.group.addGroup({name:"trend-group"});i&&(a=Fi(i,r,o,a),u.addShape("path",{attrs:Wi({path:a},c),name:"trend-line"}),s)&&(c=Ui(a,r,o,i),u.addShape("path",{attrs:Wi({path:c},t),name:"trend-area"})),this.intervalConfig&&u.addShape("path",{attrs:Wi({path:Gi(this.intervalConfig.data,r,o,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),u.move(e,n)},pa.prototype.destory=function(){this.group.destroy()},pa),Hi=function(){return(Hi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},qi={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Ki={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Zi=(fa.prototype.setX=function(t){this.setXY(t,void 0)},fa.prototype.setY=function(t){this.setXY(void 0,t)},fa.prototype.setXY=function(t,e){Object(Y.isNumber)(t)&&(this.x=t),Object(Y.isNumber)(e)&&(this.y=e),this.updateXY()},fa.prototype.renderHandle=function(){var t=this.width,e=this.height,n=this.style,r=this.name,o=n.fill,i=n.stroke,a=n.radius,s=n.opacity,n=n.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:e,fill:o,stroke:i,radius:a,opacity:s,cursor:n},name:"".concat(r,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:i,radius:a,opacity:s,cursor:n,lineAppendWidth:12},name:"".concat(r,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e,r:2*t,fill:o,stroke:i,radius:a,opacity:s,cursor:n},name:"".concat(r,"-handler")})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:o,stroke:i,radius:a,opacity:s,cursor:n,lineWidth:2},name:"".concat(r,"-handler")})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},fa.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var t=e.style.highLightFill;e.topCircle.attr("fill",t)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var t=e.style.fill;e.topCircle.attr("fill",t)})},fa.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var t=e.style.highLightFill;e.verticalLine.attr("fill",t),e.topCircle.attr("fill",t),e.bottomCircle.attr("fill",t)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var t=e.style.fill;e.verticalLine.attr("fill",t),e.topCircle.attr("fill",t),e.bottomCircle.attr("fill",t)})},fa.prototype.show=function(){this.handleGroup.show()},fa.prototype.hide=function(){this.handleGroup.hide()},fa.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},fa),C=function(){return(C=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},$i=x.a.transform,Qi={fill:"#416180",opacity:.05},Ji={fill:"#416180",opacity:.15,radius:5},ta={fill:"#5B8FF9",opacity:.3,cursor:"grab"},ea={width:2,height:24},na={textBaseline:"middle",fill:"#000",opacity:.45},ra={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},oa={lineWidth:1,stroke:"#ccc"},ia=(ha.prototype.update=function(t){var e=t.x,n=t.y,r=t.width,o=t.height,i=t.minText,a=t.maxText,s=t.end;this.start=Math.min(1,Math.max(t.start,0)),this.end=Math.min(1,Math.max(s,0)),Object(Y.assign)(this,{x:e,y:n,width:r,height:o,minText:i,maxText:a}),this.updateUI()},ha.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},ha.prototype.renderSlider=function(){var o=this,t=this.width,i=this.height,e=this.timeBarType,n=("trend"===e&&Object(Y.size)(Object(Y.get)(this.trendCfg,"data"))&&(n=new Vi(C(C({x:this.x,y:this.y,width:t,height:i},this.trendCfg),{group:this.group})),this.trendComponent=n),this.group.addGroup({name:"slider-group"})),r=(n.addShape("rect",{attrs:C({x:0,y:0,width:t,height:i},this.backgroundStyle),name:"background"}),this.group.addGroup()),r=("trend"===e?(this.minTextShape=r.addShape("text",{attrs:C({x:0,y:i/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=r.addShape("text",{attrs:C({y:i/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=r.addShape("text",{attrs:C({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=r.addShape("text",{attrs:C({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:C({x:0,y:this.y,height:i},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(t){t.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(t){t.target.attr("cursor",o.foregroundStyle.cursor||"grab")}),Object(Y.get)(this.handlerStyle,"width",2)),a=Object(Y.get)(this.handlerStyle,"height",24),s=this.group.addGroup({name:"minHandlerShape"}),s=(this.minHandlerShape=new Zi({name:"minHandlerShape",group:s,type:e,x:this.x,y:this.y,width:r,height:a,style:this.handlerStyle}),this.group.addGroup({name:"maxHandlerShape"})),c=(this.maxHandlerShape=new Zi({name:"maxHandlerShape",group:s,type:e,x:this.x,y:this.y,width:r,height:a,style:this.handlerStyle}),this.ticks),u=t/(c.length-1),l=(this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(t){t.destroy()}),-1/0),d=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=c.map(function(t,e){o.tickPosList.push(o.x+e*u),o.tickLabelFormatter?(r=o.tickLabelFormatter(t),Object(Y.isString)(r)||(r=r&&t.date)):r=t.date;var t=o.x+e*u,n=o.y+i+5,r=o.group.addShape("text",{attrs:C({x:t,y:n,text:r,fontFamily:o.fontFamily||"Arial, sans-serif"},o.tickLabelStyle),name:"tick-label"}),n=(Object(Y.isNumber)(d)&&e!==c.length-1&&(t=$i([1,0,0,0,1,0,0,0,1],[["t",-t,-n],["r",d],["t",t-5,n+2]]),r.attr({textAlign:"left",matrix:t})),0===e?r.attr({textAlign:"left"}):e!==c.length-1&&r.attr({textAlign:"right"}),o.group.addShape("line",{attrs:C({x1:o.x+e*u,y1:o.y+i+2,x2:o.x+e*u,y2:o.y+i+6},o.tickLineStyle),name:"tick-line"})),t=(n.toBack(),r.getBBox());return t.minX>l?(r.show(),n.show(),l=t.minX+t.width+10):(r.hide(),n.hide()),r}),this.controllerBtnGroup=new ki(C({group:this.group,x:this.x,y:this.y+i+25,width:t,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),n.move(this.x,this.y),this.bindEvents(),this.currentMode===Oi&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},ha.prototype.bindEvents=function(){var n=this,t=this.group.find(function(t){return"minHandlerShape"===t.get("name")}),t=(t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape))),this.group.find(function(t){return"maxHandlerShape"===t.get("name")}));t&&(t.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),t.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat("playPauseBtn",":click"),function(){n.isPlay=!n.isPlay,n.currentHandler=n.maxHandlerShape,n.changePlayStatus()}),this.group.on("".concat("nextStepBtn",":click"),function(){n.currentHandler=n.maxHandlerShape,n.updateStartEnd(.01),n.updateUI()}),this.group.on("".concat("preStepBtn",":click"),function(){n.currentHandler=n.maxHandlerShape,n.updateStartEnd(-.01),n.updateUI()}),this.group.on("timebarConfigChanged",function(t){var e=t.type;n.currentSpeed=t.speed,(n.currentMode=e)===Oi?(n.minHandlerShape.hide(),n.foregroundShape.hide(),n.minTextShape.hide()):e===Mi&&(n.minHandlerShape.show(),n.foregroundShape.show(),n.minTextShape.show())})},ha.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},ha.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:var e=0-this.start,n=1-this.start;return Math.min(n,Math.max(e,t));case this.maxHandlerShape:return e=0-this.end,n=1-this.end,Math.min(n,Math.max(e,t));case this.foregroundShape:return e=0-this.start,n=1-this.end,Math.min(n,Math.max(e,t));default:return 0}},ha.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(this.currentHandler)switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date}else this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):null==e?void 0:e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):null==n?void 0:n.date},ha.prototype.updateUI=function(){var n=this,t=(this.start<0&&(this.start=0),1<this.start&&(this.start=1),1<this.end&&(this.end=1),this.end<0&&(this.end=0),this.x+this.start*this.width),e=this.x+this.end*this.width,r=(this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",e-t),Object(Y.get)(this.handlerStyle,"width",2)),o=(this.setText(this.minText,this.maxText),this.dodgeText([t,e])),i=o[0],o=o[1];this.minHandlerShape.setX(t-r/2),Object(Y.each)(i,function(t,e){return n.minTextShape.attr(e,t)}),this.maxHandlerShape.setX(e-r/2),Object(Y.each)(o,function(t,e){return n.maxTextShape.attr(e,t)}),this.currentMode===Mi?this.graph.emit("valuechange",{value:[this.start,this.end].sort()}):this.currentMode===Oi&&this.graph.emit("valuechange",{value:[this.end,this.end]})},ha.prototype.dodgeText=function(t){var e=Object(Y.get)(this.handlerStyle,"width",2),n=this.minTextShape,r=this.maxTextShape,o=t[0],t=t[1],i=!1,a=(t<o&&(o=(a=[t,o])[0],t=a[1],n=(a=[r,n])[0],r=a[1],i=!0),n.getBBox()),s=r.getBBox(),c=null,u=null;return"trend"===this.timeBarType?(c=o-a.width<this.x+2?{x:o+e/2+2,textAlign:"left"}:{x:o-e/2-2,textAlign:"right"},u=t+s.width>this.x+this.width?{x:t-e/2-2,textAlign:"right"}:{x:t+e/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(c=n.attr("x")>a.width?{x:o,textAlign:"center"}:{x:o,textAlign:"left"},u=r.attr("x")>this.width-s.width?{x:t,textAlign:"right"}:{x:t,textAlign:"center"}),i?[u,c]:[c,u]},ha.prototype.startPlay=function(){var n=this;return"undefined"!=typeof window?window.requestAnimationFrame(function(){var t=n.ticks,e=n.currentSpeed,t=n.width/t.length/(1e3*(10-e)/60),e=n.adjustOffsetRange(t/n.width);n.updateStartEnd(e),n.updateUI(),n.isPlay&&(n.playHandler=n.startPlay())}):void 0},ha.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timebarstartplay",null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),t)&&this.graph.emit("timebarendplay",null)},ha.prototype.destory=function(){this.graph.off("valuechange",function(){});var t=this.group,e=t.find(function(t){return"minHandlerShape"===t.get("name")}),e=(e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy()),t.find(function(t){return"maxHandlerShape"===t.get("name")}));e&&(e.off("maxHandlerShape-handler:mousedown"),e.off("maxHandlerShape-handler:touchstart"),e.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("".concat("playPauseBtn",":click")),t.off("".concat("nextStepBtn",":click")),t.off("".concat("preStepBtn",":click")),t.off("timebarConfigChanged"),t.destroy(),this.trendComponent&&this.trendComponent.destory()},ha);ca=function(t,e){return(ca=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};var aa,sa,ca,ua=function(){return(ua=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},on=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ca(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(da,sa=i),da.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},da.prototype.initContainer=function(){var t,e=this.get("graph"),n=this._cfgs,r=n.width,o=n.height,n=n.putInGraphContainer,i=this.get("className")||"g6-component-timebar",a=this.get("container");a?t=a=Object(Y.isString)(a)?document.getElementById(a):a:(t=Object(N.b)("<div class='".concat(i,"'></div>")),Object(N.e)(t,{position:"relative"})),n&&this.get("graph").get("container").appendChild(t),this.set("timeBarContainer",t),a=new("SVG"===e.get("renderer")?Gr:Fr).Canvas({container:t,width:r,height:o}),this.get("containerCSS")&&Object(N.e)(t,this.get("containerCSS")),this.set("canvas",a)},da.prototype.init=function(){this.initContainer();var t=this.get("canvas").addGroup({name:"timebar-group"}),t=(this.set("timeBarGroup",t),this.renderTrend(),this.initEvent(),"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif");this.set("fontFamily",t)},da.prototype.play=function(){this.togglePlay(!0)},da.prototype.pause=function(){this.togglePlay(!1)},da.prototype.togglePlay=function(t){var e=this.get("timebar");e&&(e.isPlay=!!t,e.changePlayStatus())},da.prototype.renderTrend=function(){function e(){var t=r.get("timebar");t.draggingHandler=!1,t.isPlay&&(t.isPlay=!1,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()),document.removeEventListener("mouseup",e)}var n,r=this,t=this._cfgs,o=t.width,i=t.x,a=t.y,s=t.padding,c=t.type,u=t.trend,l=t.slider,d=t.controllerCfg,h=t.textStyle,f=t.tick,p=t.backgroundStyle,t=t.foregroundStyle,g=u.data,u=function(t,e){var n={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}(u,["data"]),y=o-2*s,m="trend"===c?26:4,v=this.get("graph"),b=this.get("timeBarGroup"),x=this.get("canvas"),w=null;"trend"===c||"simple"===c?(n=this.get("getValue"),w=new ia(ua(ua({graph:v,canvas:x,group:b,type:c,x:i+s,y:"trend"===c?a+s:a+s+15,width:y,height:m,padding:s,backgroundStyle:p,foregroundStyle:t,trendCfg:ua(ua({},u),{data:g.map(function(t){return(null==n?void 0:n(t))||t.value})})},l),{tick:{ticks:g,tickLabelFormatter:f.tickLabelFormatter,tickLabelStyle:f.tickLabelStyle,tickLineStyle:f.tickLineStyle},handlerStyle:ua(ua({},l.handlerStyle),{height:l.height||m}),controllerCfg:d,textStyle:h}))):"tick"===c&&(w=new ji(ua({graph:v,canvas:x,group:b,x:i+s,y:a+s,width:o,height:42,padding:2,controllerCfg:d},f)));x.on("mousedown",function(t){"maxHandlerShape-handler"!==t.target.get("name")&&"minHandlerShape-handler"!==t.target.get("name")&&t.target!==w.foregroundShape||document.addEventListener("mouseup",e)}),this.set("timebar",w)},da.prototype.filterData=function(t){var r,o,i,e,a,s,c,u,n,l,d,t=t.value,h=(t||(t=[],(f=this._cfgs.type)&&"trend"!==f&&"simple"!==f?"tick"===f&&(t[0]=this._cfgs.tick.start,t[1]=this._cfgs.tick.end):(t[0]=this._cfgs.slider.start,t[1]=this._cfgs.slider.end)),null),f=this._cfgs.type;"trend"===f||"simple"===f?h=this._cfgs.trend.data:"tick"===f&&(h=this._cfgs.tick.data),h&&0!==h.length?(e=this.get("rangeChange"),r=this.get("graph"),i=Math.round(h.length*t[0]),o=(o=Math.round(h.length*t[1]))>=h.length?h.length-1:o,i=i>=h.length?h.length-1:i,n=(t=null==(t=this._cfgs.tick)?void 0:t.tickLabelFormatter)?t(h[i]):h[i].date,t=t?t(h[o]):h[o].date,"tick"!==f&&this.get("timebar").setText(n,t),e?e(r,n,t):((!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=r.get("data")),f=this.get("filterItemTypes"),e=this.get("changeData"),a=this.get("getDate"),s=this.get("shouldIgnore"),c=h[i].date,u=h[o].date,e||void 0===e?(n=this.cacheGraphData.nodes,t=this.cacheGraphData.edges,l={},d={},r.getNodes().forEach(function(t){return l[t.getID()]=!0}),r.getEdges().forEach(function(t){return d[t.getID()]=!0}),f.includes("node")&&(null!=n&&n.forEach(function(t){var e=+((null==a?void 0:a(t))||t.date),e=c<=e&&e<=u||(null==s?void 0:s("node",t,{min:c,max:u})),n=l[t.id];n&&!e?(r.removeItem(t.id),l[t.id]=!1):!n&&e&&(r.addItem("node",t),l[t.id]=!0)}),null!=t)&&t.forEach(function(t){var e=l[t.source]&&l[t.target]||(null==s?void 0:s("edge",t,{min:c,max:u})),n=!!r.findById(t.id);n&&!e?(r.removeItem(t.id),d[t.id]=!1):!n&&e?(r.addItem("edge",t),d[t.id]=!0):n||(d[t.id]=!1)}),(this.get("filterEdge")||f.includes("edge"))&&null!=t&&t.filter(function(t){var e=+((null==a?void 0:a(t))||t.date),e=c<=e&&e<=u||(null==s?void 0:s("edge",t,{min:c,max:u})),n=l[t.source]&&l[t.target],e=e&&n,n=d[t.id];n&&!e?(d[t.id]=!1,r.removeItem(t.id)):!n&&e&&(d[t.id]=!0,r.addItem("edge",t))})):(f.includes("node")&&r.getNodes().forEach(function(t){var e=t.getModel();null!=s&&s("node",e,{min:c,max:u})||((e=+((null==a?void 0:a(e))||e.date))<c||u<e?r.hideItem(t):r.showItem(t))}),(this.get("filterEdge")||f.includes("edge"))&&r.getEdges().forEach(function(t){var e,n=t.getModel();null!=s&&s("edge",n,{min:h[i].date,max:h[o].date})||((n=+((null==a?void 0:a(n))||n.date))<h[i].date||n>h[o].date?r.hideItem(t):(n=t.getSource().isVisible(),e=t.getTarget().isVisible(),n&&e&&r.showItem(t)))})))):console.warn(" TimeBar ")},da.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on("valuechange",this.valueChangeListener)},da.prototype.destroy=function(){var t,e=this.get("graph"),e=(e.off("afterchangedata",this.changeData),e.off("afterrender",this.afterrenderListener),e.off("valuechange",this.valueChangeListener),this.get("timebar")),e=(e&&e.destory&&e.destory(),sa.prototype.destroy.call(this),this.get("timeBarContainer"));e&&(t=(t=this.get("container"))||this.get("graph").get("container"),(t=(t=Object(Y.isString)(t)?document.getElementById(t):t)===e?t.parentElement:t).removeChild(e))},da),o=(aa=function(t,e){return(aa=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}aa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),la=Br.applyMatrix;function da(t){var n=sa.call(this,t)||this;return n.afterrenderListener=function(t){return n.filterData({})},n.valueChangeListener=Object(Y.throttle)(function(t){return n.filterData(t)},200,{trailing:!0,leading:!0}),n.changeData=function(t){var e=n.get("graph");n.cacheGraphData=e.get("data"),n.filterData({})},n}function ha(t){var n=this,e=(this.prevX=0,this.onMouseDown=function(e){return function(t){n.currentHandler=e;t=t.originalEvent,t.stopPropagation(),t.preventDefault(),n.prevX=Object(Y.get)(t,"touches.0.pageX",t.pageX),t=n.canvas.get("container");t.addEventListener("mousemove",n.onMouseMove),t.addEventListener("mouseup",n.onMouseUp),t.addEventListener("mouseleave",n.onMouseUp),t.addEventListener("touchmove",n.onMouseMove),t.addEventListener("touchend",n.onMouseUp),t.addEventListener("touchcancel",n.onMouseUp)}},this.onMouseMove=function(t){t.stopPropagation(),t.preventDefault();var t=Object(Y.get)(t,"touches.0.pageX",t.pageX),e=t-n.prevX,e=n.adjustOffsetRange(e/n.width);n.updateStartEnd(e),n.updateUI(),n.prevX=t},this.onMouseUp=function(){n.currentHandler&&(n.currentHandler=void 0);var t=n.canvas.get("container");t&&(t.removeEventListener("mousemove",n.onMouseMove),t.removeEventListener("mouseup",n.onMouseUp),t.removeEventListener("mouseleave",n.onMouseUp),t.removeEventListener("touchmove",n.onMouseMove),t.removeEventListener("touchend",n.onMouseUp),t.removeEventListener("touchcancel",n.onMouseUp))},t.x),e=void 0===e?0:e,r=t.y,r=void 0===r?0:r,o=t.width,o=void 0===o?100:o,i=t.height,a=t.padding,a=void 0===a?10:a,s=t.trendCfg,c=t.controllerCfg,c=void 0===c?{speed:1}:c,u=t.backgroundStyle,u=void 0===u?{}:u,l=t.foregroundStyle,l=void 0===l?{}:l,d=t.handlerStyle,d=void 0===d?{}:d,h=t.textStyle,h=void 0===h?{}:h,f=t.start,f=void 0===f?0:f,p=t.end,p=void 0===p?1:p,g=t.minText,g=void 0===g?"":g,y=t.maxText,y=void 0===y?"":y,m=t.group,v=t.canvas,b=t.tick,b=void 0===b?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(t){return t},ticks:[]}:b,x=t.type;this.graph=t.graph,this.canvas=v,this.group=m,this.timeBarType=x,this.x=e,this.y=r,this.width=o,this.height=i,this.padding=a,this.ticks=b.ticks,this.trendCfg=s,this.controllerCfg=c,this.currentSpeed=c.speed||1,this.tickLabelFormatter=b.tickLabelFormatter,"trend"===x?this.backgroundStyle=C(C({},Qi),u):"simple"===x&&(this.backgroundStyle=C(C({},Ji),u)),this.foregroundStyle=C(C({},ta),l),this.handlerStyle=C(C({},ea),d),this.textStyle=C(C({},na),h),this.tickLabelStyle=C(C({},ra),b.tickLabelStyle),this.tickLineStyle=C(C({},oa),b.tickLineStyle),this.currentMode=c.defaultTimeType||Mi,this.start=f,this.end=p,this.minText=g,this.maxText=y,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}function fa(t){var e=t.group,n=t.name,r=t.type,o=t.x,o=void 0===o?0:o,i=t.y,i=void 0===i?0:i,a=t.width,a=void 0===a?2:a,s=t.height,s=void 0===s?24:s,t=t.style,t=void 0===t?{}:t;this.group=e,this.name=n,this.handleType=r,this.x=o,this.y=i,this.width=a,this.height=s,"trend"===r?this.style=Hi(Hi({},qi),t):"simple"===r&&(this.style=Hi(Hi({},Ki),t)),this.renderHandle()}function pa(t){var e=t.x,e=void 0===e?0:e,n=t.y,n=void 0===n?0:n,r=t.width,r=void 0===r?200:r,o=t.height,o=void 0===o?26:o,i=t.smooth,i=void 0===i||i,a=t.isArea,a=void 0!==a&&a,s=t.data,s=void 0===s?[]:s,c=t.lineStyle,u=t.areaStyle,l=t.interval,l=void 0===l?null:l;this.group=t.group,this.x=e,this.y=n,this.width=r,this.height=o,this.data=s,this.smooth=i,this.isArea=a,this.lineStyle=Object.assign({},Xi,c),this.areaStyle=Object.assign({},Yi,u),this.intervalConfig=l,this.renderLine()}o(T,Aa=i),T.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},T.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},T.prototype.disableRefresh=function(){this.set("refresh",!1)},T.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},T.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},T.prototype.initViewport=function(){var t,o,i,a,s,c,u,l,d,h,f,p=this,r=this._cfgs,g=r.graph;this.destroyed||(t=this.get("container"),Object(Y.isString)(t)&&(t=document.getElementById(t)),o=Object(N.b)("<div class=".concat(r.viewportClassName,"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff;\n        cursor:move'\n      </div>")),s=!1,f=h=d=l=u=c=a=i=0,t.addEventListener("mousedown",function(t){var e,n;r.refresh=!1,t.target===o&&(e=o.style,l=parseInt(e.width,10),d=parseInt(e.height,10),e=p.get("width"),n=p.get("height"),e<l||n<d||(f=g.getZoom(),h=p.get("ratio"),s=!0,i=t.clientX,a=t.clientY))},!1),t.addEventListener("mousemove",function(t){var e,n,r;!s||Object(Y.isNil)(t.clientX)||Object(Y.isNil)(t.clientY)||(r=p.get("width"),e=p.get("height"),n=o.style,c=parseInt(n.left,10),u=parseInt(n.top,10),l=parseInt(n.width,10),d=parseInt(n.height,10),n=i-t.clientX,c-n<0?n=c:r<=c-n+l&&(n=0),u-(r=a-t.clientY)<0?r=u:e<=u-r+d&&(r=0),c-=n,u-=r,Object(N.e)(o,{left:"".concat(c,"px"),top:"".concat(u,"px")}),g.translate(n*f/h,r*f/h),i=t.clientX,a=t.clientY)},!1),t.addEventListener("mouseleave",function(){s=!1,r.refresh=!0},!1),t.addEventListener("mouseup",function(){s=!1,r.refresh=!0},!1),this.set("viewport",o),t.appendChild(o))},T.prototype.updateViewport=function(){var t,e,n,r,o,i,a,s,c,u,l;this.destroyed||(t=this.get("ratio"),e=this.get("width"),n=this.get("height"),l=(s=(o=this.get("graph")).get("width"))/o.get("height"),i=[((a=(r=o.getGroup()).getCanvasBBox()).minX+a.maxX)/2,(a.minY+a.maxY)/2],u=[a.maxX-a.minX,a.maxY-a.minY],c={centerX:i[0],centerY:i[1],width:0,height:0,minX:0,minY:0},l<a[0]/a[1]?(c.width=u[0],c.height=c.width/l):(c.height=u[1],c.width=c.height*l),c.minX=i[0]-c.width/2,c.minY=i[1]-c.height/2,a=(a=r.getMatrix())||[1,0,0,0,1,0,0,0,1],u=x.b.invert([1,0,0,0,1,0,0,0,1],a),l=la({x:c.minX,y:c.minY},u),i=o.getCanvasByPoint(l.x,l.y),(r=this.get("viewport"))||this.initViewport(),l=(a=e*-i.x/c.width)+(o=(u=s/c.width)*e),c=(s=n*-i.y/c.height)+(i=u*n),a<0&&(o+=a,a=0),e<l&&(o-=l-e),s<0&&(i+=s,s=0),n<c&&(i-=c-n),this.set("ratio",t),u="".concat(a,"px"),l="".concat(s,"px"),Object(N.e)(r,{left:u,top:l,width:"".concat(o,"px"),height:"".concat(i,"px")}))},T.prototype.init=function(){this.initContainer()},T.prototype.initContainer=function(){var t=this.get("graph"),e=t.get("width"),e=t.get("height")/e,n=this.get("className"),r=this.get("container"),o=this.get("width"),i=this.get("height"),e=((o=o||i?o:200)?this.set("height",i=e*o):this.set("width",o=1/e*i),Object(N.b)("<div class='".concat(n,"' style='width: ").concat(o,"px; height: ").concat(i,"px; overflow: hidden; position: relative;'></div>"))),n=(((r=Object(Y.isString)(r)?document.getElementById(r):r)||t.get("container")).appendChild(e),this.set("container",e),Object(N.b)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>')),o=(e.appendChild(n),Object(N.b)('<span style="display: table-cell; vertical-align: middle; "></span>')),i=(n.appendChild(o),this.set("containerDOM",n),this.set("containerSpan",o),Object(N.b)('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />')));this.set("imgDOM",i),this.updateImgSize(),o.appendChild(i),this.updateCanvas()},T.prototype.updateImgSize=function(){var o=this.get("imgDOM"),i=this.get("width"),a=this.get("height");o.onload=function(){(r=o).naturalWidth?(t=r.naturalWidth,e=r.naturalHeight):((n=new Image).src=r.src,n.onload=function(){});var t,e,n,r=[t,e];r[1]<r[0]?o.width=i:o.height=a}},T.prototype.updateCanvas=function(){var t;this.get("refresh")&&!(t=this.get("graph")).get("destroyed")&&(this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport()),t=this.get("width")/t.get("canvas").getCanvasBBox().width,this.set("ratio",t),this.updateViewport())},T.prototype.getViewport=function(){return this.get("viewport")},T.prototype.getContainer=function(){return this.get("container")},T.prototype.updateGraphImg=function(t){this.get("imgDOM").remove(),this.set("graphImg",t);var e=Object(N.b)('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));this.set("imgDOM",e),e.src=t,this.updateImgSize(),this.get("containerSpan").appendChild(e),this.updateCanvas()},T.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)};var t=T,o=(Ca=function(t,e){return(Ca=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ca(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ga=function(){return(ga=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ya=Br.distance,ma={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},o=(o(Pa,ka=i),Pa.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Object(Y.clone)(ma),showLabel:"edge",scaleRBy:"wheel"}},Pa.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"}}return t},Pa.prototype.init=function(){var t=this.get("showLabel"),e="edge"===t||"both"===t;this.set("showNodeLabel","node"===t||"both"===t),this.set("showEdgeLabel",e),this.get("shouldShow")||this.set("shouldShow",function(){return!0})},Pa.prototype.createDelegate=function(t){var e=this,n=e.get("delegate");n&&!n.destroyed||(e.filter(t),(n=e.get("delegate")).on("dragstart",function(t){}),n.on("drag",function(t){e.filter(t)}),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",function(t){e.scaleRByWheel(t)}))},Pa.prototype.scaleRByWheel=function(t){var e,n,r,o,i;t&&t.originalEvent&&(t.preventDefault&&t.preventDefault(),e=this.get("graph"),(n=this.get("delegate"))?(n.attr("x"),n.attr("y")):e.getPointByClient(t.clientX,t.clientY),n=t.originalEvent.wheelDelta<0?.95:1/.95,r=this.get("maxR"),o=this.get("minR"),((i=this.get("r"))>(r||e.get("height"))&&1<n||i<(o||.05*e.get("height"))&&n<1)&&(n=1),this.set("r",i*=n),this.filter(t))},Pa.prototype.filter=function(t){var e=this.get("graph"),n=e.getNodes(),o={},r=this.get("r"),i=this.get("type"),a={x:t.x,y:t.y},s=(this.updateDelegate(a,r),this.get("shouldShow")),c=this.get("vShapes"),t=(c&&c.forEach(function(t){t.remove(),t.destroy()}),c=[],n.forEach(function(t){var e=t.getModel(),n=e.x;ya({x:n,y:e.y},a)<r&&(o[e.id]=t)}),e.getEdges()),u=[],l=(t.forEach(function(t){var e=t.getModel(),n=e.source,r=e.target;s(e)&&("only-source"===i||"one"===i?o[n]&&!o[r]&&u.push(t):"only-target"===i||"one"===i?o[r]&&!o[n]&&u.push(t):"both"===i&&o[n]&&o[r]&&u.push(t))}),this.get("showNodeLabel")),d=this.get("showEdgelabel"),h=e.get("group");u.forEach(function(t){t.get("group").get("children").forEach(function(t){var e=t.get("type"),t=h.addShape(e,{attrs:t.attr()});c.push(t),l&&"text"===e&&t.set("visible",!0)})}),Object.keys(o).forEach(function(t){t=o[t].get("group").clone();if(h.add(t),c.push(t),d)for(var e=t.get("children"),n=0;n<e.length;n++){var r=e[n];"text"===r.get("type")&&r.set("visible",!0)}}),this.set("vShapes",c)},Pa.prototype.updateParams=function(t){var e=t.r,n=t.trigger,r=t.minR,o=t.maxR,i=t.scaleRBy,a=t.showLabel,s=t.shouldShow;isNaN(t.r)||this.set("r",e),isNaN(o)||this.set("maxR",o),isNaN(r)||this.set("minR",r),"mousemove"!==n&&"click"!==n||this.set("trigger",n),("wheel"===i||"unset"===i)&&(this.set("scaleRBy",i),this.get("delegate").remove(),this.get("delegate").destroy(),t=this.get("dPercentText"))&&(t.remove(),t.destroy()),"node"!==a&&"both"!==a||this.set("showNodeLabel",!0),"edge"!==a&&"both"!==a||this.set("showEdgeLabel",!0),s&&this.set("shouldShow",s)},Pa.prototype.updateDelegate=function(t,e){var n,r=this,o=r.get("graph"),i=r.get("delegate");!i||i.destroyed?(o=o.get("group"),n=r.get("delegateStyle")||ma,i=o.addShape("circle",{attrs:ga({r:e,x:t.x,y:t.y},n),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&i.on("mousewheel",function(t){r.scaleRByWheel(t)})):i.attr({x:t.x,y:t.y,r:e}),r.set("delegate",i)},Pa.prototype.clear=function(){var t=this.get("vShapes"),t=(t&&t.forEach(function(t){t.remove(),t.destroy()}),this.set("vShapes",t=[]),this.get("delegate"));t&&!t.destroyed&&(t.remove(),t.destroy())},Pa.prototype.destroy=function(){this.clear()},Pa),va=(Ma=function(t,e){return(Ma=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Ma(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ba=Br.pointLineDistance,xa={stroke:"#FA8C16",lineWidth:1},va=(va(Da,Oa=i),Da.prototype.getDefaultCfgs=function(){return{line:xa,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},Da.prototype.init=function(){},Da.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},Da.prototype.onDragStart=function(){this.initBoxLine()},Da.prototype.onDrag=function(t){var t=t.item,e=(t.get("delegateShape")||t).getBBox(),t=t.getModel(),n=t.x-e.x,t=t.y-e.y;this.show({x:e.minX+n,y:e.minY+t},{width:e.width,height:e.height})},Da.prototype.onDragEnd=function(){this.destory()},Da.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,o=t.verticalLines,i=t.itemAlignType;this.get("graph").getNodes().forEach(function(t){var e=t.getBBox(),n=t.get("id");!0===i||"horizontal"===i?(r["".concat(n,"tltr")]=[e.minX,e.minY,e.maxX,e.minY,t],r["".concat(n,"lcrc")]=[e.minX,e.centerY,e.maxX,e.centerY,t],r["".concat(n,"blbr")]=[e.minX,e.maxY,e.maxX,e.maxY,t]):"center"===i&&(r["".concat(n,"lcrc")]=[e.minX,e.centerY,e.maxX,e.centerY,t]),!0===i||"vertical"===i?(o["".concat(n,"tlbl")]=[e.minX,e.minY,e.minX,e.maxY,t],o["".concat(n,"tcbc")]=[e.centerX,e.minY,e.centerX,e.maxY,t],o["".concat(n,"trbr")]=[e.maxX,e.minY,e.maxX,e.maxY,t]):"center"===i&&(o["".concat(n,"tcbc")]=[e.centerX,e.minY,e.centerX,e.maxY,t])})},Da.prototype.show=function(t,e){var n=Object(Y.mix)({},t);return this.itemAlign(t,e,n),t},Da.prototype.itemAlign=function(t,e,n){var r=this,o=this._cfgs,i=o.horizontalLines,a=o.verticalLines,o=o.tolerance,s={x:n.x+e.width/2,y:n.y},c={x:n.x+e.width/2,y:n.y+e.height/2},u={x:n.x+e.width/2,y:n.y+e.height},l={x:n.x,y:n.y+e.height/2},d={x:n.x+e.width,y:n.y+e.height/2},h=[],f=[],p=null;if(this.clearAlignLine(),Object(Y.each)(i,function(t){t[4].isVisible&&(h.push(r.getLineDisObject(t,s)),h.push(r.getLineDisObject(t,c)),h.push(r.getLineDisObject(t,u)))}),Object(Y.each)(a,function(t){t[4].isVisible&&(f.push(r.getLineDisObject(t,l)),f.push(r.getLineDisObject(t,c)),f.push(r.getLineDisObject(t,d)))}),h.sort(function(t,e){return t.dis-e.dis}),f.sort(function(t,e){return t.dis-e.dis}),0!==h.length&&h[0].dis<o){t.y=h[0].line[1]-h[0].point.y+n.y;for(var p={type:"item",horizontals:[h[0]]},g=1;g<3;g++)h[0].dis===h[g].dis&&p.horizontals.push(h[g])}if(0!==f.length&&f[0].dis<o)for(t.x=f[0].line[0]-f[0].point.x+n.x,p?p.verticals=[f[0]]:p={type:"item",verticals:[f[0]]},g=1;g<3;g++)f[0].dis===f[g].dis&&p.verticals.push(f[g]);p&&(p.bbox=e,this.addAlignLine(p))},Da.prototype.addAlignLine=function(t){var o=t.bbox,e=t.type,n=t.horizontals,t=t.verticals,r=this._cfgs,i=r.line,a=r.alignLines,s=this.get("graph").get("group");"item"===e&&(n&&Object(Y.each)(n,function(t){var e=t.line,t=t.point,n=(e[0]+e[2])/2,n=t.x<n?(r=t.x-o.width/2,Math.max(e[0],e[2])):(r=t.x+o.width/2,Math.min(e[0],e[2])),t=Object(Y.mix)({x1:r,y1:e[1],x2:n,y2:e[1]},i),r=s.addShape("line",{attrs:t,capture:!1});a.push(r)}),t)&&Object(Y.each)(t,function(t){var e=t.line,t=t.point,n=(e[1]+e[3])/2,n=t.y<n?(r=t.y-o.height/2,Math.max(e[1],e[3])):(r=t.y+o.height/2,Math.min(e[1],e[3])),t=Object(Y.mix)({x1:e[0],y1:r,x2:e[0],y2:n},i),r=s.addShape("line",{attrs:t,capture:!1});a.push(r)})},Da.prototype.getLineDisObject=function(t,e){return{line:t,point:e,dis:ba(t,e)}},Da.prototype.getContainer=function(){return this.get("container")},Da.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;Object(Y.each)(t,function(t){t.remove()}),t.length=0},Da.prototype.destory=function(){var t=this._cfgs,e=t.horizontalLines,n=t.verticalLines;this.get("graph").getNodes().forEach(function(t){t=t.get("id");delete e["".concat(t,"tltr")],delete e["".concat(t,"lcrc")],delete e["".concat(t,"blbr")],delete n["".concat(t,"tlbl")],delete n["".concat(t,"tcbc")],delete n["".concat(t,"trbr")]}),this.clearAlignLine()},Da);Sa=function(t,e){return(Sa=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};function wa(t,e){var n={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}var _a,Ea,Sa,Oa,Ma,ka,Ca,Aa,A=function(){return(A=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ia=["click","mouseenter"],Ta=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Sa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(I,Ea=i),I.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},I.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},t=(t.multiple&&"mouseenter"===t.trigger&&this.set("multiple",!1),this.get("align")),e=(t||((e=this.get("position").split("-")).includes("left")&&(t="left"),t=e.includes("right")?"right":"center",this.set("align",t)),this.get("graph").get("container")),t=Object(N.b)("<div class='g6-legend-container' style=\"position: absolute;\"></div>"),e=(e.appendChild(t),this.set("container",t),this.render());Object(N.e)(t,this.getContainerPos(e)),this.bindEvents()},I.prototype.getContainerPos=function(r){void 0===r&&(r=[0,0]);var o=this.get("graph"),t=this.get("offsetX"),e=this.get("offsetY"),i=this.get("margin"),n=this.get("position").split("-"),a={top:0,right:1,bottom:2,left:3},s={left:(o.getWidth()-r[0])/2+0,top:(o.getHeight()-r[1])/2+0};return n.forEach(function(t){var e=i[a[t]],n=t;switch(t){case"top":case"left":e+=0;break;case"bottom":e=o.getHeight()-r[1]-e+0,n="top";break;default:e=o.getWidth()-r[0]-e+0,n="left"}s[n]=e}),s.top+=e+o.getContainer().offsetTop,s.left+=t+o.getContainer().offsetLeft,Object.keys(s).forEach(function(t){s[t]="".concat(s[t],"px")}),s},I.prototype.bindEvents=function(){var t,e=this,n=e.get("filter");n&&n.enable&&(n=n.trigger||"click",Ia.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click"),t=e.get("legendCanvas"),"mouseenter"===n?(t.on("node-container:mouseenter",function(t){return e.filterData(t)}),t.on("node-container:mouseleave",function(t){e.clearFilter(),e.clearActiveLegend()})):(t.on("node-container:click",function(t){return e.filterData(t)}),t.on("click",function(t){t.target&&t.target.isCanvas&&t.target.isCanvas()&&(e.clearFilter(),e.clearActiveLegend())})))},I.prototype.changeData=function(t){this.set("data",t);t=this.render();Object(N.e)(this.get("container"),this.getContainerPos(t))},I.prototype.activateLegend=function(t){var e=this.get("filter"),t=(null!=e&&e.multiple||this.clearActiveLegend(),t.get("parent")),t=(t.get("active")?(t.set("active",!1),this.findLegendItemsByState("active").length&&t.set("inactive",!0)):(t.set("inactive",!1),t.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(t){t.set("inactive",!0)}):this.clearActiveLegend(),(null==e?void 0:e.legendStateStyles)||{}),n=(null==t?void 0:t.inactive)||{opacity:.5,"text-shape":{opacity:.5}},r=n["text-shape"]||{},o=(this.findLegendItemsByState("inactive").forEach(function(t){var t=t.get("children"),e=t[0],t=t[1];e.attr(A(A({},e.get("oriAttrs")),n)),t.attr(A(A({},t.get("oriAttrs")),r))}),(null==t?void 0:t.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}}),i=o["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(t){var t=t.get("children"),e=t[0],t=t[1];e.attr(A(A({},e.get("oriAttrs")),o)),t.attr(A(A({},t.get("oriAttrs")),i))})},I.prototype.findLegendItemsByState=function(e,t,n){void 0===t&&(t="all"),void 0===n&&(n=!0);var r=this.get("legendCanvas").find(function(t){return"root"===t.get("name")}),o=r.find(function(t){return"node-group"===t.get("name")}),r=r.find(function(t){return"edge-group"===t.get("name")});return"node"===t?o.get("children").filter(function(t){return!!t.get(e)===n}):"edge"===t?r.get("children").filter(function(t){return!!t.get(e)===n}):o.get("children").filter(function(t){return!!t.get(e)===n}).concat(r.get("children").filter(function(t){return!!t.get(e)===n}))},I.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas").find(function(t){return"root"===t.get("name")});[t.find(function(t){return"node-group"===t.get("name")}),t.find(function(t){return"edge-group"===t.get("name")})].forEach(function(t){t.get("children").forEach(function(t){t.set("active",!1),t.set("inactive",!1);var t=t.get("children"),e=t[0],t=t[1];e.attr(e.get("oriAttrs")),t.attr(t.get("oriAttrs"))})})},I.prototype.filterData=function(t){var r,o,i,e,a,s,c,n=this.get("filter"),u=null==n?void 0:n.filterFunctions;n&&u&&(e=this.get("legendCanvas"),r=this.get("graph"),o=n.graphActiveState||"active",i=n.graphInactiveState||"inactive",n=n.multiple,this.clearFilter(),n||this.clearActiveLegend(),this.activateLegend(t.target),t=(n=e.find(function(t){return"root"===t.get("name")})).find(function(t){return"node-group"===t.get("name")}),e=n.find(function(t){return"edge-group"===t.get("name")}),a=t.get("children").filter(function(t){return t.get("active")}),s=e.get("children").filter(function(t){return t.get("active")}),c=0,(n=["getNodes","getEdges"]).forEach(function(t){r[t]().forEach(function(e){var n=!1;("getNodes"===t?a:s).forEach(function(t){t=u[t.get("id")];n=n||t(e.getModel())}),n?(r.setItemState(e,i,!1),r.setItemState(e,o,!0),c++):(r.setItemState(e,o,!1),r.setItemState(e,i,!0))})}),c||n.forEach(function(t){r[t]().forEach(function(t){r.clearItemStates(t,[i])})}))},I.prototype.clearFilter=function(){var e,n,r=this.get("graph"),t=this.get("filter");t&&(e=t.graphActiveState||"active",n=t.graphInactiveState||"inactive",r.getNodes().forEach(function(t){r.clearItemStates(t,[e,n])}),r.getEdges().forEach(function(t){r.clearItemStates(t,[e,n])}))},I.prototype.render=function(){var d=this,t=(this.processData(),this.get("legendCanvas")),e=(t?t.clear():t=new Fr.Canvas({container:this.get("container"),width:200,height:200}),t.addGroup({name:"root"})),n=e.addGroup({name:"node-group"}),r=e.addGroup({name:"edge-group"}),o=(this.set("legendCanvas",t),this.get("itemsData")),h=[n,r];["nodes","edges"].forEach(function(u,l){o[u].forEach(function(t){var e,n=h[l].addGroup({id:t.id,name:"node-container"}),r=t.type,o=d.getShapeSize(t),i=o.width,a=o.height,s=o.r,o=d.getStyle(u.substr(0,4),t);switch(t.type){case"circle":e={r:s,x:0,y:0};break;case"rect":e={width:i,height:a,x:-i/2,y:-a/2};break;case"ellipse":e={rx:i,ry:a,x:0,y:0},r="ellipse";break;case"line":e={x1:-i/2,y1:0,x2:i/2,y2:0},r="line";break;case"quadratic":e={path:[["M",-i/2,0],["Q",0,i/2,i/2,0]]},r="path";break;case"cubic":e={path:[["M",-i/2,0],["C",-i/6,i/2,i/6,-i/2,i/2,0]]},r="path";break;case"diamond":e={path:[["M",0,-a],["L",i,0],["L",0,a],["L",-i,0],["Z"]]},r="path";break;case"triangle":e={path:[["M",-i,a],["L",0,-a],["L",i,a],["Z"]]},r="path";break;case"star":e={path:Br.getStarPath(3*s,1.2*s)},r="path";break;default:e={r:s,x:0,y:0}}var c,o=n.addShape(r,{attrs:A(A({},e),o),name:"".concat(t.type,"-node-keyShape"),oriAttrs:A({opacity:1},o)});t.label&&(o=o.getBBox(),c=(null==(c=t.labelCfg)?void 0:c.style)||{},c=A({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},c),n.addShape("text",{attrs:A({x:o.maxX+4,y:0,text:t.label},c),className:"legend-label",name:"".concat(t.type,"-node-text"),oriAttrs:c}))})});var i=this.get("padding"),a=e.find(function(t){return"title-container"===t.get("name")}),s={height:0,maxY:0,width:0},c=(this.get("title")&&(a=a||e.addGroup({name:"title-container"}),p={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:i[0]},f=this.get("titleConfig")||{},p=Object.assign(p,f.style||{}),p=a.addShape("text",{attrs:A({text:this.get("title")},p)}),s=a.getCanvasBBox(),a.setMatrix([1,0,0,0,1,0,f.offsetX,f.offsetY,1])),this.layoutItems(),e.getCanvasBBox(),n.getCanvasBBox()),u=[1,0,0,0,1,0,c.minX<0?Math.abs(c.minX)+i[3]:i[3],s.maxY<c.minY?Math.abs(s.maxY-c.minY)+i[0]:s.maxY+i[0],1],l=(n.setMatrix(u),[(l=e.getCanvasBBox()).minX+l.width+i[1],l.minY+l.height+i[2]]),s=(p?(f=A({position:"center",offsetX:0,offsetY:0},this.get("titleConfig")),s=a.getCanvasBBox(),g=a.getMatrix()||[1,0,0,0,1,0,0,0,1],"center"===f.position?g[6]=l[0]/2+f.offsetX:"right"===f.position?(g[6]=l[0]-i[3]+f.offsetX,p.attr({textAlign:"right"})):(g[6]=i[3]+f.offsetX,p.attr({textAlign:"left"})),a.setMatrix(g),s=a.getCanvasBBox(),u=[1,0,0,0,1,0,f=c.minX<0?Math.abs(c.minX)+i[3]:i[3],p=c.minY<s.maxY?Math.abs(s.maxY-c.minY)+i[0]:s.maxY+i[0],1],n.setMatrix(u),g=[1,0,0,0,1,0,f,p,1],"vertical"===this.get("layout")?g[6]+=c.maxX+this.get("horiSep"):g[7]+=c.maxY+this.get("vertiSep"),r.setMatrix(g)):(c=n.getCanvasBBox(),a=[1,0,0,0,1,0,0,0,1],"vertical"===this.get("layout")?a[6]+=u[6]+c.maxX+this.get("horiSep"):a[7]+=u[7]+c.maxY+this.get("vertiSep"),r.setMatrix(a)),e.getCanvasBBox(),c=n.getCanvasBBox(),u=n.getMatrix()||[1,0,0,0,1,0,0,0,1],r.getMatrix()||[1,0,0,0,1,0,0,0,1]),f=r.getCanvasBBox(),l=[Math.max(c.width+u[6],f.width+s[6])+i[1],Math.max(c.height+u[7],f.height+s[7])+i[2]],p=(t.changeSize(l[0],l[1]),this.get("containerStyle")),g=e.getMatrix()||[1,0,0,0,1,0,0,0,1],a=Br.invertMatrix({x:0,y:0},g);return e.addShape("rect",{attrs:A({x:a.x+(p.lineWidth||1),y:a.y+(p.lineWidth||1),width:l[0]-2*(p.lineWidth||1),height:l[1]-2*(p.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},p),name:"legend-back-rect",capture:!1}).toBack(),l},I.prototype.layoutItems=function(){var n,t=this.get("legendCanvas"),s=this.get("horiSep"),c=this.get("vertiSep"),u=this.get("layout"),e=this.get("align"),l=[0,0],t=t.find(function(t){return"root"===t.get("name")}),r=t.find(function(t){return"node-group"===t.get("name")}),t=t.find(function(t){return"edge-group"===t.get("name")}),d={min:0,max:-1/0},h=-1/0,o=(r.get("children").forEach(function(t,e){0===e&&(d.min=l[0]);var e=t.get("children")[0],n=t.getCanvasBBox(),e=e.getBBox(),r=e.width,e=e.height,o=0,i=0,a=0,o="vertical"===u?(i=l[1],l[0]=(a=l[0]+r/2)+n.height+c,n.maxX+i+r/2):(a=l[1],l[0]=(i=l[0]+r/2)+n.width+s,n.maxY+a+e/2);d.max<l[0]&&(d.max=l[0]),h<o&&(h=o),t.setMatrix([1,0,0,0,1,0,i,a,1])}),d.max-d.min),a={min:0,max:-1/0},i=r.getCanvasBBox();l[0]=0,l[1]="vertical"===u?i.maxX+s:i.maxY+c,t.get("children").forEach(function(t,e){0===e&&(a.min=l[0]);var e=t.get("children")[0],n=t.getCanvasBBox(),e=e.getBBox(),r=e.width,e=e.height,o=0,i=0;"vertical"===u?(o=l[1],l[0]=(i=l[0])+n.height+c,t.setMatrix([1,0,0,0,1,0,0,i+e/2,1])):(i=l[1],l[0]=(o=l[0])+n.width+s,t.setMatrix([1,0,0,0,1,0,o+r/2,0,1])),a.max<l[0]&&(a.max=l[0])}),e&&""!==e&&"left"!==e&&(i=o-(a.max-a.min),n="center"===e?Math.abs(i)/2:Math.abs(i),(i<0?r:t).get("children").forEach(function(t){var e=t.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===u?e[7]+=n:e[6]+=n,t.setMatrix(e)}))},I.prototype.processData=function(){var t=this.get("data"),o={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(t,e){return t.order-e.order}),t.nodes.forEach(function(t){var e=t.size||[(null==(e=t.style)?void 0:e.width)||(null==(e=t.style)?void 0:e.r)||8,(null==(e=t.style)?void 0:e.height)||(null==(e=t.style)?void 0:e.r)||8],n=(null==(n=t.labelCfg)?void 0:n.style)||{};o.nodes.push({id:t.id||Object(Y.uniqueId)(),type:t.type||"circle",style:A({},t.style),order:t.order,label:t.label,itemType:"node",size:e,labelCfg:{position:"right",style:A({fontFamily:"Arial"},n)}})})),t.edges&&(t.edges.sort(function(t,e){return t.order-e.order}),t.edges.forEach(function(t){var e=t.type||"line",n=("cubic-horizontal"===t.type&&(e="cubic"),(null==(n=t.labelCfg)?void 0:n.style)||{}),r=t.size||[(null==(r=t.style)?void 0:r.width)||8,1];o.edges.push({id:t.id||Object(Y.uniqueId)(),type:e,size:r,style:A({lineWidth:Object(Y.isArray)(r)?r[1]:1},t.style),order:t.order,label:t.label,itemType:"edge",labelCfg:{position:"right",style:A({fontFamily:"Arial"},n)}})})),this.set("itemsData",o)},I.prototype.getContainer=function(){return this.get("container")},I.prototype.formatArray=function(t){var e=this.get(t);if(Object(Y.isNumber)(e))this.set(t,[e,e,e,e]);else if(Object(Y.isArray)(e))switch(e.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[e[0],e[0],e[0],e[0]]);break;case 2:this.set(t,[e[0],e[1],e[0],e[1]]);break;case 3:this.set(t,[e[0],e[1],e[2],e[1]])}return this.get(t)},I.prototype.getShapeSize=function(t){var e,n,r;return t.size&&(Object(Y.isArray)(t.size)?(e=t.size[0],n=t.size[1]||t.size[0],r=t.size[0]/2):Object(Y.isNumber)(t.size)&&(e=t.size,r=(n=t.size)/2)),r=(r=t.style&&(t.style.width&&(e=t.style.width),t.style.height&&(n=t.style.height),t.style.r)?t.style.r:r)||5,{width:e=e||r,height:n=n||r,r:r}},I.prototype.getStyle=function(t,e){return A(A({},"node"===t?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),e.style||{})},I.prototype.destroy=function(){var t=this.get("legendCanvas"),t=(null!=t&&t.destroy(),this.get("graph").get("container")),e=this.get("container");t.removeChild(e)},I),ja=(_a=function(t,e){return(_a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}_a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Na=function(){return(Na=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function I(t){return Ea.call(this,t)||this}function Da(t){return Oa.call(this,t)||this}function Pa(t){return ka.call(this,t)||this}function T(t){return Aa.call(this,t)||this}"undefined"!=typeof document&&r()("\n  .g6-annotation-container {\n    background-color: rgba(255, 255, 255, 0.3);\n    padding: 8px;\n  }\n  .g6-annotation-wrapper {\n    background-color: #fff;\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);\n  }\n  .g6-annotation-header-wapper {\n    height: fit-content;\n    width: 100%;\n    background-color: #5B8FF9;\n    display: inline-flex;\n    cursor: move;\n  }\n  .g6-annotation-title {\n    margin: 4px 40px 4px 8px;\n    cursor: text;\n    min-width: 32px;\n  }\n  .g6-annotation-collapse {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-expand {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-close {\n    margin: 4px 8px 4px 0;\n    cursor: pointer;\n  }\n  .g6-annotation-content {\n    padding: 8px;\n    width: fit-content;\n    cursor: text;\n    word-break: break-all;\n    min-width: 32px;\n  }\n  .g6-annotation-title-input-wrapper {\n    margin: 4px 40px 4px 8px;\n  }\n  .g6-annotation-content-input {\n    height: 100%;\n    word-break: break-all;\n  }\n  .g6-annotation-content-input-wrapper {\n    margin: 8px;\n    height: 100%;\n  }\n"),ja(j,La=i),j.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},j.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};return t="click"===this.get("trigger")?Na(Na({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"}):t},j.prototype.getDOMContent=function(t){var e,n,r,o,i;if(!this.destroyed)return i=t.collapsed,e=t.maxWidth,n=void 0===(n=t.title)?"":n,o=t.content,t=void 0===(t=t.borderRadius)?5:t,r=i?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",o=i?"":" <p class='g6-annotation-content'>".concat(void 0===o?"":o,"</p>"),i=i?"".concat(t,"px"):"".concat(t,"px ").concat(t,"px 0 0"),'<div class="g6-annotation-wrapper" style="border-radius: '.concat(t,"px; max-width: ").concat(e,'px">\n        <div\n          class="g6-annotation-header-wapper"\n          style="border-radius: ').concat(i,";\"\n        >\n          <h4 class='g6-annotation-title'>").concat(n,"</h4>\n          ").concat(r,"\n          ").concat("<p class='g6-annotation-close'>x</p>","\n        </div>\n        ").concat(o,"\n      </div>")},j.prototype.init=function(){var t,e,n=this;!n.destroyed&&(t=n.get("graph").getContainer(),e=n.get("container"),this.get("containerCfg")?(e=this.createContainer(),t.appendChild(e)):e=t,this.set("container",e),e=t.getBoundingClientRect(),t=new Fr.Canvas({container:t,width:e.right-e.left,height:e.bottom-e.top}),Object(N.e)(t.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",Object(Y.debounce)(function(){return n.resizeCanvas(n)},100)),e=t.addGroup({id:"annotation-link-group"}),n.set("linkGroup",e),n.set("canvas",t),n.get("getTitle")||n.set("getTitle",function(t){var e=(null==(e=null==t?void 0:t.getModel)?void 0:e.call(t))||{};return e.label||e.id||"-"}),n.get("getContent")||n.set("getContent",function(t){var e,n,r;return t?(e=(n=(null==(n=t.getModel)?void 0:n.call(t))||{}).label,n=n.id,t=(r=null==(r=t.getType)?void 0:r.call(t))?"".concat(r,": "):"","".concat(t).concat(e||n||"")):"-"}),e=n.get("defaultData"))&&this.readData(e)},j.prototype.createContainer=function(){var e=this;if(!this.destroyed){var t=this.get("containerCfg"),n=this.get("graph"),r=n.getContainer(),o=r.getBoundingClientRect(),i=o.left,a=o.top,s=o.bottom-a,c=o.right-i,o=t.position,o=void 0===o?"top":o,u=t.offsetX,l=void 0===u?0:u,u=t.offsetY,d=void 0===u?0:u,u=wa(t,["position","offsetX","offsetY"]),h=t.height,h=void 0===h?"fit-content":h,f=t.width,n=void 0===f?n.getWidth():f,p=("100%"===h&&(h=s),"100%"===n&&(n=c),"unset"),g="unset",y={};switch(o){case"right":p="".concat(s,"px"),(y={top:0,right:0}).right+=i+l,y.top+=a+d;break;case"bottom":g="".concat(c,"px"),(y={bottom:0,left:0}).left+=i+l,y.bottom+=a+d;break;case"top":g="".concat(c,"px");case"left":p="".concat(s,"px");default:(y={top:0,left:0}).left+=i+l,y.top+=a+d}Object.keys(y).forEach(function(t){y[t]="".concat(y[t],"px")});f=Object(N.b)("<div class='".concat(t.className," g6-annotation-container'></div>"));return Object(N.e)(f,Na(Na({position:"absolute",display:"top"===o||"bottom"===o?"inline-flex":"unset",width:Object(Y.isNumber)(n)?"".concat(n,"px"):n,height:Object(Y.isNumber)(h)?"".concat(h,"px"):h,maxHeight:p,maxWidth:g,overflow:"scroll"},y),u)),r.appendChild(f),f.addEventListener("scroll",function(t){e.updateLinks()}),f}},j.prototype.resizeCanvas=function(n){clearTimeout(n.resizeTimer),n.resizeTimer=setTimeout(function(){var t,e;n&&!n.destroyed&&(t=(e=n.get("container").getBoundingClientRect()).right-e.left,e=e.bottom-e.top,n.get("canvas").changeSize(t,e),n.updateOutsideCards(n))},250)},j.prototype.updateOutsideCards=function(t){var t=t||this,e=t.get("cardInfoMap")||{},n=t.get("graph"),r=n.getPointByCanvas(0,0),o=n.getPointByCanvas(n.getWidth(),n.getHeight()),r=n.getClientByPoint(r.x,r.y),a=r.x,s=r.y,r=n.getClientByPoint(o.x,o.y),c=r.x,u=r.y;Object.values(e).forEach(function(t){var e,n,r,o,i,t=t.card;t&&(e=t.style,r=Ba(e.left),e=Ba(e.top),i=(n=t.getBoundingClientRect()).width,c-a<(o=r)+i&&(o=c-a-i),r<0&&(o=0),u-s<(i=e)+(r=n.height)&&(i=u-s-r),e<0&&(i=0),Object(N.e)(t,{left:"".concat(o,"px"),top:"".concat(i,"px")}))}),t.updateLinks()},j.prototype.showAnnotation=function(t){this.destroyed||(t=t.item,this.toggleAnnotation(t))},j.prototype.hideCards=function(){var t,e=this;e.destroyed||(t=e.get("cardInfoMap")||{},Object.keys(t).forEach(function(t){e.hideCard(t)}))},j.prototype.toggleAnnotation=function(t,e){var n,r,o,i,a,s,c,u,l,d,h,f,p,g,y,m,v,b,x,w,_,E,S,O,M,k,C,A,I,T,j;void 0===e&&(e={}),this.destroyed||(n=this.get("cardInfoMap")||{},r=this.get("graph"),A=this.get("container"),o=this.get("containerCfg"),O=(e=Object.assign({},this.get("cardCfg")||{},e)).minHeight,k=e.minWidth,T=e.width,I=e.height,i=void 0!==(i=e.collapsed)&&i,a=e.x,s=e.y,c=e.title,u=e.content,M=e.maxTitleLength,x=e.defaultBegin,e=wa(e,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),l=this.get("linkGroup"),d=this.get("rows")||[[]],_=(g=n[f=(h=null==(h=t.isCanvas)?void 0:h.call(t))?"canvas-annotation":t.getID()]||{}).card,C=g.link,w=g.x,E=g.y,p=g.title,g=g.content,v=this.get("getTitle"),b=this.get("getContent"),y=this.get("getContentPlaceholder")||function(){return""},m=this.get("getTitlePlaceHolder")||function(){return""},y=y(t),m=m(t),v=Object(N.b)(this.getDOMContent(Na({itemId:f,collapsed:i,title:(null==(v=p||c||(null==v?void 0:v(t)))?void 0:v.substr(0,M))||m,content:g||u||(null==b?void 0:b(t))||y},e))),M=Object(Y.isNumber)(O)?"".concat(O,"px"):O,Object(N.e)(v,{minHeight:i?"unset":M,minWidth:Object(Y.isNumber)(k)?"".concat(k,"px"):k,height:I,width:T}),(b=!!_)?(null!=C&&C.remove(!0),A.replaceChild(v,_)):A.appendChild(v),o||(S=A.getBoundingClientRect()||{},void 0!==a&&void 0!==s?(w=a,E=s):b||h||(j=S.top,O=(e=x||{}).left,M=e.bottom,T=void 0===(I=e.right)?16:I,x=void 0===(_=e.top)?8:_,isNaN(O)||(T=A.scrollWidth-O),isNaN(M)||(x=A.scrollHeight-M),I=Object(Y.isNumber)(k)?k:100,w=A.scrollWidth-v.scrollWidth-(d.length-1)*I-T,E=(null==(_=((e=d[d.length-1])[e.length-1]||{}).bbox)?void 0:_.bottom)-j||x),Object(N.e)(v,{position:"absolute",left:"".concat(w,"px"),top:"".concat(E,"px"),cusor:o?"unset":"move"})),this.bindListener(v,f),O=v.getBoundingClientRect(),h||(M=Ra(t,O,r,this.get("canvas")),k=this.get("linkStyle"),C=l.addShape("path",{attrs:Na({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:M},k)})),n[f]=Na(Na({},n[f]||{}),{id:f,collapsed:i,card:v,link:C,x:w,y:E,cardBBox:O,content:g||u,title:p||c,contentPlaceholder:y,titlePlaceholder:m,isCanvas:h}),this.set("cardInfoMap",n),o?(this.updateCardPositionsInConatainer(),this.updateLinks()):(A=!isNaN(a)&&!isNaN(s),b||h||A||(T=void 0===(I=S.bottom)?0:I,j=S.top,d[d.length-1].push({id:f,bbox:O}),O.top>T-j-O.height-16&&d.push([]),this.set("rows",d))),this.updateCardSize(f),null!=(e=this.get("onAnnotationChange"))&&e(n[f],b?"update":"create"))},j.prototype.updateCardPositionsInConatainer=function(){var t,r,o,e;this.destroyed||(t=this.get("cardInfoMap"))&&(e=this.get("container"),r=this.get("containerCfg").position,o=e.getBoundingClientRect().width,e=getComputedStyle(e),e=Ba(e.paddingLeft)+Ba(e.paddingRight),o-=e,Object.values(t).forEach(function(t){var e=t.card,n=e.getBoundingClientRect().width;switch(r){case"right":Object(N.e)(e,{marginLeft:o?"".concat(o-n,"px"):"0px"});break;case"top":case"bottom":Object(N.e)(e,{marginLeft:"8px"})}}))},j.prototype.handleExpandCollapseCard=function(t){var e,n,r;this.destroyed||(r=this.get("graph"),(e=this.get("cardInfoMap"))&&(n=e[t].collapsed,r=r.findById(t))&&("hide"!==this.get("cardCfg").collapseType||n?this.toggleAnnotation(r,{collapsed:!n}):this.hideCard(t),e[t]=Na(Na({},e[t]),{collapsed:!n})))},j.prototype.hideCard=function(t){var e,n,r;this.destroyed||(e=this.get("cardInfoMap"))&&e[t]&&(n=(r=e[t]).card,r=r.link,Object(N.e)(n,{display:"none"}),null!=r&&r.hide(),this.get("onAnnotationChange")(e[t],"hide"))},j.prototype.removeCard=function(t){var e,n,r,o;this.destroyed||(e=this.get("cardInfoMap"))&&(r=(n=e[t]).card,o=n.link,this.get("container").removeChild(r),null!=o&&o.remove(!0),delete e[t],this.get("onAnnotationChange")(n,"remove"))},j.prototype.bindListener=function(n,g){var r,y=this;this.destroyed||(n.addEventListener("mousemove",function(t){var e,n;"g6-annotation-collapse"===t.target.className?e="collapse":"g6-annotation-expand"===t.target.className?e="expand":"g6-annotation-close"===t.target.className&&(e="close"),e&&(void 0===(n=y.get("cardCfg").onMouseEnterIcon)?function(){}:n)(t,g,e)}),n.addEventListener("mouseout",function(t){var e,n;"g6-annotation-collapse"===t.target.className?e="collapse":"g6-annotation-expand"===t.target.className?e="expand":"g6-annotation-close"===t.target.className&&(e="close"),e&&(void 0===(n=y.get("cardCfg").onMouseLeaveIcon)?function(){}:n)(t,g,e)}),n.addEventListener("mouseenter",function(t){var e,n,r,o=y.get("cardInfoMap");o&&((r=(n=y.get("graph")).findById(g))&&(e=y.get("itemHighlightState"),n.setItemState(r,e,!0)),n=o[g].link)&&(r=y.get("linkHighlightStyle")||{},n.attr(r))}),n.addEventListener("mouseleave",function(t){var e,n,r,o,i=y.get("cardInfoMap");i&&((o=(r=y.get("graph")).findById(g))&&(e=y.get("itemHighlightState"),r.setItemState(o,e,!1)),n=i[g].link)&&(r=y.get("linkHighlightStyle")||{},Object.keys(r).forEach(function(t){n.attr(t,void 0),n.attr(t,void 0)}),o=y.get("linkStyle"),n.attr(o))}),n.addEventListener("click",function(t){var e=(y.get("cardCfg")||{}).onClickIcon;"g6-annotation-collapse"===t.target.className||"g6-annotation-expand"===t.target.className?("hide"===y.get("cardCfg").collapseType?y.hideCard(g):y.handleExpandCollapseCard(g),null!=e&&e(t,g,"g6-annotation-collapse"===t.target.className?"collapse":"expand")):"g6-annotation-close"===t.target.className&&("remove"===y.get("cardCfg").closeType?y.removeCard(g):y.hideCard(g),null!=e)&&e(t,g,"close")}),this.get("editable")&&n.addEventListener("dblclick",function(t){var n,r,o,i,e,a,s,c,u=y.get("cardInfoMap"),l=(y.get("cardCfg")||{}).maxTitleLength,l=void 0===l?20:l;!u||"g6-annotation-title"!==(t=(n=t.target).className)&&"g6-annotation-content"!==t||(a=(s=("g6-annotation-title"===t?n:n.parentNode).getBoundingClientRect()).width,s=s.height,c=getComputedStyle(n),e="g6-annotation-title"===t?"input":"textarea",r=Object(N.b)("<".concat(e,' class="').concat(t,'-input" type="textarea" style="width:').concat(a,"px; height: ").concat(s,'px; min-width: 16px;"/>')),(o=Object(N.b)('<div class="'.concat(t,'-input-wrapper" style="width: ').concat(a,"px; height: ").concat(s,"px; min-width: 16px; margin-right: ").concat(c.marginRight,'" />'))).appendChild(r),n.parentNode.replaceChild(o,n),e=(i=u[g]).contentPlaceholder,a=i.titlePlaceholder,s=i.title,c=i.content,"g6-annotation-title"===t?(r.name="title",r.maxLength=l,c=s):r.name="content",c?(r.innerHTML=n.innerHTML,r.value=n.innerHTML):r.placeholder="g6-annotation-title"===t?a:e,r.focus(),r.addEventListener("blur",function(t){r.value&&(n.innerHTML=r.value,i[r.name||"title"]=r.value),o.parentNode.replaceChild(n,o),y.updateCardSize(g);var e=y.get("onAnnotationChange");null!=e&&e(i,"update")}))}),r=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"],n.draggable=!0,n.addEventListener("dragstart",function(t){var e=t.target.className;r.includes(e)||(e=n.style,y.set("dragging",{card:n,x:t.clientX,y:t.clientY,left:Ba(e.left),top:Ba(e.top)}))}),n.addEventListener("drag",function(t){t.preventDefault();var e,n,r,o,i,a,s,c,u,l,d,h,f,p=y.get("cardInfoMap");p&&(e=t.clientX,t=t.clientY,a=y.get("dragging"),isNaN(e)||isNaN(t)||!a||(n=a.x,r=a.y,o=a.left,i=a.top,a=a.card,o+=f=e-n,i+=s=t-r,u=(c=y.get("graph")).getPointByCanvas(0,0),l=c.getPointByCanvas(c.getWidth(),c.getHeight()),h=(u=c.getClientByPoint(u.x,u.y)).x,u=u.y,d=(l=c.getClientByPoint(l.x,l.y)).x,l=l.y,(o>d-h-((d=a.getBoundingClientRect()).right-d.left)&&0<f||o<0&&f<0)&&(o-=f),(l-u-(d.bottom-d.top)<i&&0<s||i<0&&s<0)&&(i-=s),Object(N.e)(a,{left:"".concat(o,"px"),top:"".concat(i,"px"),visibility:"hidden"}),n=e,r=t,(h=(p[g]||{}).link)&&(f=c.findById(g),h.attr("path",Ra(f,d,c,y.get("canvas")))),y.set("dragging",{x:n,y:r,left:o,top:i,card:a})))}),n.addEventListener("dragend",function(t){var e,n,r,o=y.get("cardInfoMap");o&&(e=y.get("dragging"))&&(n=e.left,r=e.top,e=e.card,o[g].x=n,o[g].y=r,Object(N.e)(e,{visibility:"visible"}),y.set("dragging",!1),null!=(n=y.get("rows"))&&n.forEach(function(t){for(var e=t.length-1;0<=e;e--)t[e].id===g&&t.splice(e,1)}),null!=(r=y.get("onAnnotationChange")))&&r(o[g],"update")}))},j.prototype.updateCardSize=function(t){var e,n,r=this.get("cardInfoMap");r&&(t=(r=r[t].card).getBoundingClientRect().width,r=r.getElementsByClassName("g6-annotation-title")[0])&&(e=getComputedStyle(r),e=Ba(e.marginLeft),n=r.getBoundingClientRect().width,Object(N.e)(r,{marginRight:"".concat(t-e-24-16-n,"px")}))},j.prototype.updateLink=function(t){var e,n,r,o,t=t.item;t&&(r=this.get("cardInfoMap"))&&(e=this.get("canvas"),n=this.get("graph"),o=(r=r[t.getID()]||{}).link)&&(t=Ra(t,r.card.getBoundingClientRect(),n,e),o.attr("path",t))},j.prototype.updateLinks=function(){var t,e,n=this;this.destroyed||(t=this.get("cardInfoMap"))&&(e=this.get("graph"),Object.values(t).forEach(function(t){t=t.id,t=e.findById(t);n.updateLink({item:t})}))},j.prototype.onGraphDataChange=function(){var r,o=this,t=this.get("cardInfoMap");t&&(r=this.get("graph"),Object.values(t).forEach(function(t){var e=t.id,n=t.card;n&&!t.isCanvas&&"none"!==n.style.display&&((t=r.findById(e))&&t.isVisible()?o.toggleAnnotation(t):o.hideCard(e))}))},j.prototype.onGraphItemVisibilityChange=function(t){var e,n=t.item,t=t.visible;n&&!n.destroyed&&(e=this.get("cardInfoMap"))&&e[e=n.getID()]&&!t&&this.hideCard(e)},j.prototype.saveData=function(c){void 0===c&&(c=!1);var u,l,d,h,t=this.get("cardInfoMap");if(t)return u=this.get("graph"),l=this.get("getTitle"),d=this.get("getContent"),h=[],Object.values(t).forEach(function(t){var e,n=t.title,r=t.content,o=t.x,i=t.y,a=t.id,s=t.collapsed,t=t.card;t&&"none"===t.style.display&&!c||(e=u.findById(a)||u.get("canvas"),h.push({id:a,x:o,y:i,collapsed:s,title:n||(null==l?void 0:l(e)),content:r||(null==d?void 0:d(e)),visible:t&&"none"!==t.style.display}))}),h},j.prototype.readData=function(t){var u=this,l=this.get("graph");t.forEach(function(t){var e=t.id,n=t.x,r=t.y,o=t.title,i=t.content,a=t.collapsed,s=t.visible,c=l.findById(e);(c=c||"canvas-annotation"!==e?c:l.get("canvas"))?(u.toggleAnnotation(c,{x:n,y:r,title:o,content:i,collapsed:a}),s||u.hideCard(e)):((c=u.get("cardInfoMap")||{})[e]=t,u.set("cardInfoMap",c))})},j.prototype.clear=function(){var n,t=this.get("cardInfoMap");t&&(n=this.get("container"),Object.values(t).forEach(function(t){var e=t.card,t=t.link;n.removeChild(e),null!=t&&t.remove(!0)}),this.set("cardInfoMap",{}))},j.prototype.destroy=function(){this.clear(),null!=(t=this.get("canvas"))&&t.destroy();var t=this.get("graph");t&&!t.destroyed&&(this.get("containerCfg")&&t.getContainer().removeChild(this.get("container")),this.destroyed=!0)};var La,Ra=function(t,e,r,o){i="edge"===t.getType()?[t.getKeyShape().getPoint(.5)]:(h=(p=null==(p=t.getKeyShape)?void 0:p.call(t).getBBox()).minX,d=p.minY,f=p.maxX,p=p.maxY,{left:{x:h+=l=(t=t.getModel()).x,y:((d+=t=t.y)+(p+=t))/2},right:{x:f+=l,y:(d+p)/2},top:{x:(h+f)/2,y:d},bottom:{x:(h+f)/2,y:p}}),Object.keys(i).forEach(function(t){var e=i[t],n=e.x,n=r.getClientByPoint(n,e.y);i[t]=o.getPointByClient(n.x,n.y)});var i,n,a,s,c,u,t=e.top,l=void 0===t?0:t,d=e.left,h=void 0===d?0:d,f=e.right,p=void 0===f?0:f,t=e.bottom,d=void 0===t?0:t,f={left:o.getPointByClient(h,(l+d)/2),right:o.getPointByClient(p,(l+d)/2),top:o.getPointByClient((h+p)/2,l),bottom:o.getPointByClient((h+p)/2,d)};return n=i,a=f,u=1/0,Object.keys(n).forEach(function(t){var r=n[t];Object.keys(a).forEach(function(t){var t=a[t],e=r.x-t.x,n=r.y-t.y,e=e*e+n*n;e<u&&(u=e,s=r,c=t)})}),e=Br.getControlPoint(s,c,.5,20),[["M",s.x,s.y],["Q",e.x,e.y,c.x,c.y]]},Ba=function(t){return Number(t.replace(/\s+|px/gi,""))||0},r={PluginBase:i,Menu:F,Grid:en,Minimap:U,Bundling:W,ToolBar:R,Tooltip:G,Fisheye:un,TimeBar:on,ImageMinimap:t,EdgeFilterLens:o,SnapLine:va,Legend:Ta,Annotation:j};function j(t){return La.call(this,t)||this}tn("circle",{options:{size:f.defaultNode.size,style:{x:0,y:0,stroke:f.defaultNode.style.stroke,fill:f.defaultNode.style.fill,lineWidth:f.defaultNode.style.lineWidth},labelCfg:{style:{fill:f.nodeLabel.style.fill,fontSize:f.nodeLabel.style.fontSize,fontFamily:f.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:f.defaultNode.linkPoints.size,lineWidth:f.defaultNode.linkPoints.lineWidth,fill:f.defaultNode.linkPoints.fill,stroke:f.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(rt.__assign)({},f.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,n=void 0===n?{}:n,r=this.getShapeStyle(t),n=Object(Y.deepMix)({},n,t.icon),o="".concat(this.type,"-keyShape"),r=e.addShape("circle",{attrs:r,className:o,name:o,draggable:!0}),o=(e.shapeMap[o]=r,n.width),i=n.height,a=n.show,s=n.text;return a&&(a="".concat(this.type,"-icon"),e.shapeMap[a]=s?e.addShape("text",{attrs:Object(rt.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:a,name:a,draggable:!0}):e.addShape("image",{attrs:Object(rt.__assign)({x:-o/2,y:-i/2},n),className:a,name:a,draggable:!0})),this.drawLinkPoints(t,e),r},drawLinkPoints:function(t,e){var n,r,o,i,a,s,c=(this.mergeStyle||this.getOptions(t)).linkPoints;c&&(n=(c=c||{}).top,s=c.left,a=c.right,r=c.bottom,o=c.size,i=c.r,c=Object(rt.__rest)(c,["top","left","right","bottom","size","r"]),t=this.getSize(t)[0]/2,s&&(e.shapeMap[s="link-point-left"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},c),{x:-t,y:0,r:o/2||i||5}),className:s,name:s,isAnchorPoint:!0})),a&&(e.shapeMap[s="link-point-right"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},c),{x:t,y:0,r:o/2||i||5}),className:s,name:s,isAnchorPoint:!0})),n&&(e.shapeMap[a="link-point-top"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},c),{x:0,y:-t,r:o/2||i||5}),className:a,name:a,isAnchorPoint:!0})),r)&&(e.shapeMap[s="link-point-bottom"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},c),{x:0,y:t,r:o/2||i||5}),className:s,name:s,isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},e=Object(Y.deepMix)({},e,n),n=this.getSize(t)[0]/2;return Object(rt.__assign)({x:0,y:0,r:n},e)},update:function(t,e,n){var r=e.getContainer(),o=this.getSize(t),i=Object(rt.__assign)({},t.style);void 0===t.style.stroke&&t.color&&(i.stroke=t.color),void 0!==t.style.r||isNaN(o[0])||(i.r=o[0]/2),this.updateShape(t,e,i,!0,n),this.updateLinkPoints(t,r)}},"single-node"),tn("rect",{options:{size:[100,30],style:{radius:0,stroke:f.defaultNode.style.stroke,fill:f.defaultNode.style.fill,lineWidth:f.defaultNode.style.lineWidth},labelCfg:{style:{fill:f.nodeLabel.style.fill,fontSize:f.nodeLabel.style.fontSize,fontFamily:f.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:f.defaultNode.linkPoints.size,lineWidth:f.defaultNode.linkPoints.lineWidth,fill:f.defaultNode.linkPoints.fill,stroke:f.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(rt.__assign)({},f.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var n=this.getShapeStyle(t),n=e.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return e.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(t,e),n},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,n=void 0===n?{}:n,r=n.top,o=n.left,i=n.right,a=n.bottom,s=n.size,c=n.r,n=Object(rt.__rest)(n,["top","left","right","bottom","size","r"]),t=this.getSize(t),u=t[0],t=t[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:-u/2,y:0,r:s/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),i&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:u/2,y:0,r:s/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),r&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:0,y:-t/2,r:s/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:0,y:t/2,r:s/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},e=Object(Y.mix)({},e,n),n=this.getSize(t),t=e.width||n[0],n=e.height||n[1];return Object(rt.__assign)({x:-t/2,y:-n/2,width:t,height:n},e)},update:function(t,e,n){var r=e.getContainer(),o=this.getOptions({}).style,i=this.getSize(t),a=e.get("keyShape"),i=(t.size||(i[0]=a.attr("width")||o.width,i[1]=a.attr("height")||o.height),{stroke:t.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]}),o=Object(Y.mix)({},o,a.attr(),i),o=Object(Y.mix)(o,t.style);this.updateShape(t,e,o,!1,n),this.updateLinkPoints(t,r)}},"single-node"),tn("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:f.defaultNode.style.stroke,fill:f.defaultNode.style.fill,lineWidth:f.defaultNode.style.lineWidth},labelCfg:{style:{fill:f.nodeLabel.style.fill,fontSize:f.nodeLabel.style.fontSize,fontFamily:f.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:f.defaultNode.linkPoints.size,lineWidth:f.defaultNode.linkPoints.lineWidth,fill:f.defaultNode.linkPoints.fill,stroke:f.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(rt.__assign)({},f.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,n=void 0===n?{}:n,r=this.getShapeStyle(t),r=e.addShape("ellipse",{attrs:r,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),o=(e.shapeMap["ellipse-keyShape"]=r,n.width),i=n.height,a=n.show,s=n.text;return a&&(e.shapeMap["".concat(this.type,"-icon")]=s?e.addShape("text",{attrs:Object(rt.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:Object(rt.__assign)({x:-o/2,y:-i/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),r},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,n=void 0===n?{}:n,r=n.top,o=n.left,i=n.right,a=n.bottom,s=n.size,c=n.r,n=Object(rt.__rest)(n,["top","left","right","bottom","size","r"]),t=this.getSize(t),u=t[0]/2,t=t[1]/2;o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:-u,y:0,r:s/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),i&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:u,y:0,r:s/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),r&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:0,y:-t,r:s/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:0,y:t,r:s/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},e=Object(Y.mix)({},e,n),n=this.getSize(t),t=n[0]/2,n=n[1]/2;return Object(rt.__assign)({x:0,y:0,rx:t,ry:n},e)},update:function(t,e,n){var r=e.getContainer(),o=this.getOptions({}).style,i=this.getSize(t),i={stroke:t.color,rx:i[0]/2,ry:i[1]/2},a=e.get("keyShape"),o=Object(Y.mix)({},o,a.attr(),i),o=Object(Y.mix)(o,t.style);this.updateShape(t,e,o,!0,n),this.updateLinkPoints(t,r)}},"single-node"),tn("diamond",{options:{size:[80,80],style:{stroke:f.defaultNode.style.stroke,fill:f.defaultNode.style.fill,lineWidth:f.defaultNode.style.lineWidth},labelCfg:{style:{fill:f.nodeLabel.style.fill,fontSize:f.nodeLabel.style.fontSize,fontFamily:f.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:f.defaultNode.linkPoints.size,lineWidth:f.defaultNode.linkPoints.lineWidth,fill:f.defaultNode.linkPoints.fill,stroke:f.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(rt.__assign)({},f.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,n=void 0===n?{}:n,r=this.getShapeStyle(t),r=e.addShape("path",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}),o=(e.shapeMap["".concat(this.type,"-keyShape")]=r,n.width),i=n.height,a=n.show,s=n.text;return a&&(e.shapeMap["".concat(this.type,"-icon")]=s?e.addShape("text",{attrs:Object(rt.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:Object(rt.__assign)({x:-o/2,y:-i/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),r},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,n=void 0===n?{}:n,r=n.top,o=n.left,i=n.right,a=n.bottom,s=n.size,c=n.r,n=Object(rt.__rest)(n,["top","left","right","bottom","size","r"]),t=this.getSize(t),u=t[0],t=t[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:-u/2,y:0,r:s/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),i&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:u/2,y:0,r:s/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),r&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:0,y:-t/2,r:s/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:0,y:t/2,r:s/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(t){var t=this.getSize(t),e=t[0],t=t[1];return[["M",0,-t/2],["L",e/2,0],["L",0,t/2],["L",-e/2,0],["Z"]]},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},e=Object(Y.mix)({},e,n),n=this.getPath(t);return Object(rt.__assign)({path:n},e)},update:function(t,e,n){var r=e.getContainer(),o=this.getOptions({}).style,i=this.getPath(t),i={stroke:t.color,path:i},a=e.get("keyShape"),o=Object(Y.mix)({},o,a.attr(),i),o=Object(Y.mix)(o,t.style);this.updateShape(t,e,o,!0,n),this.updateLinkPoints(t,r)}},"single-node"),tn("triangle",{options:{size:40,direction:"up",style:{stroke:f.defaultNode.style.stroke,fill:f.defaultNode.style.fill,lineWidth:f.defaultNode.style.lineWidth},labelCfg:{style:{fill:f.nodeLabel.style.fill,fontSize:f.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:f.defaultNode.linkPoints.size,lineWidth:f.defaultNode.linkPoints.lineWidth,fill:f.defaultNode.linkPoints.fill,stroke:f.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:Object(rt.__assign)({},f.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var n=this.mergeStyle||this.getOptions(t),r=n.icon,r=void 0===r?{}:r,n=n.direction,o=this.getShapeStyle(t),n=t.direction||n,o=e.addShape("path",{attrs:o,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}),i=(e.shapeMap["".concat(this.type,"-keyShape")]=o,r.width),a=r.height,s=r.show,c=r.offset,u=r.text;return s&&(u?e.shapeMap["".concat(this.type,"-icon")]=e.addShape("text",{attrs:Object(rt.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):(s=-i/2,u=-a/2,"up"!==n&&"down"!==n||(u+=c),"left"!==n&&"right"!==n||(s+=c),e.shapeMap["".concat(this.type,"-icon")]=e.addShape("image",{attrs:Object(rt.__assign)({x:s,y:u},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}))),this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var n,r,o=this.mergeStyle||this.getOptions(t),i=o.linkPoints,i=void 0===i?{}:i,o=t.direction||o.direction,a=i.top,s=i.left,c=i.right,u=i.bottom,l=i.size,d=i.r,i=Object(rt.__rest)(i,["top","left","right","bottom","size","r"]),t=this.getSize(t)[0];s&&(s=null,n=t*Math.sin(1/3*Math.PI),r=t*Math.sin(1/3*Math.PI),"up"===o?s=[-r,n]:"down"===o?s=[-r,-n]:"left"===o&&(s=[-r,r-n]),s)&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},i),{x:s[0],y:s[1],r:l/2||d||5}),className:"link-point-left",name:"link-point-left"})),c&&(s=null,n=t*Math.sin(1/3*Math.PI),r=t*Math.sin(1/3*Math.PI),"up"===o?s=[r,n]:"down"===o?s=[r,-n]:"right"===o&&(s=[r,r-n]),s)&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},i),{x:s[0],y:s[1],r:l/2||d||5}),className:"link-point-right",name:"link-point-right"})),a&&(c=null,n=t*Math.sin(1/3*Math.PI),r=t*Math.sin(1/3*Math.PI),"up"===o?c=[r-n,-n]:"left"===o?c=[r,-n]:"right"===o&&(c=[-r,-n]),c)&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},i),{x:c[0],y:c[1],r:l/2||d||5}),className:"link-point-top",name:"link-point-top"})),u&&(s=null,n=t*Math.sin(1/3*Math.PI),r=t*Math.sin(1/3*Math.PI),"down"===o?s=[-r+n,n]:"left"===o?s=[r,n]:"right"===o&&(s=[-r,n]),s)&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},i),{x:s[0],y:s[1],r:l/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"}))},getPath:function(t){var e=(this.mergeStyle||this.getOptions(t)).direction,e=t.direction||e,t=this.getSize(t)[0],n=t*Math.sin(1/3*Math.PI),t=t*Math.sin(1/3*Math.PI),r=[["M",-t,n],["L",0,-n],["L",t,n],["Z"]];return"down"===e?r=[["M",-t,-n],["L",t,-n],["L",0,n],["Z"]]:"left"===e?r=[["M",-t,t-n],["L",t,-t],["L",t,t],["Z"]]:"right"===e&&(r=[["M",t,t-n],["L",-t,t],["L",-t,-t],["Z"]]),r},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},e=Object(Y.mix)({},e,n),n=this.getPath(t);return Object(rt.__assign)({path:n},e)},update:function(t,e,n){var r=e.getContainer(),o=this.getOptions({}).style,i=this.getPath(t),i={stroke:t.color,path:i},a=e.get("keyShape"),o=Object(Y.mix)({},o,a.attr(),i),o=Object(Y.mix)(o,t.style);this.updateShape(t,e,o,!0,n),this.updateLinkPoints(t,r)},updateLinkPoints:function(t,e){var n=this.getOptions({}),r=n.linkPoints,n=t.direction||n.direction,o=e.shapeMap["link-point-left"]||e.find(function(t){return"link-point-left"===t.get("className")}),i=e.shapeMap["link-point-right"]||e.find(function(t){return"link-point-right"===t.get("className")}),a=e.shapeMap["link-point-top"]||e.find(function(t){return"link-point-top"===t.get("className")}),s=e.shapeMap["link-point-bottom"]||e.find(function(t){return"link-point-bottom"===t.get("className")}),c=o||i||a||s,c=(c&&(r=c.attr()),Object(Y.mix)({},r,t.linkPoints)),r=c.fill,u=c.stroke,l=c.lineWidth,d=(d=c.size/2)||c.r,c=t.linkPoints||{left:void 0,right:void 0,top:void 0,bottom:void 0},h=c.left,f=c.right,p=c.top,c=c.bottom,t=this.getSize(t)[0],d={r:d,fill:r,stroke:u,lineWidth:l},r=null,u=t*Math.sin(1/3*Math.PI),l=t*Math.sin(1/3*Math.PI),t=("up"===n?r=[-l,u]:"down"===n?r=[-l,-u]:"left"===n&&(r=[-l,l-u]),r&&(o?h||void 0===h?o.attr(Object(rt.__assign)(Object(rt.__assign)({},d),{x:r[0],y:r[1]})):(o.remove(),delete e.shapeMap["link-point-left"]):h&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},d),{x:r[0],y:r[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}))),null),o=("up"===n?t=[l,u]:"down"===n?t=[l,-u]:"right"===n&&(t=[l,l-u]),t&&(i?f||void 0===f?i.attr(Object(rt.__assign)(Object(rt.__assign)({},d),{x:t[0],y:t[1]})):(i.remove(),delete e.shapeMap["link-point-right"]):f&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},d),{x:t[0],y:t[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}))),null),h=("up"===n?o=[l-u,-u]:"left"===n?o=[l,-u]:"right"===n&&(o=[-l,-u]),o&&(a?p||void 0===p?a.attr(Object(rt.__assign)(Object(rt.__assign)({},d),{x:o[0],y:o[1]})):(a.remove(),delete e.shapeMap["link-point-top"]):p&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},d),{x:o[0],y:o[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}))),null);"down"===n?h=[u-l,u]:"left"===n?h=[l,u]:"right"===n&&(h=[-l,u]),h&&(s?c||void 0===c?s.attr(Object(rt.__assign)(Object(rt.__assign)({},d),{x:h[0],y:h[1]})):(s.remove(),delete e.shapeMap["link-point-bottom"]):c&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},d),{x:h[0],y:h[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),tn("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:f.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:f.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:f.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).preRect,n=void 0===n?{}:n,r=this.getShapeStyle(t),o=this.getSize(t),i=o[0],o=o[1],r=e.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}),a=(e.shapeMap["".concat(this.type,"-keyShape")]=r,n.show),n=Object(rt.__rest)(n,["show"]);return a&&(e.shapeMap["pre-rect"]=e.addShape("rect",{attrs:Object(rt.__assign)({x:-i/2,y:-o/2,height:o},n),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),r},drawLogoIcon:function(t,e){var n,r,o,i,a,s,c=(this.mergeStyle||this.getOptions(t)).logoIcon,c=void 0===c?{}:c,t=this.getSize(t)[0];c.show&&(n=c.width,r=c.height,o=c.x,i=c.y,a=c.offset,s=c.text,c=Object(rt.__rest)(c,["width","height","x","y","offset","text"]),e.shapeMap["rect-logo-icon"]=s?e.addShape("text",{attrs:Object(rt.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},c),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):e.addShape("image",{attrs:Object(rt.__assign)(Object(rt.__assign)({},c),{x:o||-t/2+n+a,y:i||-r/2,width:n,height:r}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}))},drawStateIcon:function(t,e){var n,r,o,i,a,s,c=(this.mergeStyle||this.getOptions(t)).stateIcon,c=void 0===c?{}:c,t=this.getSize(t)[0];c.show&&(n=c.width,r=c.height,o=c.x,i=c.y,a=c.offset,s=c.text,c=Object(rt.__rest)(c,["width","height","x","y","offset","text"]),e.shapeMap["rect-state-icon"]=s?e.addShape("text",{attrs:Object(rt.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},c),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):e.addShape("image",{attrs:Object(rt.__assign)(Object(rt.__assign)({},c),{x:o||t/2-n+a,y:i||-r/2,width:n,height:r}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}))},drawLinkPoints:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).linkPoints,n=void 0===n?{}:n,r=n.top,o=n.left,i=n.right,a=n.bottom,s=n.size,c=n.r,n=Object(rt.__rest)(n,["top","left","right","bottom","size","r"]),t=this.getSize(t),u=t[0],t=t[1];o&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:-u/2,y:0,r:s/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),i&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:u/2,y:0,r:s/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),r&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:0,y:-t/2,r:s/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},n),{x:0,y:t/2,r:s/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(t,e){var n=this.getOptions(t),r=n.labelCfg,r=void 0===r?{}:r,o=n.logoIcon,o=void 0===o?{}:o,n=n.descriptionCfg,n=void 0===n?{}:n,i=this.getSize(t)[0],a=null,s=o.show,o=o.width,c=-i/2+r.offset,s=(s&&(c=-i/2+o+r.offset),r.style),i=n.style,o=n.paddingTop;return Object(Y.isString)(t.description)?(a=e.addShape("text",{attrs:Object(rt.__assign)(Object(rt.__assign)({},s),{x:c,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e.shapeMap["text-shape"]=a,e.shapeMap["rect-description"]=e.addShape("text",{attrs:Object(rt.__assign)(Object(rt.__assign)({},i),{x:c,y:17+(o||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(a=e.addShape("text",{attrs:Object(rt.__assign)(Object(rt.__assign)({},s),{x:c,y:7,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e.shapeMap["text-shape"]=a),a},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},e=Object(Y.mix)({},e,n),n=this.getSize(t),t=e.width||n[0],n=e.height||n[1];return Object(rt.__assign)({x:-t/2,y:-n/2,width:t,height:n},e)},update:function(t,e){var n,r,o,i,a,s=this.mergeStyle||this.getOptions(t),c=s.style,c=void 0===c?{}:c,u=s.labelCfg,u=void 0===u?{}:u,s=s.descriptionCfg,s=void 0===s?{}:s,l=this.getSize(t),d=l[0],l=l[1],c=(e.get("keyShape").attr(Object(rt.__assign)(Object(rt.__assign)({},c),{x:-d/2,y:-l/2,width:d,height:l})),e.getContainer()),e=c.shapeMap["rect-logo-icon"]||c.find(function(t){return"rect-logo-icon"===t.get("className")}),h=e?e.attr():{},h=Object(Y.mix)({},h,t.logoIcon),f=h.width,p=(void 0===f&&(f=this.options.logoIcon.width),t.logoIcon?t.logoIcon.show:void 0),g=u.offset,f=-d/2+f+g,g=(p||void 0===p||(f=-d/2+g),c.shapeMap["node-label"]||c.find(function(t){return"node-label"===t.get("className")})),y=c.shapeMap["rect-description"]||c.find(function(t){return"rect-description"===t.get("className")}),u=(t.label&&(g?(a=t.labelCfg?t.labelCfg.style:{},i=Object(Y.mix)({},g.attr(),a),t.label&&(i.text=t.label),i.x=f,Object(Y.isString)(t.description)&&(i.y=-5),y&&(y.resetMatrix(),y.attr({x:f})),g.resetMatrix(),g.attr(i)):c.shapeMap["node-label"]=c.addShape("text",{attrs:Object(rt.__assign)(Object(rt.__assign)({},u.style),{x:f,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0})),Object(Y.isString)(t.description)&&(g=s.paddingTop,y?(a=t.descriptionCfg?t.descriptionCfg.style:{},i=Object(Y.mix)({},y.attr(),a),Object(Y.isString)(t.description)&&(i.text=t.description),i.x=f,y.resetMatrix(),y.attr(Object(rt.__assign)(Object(rt.__assign)({},i),{y:17+(g||0)}))):c.shapeMap["rect-description"]=c.addShape("text",{attrs:Object(rt.__assign)(Object(rt.__assign)({},s.style),{x:f,y:17+(g||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})),c.shapeMap["pre-rect"]||c.find(function(t){return"pre-rect"===t.get("className")})),f=(u&&!u.destroyed&&(a=Object(Y.mix)({},u.attr(),t.preRect),u.attr(Object(rt.__assign)(Object(rt.__assign)({},a),{x:-d/2,y:-l/2,height:l}))),e&&!e.destroyed?p||void 0===p?(y=h.width,n=h.height,r=h.x,o=h.y,i=h.offset,s=Object(rt.__rest)(h,["width","height","x","y","offset"]),e.attr(Object(rt.__assign)(Object(rt.__assign)({},s),{x:r||-d/2+y+i,y:o||-n/2,width:y,height:n}))):(e.remove(),delete c.shapeMap["pre-rect"]):p&&this.drawLogoIcon(t,c),c.shapeMap["rect-state-icon"]||c.find(function(t){return"rect-state-icon"===t.get("className")})),g=f?f.attr():{},u=Object(Y.mix)({},g,t.stateIcon);f?(u.show||void 0===u.show||(f.remove(),delete c.shapeMap["rect-state-icon"]),a=u.width,n=u.height,r=u.x,o=u.y,l=u.offset,h=Object(rt.__rest)(u,["width","height","x","y","offset"]),f.attr(Object(rt.__assign)(Object(rt.__assign)({},h),{x:r||d/2-a+l,y:o||-n/2,width:a,height:n}))):u.show&&this.drawStateIcon(t,c),this.updateLinkPoints(t,c)},getOptions:function(t,e){return"move"===e?t:Object(Y.deepMix)({},this.options,this.getCustomConfig(t)||{},t)}},"single-node"),tn("star",{options:{size:60,style:{stroke:f.defaultNode.style.stroke,fill:f.defaultNode.style.fill,lineWidth:f.defaultNode.style.lineWidth},labelCfg:{style:{fill:f.nodeLabel.style.fill,fontSize:f.nodeLabel.style.fontSize,fontFamily:f.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:f.defaultNode.linkPoints.size,lineWidth:f.defaultNode.linkPoints.lineWidth,fill:f.defaultNode.linkPoints.fill,stroke:f.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(rt.__assign)({},f.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,n=void 0===n?{}:n,r=this.getShapeStyle(t),r=e.addShape("path",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0}),o=(e.shapeMap["".concat(this.type,"-keyShape")]=r,n.width),i=n.height,a=n.show,s=n.text;return a&&(e.shapeMap["".concat(this.type,"-icon")]=s?e.addShape("text",{attrs:Object(rt.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:Object(rt.__assign)({x:-o/2,y:-i/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),r},drawLinkPoints:function(t,e){var n,r,o=(this.mergeStyle||this.getOptions(t)).linkPoints,o=void 0===o?{}:o,i=o.top,a=o.left,s=o.right,c=o.leftBottom,u=o.rightBottom,l=o.size,d=o.r,o=Object(rt.__rest)(o,["top","left","right","leftBottom","rightBottom","size","r"]),t=this.getSize(t)[0];s&&(n=Math.cos(.1*Math.PI)*t,r=Math.sin(.1*Math.PI)*t,e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},o),{x:n,y:-r,r:l/2||d||5}),className:"link-point-right",name:"link-point-right"})),i&&(n=Math.cos(.5*Math.PI)*t,r=Math.sin(.5*Math.PI)*t,e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},o),{x:n,y:-r,r:l/2||d||5}),className:"link-point-top",name:"link-point-top"})),a&&(n=Math.cos(.9*Math.PI)*t,r=Math.sin(.9*Math.PI)*t,e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},o),{x:n,y:-r,r:l/2||d||5}),className:"link-point-left",name:"link-point-left"})),c&&(n=Math.cos(1.3*Math.PI)*t,r=Math.sin(1.3*Math.PI)*t,e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},o),{x:n,y:-r,r:l/2||d||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})),u&&(n=Math.cos(1.7*Math.PI)*t,r=Math.sin(1.7*Math.PI)*t,e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},o),{x:n,y:-r,r:l/2||d||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"}))},getPath:function(t){var e=this.getSize(t)[0],t=t.innerR||3*e/8;return Br.getStarPath(e,t)},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,n={stroke:t.color},e=Object(Y.mix)({},e,n),n=this.getPath(t);return Object(rt.__assign)({path:n},e)},update:function(t,e,n){var r=e.getContainer(),o=this.getOptions({}).style,i=this.getPath(t),i={stroke:t.color,path:i},a=e.get("keyShape"),o=Object(Y.mix)({},o,a.attr(),i),o=Object(Y.mix)(o,t.style);this.updateShape(t,e,o,!0,n),this.updateLinkPoints(t,r)},updateLinkPoints:function(t,e){var n=this.getOptions({}).linkPoints,r=e.shapeMap["link-point-left"]||e.find(function(t){return"link-point-left"===t.get("className")}),o=e.shapeMap["link-point-right"]||e.find(function(t){return"link-point-right"===t.get("className")}),i=e.shapeMap["link-point-top"]||e.find(function(t){return"link-point-top"===t.get("className")}),a=e.shapeMap["link-point-left-bottom"]||e.find(function(t){return"link-point-left-bottom"===t.get("className")}),s=e.shapeMap["link-point-left-bottom"]||e.find(function(t){return"link-point-right-bottom"===t.get("className")}),c=r||o||i||a||s,c=(c&&(n=c.attr()),Object(Y.mix)({},n,t.linkPoints)),n=c.fill,u=c.stroke,l=c.lineWidth,d=(d=c.size/2)||c.r,c=t.linkPoints||{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},h=c.left,f=c.right,p=c.top,g=c.leftBottom,c=c.rightBottom,t=this.getSize(t)[0],d={r:d,fill:n,stroke:u,lineWidth:l},n=Math.cos(.1*Math.PI)*t,u=Math.sin(.1*Math.PI)*t;o?f||void 0===f?o.attr(Object(rt.__assign)(Object(rt.__assign)({},d),{x:n,y:-u})):(o.remove(),delete e.shapeMap["link-point-right"]):f&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},d),{x:n,y:-u}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),n=Math.cos(.5*Math.PI)*t,u=Math.sin(.5*Math.PI)*t,i?p||void 0===p?i.attr(Object(rt.__assign)(Object(rt.__assign)({},d),{x:n,y:-u})):(i.remove(),delete e.shapeMap["link-point-top"]):p&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},d),{x:n,y:-u}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),n=Math.cos(.9*Math.PI)*t,u=Math.sin(.9*Math.PI)*t,r?h||void 0===h?r.attr(Object(rt.__assign)(Object(rt.__assign)({},d),{x:n,y:-u})):(r.remove(),delete e.shapeMap["link-point-left"]):h&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},d),{x:n,y:-u}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),n=Math.cos(1.3*Math.PI)*t,u=Math.sin(1.3*Math.PI)*t,a?g||void 0===g?a.attr(Object(rt.__assign)(Object(rt.__assign)({},d),{x:n,y:-u})):(a.remove(),delete e.shapeMap["link-point-left-bottom"]):g&&(e.shapeMap["link-point-left-bottom"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},d),{x:n,y:-u}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),n=Math.cos(1.7*Math.PI)*t,u=Math.sin(1.7*Math.PI)*t,s?c||void 0===c?s.attr(Object(rt.__assign)(Object(rt.__assign)({},d),{x:n,y:-u})):(s.remove(),delete e.shapeMap["link-point-right-bottom"]):c&&(e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:Object(rt.__assign)(Object(rt.__assign)({},d),{x:n,y:-u}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");function za(t){var e=t.x;return{x:e,y:t=t.y,centerX:e,centerY:t,minX:e,minY:t,maxX:e,maxY:t,height:0,width:0}}function Fa(t){return ns(t)}function Ga(t,e){var n=Math.min(t.minX,e.minX),r=Math.min(t.minY,e.minY),o=Math.max(t.maxX,e.maxX),t=Math.max(t.maxY,e.maxY);return{centerX:(n+o)/2,centerY:(r+t)/2,minX:n,minY:r,maxX:o,maxY:t,height:t-r,width:o-n}}function Ua(t,e){var n=t.x,t=t.y;return n<e.minX||e.maxX<n||t<e.minY||e.maxY<t}function Wa(t,e,n,r,o){return as(t,e)+as(t,n)+(i=t,a=0,[e,n,r,o].forEach(function(t){t&&(i.x===t.x&&(a+=-2),i.y===t.y)&&(a+=-2)}),a);var i,a}function Xa(t,e,n,r,o){void 0===o&&(o=0),t.unshift(e[r]),n[r]&&n[r]!==r&&o<=100&&Xa(t,e,n,n[r],o+1)}function Ya(s,c){var u=[],t=s[0];return u.push("M".concat(t.x," ").concat(t.y)),s.forEach(function(t,e){var n,r,o,i,a=s[e+1],e=s[e+2];a&&e?t.x===a.x&&a.x===e.x||t.y===a.y&&a.y===e.y?u.push("L".concat(a.x," ").concat(a.y)):(e=e,r=c,o=as(t=t,n=a),i=as(e,n),t=(o=[{x:n.x-(r=i<(r=o<r?o:r)?i:r)/o*(n.x-t.x),y:n.y-r/o*(n.y-t.y)},{x:n.x-r/i*(n.x-e.x),y:n.y-r/i*(n.y-e.y)}])[1],u.push("L".concat((r=o[0]).x," ").concat(r.y)),u.push("Q".concat(a.x," ").concat(a.y," ").concat(t.x," ").concat(t.y)),u.push("L".concat(t.x," ").concat(t.y))):a&&u.push("L".concat(a.x," ").concat(a.y))}),u.join("")}function Va(t,e,n,r,o){n&&n.getType()?"combo"===n.getType()?(h=n.getKeyShape().getBBox())?((a={x:a=(s=n.getModel()).x,y:s=s.y,width:h.width,height:h.height,minX:h.minX+a,maxX:h.maxX+a,minY:h.minY+s,maxY:h.maxY+s}).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2):a=za(t):a=n&&n.getBBox():a=za(t),r&&r.getType()?"combo"===r.getType()?(h=r.getKeyShape().getBBox())?((i={x:n=(s=r.getModel()).x,y:s=s.y,width:h.width,height:h.height,minX:h.minX+n,maxX:h.maxX+n,minY:h.minY+s,maxY:h.maxY+s}).centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2):i=za(e):i=r&&r.getBBox():i=za(e);var i,a,s,c,u,l=rs(a,o),d=rs(i,o),n=os(l,t,e),h=os(d,e,t),f=(c=[],u=[],(s=void 0===(s=[n,h])?[]:s).forEach(function(t){c.push(t.x),u.push(t.y)}),s=Math.min.apply(Math,c),r=Math.max.apply(Math,c),o=Math.min.apply(Math,u),f=Math.max.apply(Math,u),{centerX:(s+r)/2,centerY:(o+f)/2,maxX:r,maxY:f,minX:s,minY:o,height:f-o,width:r-s}),o=Ga(l,f),r=Ga(d,f),p=(p=[]).concat(is(o)).concat(is(r)),g={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return[f,o,r].forEach(function(t){var e;p=p.concat(((e=g.x)<(t=t).minX||t.maxX<e?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]).concat((e=g.y)<t.minY||t.maxY<e?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]).filter(function(t){return Ua(t,l)&&Ua(t,d)}))}),[{x:n.x,y:h.y},{x:h.x,y:n.y}].forEach(function(t){Ua(t,l)&&Ua(t,d)&&p.push(t)}),p.unshift(n),p.push(h),(f=function(t,r,o,e,n,i,a){var s,c=[],u=((s={})[r.id]=r,s),l={},d={},h={},f=(d[r.id]=0,h[r.id]=Wa(r,o,r),new us);f.add({id:r.id,value:h[r.id]});var p,g={};for(t.forEach(function(t){g[t.id]=t});Object.keys(u).length;){var y=f.minId(!1);if(!y)break;if((p=u[y])===o)return Xa(y=[],g,l,o.id),y;delete u[p.id],f.remove(p.id),c.push(p),function(t,e,n,r){var o=[];return t.forEach(function(t){t===e||t.x!==e.x&&t.y!==e.y||cs(t,e,n)||cs(t,e,r)||o.push(t)}),ns(o)}(t,p,e,n).forEach(function(t){var e,n;-1===c.indexOf(t)&&(e=t.id,u[e]||(u[e]=t),n=h[p.id]+as(p,t),d[e]&&d[e]<=n||(l[e]=p.id,d[e]=n,h[e]=d[e]+Wa(t,o,r,i,a)),f.add({id:e,value:h[e]}))})}return[r,o]}(p=ns(p),n,h,a,i,t,e)).unshift(t),f.push(e),Fa(f)}function Ha(t,e,n){for(var r=1/0,o=0,i=e.length;o<i;o++){var a=n(t,e[o]);a<r&&(r=a)}return r}function qa(t,e,n,r,o){var i=[];if(!n)return[t];var a=o.directions,s=o.offset,c=n.getBBox(),n=e.x>c.minX&&e.x<c.maxX&&c.minY<e.y&&e.y<c.maxY,u=rs(c,s);for(p in u)u[p]=ds(u[p],o.gridSize);if(n){for(var l=0,d=a;l<d.length;l++)for(var h=d[l],f=[[{x:u.minX,y:u.minY},{x:u.maxX,y:u.minY}],[{x:u.minX,y:u.minY},{x:u.minX,y:u.maxY}],[{x:u.maxX,y:u.minY},{x:u.maxX,y:u.maxY}],[{x:u.minX,y:u.maxY},{x:u.maxX,y:u.maxY}]],p=0;p<4;p++){var g=f[p],g=Br.getLineIntersect(t,{x:t.x+h.stepX*u.width,y:t.y+h.stepY*u.height},g[0],g[1]);g&&!cs(t,g,c)&&(g.id="".concat(g.x,"|||").concat(g.y),i.push(g))}return i}return(e=os(u,t,r)).id="".concat(e.x,"|||").concat(e.y),[e]}function Ka(t,e,n,r,o){if(isNaN(t.x)||isNaN(e.x))return[];var i,a,s,c=Object(Y.deepMix)(ls,o),u=(c.obstacles=c.obstacles||[],c.penalties),l=c.gridSize,d=(o=c.obstacles.concat([n,r]),i=l,a=c.offset,s={},o.forEach(function(t){if(t)for(var e=rs(t.getBBox(),a),n=ds(e.minX,i);n<=ds(e.maxX,i);n+=1)for(var r=ds(e.minY,i);r<=ds(e.maxY,i);r+=1)s["".concat(n,"|||").concat(r)]=!0}),s),h={x:ds(t.x,l),y:ds(t.y,l)},f={x:ds(e.x,l),y:ds(e.y,l)},p=(t.id="".concat(h.x,"|||").concat(h.y),e.id="".concat(f.x,"|||").concat(f.y),qa(h,t,n,f,c)),g=qa(f,e,r,h,c);p.forEach(function(t){delete d[t.id]}),g.forEach(function(t){delete d[t.id]});for(var y={},m={},v={},b={},x={},w=new us,_=0;_<p.length;_++){var E=p[_];b[(y[E.id]=E).id]=0,x[E.id]=Ha(E,g,c.distFunc),w.add({id:E.id,value:x[E.id]})}var S,O=c.maximumLoops,M=1/0,k={};for(g.forEach(function(t){k["".concat(t.x,"|||").concat(t.y)]=!0}),Object.keys(y).forEach(function(t){t=y[t].id;x[t]<=M&&(M=x[t],S=y[t])});0<Object.keys(y).length&&0<O;){var C=w.minId((O+1)%30==0);if(!C)break;if(S=y[C],k["".concat(S.x,"|||").concat(S.y)])return function(t,e,n,r,o,i,a){var s=[r],c=r,u=t.id,l=t.x,d=t.y,t={x:l,y:d,id:u};ps(t,i,e,n)&&(c={x:i.x===r.x?r.x:t.x*a,y:i.y===r.y?r.y:t.y*a},s.unshift(c));for(var h=e[u];h&&h.id!==u;){var f={x:l,y:d,id:u},p={x:h.x,y:h.y,id:h.id};ps(p,f,e,n)&&(c={x:p.x===f.x?c.x:p.x*a,y:p.y===f.y?c.y:p.y*a},s.unshift(c)),l=p.x,d=p.y,h=e[u=p.id]}return s[0].x=(l===n.x?o:c).x,s[0].y=(d===n.y?o:c).y,s.unshift(o),s}(S,v,h,e,t,f,l);for(delete y[S.id],w.remove(S.id),m[S.id]=!0,_=0;_<c.directions.length;_++){var A,I,T=c.directions[_],j="".concat(Math.round(S.x)+T.stepX,"|||").concat(Math.round(S.y)+T.stepY),T={x:S.x+T.stepX,y:S.y+T.stepY,id:j};m[j]||(A=ps(S,T,v,h))>c.maxAllowedDirectionChange||d[j]||(y[j]||(y[j]=T),A=u[A],A=c.distFunc(S,T)+(isNaN(A)?l:A),A=b[S.id]+A,(I=b[j])&&I<=A)||(v[j]=S,x[j]=(b[j]=A)+Ha(T,g,c.distFunc),w.add({id:j,value:x[j]}))}--O}return c.fallbackRoute(t,e,n,r,c)}var Za=Br.defaultSubjectColors,$a=(tn("donut",{options:{size:f.defaultNode.size,style:{x:0,y:0,stroke:f.defaultNode.style.stroke,fill:f.defaultNode.style.fill,lineWidth:f.defaultNode.style.lineWidth},labelCfg:{style:{fill:f.nodeLabel.style.fill,fontSize:f.nodeLabel.style.fontSize,fontFamily:f.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:f.defaultNode.linkPoints.size,lineWidth:f.defaultNode.linkPoints.lineWidth,fill:f.defaultNode.linkPoints.fill,stroke:f.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(rt.__assign)({},f.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var n=(this.mergeStyle||this.getOptions(t)).icon,n=void 0===n?{}:n,r=this.getShapeStyle(t),n=Object(Y.deepMix)({},n,t.icon),r=e.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")}),o=(e.shapeMap["".concat(this.type,"-keyShape")]=r,n.width),i=n.height,a=n.show,s=n.text;return a&&(e.shapeMap["".concat(this.type,"-icon")]=s?e.addShape("text",{attrs:Object(rt.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.addShape("image",{attrs:Object(rt.__assign)({x:-o/2,y:-i/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),$a(t,e,r),this.drawLinkPoints(t,e),r},updateShape:function(t,e,n,r,o){var i=e.get("keyShape");i.attr(Object(rt.__assign)({},n)),Ja(t,e,i),this.updateLabel(t,e,o),r&&this.updateIcon(t,e)}},"circle"),function(t,e,n){var r=t.donutAttrs,r=void 0===r?{}:r,t=t.donutColorMap,t=void 0===t?{}:t,o=Object.keys(r).length;if(r&&1<o){var r=ts(r,t),i=r.configs,a=r.totalValue;if(a){var t=es(n),s=t.lineWidth,c=t.arcR,u=[c,0],l=0;if(1===o)Qa(e,{arcR:c,arcBegin:u,beginAngle:l,config:i[0],fanIndex:0,lineWidth:s,totalValue:a,drawWhole:!0});else for(var d=0;d<i.length;d++){var h=Qa(e,{arcR:c,arcBegin:u,beginAngle:l,config:i[d],fanIndex:d,lineWidth:s,totalValue:a});if(h.shouldEnd)return;u=h.arcBegin,l=h.beginAngle}}}}),Qa=function(t,e){var n,r,o=e.arcR,i=e.arcBegin,a=e.beginAngle,s=e.config,c=e.fanIndex,u=e.lineWidth,l=e.drawWhole,l=void 0!==l&&l,d=e.updateShape,d=void 0===d?void 0:d,e=s.value/e.totalValue;if(e<.001)return{beginAngle:a,arcBegin:i,shape:void 0,shouldEnd:!1};a=l||.999<e?(r=[o,1e-4],1):(h=e*Math.PI*2,r=[o*Math.cos(n=a+h),-o*Math.sin(n)],h>Math.PI?1:0);var h={path:[["M",i[0],i[1]],["A",o,o,0,a,0,r[0],r[1]]],stroke:s.color||(null==d?void 0:d.attr("stroke"))||Za[c%Za.length],lineWidth:u};return d?d.attr(h):t.shapeMap["".concat("fan-shape-").concat(c)]=t.addShape("path",{attrs:h,name:"".concat("fan-shape-").concat(c),draggable:!0}),{beginAngle:n,arcBegin:r,shape:t.shapeMap["".concat("fan-shape-").concat(c)],shouldEnd:l||.999<e}},Ja=function(t,e,n){var r=t.donutAttrs,t=t.donutColorMap,t=void 0===t?{}:t,o={},i=e.getContainer();if(r){var e=ts(r,t),a=e.configs,s=e.totalValue;if(s)for(var r=es(n),c=r.lineWidth,u=r.arcR,l=[u,0],d=0,h=0;h<a.length;h++){var f="".concat("fan-shape-").concat(h),p=Qa(i,{arcR:u,arcBegin:l,beginAngle:d,config:a[h],fanIndex:h,lineWidth:c,totalValue:s,drawWhole:1===a.length,updateShape:i.shapeMap[f]});if(p.shape&&(o[f]=!0),p.shouldEnd)break;l=p.arcBegin,d=p.beginAngle}}Object.keys(i.shapeMap).filter(function(t){return t.includes("fan-shape-")}).forEach(function(t){o[t]||(i.shapeMap[t].remove(!0),delete i.shapeMap[t])})},ts=function(n,r){var o=0,i=[];return Object.keys(n).forEach(function(t){var e=+n[t];isNaN(e)||(i.push({key:t,value:e,color:r[t]}),o+=e)}),{totalValue:o,configs:i}},es=function(t){var t=t.attr("r"),e=.6*t;return{lineWidth:t-e,arcR:(t+e)/2}},ns=function(t){for(var e=[],n={},r=t.length-1;0<=r;r--){var o=t[r];o.id="".concat(o.x,"|||").concat(o.y),n[o.id]||(n[o.id]=o,e.push(o))}return e},rs=function(t,e){return t.width||t.height?{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}:t},os=function(t,e,n){r=e,o=t,i=Math.abs(r.x-o.centerX),r=Math.abs(r.y-o.centerY);var r,o,i=0===i&&0===r?0:i/o.width>r/o.height;return 0===i?(r=t.centerX,o=t.centerY,n.y<e.y?o=t.minY:e.x<n.x?r=t.maxX:n.x<e.x?r=t.minX:n.x===e.x&&(o=t.maxY),{x:r,y:o}):i?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},is=function(t){return[{x:t.minX,y:t.minY},{x:t.maxX,y:t.minY},{x:t.maxX,y:t.maxY},{x:t.minX,y:t.maxY}]},as=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},ss=function(t,e,n,r){var o=n.x-t.x,i=n.y-t.y,a=r.x-t.x,t=r.y-t.y,s=n.x-e.x,n=n.y-e.y,c=r.x-e.x,r=r.y-e.y;return(o*t-i*a)*(s*r-n*c)<=0&&(o*n-i*s)*(a*r-t*c)<=0},cs=function(t,e,n){var r,o,i;return!(!n.width&&!n.height)&&(r=(n=is(n))[0],o=n[2],i=n[3],ss(t,e,r,n=n[1])||ss(t,e,r,i)||ss(t,e,n,o)||ss(t,e,o,i))},us=(gs.prototype._innerAdd=function(t,e){for(var n=[0,e-1];1<n[1]-n[0];){var r=Math.floor((n[0]+n[1])/2);if(this.arr[r].value>t.value)n[1]=r;else{if(!(this.arr[r].value<t.value))return this.arr.splice(r,0,t),void(this.map[t.id]=!0);n[0]=r}}this.arr.splice(n[1],0,t),this.map[t.id]=!0},gs.prototype.add=function(t){delete this.map[t.id];var e=this.arr.length;return!e||this.arr[e-1].value<t.value?(this.arr.push(t),void(this.map[t.id]=!0)):void this._innerAdd(t,e)},gs.prototype.remove=function(t){this.map[t]&&delete this.map[t]},gs.prototype._clearAndGetMinId=function(){for(var t,e=this.arr.length-1;0<=e;e--)this.map[this.arr[e].id]?t=this.arr[e].id:this.arr.splice(e,1);return t},gs.prototype._findFirstId=function(){for(;this.arr.length;){var t=this.arr.shift();if(this.map[t.id])return t.id}},gs.prototype.minId=function(t){return t?this._clearAndGetMinId():this._findFirstId()},gs),ls={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},fallbackRoute:function(t,e,n,r,o){return Fa(Va(t,e,n,r,o.offset))}},ds=function(t,e){e=Math.round(Math.abs(t/e));return e<0?0:(t<0?-1:1)*e},hs=function(t,e){var n=e.x-t.x,e=e.y-t.y;return n||e?Math.atan2(e,n):0},fs=function(t,e){t=Math.abs(t-e);return t>Math.PI?2*Math.PI-t:t},ps=function(t,e,n,r){var e=hs(t,e),n=n[t.id];return n=hs(n?{x:n.x,y:n.y}:r,t),fs(n,e)};function gs(){this.arr=[],this.map={},this.arr=[],this.map={}}rn("polyline",{options:{color:f.defaultEdge.color,size:f.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:f.defaultEdge.style.stroke,lineAppendWidth:f.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:f.edgeLabel.style.fill,fontSize:f.edgeLabel.style.fontSize,fontFamily:f.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:Object(rt.__assign)({},f.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){t=this.getShapeStyle(t),0===t.radius&&delete t.radius,t=e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:t});return e.shapeMap["edge-shape"]=t},getShapeStyle:function(t){var e=this.options.style,n={stroke:t.color},e=Object(Y.mix)({},e,n,t.style),n=(t=this.getPathPoints(t),this.radius=e.radius,this.offset=e.offset,t.startPoint),r=t.endPoint,o=this.getControlPoints(t),i=[n],a=((i=o?i.concat(o):i).push(r),t.sourceNode),s=t.targetNode,c=e.radius,u=this.options.routeCfg,u=Object(Y.mix)({},u,t.routeCfg),i=(u.offset=e.offset,this.getPath(i,a,s,c,u,!Boolean(o)));return(Object(Y.isArray)(i)&&i.length<=1||Object(Y.isString)(i)&&-1===i.indexOf("L"))&&(i="M0 0, L0 0"),(isNaN(n.x)||isNaN(n.y)||isNaN(r.x)||isNaN(r.y))&&(i="M0 0, L0 0"),Object(Y.mix)({},f.defaultEdge.style,e,{lineWidth:t.size,path:i})},updateShapeStyle:function(t,e){var n,r,o,i,a,s,c,u,l,d,h,f=e.getContainer();e.isVisible()&&(n={stroke:t.color},f=f.shapeMap["edge-shape"]||f.find(function(t){return"edge-shape"===t.get("className")})||e.getKeyShape(),e=t.size,r=(t=this.getPathPoints(t)).startPoint,o=t.endPoint,d=[r],(d=(i=this.getControlPoints(t))?d.concat(i):d).push(o),a=f.attr(),s=Object(Y.mix)({},n,a,t.style),h=t.sourceNode,c=t.targetNode,u=s.radius,l=this.options.routeCfg,(l=Object(Y.mix)({},l,t.routeCfg)).offset=s.offset,d=this.getPath(d,h,c,u,l,!Boolean(i)),(Object(Y.isArray)(d)&&d.length<=1||Object(Y.isString)(d)&&-1===d.indexOf("L"))&&(d="M0 0, L0 0"),(isNaN(r.x)||isNaN(r.y)||isNaN(o.x)||isNaN(o.y))&&(d="M0 0, L0 0"),a.endArrow&&!1===s.endArrow&&(t.style.endArrow={path:""}),a.startArrow&&!1===s.startArrow&&(t.style.startArrow={path:""}),h=Object(Y.mix)(n,f.attr(),{lineWidth:e,path:d},t.style),f)&&f.attr(h)},getPath:function(t,e,n,r,o,i){var a,s=o.offset,c=o.obstacles,u=o.simple;return!s||2<t.length||!1===i?r?Ya(t,r):(a=[],Object(Y.each)(t,function(t,e){a.push(0===e?["M",t.x,t.y]:["L",t.x,t.y])}),a):(i=(u=!1===u||null!=c&&c.length?u:!0)?Va(t[t.length-1],t[0],n,e,s):Ka(t[0],t[t.length-1],e,n,o))&&i.length?r?Ya(i,r):(i=function(t){if(null!=t&&t.length)for(var e=t[t.length-1],n={x:e.x,y:e.y},r=[e],o=[e],i=t.length-2;0<=i;i--){var a,s=t[i];s.x===n.x?r.push(s):(r=[s],n.x=s.x),s.y===n.y?o.push(s):(o=[s],n.y=s.y),2<r.length?-1<(a=t.indexOf(r[1]))&&t.splice(a,1):2<o.length&&-1<(a=t.indexOf(o[1]))&&t.splice(a,1)}return t}(i),Br.pointsToPolygon(i)):"M0 0, L0 0"}},"single-edge");var ys=n.cloneEvent,ms=n.isNaN,vs=Math.abs,bs=["shift","ctrl","alt","control"],ja={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(t){var e,n,r,o,i=this.origin,a=+t.clientX,t=+t.clientY;ms(a)||ms(t)||(e=a-i.x,i=t-i.y,"x"===this.get("direction")?i=0:"y"===this.get("direction")&&(e=0),this.origin={x:a,y:t},a=this.graph.get("width"),t=this.graph.get("height"),n=this.graph.get("canvas").getCanvasBBox(),r=this.scalableRange,o=this.scalableRange,r<1&&-1<r&&(r*=a,o*=t),(n.minX<=a+r&&a+r<n.minX+e||0<=n.maxX+r&&n.maxX+r+e<0)&&(e=0),this.graph.translate(e,i=n.minY<=t+o&&t+o<n.minY+i||0<=n.maxY+o&&n.maxY+o+i<0?0:i))},onTouchStart:function(t){var e=t.originalEvent.touches;e[0]&&e[1]||(t.preventDefault(),this.mousedown=!0,this.onDragStart(t))},onMouseDown:function(t){this.mousedown=!0},onDragMove:function(t){this.mousedown&&(this.dragstart?this.onDrag(t):(this.dragstart=!0,this.onDragStart(t)))},onDragStart:function(t){var e,n=t.originalEvent;if((!n||"touchstart"===t.name||0===n.button)&&("touchstart"===t.name||"undefined"==typeof window||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin(t,this)&&!this.keydown&&this.allowDrag(t)){if(this.origin={x:t.clientX,y:t.clientY},this.dragging=!1,this.enableOptimize){for(var n=this.graph,r=n.getEdges(),o=0,i=r.length;o<i;o++){var a=r[o].get("group").get("children");a&&a.forEach(function(t){t.set("ori-visibility",t.get("ori-visibility")||t.get("visible")),t.hide()})}for(var s=n.getNodes(),c=0,u=s.length;c<u;c++)for(var l=0,d=s[c].getContainer().get("children");l<d.length;l++){var h=d[l];h.get("isKeyShape")||(h.set("ori-visibility",h.get("ori-visibility")||h.get("visible")),h.hide())}}"undefined"!=typeof window&&((e=this).handleDOMContextMenu=function(t){return e.onMouseUp(t)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu))}},onTouchMove:function(t){var e=t.originalEvent.touches;e[0]&&e[1]?this.onMouseUp(t):(t.preventDefault(),this.onDrag(t))},onDrag:function(t){if(this.mousedown){var e=this.graph;if(!this.keydown&&this.allowDrag(t)&&(t=ys(t),this.origin)){if(this.dragging)t.type="drag",e.emit("canvas:drag",t);else{if(vs(this.origin.x-t.clientX)+vs(this.origin.y-t.clientY)<10)return;this.shouldBegin(t,this)&&(t.type="dragstart",e.emit("canvas:dragstart",t),this.originPosition={x:t.clientX,y:t.clientY},this.dragging=!0)}this.shouldUpdate(t,this)&&this.updateViewport(t)}}},onMouseUp:function(t){this.mousedown=!1,this.dragstart=!1;var e=this.graph;if(!this.keydown){var n=e.getZoom(),r=e.get("modeController"),r=null==(r=null==(r=null==r?void 0:r.modes[r.mode])?void 0:r.filter(function(t){return"zoom-canvas"===t.type}))?void 0:r[0],r=r?r.optimizeZoom||.1:0;if(this.enableOptimize){for(var o=e.getEdges(),i=0,a=o.length;i<a;i++){var s=o[i].get("group").get("children");s&&s.forEach(function(t){var e=t.get("ori-visibility");t.set("ori-visibility",void 0),e&&t.show()})}if(r<n)for(var c=e.getNodes(),u=0,l=c.length;u<l;u++)for(var d=0,h=c[u].getContainer().get("children");d<h.length;d++){var f,p=h[d];p.get("isKeyShape")||(f=p.get("ori-visibility"),p.set("ori-visibility",void 0),f&&p.show())}}this.dragging?(t=ys(t),this.shouldEnd(t,this)&&this.updateViewport(t),t.type="dragend",t.dx=t.clientX-this.originPosition.x,t.dy=t.clientY-this.originPosition.y,e.emit("canvas:dragend",t),this.endDrag(),"undefined"!=typeof window&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(t){t=t.key;t&&(-1<bs.indexOf(t.toLowerCase())?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(t){var e=t.target,e=e&&e.isCanvas&&e.isCanvas();if(Object(Y.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!e)return!1;if(Object(Y.isObject)(this.allowDragOnItem)){var e=this.allowDragOnItem,n=e.node,r=e.edge,e=e.combo,o=null==(o=null==(t=t.item)?void 0:t.getType)?void 0:o.call(t);if(!n&&"node"===o)return!1;if(!r&&"edge"===o)return!1;if(!e&&"combo"===o)return!1}return!0}},i={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(t){return!(!this.origin||!t||t.destroyed)&&"combo"===t.getType()},onTouchStart:function(t){if(t.item){try{var e=t.originalEvent.touches;if(e[0]&&e[1])return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.mousedown={item:t.item,target:t.target,origin:{x:t.x,y:t.y}},this.dragstart=!0,this.onDragStart(t)}},onTouchMove:function(t){try{var e=t.originalEvent.touches;if(e[0]&&e[1])return void this.onDragEnd(t);t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.onDrag(t)},onMouseDown:function(t){this.mousedown={item:t.item,target:t.target,origin:{x:t.x,y:t.y}},"undefined"==typeof window||this.windowEventBinded||(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(t){var e,n;"node"===(null==(n=null==(e=t.item)?void 0:e.getType)?void 0:n.call(e))?this.mousedown&&(this.dragstart?this.onDrag(Object(rt.__assign)(Object(rt.__assign)({},t),this.mousedown)):(this.dragstart=!0,this.onDragStart(t))):this.onDragEnd()},onDragStart:function(t){var e,n,r,o=this;this.currentShouldEnd=!0,this.shouldBegin(Object(rt.__assign)(Object(rt.__assign)({},t),this.mousedown),this)&&(e=(t=this.mousedown).item,t=t.target,!e||e.destroyed||e.hasLocked()||(e.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(e),t&&t.get("isAnchorPoint"))||(t=this.graph,this.targets=[],this.targetCombo=null,t=t.findAllByState("node",this.selectedState),n=e.get("id"),0!==t.filter(function(t){t=t.get("id");return n===t}).length&&1<t.length?t.forEach(function(t){t.hasLocked()||o.targets.push(t)}):this.targets.push(e),this.graph.get("enabledStack")&&this.enableStack&&(r=[],this.targets.forEach(function(t){var t=t.getModel(),e=t.x;r.push({x:e,y:t.y,id:t.id})}),this.set("beforeDragNodes",r)),this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(t){t.getEdges().forEach(function(t){t.isVisible()&&(o.hidenEdge[t.getID()]=!0,t.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}))},onDrag:function(e){var n=this;this.mousedown&&this.origin&&this.shouldUpdate(e,this)&&(this.get("enableDelegate")?this.updateDelegate(e):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):(this.targets.map(function(t){n.update(t,e);t=t.getModel().comboId;t&&(t,n.graph.findById(t))}),this.onlyChangeComboSize&&this.updateParentCombos()))},onDragEnd:function(t){var e,n,r=this;this.mousedown=!1,this.dragstart=!1,"undefined"!=typeof window&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),this.origin&&(null!=(e=this.cachedCaptureItems)&&e.forEach(function(t){t.getContainer().set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(t){t.getEdges().forEach(function(t){r.hidenEdge[t.getID()]&&t.show(),t.refresh()})}),this.hidenEdge={},(e=this.graph).get("enabledStack")&&this.enableStack&&(n={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}},this.get("beforeDragNodes").forEach(function(t){n.before.nodes.push(t)}),this.targets.forEach(function(t){var t=t.getModel(),e=t.x;n.after.nodes.push({x:e,y:t.y,id:t.id})}),e.pushStack("update",Object(Y.clone)(n))),e.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null)},onDropCombo:function(t){var e,n,r=t.item;this.currentShouldEnd=this.shouldEnd(t,r,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(r)&&(e=this.graph,this.comboActiveState&&e.setItemState(r,this.comboActiveState,!1),this.targetCombo=r,this.onlyChangeComboSize?e.updateCombos():(n=r.getModel(),this.targets.map(function(t){t.getModel().comboId!==n.id&&e.updateComboTree(t,n.id)}),e.updateCombo(r)),e.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo}))},onDropCanvas:function(t){var e=this.graph;this.currentShouldEnd=this.shouldEnd(t,void 0,this),this.updatePositions(t,!this.currentShouldEnd),this.targets&&0!==this.targets.length&&this.currentShouldEnd&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(t){t.getModel().comboId&&e.updateComboTree(t)}))},onDropNode:function(t){var e,n,r,o;this.targets&&0!==this.targets.length&&(e=t.item,n=this.graph,o=(r=e.getModel().comboId)?n.findById(r):void 0,this.currentShouldEnd=this.shouldEnd(t,o,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():r?(o=n.findById(r),this.comboActiveState&&n.setItemState(o,this.comboActiveState,!1),this.targets.map(function(t){var e=t.getModel();r!==e.comboId&&n.updateComboTree(t,r)}),n.updateCombo(o)):this.targets.map(function(t){t.getModel().comboId&&n.updateComboTree(t)}),n.emit("dragnodeend",{items:this.targets,targetItem:e}))},onDragEnter:function(t){var e,t=t.item;this.validationCombo(t)&&(e=this.graph,this.comboActiveState)&&e.setItemState(t,this.comboActiveState,!0)},onDragLeave:function(t){var e,t=t.item;this.validationCombo(t)&&(e=this.graph,this.comboActiveState)&&e.setItemState(t,this.comboActiveState,!1)},updatePositions:function(e,n){var r=this;this.targets&&0!==this.targets.length&&(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):n||this.targets.map(function(t){return r.update(t,e)}):this.targets.map(function(t){return r.update(t,e,n)}))},update:function(t,e,n){var r=this.origin,o=t.get("model"),i=t.get("id"),o=(this.point[i]||(this.point[i]={x:o.x||0,y:o.y||0}),e.x-r.x+this.point[i].x),i=e.y-r.y+this.point[i].y,n=(n&&(o+=r.x-e.x,i+=r.y-e.y),{x:o,y:i});this.get("updateEdge")?this.graph.updateItem(t,n,!1):t.updatePosition(n)},debounceUpdate:Object(Y.debounce)(function(t){var e=t.targets,r=t.graph,o=t.point,i=t.origin,a=t.evt,s=t.updateEdge,n=t.onlyChangeComboSize,t=t.updateParentCombos;e.map(function(t){var e=t.get("model"),n=t.get("id"),e=(o[n]||(o[n]={x:e.x||0,y:e.y||0}),{x:a.x-i.x+o[n].x,y:a.y-i.y+o[n].y});s?r.updateItem(t,e,!1):t.updatePosition(e)}),n&&t(r,e)},50,!0),updateDelegate:function(t){var e,n,r,o,i,a=this.graph;this.delegateRect?(e=t.x-this.origin.x+this.originPoint.minX,n=t.y-this.origin.y+this.originPoint.minY,this.delegateRect.attr({x:e,y:n})):(e=a.get("group"),n=Object(Y.deepMix)({},no.delegateStyle,this.delegateStyle),t=(a=this.calculationGroupPosition(t)).x,this.originPoint={x:t,y:r=a.y,width:o=a.width,height:i=a.height,minX:a.minX,minY:a.minY},this.delegateRect=e.addShape("rect",{attrs:Object(rt.__assign)({width:o,height:i,x:t,y:r},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1))},calculationGroupPosition:function(t){var e=this.targets;0===e.length&&e.push(t.item);for(var n=1/0,r=-1/0,o=1/0,i=-1/0,a=0;a<e.length;a++){var s=e[a].getBBox(),c=s.minX,u=s.minY,l=s.maxX,s=s.maxY;c<n&&(n=c),u<o&&(o=u),r<l&&(r=l),i<s&&(i=s)}return{x:Math.floor(n),y:Math.floor(o),width:Math.ceil(r)-Math.floor(n),height:Math.ceil(i)-Math.floor(o),minX:n,minY:o}},updateParentCombos:function(t,e){var n=t||this.graph,t=e||this.targets,r={};null!=t&&t.forEach(function(t){t=t.getModel().comboId;t&&(r[t]=n.findById(t))}),Object.values(r).forEach(function(t){t&&n.updateCombo(t)})}},xs=null,F={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(t){try{var e=t.originalEvent.touches;if(e[0]&&e[1])return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.setAllItemStates(t)},clearOnTouchStart:function(t){try{var e=t.originalEvent.touches;if(e[0]&&e[1])return;t.preventDefault()}catch(t){console.warn("Touch original event not exist!")}this.clearActiveState(t)},setAllItemStates:function(t){clearTimeout(this.timer),this.throttleSetAllItemStates(t,this)},clearActiveState:function(t){var e=this;this.shouldClearStatusOnSecond&&(xs=null),this.timer=setTimeout(function(){e.throttleClearActiveState(t,e)},50)},throttleSetAllItemStates:Object(Y.throttle)(function(t,e){var n=t.item,r=e.graph;if(r&&!r.destroyed&&(e.item=n,e.shouldUpdate(t.item,{event:t,action:"activate"},e))){var o=e.shouldClearStatusOnSecond,i=n.getModel().id;if(xs===i&&o)e.throttleClearActiveState(t,e),xs=null;else{for(var a=e.activeState,s=e.inactiveState,c=r.getNodes(),u=r.getCombos(),l=r.getEdges(),d=r.get("vedges"),h=c.length,f=u.length,p=l.length,g=d.length,y=e.inactiveItems||{},m=e.activeItems||{},v=0;v<h;v++){var b=c[v],x=b.getID(),w=b.hasState("selected");e.resetSelected&&w&&r.setItemState(b,"selected",!1),m[x]&&(r.setItemState(b,a,!1),delete m[x]),s&&!y[x]&&(r.setItemState(b,s,!0),y[x]=b)}for(v=0;v<f;v++){var _=u[v],E=_.getID(),w=_.hasState("selected");e.resetSelected&&w&&r.setItemState(_,"selected",!1),m[E]&&(r.setItemState(_,a,!1),delete m[E]),s&&!y[E]&&(r.setItemState(_,s,!0),y[E]=_)}for(v=0;v<p;v++)m[A=(C=l[v]).getID()]&&(r.setItemState(C,a,!1),delete m[A]),s&&!y[A]&&(r.setItemState(C,s,!0),y[A]=C);for(v=0;v<g;v++){var S=d[v],O=S.getID();m[O]&&(r.setItemState(S,a,!1),delete m[O]),s&&!y[O]&&(r.setItemState(S,s,!0),y[O]=S)}if(n&&!n.destroyed){s&&(r.setItemState(n,s,!1),delete y[n.getID()]),m[n.getID()]||(r.setItemState(n,a,!0),m[n.getID()]=n);for(var M=n.getEdges(),k=M.length,v=0;v<k;v++){var C,A=(C=M[v]).getID(),I=void 0,T=(I=C.getSource()===n?C.getTarget():C.getSource()).getID();s&&y[T]&&(r.setItemState(I,s,!1),delete y[T]),m[T]||(r.setItemState(I,a,!0),m[T]=I),y[A]&&(r.setItemState(C,s,!1),delete y[A]),m[A]||(r.setItemState(C,a,!0),m[A]=C),C.toFront()}}e.activeItems=m,e.inactiveItems=y,o&&(xs=n.getModel().id),r.emit("afteractivaterelations",{item:t.item,action:"activate"})}}},50,{trailing:!0,leading:!0}),throttleClearActiveState:Object(Y.throttle)(function(t,e){var n,r,o,i=e.get("graph");i&&!i.destroyed&&e.shouldUpdate(t.item,{event:t,action:"deactivate"},e)&&(n=e.activeState,r=e.inactiveState,o=e.inactiveItems||{},Object.values(e.activeItems||{}).filter(function(t){return!t.destroyed}).forEach(function(t){i.clearItemStates(t,n)}),Object.values(o).filter(function(t){return!t.destroyed}).forEach(function(t){i.clearItemStates(t,r)}),e.activeItems={},e.inactiveItems={},i.emit("afteractivaterelations",{item:t.item||e.get("item"),action:"deactivate"}))},50,{trailing:!0,leading:!0})},ws=Math.min,_s=Math.max,Es=Math.abs,Ss=["drag","shift","ctrl","alt","control"],en={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return-1<Ss.indexOf(this.trigger.toLowerCase())||(this.trigger="shift",console.warn("Behavior brush-select  trigger  'drag''shift''ctrl'  'alt'")),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(t){var e=t.item,n=this.brush,r=this.selectOnCombo,o="combo"===(null==e?void 0:e.getType());o&&!r||!o&&e||"drag"!==this.trigger&&!this.keydown||(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),n=n||this.createBrush(),this.originPoint={x:t.canvasX,y:t.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&this.updateBrush(t)},onMouseUp:function(t){this.graph,!this.brush&&!this.dragging||"drag"!==this.trigger&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(t),this.dragging=!1)},clearStates:function(){var e=this.graph,n=this.selectedState,t=e.findAllByState("node",n),r=e.findAllByState("edge",n),o=e.findAllByState("combo",n);t.forEach(function(t){return e.setItemState(t,n,!1)}),r.forEach(function(t){return e.setItemState(t,n,!1)}),o.forEach(function(t){return e.setItemState(t,n,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(t,e,n,r,o){t=t.getBBox();return t.centerX>=e&&t.centerX<=n&&r<=t.centerY&&t.centerY<=o},getSelectedNodes:function(t){var r=this,o=this.graph,e=this.originPoint,i=this.shouldUpdate,n=this.isBBoxCenterInRect,a=this.selectedState,t={x:t.x,y:t.y},e=o.getPointByCanvas(e.x,e.y),s=ws(t.x,e.x),c=_s(t.x,e.x),u=ws(t.y,e.y),l=_s(t.y,e.y),d=[],h=[],f=(o.getNodes().forEach(function(t){var e;t.isVisible()&&n(t,s,c,u,l)&&i(t,"select",r)&&(d.push(t),e=t.getModel(),h.push(e.id),o.setItemState(t,a,!0))}),[]),p=(this.includeEdges&&d.forEach(function(t){t.getOutEdges().forEach(function(t){var e,n;t.isVisible()&&(e=(n=t.getModel()).source,n=n.target,h.includes(e))&&h.includes(n)&&i(t,"select",r)&&(f.push(t),o.setItemState(t,r.selectedState,!0))})}),[]);this.includeCombos&&o.getCombos().forEach(function(t){var e;t.isVisible()&&n(t,s,c,u,l)&&i(t,"select",r)&&(p.push(t),e=t.getModel(),h.push(e.id),o.setItemState(t,a,!0))}),this.selectedEdges=f,this.selectedNodes=d,this.selectedCombos=p,this.onSelect&&this.onSelect(d,f,p),o.emit("nodeselectchange",{selectedItems:{nodes:d,edges:f,combos:p},select:!0})},createBrush:function(){var t=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t},updateBrush:function(t){var e=this.originPoint;this.brush.attr({width:Es(t.canvasX-e.x),height:Es(t.canvasY-e.y),x:ws(t.canvasX,e.x),y:ws(t.canvasY,e.y)})},onKeyDown:function(t){var e,t=t.key;t&&(e=this.trigger.toLowerCase(),t=t.toLowerCase(),this.keydown=t===e||"control"===t&&"ctrl"===e||"ctrl"===t&&"control"===e)},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},Os=["shift","ctrl","alt","control"],U={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){return-1<Os.indexOf(this.trigger.toLowerCase())||(this.trigger="shift",console.warn("Behavior click-select  trigger  'drag''shift''ctrl'  'alt'")),this.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(t){var e,n,r,o,i,a,s,c,u=this,l=t.item;l&&!l.destroyed&&(e=l.getType(),n=u.graph,i=u.keydown,r=u.multiple,o=u.shouldUpdate,(0,u.shouldBegin)(t,u))&&(i&&r||(i=n.findAllByState("node",u.selectedState).concat(n.findAllByState("edge",u.selectedState)).concat(n.findAllByState("combo",u.selectedState)),Object(Y.each)(i,function(t){t!==l&&n.setItemState(t,u.selectedState,!1)})),!function(){switch(e){case"node":return u.selectNode;case"edge":return u.selectEdge;case"combo":return u.selectCombo;default:return}}()?(a=n.findAllByState("node",u.selectedState),s=n.findAllByState("edge",u.selectedState),c=n.findAllByState("combo",u.selectedState),n.emit("nodeselectchange",{selectedItems:{nodes:a,edges:s,combos:c},select:!1})):l.hasState(u.selectedState)?(o(t,u)&&n.setItemState(l,u.selectedState,!1),a=n.findAllByState("node",u.selectedState),s=n.findAllByState("edge",u.selectedState),c=n.findAllByState("combo",u.selectedState),n.emit("nodeselectchange",{target:l,selectedItems:{nodes:a,edges:s,combos:c},select:!1})):(o(t,u)&&n.setItemState(l,u.selectedState,!0),a=n.findAllByState("node",u.selectedState),s=n.findAllByState("edge",u.selectedState),c=n.findAllByState("combo",u.selectedState),n.emit("nodeselectchange",{target:l,selectedItems:{nodes:a,edges:s,combos:c},select:!0})))},onCanvasClick:function(t){var e=this,n=this.graph;(0,this.shouldBegin)(t,this)&&(t=n.findAllByState("node",this.selectedState),Object(Y.each)(t,function(t){n.setItemState(t,e.selectedState,!1)}),t=n.findAllByState("edge",this.selectedState),Object(Y.each)(t,function(t){n.setItemState(t,e.selectedState,!1)}),t=n.findAllByState("combo",this.selectedState),Object(Y.each)(t,function(t){n.setItemState(t,e.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1}))},onKeyDown:function(t){t=t.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()||"control"===t.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},Ms=x.a.transform,W={getDefaultCfg:function(){return this.isFireFox="firefox"===mo(),{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(t){var e=t.originalEvent.touches,n=e[0],e=e[1];t.preventDefault(),!e||this.shouldBegin&&!this.shouldBegin(t,this)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,e&&(this.endPoint={pageX:e.pageX,pageY:e.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1)},onTouchMove:function(t){var e,n,r,o;this.moveable&&(t.preventDefault(),n=(e=t.originalEvent.touches)[0],e=e[1])&&(this.endPoint||(this.endPoint={pageX:e.pageX,pageY:e.pageY}),n=(r=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)})({x:n.pageX,y:n.pageY},{x:e.pageX,y:e.pageY})/r({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),e=this.originScale*n,this.currentScale=e,r=this.get("minZoom")||this.graph.get("minZoom"),e>(this.get("maxZoom")||this.graph.get("maxZoom"))||e<r||(n=this.get("animate"),r=this.get("animateCfg"),o=this.graph.get("canvas").getPointByClient(t.clientX,t.clientY),this.graph.zoomTo(e,{x:o.x,y:o.y},n,r),this.graph.emit("wheelzoom",t)))},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(t){var d=this,h=this.graph,e=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin(t,this))&&this.shouldUpdate(t,this)){t.preventDefault();var n=h.get("canvas").getPointByClient(t.clientX,t.clientY),r=this.get("sensitivity"),o=h.getZoom(),i=o,i=o*(this.isFireFox?0<t.deltaY||t.wheelDelta<0?1-.05*r:1/(1-.05*r):t.wheelDelta<0?1-.05*r:1/(1-.05*r)),r=this.get("minZoom")||h.get("minZoom"),a=this.get("maxZoom")||h.get("maxZoom");if(a<i?i=a:i<r&&(i=r),this.get("enableOptimize")){var f=this.get("optimizeZoom"),a=this.get("optimized"),p=h.getNodes(),g=h.getEdges(),L=p.length,R=g.length;if(!a){for(var s=0;s<L;s++)if(!(m=p[s]).destroyed)for(var c=(P=m.get("group").get("children")).length,u=0;u<c;u++)(S=P[u]).destoryed||S.get("isKeyShape")||(S.set("ori-visibility",S.get("ori-visibility")||S.get("visible")),S.hide());for(var l=0;l<R;l++)for(c=(P=(D=g[l]).get("group").get("children")).length,u=0;u<c;u++)(S=P[u]).set("ori-visibility",S.get("ori-visibility")||S.get("visible")),S.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));r=setTimeout(function(){var t=h.getZoom();if(d.get("optimized")){d.set("optimized",!1);for(var e=0;e<L;e++){var n=p[e],r=(s=n.get("group").get("children")).length;if(t<f){var o=(l=n.getKeyShape()).get("ori-visibility");l.set("ori-visibility",void 0),o&&l.show()}else for(var i=0;i<r;i++)o=(c=s[i]).get("ori-visibility"),c.set("ori-visibility",void 0),!c.get("visible")&&o&&c.show()}for(var a=0;a<R;a++){var s,c,u=g[a],r=(s=u.get("group").get("children")).length;if(t<f){var l,o=(l=u.getKeyShape()).get("ori-visibility");l.set("ori-visibility",void 0),o&&l.show()}else for(i=0;i<r;i++)(c=s[i]).get("visible")||(o=c.get("ori-visibility"),c.set("ori-visibility",void 0),o&&c.show())}}},100);this.set("timeout",r)}if(o<=1){var B=void 0,z=void 0;if(e.fixAll||e.fixLineWidth||e.fixLabel){for(var B=h.findAllByState("node",e.fixState),z=h.findAllByState("edge",e.fixState),F=o/i,G=B.length,y=0;y<G;y++){var m,v,b,x,w=(m=B[y]).getContainer(),U=m.getModel(),W=m.getOriginStyle(),_=m.getStateStyle(e.fixState),E=m.get("shapeFactory").getShape(U.type).getStateStyle(e.fixState,m)[e.fixState];if(e.fixAll)i<=1&&(v=(v=Object(Y.clone)(w.getMatrix()))||[1,0,0,0,1,0,0,0,1],b=(x=m.getModel()).x,v=Ms(v,[["t",-b,-(x=x.y)],["s",F,F],["t",b,x]]),w.setMatrix(v));else for(c=(P=w.get("children")).length,u=0;u<c;u++){var S=P[u],O=void 0,M=void 0;if(e.fixLabel&&"text"===S.get("type")){var O=S.attr("fontSize")||12,k=_[S.get("name")],C=E[S.get("name")],A=k?k.fontSize:12,I=C?C.fontSize:12,T=A||I||12;if(i<=1&&S.attr("fontSize",T/i),M)break}if(e.fixLineWidth&&S.get("isKeyShape")){var M=S.attr("lineWidth")||0,j=_.lineWidth||E.lineWidth||W.lineWidth||0;if(i<=1&&S.attr("lineWidth",j/i),O)break}}}for(var X=z.length,N=0;N<X;N++)for(var D,P=(w=(D=z[N]).getContainer()).get("children"),U=D.getModel(),_=D.getStateStyle(e.fixState),E=D.get("shapeFactory").getShape(U.type).getStateStyle(e.fixState,D)[e.fixState],c=P.length,u=0;u<c&&(S=P[u],M=O=void 0,!e.fixLabel&&!e.fixAll||"text"!==S.get("type")||(O=S.attr("fontSize")||12,k=_[S.get("name")],C=E[S.get("name")],A=k?k.fontSize:12,I=C?C.fontSize:12,T=A||I||12,i<=1&&S.attr("fontSize",T/i),!M))&&(!e.fixLineWidth&&!e.fixAll||!S.get("isKeyShape")||(M=S.attr("lineWidth")||0,j=_.lineWidth||E.lineWidth||1,i<=1&&S.attr("lineWidth",j/i),!O));u++);}}a=this.get("animate"),r=this.get("animateCfg");h.zoomTo(i,{x:n.x,y:n.y},a,r),h.emit("wheelzoom",t)}}},R={onMouseEnter:function(t){var e=t.item;this.currentTarget=e,this.showTooltip(t),this.graph.emit("tooltipchange",{item:t.item,action:"show"})},onMouseMove:function(t){this.shouldUpdate(t,this)?this.currentTarget&&t.item===this.currentTarget&&this.updatePosition(t):this.hideTooltip()},onMouseLeave:function(t){this.shouldEnd(t,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(t){var e,n=this.container;t.item&&!t.item.destroyed&&(n||(n=this.createTooltip(this.graph.get("canvas")),this.container=n),e=this.formatText(t.item.get("model"),t),n.innerHTML=e,Object(N.e)(this.container,{visibility:"visible"}),this.updatePosition(t))},hideTooltip:function(){Object(N.e)(this.container,{visibility:"hidden"})},updatePosition:function(t){var e=this.get("shouldBegin"),n=this.width,r=this.height,o=this.container,i=this.graph;e(t,this)?(e=i.getPointByClient(t.clientX,t.clientY),i=(t=i.getCanvasByPoint(e.x,e.y)).x,e=t.y,t=o.getBoundingClientRect(),n/2<i?i-=t.width:i+=this.offset,r/2<e?e-=t.height:e+=this.offset,n="".concat(i,"px"),r="".concat(e,"px"),Object(N.e)(this.container,{left:n,top:r,visibility:"visible"})):Object(N.e)(o,{visibility:"hidden"})},createTooltip:function(t){var e=t.get("el"),n=(e.style.position="relative",Object(N.b)('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>')));return e.parentNode.appendChild(n),Object(N.e)(n,{position:"absolute",visibility:"visible"}),this.width=t.get("width"),this.height=t.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},G=Object(rt.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},R),un=Object(rt.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},R),ks=["click","dblclick"],Cs=n.calculationItemsBBox,As=["click","dblclick"],Is=n.isPolygonsIntersect,Ts=n.pathToPoints,js=["drag","shift","ctrl","alt","control"],Ns=["click","drag"],Ds=["shift","ctrl","control","alt","meta",void 0],Ps=["shift","ctrl","alt","control"],Ls=["shift","ctrl","alt","control","meta"],on={"drag-canvas":ja,"zoom-canvas":W,"drag-node":i,"activate-relations":F,"brush-select":en,"click-select":U,"lasso-select":{getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return-1<js.indexOf(this.trigger.toLowerCase())||(this.trigger="shift",console.warn("Behavior lasso-select  trigger  'drag''shift''ctrl'  'alt'")),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(t){var e=this.lasso;t.item||"drag"!==this.trigger&&!this.keydown||(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates("dragstart"),e=e||this.createLasso(),this.dragging=!0,this.originPoint={x:t.x,y:t.y},this.points.push(this.originPoint),e.show())},onDragMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&(this.points.push({x:t.x,y:t.y}),this.updateLasso(t))},onDragEnd:function(t){!this.lasso&&!this.dragging||"drag"!==this.trigger&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var t=this.points,n=[];return t.length&&(t.forEach(function(t,e){n.push(0===e?["M",t.x,t.y]:["L",t.x,t.y])}),n.push(["L",t[0].x,t[0].y])),n},clearStates:function(t){void 0===t&&(t="canvas:click");var e=this.graph,n=this.selectedState,r=this.shouldDeselect,o=e.findAllByState("node",n),i=e.findAllByState("edge",n);r&&!r({action:t,nodes:o,edges:i})||(o.forEach(function(t){return e.setItemState(t,n,!1)}),i.forEach(function(t){return e.setItemState(t,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var o=this,i=this.graph,a=this.shouldUpdate,s=this.points.map(function(t){return[i.getCanvasByPoint(t.x,t.y).x,i.getCanvasByPoint(t.x,t.y).y]}),c=this.selectedState,u=[],l=[],r=(i.getNodes().forEach(function(t){var e,n,r;t.isVisible()&&(n=s,r=(e=t).getKeyShape(),r="path"===e.get("type")?Ts(r.attr("path")):[[(e=r.getCanvasBBox()).minX,e.minY],[e.maxX,e.minY],[e.maxX,e.maxY],[e.minX,e.maxY]],Is(n,r))&&a(t,"select",o)&&(u.push(t),e=t.getModel(),l.push(e.id),i.setItemState(t,c,!0))}),[]);this.includeEdges&&u.forEach(function(t){t.getOutEdges().forEach(function(t){var e,n;t.isVisible()&&(e=(n=t.getModel()).source,n=n.target,l.includes(e))&&l.includes(n)&&a(t,"select",o)&&(r.push(t),i.setItemState(t,o.selectedState,!0))})}),this.selectedEdges=r,this.selectedNodes=u,this.onSelect&&this.onSelect(u,r),i.emit("nodeselectchange",{selectedItems:{nodes:u,edges:r},select:!0})},createLasso:function(){var t=this.graph.get("delegateGroup").addShape("path",{attrs:Object(rt.__assign)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(t){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(t){t=t.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},tooltip:G,"edge-tooltip":un,"collapse-expand":{getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var t,e;return ks.includes(this.trigger)?e=this.trigger:(e="click",console.warn("Behavior collapse-expand  trigger  'click'  'dblclick'")),(t={})["node:".concat(e)]="onNodeClick",t.touchstart="onNodeClick",t},onNodeClick:function(t){var e=this;"click"===this.trigger?this.timer?(clearTimeout(this.timer),this.timer=0):this.timer=setTimeout(function(){e.toggle(t),clearTimeout(e.timer),e.timer=0},200):this.toggle(t)},toggle:function(t){var e,n,r=t.item;r&&(e=this.graph.findDataById(r.get("id")))&&(n=e.children)&&0!==n.length&&this.shouldBegin(t,n=!e.collapsed,this)&&(e.collapsed=n,r.getModel().collapsed=n,this.graph.emit("itemcollapsed",{item:t.item,collapsed:n}),this.shouldUpdate(t,n,this))&&(this.onChange(r,n,this),this.graph.layout())}},"drag-combo":{getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;return!(!e||e.destroyed||!this.shouldUpdate(t,this)||"combo"!==e.getType())},onMouseDown:function(t){this.origin={x:t.x,y:t.y}},onDragStart:function(t){var e,n,r=this,o=this.graph,i=t.item;this.currentShouldEnd=!0,this.validationCombo(t)&&(this.targets=[],t=o.findAllByState("combo",this.selectedState),e=i.get("id"),0===t.filter(function(t){t=t.get("id");return e===t}).length?this.targets.push(i):this.targets=t,n=[],this.targets.forEach(function(t){var t=t.getModel(),e=t.x;n.push({x:e,y:t.y,id:t.id})}),this.set("beforeDragItems",n),this.activeState&&this.targets.map(function(t){var t=t.getModel();t.parentId&&(t=o.findById(t.parentId))&&o.setItemState(t,r.activeState,!0)}),this.point={},this.originPoint={},this.currentItemChildCombos=[],function e(t,n){!1!==n(t)&&t&&0!==(t=t.get("combos")).length&&Object(Y.each)(t,function(t){e(t,n)})}(i,function(t){return!t.destroyed&&(t=t.getModel(),r.currentItemChildCombos.push(t.id),!0)}))},onDrag:function(e){var o,n,t,r,i,a,s,c=this;this.origin&&this.validationCombo(e)&&(this.enableDelegate?this.updateDelegate(e):(this.activeState&&(o=this.graph,r=e.item,n=r.getModel(),t=o.getCombos(),r=r.getBBox(),i=r.centerX,a=r.centerY,s=r.width,t.filter(function(t){t=t.getModel();return n.parentId,t.id!==n.id&&!c.currentItemChildCombos.includes(t.id)}).map(function(t){var e=t.getBBox(),n=e.centerX,r=e.width,n=i-n,e=a-e.centerY,n=2*Math.sqrt(n*n+e*e);.8*s<s+r-n?o.setItemState(t,c.activeState,!0):o.setItemState(t,c.activeState,!1)})),Object(Y.each)(this.targets,function(t){c.updateCombo(t,e)}),this.onlyChangeComboSize&&this.updateParentCombos()))},updatePositions:function(e,n){var r=this;(this.enableDelegate||n)&&Object(Y.each)(this.targets,function(t){r.updateCombo(t,e,n)})},onDrop:function(t){var e,n,r=this,o=t.item;this.currentShouldEnd=this.shouldEnd(t,o,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd&&o&&this.targets&&!o.destroyed&&(e=this.graph,n=o.getModel(),this.targets.map(function(t){t.getModel().parentId!==n.id?(r.activeState&&e.setItemState(o,r.activeState,!1),r.onlyChangeComboSize?e.updateCombo(t):e.updateComboTree(t,n.id,!1)):e.updateCombo(o)}),this.end(o,t),this.endComparison=!0)},onNodeDrop:function(t){var e,n,r,o,i=this;this.targets&&0!==this.targets.length&&(e=this.graph,o=(n=t.item.getModel().comboId)?e.findById(n):void 0,this.currentShouldEnd=this.shouldEnd(t,o,this),this.updatePositions(t,!this.currentShouldEnd),this.currentShouldEnd)&&(n?(this.activeState&&(o=e.findById(n),e.setItemState(o,this.activeState,!1)),this.targets.map(function(t){i.onlyChangeComboSize?e.updateCombo(t):n!==t.getID()&&(r=e.findById(n),n!==t.getModel().parentId)&&e.updateComboTree(t,n,!1)})):this.targets.map(function(t){i.onlyChangeComboSize?e.updateCombo(t):t.getModel().comboId&&e.updateComboTree(t,void 0,!1)}),this.endComparison=!0,this.end(r,t))},onDragEnter:function(t){var e;this.origin&&this.validationCombo(t)&&(t=t.item,e=this.graph,this.activeState)&&e.setItemState(t,this.activeState,!0)},onDragLeave:function(t){var e;this.origin&&this.validationCombo(t)&&(t=t.item,e=this.graph,this.activeState)&&e.setItemState(t,this.activeState,!1)},onDragEnd:function(t){var e,n;this.targets&&0!==this.targets.length&&(e=t.item,this.currentShouldEnd&&this.updatePositions(t),e=this.getParentCombo(e.getModel().parentId),n=this.graph,e&&this.activeState&&n.setItemState(e,this.activeState,!1),this.end(void 0,t))},end:function(t,e){var r,o,i,a=this;this.origin&&(r=this.graph,this.delegateShape&&(r.get("delegateGroup").clear(),this.delegateShape=null),t&&this.activeState&&r.setItemState(t,this.activeState,!1),t||(o=r.get("enabledStack")&&this.enableStack,i={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}},this.targets.map(function(t){var e,n;a.onlyChangeComboSize?(r.updateCombo(t),n=(e=t.getModel()).x,i.after.combos.push({x:n,y:e.y,id:e.id}),r.pushStack("update",i)):r.updateComboTree(t,void 0,o)})),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0)},traverse:function(t,e,n){var r,o=this;!1!==e(t,n=void 0===n?{}:n)&&t&&(r=t.get("combos"),Object(Y.each)(r,function(t){o.traverse(t,e,n)}),r=t.get("nodes"),Object(Y.each)(r,function(t){o.traverse(t,e,n)}))},updateCombo:function(t,e,n){this.updateSingleItem(t,e,n);e={};this.traverse(t,function(t,e){return!t.destroyed&&(t.getEdges().forEach(function(t){return e[t.getID()]=t}),!0)},e),Object.values(e).forEach(function(t){return t.refresh()})},updateSingleItem:function(t,e,n){var r=this.origin,o=this.graph,i=t.getModel(),a=t.get("id"),i=(this.point[a]||(this.point[a]={x:i.x,y:i.y}),e.x-r.x+this.point[a].x),a=e.y-r.y+this.point[a].y;n&&(i+=r.x-e.x,a+=r.y-e.y),o.updateItem(t,{x:i,y:a},!1)},getParentCombo:function(t){var e=this.graph;if(t){e=e.findById(t);if(e)return e}},updateDelegate:function(t){var e,n,r=this.graph;this.delegateShape?(e=t.x-this.origin.x+this.originPoint.minX,t=t.y-this.origin.y+this.originPoint.minY,this.delegateShape.attr({x:e,y:t})):(e=r.get("delegateGroup"),t=null,r=(t=1<this.targets.length?Cs(this.targets):this.targets[0].getBBox()).x,n=t.y,this.originPoint={x:r,y:n,width:t.width,height:t.height,minX:t.minX,minY:t.minY},r=Object(rt.__assign)(Object(rt.__assign)({},no.delegateStyle),this.delegateStyle),this.delegateShape=e.addShape("rect",{attrs:Object(rt.__assign)({width:t.width,height:t.height,x:t.x,y:t.y},r),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape)},updateParentCombos:function(){var e=this.graph,t=this.targets,n={};null!=t&&t.forEach(function(t){t=t.getModel().parentId;t&&(n[t]=e.findById(t))}),Object.values(n).forEach(function(t){t&&e.updateCombo(t)})}},"collapse-expand-combo":{getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var t,e;return As.includes(this.trigger)?e=this.trigger:(e="dblclick",console.warn("Behavior collapse-expand-group  trigger  'click'  'dblclick'")),(t={})["combo:".concat(e)]="onComboClick",t},onComboClick:function(t){var t=t.item,e=this.graph,n=this.relayout;t&&!t.destroyed&&"combo"===t.getType()&&(t=t.getModel().id)&&(e.collapseExpandCombo(t),n&&e.get("layout")?e.layout():e.refreshPositions())}},"create-edge":{getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var t;return-1<Ns.indexOf(this.trigger.toLowerCase())||(this.trigger="click",console.warn("Behavior create-edge  trigger  'click''drag'")),this.key&&-1===Ds.indexOf(this.key.toLowerCase())&&(this.trigger=void 0,console.warn("Behavior create-edge  key  'shift''ctrl''alt''control' undefined")),"drag"===this.trigger?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===this.trigger&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(t){var e;this.key&&!this.keydown||(e=t.item)&&e.getID()!==this.source&&"node"===e.getType()||this.cancelCreating({item:this.edge,x:t.x,y:t.y})},onClick:function(t){var e,n,r,o,i,a;this.key&&!this.keydown||(n=t.item,e=this.graph,n=n.getModel(),r=this.getEdgeConfig,this.addingEdge&&this.edge?this.shouldEnd(t,this)&&(o=void 0,o=r&&Object(Y.isFunction)(r)?r({source:this.source,target:n.id},this):this.edgeConfig,i=Object(rt.__assign)({target:n.id},o),this.source===n.id&&(i.type="loop"),e.emit("beforecreateedge",{}),e.updateItem(this.edge,i,!1),e.get("enabledStack")&&(i=Object(rt.__assign)(Object(rt.__assign)({},this.edge.getModel()),{itemType:"edge"}),(a={}).edges=[i],e.pushStack("add",{before:{},after:a})),e.emit("aftercreateedge",{edge:this.edge}),this.edge.getKeyShape().set("capture",!0),this.edge=null,this.addingEdge=!1):this.shouldBegin(t,this)&&(o=void 0,o=r&&Object(Y.isFunction)(r)?r({source:n.id,target:n.id},this):this.edgeConfig,this.edge=e.addItem("edge",Object(rt.__assign)({source:n.id,target:n.id},o),!1),this.source=n.id,this.addingEdge=!0,this.edge.getKeyShape().set("capture",!1)))},updateEndPoint:function(t){this.key&&!this.keydown||(this.edge&&this.edge.destroyed&&this.cancelCreating({item:this.edge}),t={x:t.x,y:t.y},this.graph.findById(this.source)?this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:t},!1):this.addingEdge=!1)},cancelCreating:function(t){var e,n;if(!this.key||this.keydown)return e=this.graph,n=t.item,this.addingEdge&&(this.edge===n||null!=(t=null==(n=t.target)?void 0:n.isCanvas)&&t.call(n))?(this.edge&&!this.edge.destroyed&&e.removeItem(this.edge,!1),this.edge=null,void(this.addingEdge=!1)):void 0},onKeyDown:function(t){t=t.key;t&&(t.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}},"shortcuts-call":{getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return-1<Ps.indexOf(this.trigger.toLowerCase())||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view  trigger  '".concat(this.trigger,"'  'drag''shift''ctrl'  'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){t=t.key;if(t){var e,n=this.trigger.toLowerCase(),t=t.toLowerCase(),n=(this.triggerKeydown||(this.triggerKeydown=t===n||"control"===t&&"ctrl"===n||"ctrl"===t&&"control"===n),this.graph);if(!n[this.functionName])return console.warn("Behavior shortcuts-fit-view  functionName  '".concat(this.functionName,"'  Graph ")),{};(this.triggerKeydown&&!this.combinedKey||(e=this.combinedKey.toLowerCase(),this.triggerKeydown&&(t===e||"control"===t&&"ctrl"===e||"ctrl"===t&&"control"===e)))&&(this.functionParams&&this.functionParams.length?n[this.functionName].apply(n,this.functionParams):n[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},"scroll-canvas":{getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return this.zoomKey&&-1!==Ls.indexOf(this.zoomKey)||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var d=this;if(this.allowDrag(e)){var t,n,r,o,i,a,s,h=this.graph,c=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];if(c.includes("control")&&c.push("ctrl"),c.some(function(t){return e["".concat(t,"Key")]})?(c=h.get("canvas").getPointByClient(e.clientX,e.clientY),t=h.getZoom(),0<e.wheelDelta?t+=.05*t:t-=.05*t,h.zoomTo(t,{x:c.x,y:c.y})):(t=e.deltaX||e.movementX,!(c=e.deltaY||e.movementY)&&-1<navigator.userAgent.indexOf("Firefox")&&(c=125*-e.wheelDelta/3),n=this.graph.get("width"),r=this.graph.get("height"),s=this.graph.get("canvas").getCanvasBBox(),o=this.scalableRange,i=this.scalableRange,o<1&&-1<o&&(o*=n,i*=r),S=s.minX,u=s.maxX,a=s.minY,s=s.maxY,0<t?u<-o?t=0:u-t<-o&&(t=u+o):t<0&&(n+o<S?t=0:n+o<S-t&&(t=S-(n+o))),0<c?s<-i?c=0:s-c<-i&&(c=s+i):c<0&&(r+i<a?c=0:r+i<a-c&&(c=a-(r+i))),"x"===this.get("direction")?c=0:"y"===this.get("direction")&&(t=0),h.translate(-t,-c)),e.preventDefault(),this.get("enableOptimize")){var f=this.get("optimizeZoom"),u=this.get("optimized"),p=h.getNodes(),g=h.getEdges(),y=p.length,m=g.length;if(!u){for(var l=0;l<y;l++){var v=p[l];if(!v.destroyed)for(var b=(_=v.get("group").get("children")).length,x=0;x<b;x++)(E=_[x]).destoryed||E.get("isKeyShape")||(E.set("ori-visibility",E.get("ori-visibility")||E.get("visible")),E.hide())}for(var w=0;w<m;w++)for(var _,E,b=(_=g[w].get("group").get("children")).length,x=0;x<b;x++)(E=_[x]).set("ori-visibility",E.get("ori-visibility")||E.get("visible")),E.hide();this.set("optimized",!0)}clearTimeout(this.get("timeout"));var S=setTimeout(function(){var t=h.getZoom();if(d.get("optimized")){d.set("optimized",!1);for(var e=0;e<y;e++){var n=p[e],r=(s=n.get("group").get("children")).length;if(t<f)(i=(c=n.getKeyShape()).get("ori-visibility"))&&c.show();else for(var o=0;o<r;o++){var i=(u=s[o]).get("ori-visibility");!u.get("visible")&&i&&u.show()}}for(var a=0;a<m;a++){var s,c,u,l=g[a],r=(s=l.get("group").get("children")).length;if(t<f)(i=(c=l.getKeyShape()).get("ori-visibility"))&&c.show();else for(o=0;o<r;o++)(u=s[o]).get("visible")||(i=u.get("ori-visibility"))&&u.show()}}},100);this.set("timeout",S)}}},allowDrag:function(t){var e=t.target,e=e&&e.isCanvas&&e.isCanvas();if(Object(Y.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!e)return!1;if(Object(Y.isObject)(this.allowDragOnItem)){var e=this.allowDragOnItem,n=e.node,r=e.edge,e=e.combo,o=null==(o=null==(t=t.item)?void 0:t.getType)?void 0:o.call(t);if(!n&&"node"===o)return!1;if(!r&&"edge"===o)return!1;if(!e&&"combo"===o)return!1}return!0}}},t=(Object(Y.each)(on,function(t,e){zr(e,t)}),Object(rt.__assign)(Object(rt.__assign)({},e),nn)),o={version:no.version,Graph:z,TreeGraph:cn,Util:n,Layout:m.Layouts,TreeLayout:B,registerLayout:function(t,e){e.isCustomLayout=!0,m.Layouts[t]=Object(m.registerLayout)(t,e)},Global:no,registerBehavior:zr,registerCombo:sn,registerEdge:rn,registerNode:tn,Minimap:r.Minimap,Grid:r.Grid,Bundling:r.Bundling,Menu:r.Menu,ToolBar:r.ToolBar,Tooltip:r.Tooltip,Legend:r.Legend,TimeBar:r.TimeBar,SnapLine:r.SnapLine,Fisheye:r.Fisheye,ImageMinimap:r.ImageMinimap,EdgeFilterLens:r.EdgeFilterLens,Annotation:r.Annotation,Algorithm:t,Arrow:{triangle:function(t,e,n){void 0===t&&(t=10),void 0===e&&(e=15);n=2*(n=void 0===n?0:n);return"M ".concat(n,",0 L ").concat(n+e,",-").concat(t/2," L ").concat(n+e,",").concat(t/2," Z")},vee:function(t,e,n){void 0===t&&(t=15),void 0===e&&(e=20);n=2*(n=void 0===n?0:n);return"M ".concat(n,",0 L ").concat(n+e,",-").concat(t/2,"\n        L ").concat(n+2*e/3,",0 L ").concat(n+e,",").concat(t/2," Z")},circle:function(t,e){return void 0===t&&(t=5),"M ".concat(2*(e=void 0===e?0:e),", 0\n            a ").concat(t,",").concat(t," 0 1,0 ").concat(2*t,",0\n            a ").concat(t,",").concat(t," 0 1,0 ").concat(2*-t,",0")},rect:function(t,e,n){void 0===t&&(t=10),void 0===e&&(e=10);n=2*(n=void 0===n?0:n);return"M ".concat(n,",").concat(-t/2," \n        L ").concat(n+e,",").concat(-t/2," \n        L ").concat(n+e,",").concat(t/2," \n        L ").concat(n,",").concat(t/2," Z")},diamond:function(t,e,n){void 0===t&&(t=15),void 0===e&&(e=15);n=2*(n=void 0===n?0:n);return"M ".concat(n,",0 \n        L ").concat(n+e/2,",").concat(-t/2," \n        L ").concat(n+e,",0 \n        L ").concat(n+e/2,",").concat(t/2," Z")},triangleRect:function(t,e,n,r,o,i){void 0===t&&(t=15),void 0===n&&(n=15),void 0===r&&(r=3);i=2*(i=void 0===i?0:i),o=i+(e=void 0===e?15:e)+(o=void 0===o?5:o);return"M ".concat(i,",0 L ").concat(i+e,",-").concat(t/2," L ").concat(i+e,",").concat(t/2," Z\n            M ").concat(o,", -").concat(n/2,"\n            L ").concat(o+r," -").concat(n/2,"\n            L ").concat(o+r," ").concat(n/2,"\n            L ").concat(o," ").concat(n/2,"\n            Z")}},Marker:H,Shape:an};o.version="4.8.23",P.a=o},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0,o=n(134).Graph,i(a,o),a);function a(){return null!==o&&o.apply(this,arguments)||this}e.Graph=n},,,,,,,function(t,e){var i=[],a=[];function n(t,e){if(e=e||{},void 0===t)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var n,r=!0===e.prepend?"prepend":"append",e=void 0!==e.container?e.container:document.querySelector("head"),o=i.indexOf(e);return-1===o&&(o=i.push(e)-1,a[o]={}),void 0!==a[o]&&void 0!==a[o][r]?n=a[o][r]:(n=a[o][r]=((o=document.createElement("style")).setAttribute("type","text/css"),o),"prepend"==r?e.insertBefore(n,e.childNodes[0]):e.appendChild(n)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),n.styleSheet?n.styleSheet.cssText+=t:n.textContent+=t,n}t.exports=n,t.exports.insertCss=n},,,,,,,,,,,,,,,,function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t,n){var e=t.nodes,t=t.edges,r=[],o={};if(e)return e&&e.forEach(function(t,e){o[t.id]=e,r.push([])}),t&&t.forEach(function(t){var e=t.source,e=o[e],t=o[t.target];!e&&0!==e||!t&&0!==t||(r[e][t]=1,n)||(r[t][e]=1)}),r;throw new Error("invalid nodes data!")}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.FORCE_LAYOUT_TYPE_MAP=e.LAYOUT_MESSAGE=void 0,e.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},e.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},function(t,e){function c(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}t.exports=function(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function o(t){c(r,e,n,o,i,"next",t)}function i(t){c(r,e,n,o,i,"throw",t)}o(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(206);t.exports=function(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(t,e,n){n=n(329)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(L,t,e){e.r(t),e.d(t,"Graph",function(){return g}),e.d(t,"GraphWithEvent",function(){return W}),e.d(t,"algorithm",function(){return n}),e.d(t,"comparision",function(){return o}),e.d(t,"essence",function(){return r}),e.d(t,"generate",function(){return a});var n={},r=(e.r(n),e.d(n,"components",function(){return Y}),e.d(n,"dfs",function(){return O}),e.d(n,"dijkstra",function(){return k}),e.d(n,"dijkstraAll",function(){return q}),e.d(n,"findCycles",function(){return K}),e.d(n,"tarjan",function(){return C}),e.d(n,"isAcyclic",function(){return et}),e.d(n,"postorder",function(){return nt}),e.d(n,"preorder",function(){return rt}),e.d(n,"prim",function(){return X}),e.d(n,"topsort",function(){return tt}),e.d(n,"floydWarshall",function(){return ot}),{}),o=(e.r(r),e.d(r,"isGraph",function(){return ft}),e.d(r,"isSimpleGraph",function(){return P}),e.d(r,"isNullGraph",function(){return pt}),e.d(r,"hasSelfLoop",function(){return gt}),{});e.r(o),e.d(o,"containAllSameEdges",function(){return D}),e.d(o,"containAllSameNodes",function(){return N}),e.d(o,"containSameEdges",function(){return at}),e.d(o,"containSameNodes",function(){return it}),e.d(o,"isGraphComplement",function(){return yt}),e.d(o,"isGraphOptionSame",function(){return ut}),e.d(o,"getSameEdges",function(){return ct}),e.d(o,"getSameNodes",function(){return st}),e.d(o,"isGraphSame",function(){return lt}),e.d(o,"isGraphContainsAnother",function(){return dt});var i,a={};function s(t,e){var n=t.get(e)||0;t.set(e,n+1)}function c(t,e){var n=t.get(e);void 0!==n&&(0<--n?t.set(e,n):t.delete(e))}function u(t,e,n,r){e=String(e),n=String(n);return!t&&n<e&&(t=e,e=n,n=t),e+i.EDGE_KEY_DELIM+n+i.EDGE_KEY_DELIM+(void 0===r?i.DEFAULT_EDGE_NAME:r)}function l(t,e,n,r){var o=String(e),i=String(n),e={v:e,w:n};return!t&&i<o&&(n=e.v,e.v=e.w,e.w=n),void 0!==r&&(e.name=r),e}function d(t,e){return u(t,e.v,e.w,e.name)}function h(t){return"function"==typeof t}e.r(a),e.d(a,"getGraphComplement",function(){return mt}),(t=i=i||{}).DEFAULT_EDGE_NAME="\0",t.GRAPH_NODE="\0";var R=function(e){return e.nodes().map(function(t){t={id:t,value:e.node(t),parent:e.parent(t)};return void 0===t.value&&delete t.value,void 0===t.parent&&delete t.parent,t})},B=function(n){return n.edges().map(function(t){var e=n.edge(t),e={v:t.v,w:t.w,value:e,name:t.name};return void 0===e.name&&delete e.name,void 0===e.value&&delete e.value,e})};function f(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function p(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?f(Object(o),!0).forEach(function(t){var e,n;e=r,n=o[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})}return r}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var F={compound:!(t.EDGE_KEY_DELIM=""),multigraph:!1,directed:!0},g=(z((e=y).prototype,[{key:"setNode",value:function(e,t){var n=this.nodesLabelMap,r=this.defaultNodeLabelFn,o=this.isCompound,i=this.parentMap,a=this.childrenMap,s=this.inEdgesMap,c=this.outEdgesMap,u=this.predecessorsMap,l=this.successorsMap;return n.has(e)?void 0!==t&&n.set(e,t):(n.set(e,t||r(e)),o()&&(null!=i&&i.set(e,this.GRAPH_NODE),null!=a&&a.set(e,new Map),null!=a&&a.has(this.GRAPH_NODE)||null==a||a.set(this.GRAPH_NODE,new Map),null!=a)&&null!=(n=a.get(this.GRAPH_NODE))&&n.set(e,!0),[s,c,u,l].forEach(function(t){return t.set(e,new Map)}),this.nodeCountNum+=1),this}},{key:"removeNode",value:function(t){var e,n,r,o,i,a,s,c,u=this;return this.hasNode(t)&&(e=function(t){u.removeEdge(t.v,t.w,t.name)},n=this.inEdgesMap,r=this.outEdgesMap,o=this.predecessorsMap,i=this.successorsMap,a=this.nodesLabelMap,this.isCompound()&&(this.removeFromParentsChildList(t),null!=(s=this.parentMap)&&s.delete(t),null!=(s=this.children(t))&&s.forEach(function(t){return u.setParent(t)}),null!=(s=this.childrenMap))&&s.delete(t),s=n.get(t),c=r.get(t),Array.from(s.values()).forEach(e),Array.from(c.values()).forEach(e),a.delete(t),n.delete(t),r.delete(t),o.delete(t),i.delete(t),--this.nodeCountNum),this}},{key:"setEdge",value:function(t,e,n,r){var t=l(this.isDirected(),t,e,r),e=d(this.isDirected(),t),o=t.v,i=t.w;if(this.edgesLabelsMap.has(e))this.edgesLabelsMap.set(e,n);else{if(void 0!==r&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(o),this.setNode(i),this.edgesLabelsMap.set(e,n||this.defaultEdgeLabelFn(o,i,r)),Object.freeze(t),this.edgesMap.set(e,t);var n=this.predecessorsMap.get(i),r=this.successorsMap.get(o);s(n,o),s(r,i),null!=(n=this.inEdgesMap.get(i))&&n.set(e,t),null!=(r=this.outEdgesMap.get(o))&&r.set(e,t),this.edgeCountNum+=1}return this}},{key:"removeEdge",value:function(t,e,n){var r,o=u(this.isDirected(),t,e,n);return this.edgesMap.get(o)&&(e=(t=l(this.isDirected(),t,e,n)).v,n=t.w,this.edgesLabelsMap.delete(o),this.edgesMap.delete(o),t=this.predecessorsMap.get(n),r=this.successorsMap.get(e),c(t,e),c(r,n),this.inEdgesMap.get(n).delete(o),this.outEdgesMap.get(e).delete(o),--this.edgeCountNum),this}}]),Object.defineProperty(e,"prototype",{writable:!1}),y);function y(){var a=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this,n=y;if(!(e instanceof n))throw new TypeError("Cannot call a class as a function");this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=i.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return a.directed},this.isMultigraph=function(){return a.multigraph},this.isCompound=function(){return a.compound},this.setGraph=function(t){return a.label=t,a},this.graph=function(){return a.label},this.setDefaultNodeLabel=function(t){return h(t)?a.defaultNodeLabelFn=t:a.defaultNodeLabelFn=function(){return t},a},this.nodeCount=function(){return a.nodeCountNum},this.node=function(t){return a.nodesLabelMap.get(t)},this.nodes=function(){return Array.from(a.nodesLabelMap.keys())},this.sources=function(){return a.nodes().filter(function(t){return!(null!=(t=a.inEdgesMap.get(t))&&t.size)})},this.sinks=function(){return a.nodes().filter(function(t){return!(null!=(t=a.outEdgesMap.get(t))&&t.size)})},this.setNodes=function(t,e){return t.map(function(t){return a.setNode(t,e)}),a},this.hasNode=function(t){return a.nodesLabelMap.has(t)},this.checkCompound=function(){if(!a.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(t){if(a.isCompound()){var e=null==(e=a.parentMap)?void 0:e.get(t);if(e!==a.GRAPH_NODE)return e}},this.removeFromParentsChildList=function(t){var e=a.parentMap.get(t);a.childrenMap.get(e).delete(t)},this.setParent=function(t,e){var n;a.checkCompound();for(var r=void 0===e?a.GRAPH_NODE:e,o=a.parent(r);o;){if(t===o)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");o=a.parent(o)}e&&a.setNode(e),a.setNode(t),a.removeFromParentsChildList(t),null!=(i=a.parentMap)&&i.set(t,r);var i=a.childrenMap.get(r);return i.set(t,!0),null!=(n=a.childrenMap)&&n.set(r,i),a},this.children=function(t){var e,n=void 0===t?a.GRAPH_NODE:t;return a.isCompound()?(e=null==(e=a.childrenMap)?void 0:e.get(n))?Array.from(e.keys()):void 0:n===a.GRAPH_NODE?a.nodes():t&&a.hasNode(t)?[]:void 0},this.predecessors=function(t){t=a.predecessorsMap.get(t);return t?Array.from(t.keys()):void 0},this.successors=function(t){t=a.successorsMap.get(t);return t?Array.from(t.keys()):void 0},this.neighbors=function(t){var e;if(a.hasNode(t))return Array.from(new Set(null==(e=a.predecessors(t))?void 0:e.concat(a.successors(t))))},this.isLeaf=function(t){var e;return a.isDirected()?!(null!=(e=a.successors(t))&&e.length):!(null!=(e=a.neighbors(t))&&e.length)},this.filterNodes=function(e){var t=a.directed,n=a.multigraph,r=a.compound,o=new y({directed:t,multigraph:n,compound:r});return o.setGraph(a.graph()),a.nodes().forEach(function(t){e(t)&&o.setNode(t,a.node(t))}),a.edges().forEach(function(t){o.hasNode(t.v)&&o.hasNode(t.w)&&o.setEdgeObj(t,a.edge(t))}),r&&o.nodes().forEach(function(e){o.setParent(e,function(){for(var t=a.parent(e);void 0!==t&&!o.hasNode(t);)t=a.parent(t);return t}())}),o},this.setDefaultEdgeLabel=function(t){return h(t)?a.defaultEdgeLabelFn=t:a.defaultEdgeLabelFn=function(){return t},a},this.edgeCount=function(){return a.edgeCountNum},this.setEdgeObj=function(t,e){return a.setEdge(t.v,t.w,e,t.name)},this.setPath=function(t,n){return t.reduce(function(t,e){return a.setEdge(t,e,n),e}),a},this.edgeFromArgs=function(t,e,n){return a.edge({v:t,w:e,name:n})},this.edge=function(t){return a.edgesLabelsMap.get(d(a.isDirected(),t))},this.hasEdge=function(t,e,n){return a.edgesLabelsMap.has(d(a.isDirected(),{v:t,w:e,name:n}))},this.removeEdgeObj=function(t){var e=t.v;return a.removeEdge(e,t.w,t.name)},this.edges=function(){return Array.from(a.edgesMap.values())},this.inEdges=function(t,e){t=a.inEdgesMap.get(t);if(t)return Array.from(t.values()).filter(function(t){return!e||t.v===e})},this.outEdges=function(t,e){t=a.outEdgesMap.get(t);if(t)return Array.from(t.values()).filter(function(t){return!e||t.w===e})},this.nodeEdges=function(t,e){var n;return!a.hasNode(t)||null==(n=a.inEdges(t,e))?void 0:n.concat(a.outEdges(t,e))},this.toJSON=function(){return function(t){t={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:R(t),edges:B(t),value:t.graph()};return void 0===t.value&&delete t.value,t}(a)},this.nodeInDegree=function(t){t=a.inEdgesMap.get(t);return t?t.size:0},this.nodeOutDegree=function(t){t=a.outEdgesMap.get(t);return t?t.size:0},this.nodeDegree=function(t){return a.nodeInDegree(t)+a.nodeOutDegree(t)},this.source=function(t){return t.v},this.target=function(t){return t.w};e=p(p({},F),t);this.compound=e.compound,this.directed=e.directed,this.multigraph=e.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(r)return(r=Object.getOwnPropertyDescriptor(r,e)).get?r.get.call(arguments.length<3?t:n):r.value}).apply(this,arguments)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function U(n){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=x(n),e=(t=r?(t=x(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(!t||"object"!==m(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=e))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}g.fromJSON=function(t){var e=new g(t.options);return void 0!==t.value&&e.setGraph(t.value),t.nodes.forEach(function(t){e.setNode(t.id,t.value),t.parent&&e.setParent(t.id,t.parent)}),t.edges.forEach(function(t){e.setEdge(t.v,t.w,t.value,t.name)}),e};var W=function(){var t=a,e=g;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e);var i=U(a);function a(){var t=this,e=a;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=i.call.apply(i,[this].concat(r))).eventPool={},t}return G((t=a).prototype,[{key:"appendEvent",value:function(t,e){this.eventPool[t]||(this.eventPool[t]=[]),this.eventPool[t].push(e)}},{key:"removeEvent",value:function(t,e){this.eventPool[t]&&-1<(e=this.eventPool[t].indexOf(e))&&this.eventPool[t].splice(e,1)}},{key:"emitEvent",value:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.eventPool[t]&&this.eventPool[t].forEach(function(t){t.apply(void 0,n)})}},{key:"setNode",value:function(t,e){return v(x(a.prototype),"setNode",this).call(this,t,e),this.emitEvent("nodeAdd",t,e),this}},{key:"removeNode",value:function(t){return v(x(a.prototype),"removeNode",this).call(this,t),this.emitEvent("nodeRemove",t),this}},{key:"setEdge",value:function(t,e,n,r){return v(x(a.prototype),"setEdge",this).call(this,t,e,n,r),this.emitEvent("edgeAdd",t,e,n,r),this}},{key:"removeEdge",value:function(t,e,n){return v(x(a.prototype),"removeEdge",this).call(this,t,e,n),this.emitEvent("edgeRemove",t,e,n),this}}]),Object.defineProperty(t,"prototype",{writable:!1}),a}();function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t=function t(){var a=this;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.arr=[],this.keyIndice=new Map,this.size=function(){return a.arr.length},this.keys=function(){return a.arr.map(function(t){return t.key})},this.has=function(t){return a.keyIndice.has(t)},this.priority=function(t){t=a.keyIndice.get(t);if(void 0!==t)return a.arr[t].priority},this.swap=function(t,e){var n=a.arr,r=a.keyIndice,o=[n[t],n[e]],i=o[0],o=o[1];n[t]=o,r.set((n[e]=i).key,e),r.set(o.key,t)},this.innerDecrease=function(t){for(var e,n,r=a.arr,o=r[t].priority,i=t;0!==i;){if((null==(n=r[e=i>>1])?void 0:n.priority)<o)break;a.swap(i,e),i=e}},this.heapify=function(t){var e=a.arr,n=t<<1,r=1+n,o=t;n<e.length&&(o=e[n].priority<e[o].priority?n:o,(o=r<e.length?e[r].priority<e[o].priority?r:o:o)!==t)&&(a.swap(t,o),a.heapify(o))},this.min=function(){if(0===a.size())throw new Error("Queue underflow");return a.arr[0].key},this.add=function(t,e){var n,r=a.keyIndice,o=a.arr;return!r.has(t)&&(n=o.length,r.set(t,n),o.push({key:t,priority:e}),a.innerDecrease(n),!0)},this.removeMin=function(){a.swap(0,a.arr.length-1);var t=a.arr.pop();return a.keyIndice.delete(t.key),a.heapify(0),t.key},this.decrease=function(t,e){if(!a.has(t))throw new Error("There's no key named ".concat(t));var n=a.keyIndice.get(t);if(e>a.arr[n].priority)throw new Error("New priority is greater than current priority.Key: ".concat(t," Old: + ").concat(a.arr[n].priority," New: ").concat(e));a.arr[n].priority=e,a.innerDecrease(n)}},_&&w(t.prototype,_),E&&w(t,E),Object.defineProperty(t,"prototype",{writable:!1});var _,E,S=t,X=function(t,r){var e=new g,o=new Map,i=new S;function n(t){var e=t.v===c?t.w:t.v,n=i.priority(e);void 0!==n&&(t=r(t))<n&&(o.set(e,c),i.decrease(e,t))}if(0!==t.nodeCount()){t.nodes().forEach(function(t){i.add(t,Number.POSITIVE_INFINITY),e.setNode(t)}),i.decrease(t.nodes()[0],0);for(var a=!1;0<i.size();){var s,c=i.removeMin();if(o.has(c))e.setEdge(c,o.get(c));else{if(a)throw new Error("Input graph is not connected: "+t.graph());a=!0}null!=(s=t.nodeEdges(c))&&s.forEach(n)}}return e},Y=function(i){var a=new Set,s=[];return i.nodes().forEach(function(t){for(var e=[],n=[t];0<n.length;){var r,o=n.pop();a.has(o)||(a.add(o),e.push(o),null!=(r=i.successors(o))&&r.forEach(function(t){return n.push(t)}),null!=(r=i.predecessors(o))&&r.forEach(function(t){return n.push(t)}))}e.length&&s.push(e)}),s},O=function(e,t,n){function r(t){return e.isDirected()?e.successors(t):e.neighbors(t)}var t=Array.isArray(t)?t:[t],o=[],i=[];return t.forEach(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(n,t,r,o,i,a){o.includes(t)||(o.push(t),r||a.push(t),i(t).forEach(function(t){return e(n,t,r,o,i,a)}),r&&a.push(t))}(e,t,"post"===n,i,r,o)}),o};function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function V(){return 1}function H(t,n,i,e){function r(t){var e=t.v!==a?t.v:t.w,n=c.get(e),r=i(t),o=s.distance+r;if(r<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+r);o<n.distance&&(n.distance=o,n.predecessor=a,u.decrease(e,o))}var a,s,c=new Map,u=new S;for(t.nodes().forEach(function(t){var e=t===n?0:Number.POSITIVE_INFINITY;c.set(t,{distance:e}),u.add(t,e)});0<u.size()&&(a=u.removeMin(),!(s=c.get(a))||s.distance!==Number.POSITIVE_INFINITY);)e(a).forEach(r);var o={};return Array.from(c.entries()).forEach(function(t){e=2;var t=function(t){if(Array.isArray(t))return t}(t=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,e)||function(t,e){var n;if(t)return"string"==typeof t?M(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),e=t[0],t=t[1];return o[String(e)]=t,o}),o}var k=function(e,t,n,r){return H(e,t,n||V,r||function(t){return e.outEdges(t)})},q=function(e,n,r){var o={};return e.nodes().forEach(function(t){return o[String(t)]=k(e,t,n,r),o}),o},C=function(a){var s=0,c=[],u=new Map,l=[];return a.nodes().forEach(function(t){u.has(t)||function n(t){var e,r={onStack:!0,lowlink:s,index:s};if(u.set(t,r),s+=1,c.push(t),null!=(e=a.successors(t))&&e.forEach(function(t){var e;u.has(t)?null!=(e=u.get(t))&&e.onStack&&(e=u.get(t),r.lowlink=Math.min(r.lowlink,e.index)):(n(t),e=u.get(t),r.lowlink=Math.min(r.lowlink,e.lowlink))}),r.lowlink===r.index){for(var o,i=[];o=c.pop(),u.get(o).onStack=!1,i.push(o),t!==o;);l.push(i)}}(t)}),l},K=function(e){return C(e).filter(function(t){return 1<t.length||1===t.length&&e.hasEdge(t[0],t[0])})};function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(t){var n="function"==typeof Map?new Map:void 0;return function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return $(t,arguments,T(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),I(e,t)}(t)}function $(t,e,n){return($=Q()?Reflect.construct:function(t,e,n){var r=[null],e=(r.push.apply(r,e),new(Function.bind.apply(t,r)));return n&&I(e,n.prototype),e}).apply(null,arguments)}function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(){return 1}var j=function(t){var e=i;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t);n=i,r=Q();var n,r,o=function(){var t,e=T(n),e=(t=r?(t=T(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(!t||"object"!==A(t)&&"function"!=typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(t=e))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t};function i(){var t=this,e=i;if(t instanceof e)return o.apply(this,arguments);throw new TypeError("Cannot call a class as a function")}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(Z(Error)),tt=function(r){var o=new Set,i=new Set,a=[];if(r.sinks().forEach(function t(e){if(i.has(e))throw new j;var n;o.has(e)||(i.add(e),o.add(e),null!=(n=r.predecessors(e))&&n.forEach(t),i.delete(e),a.push(e))}),o.size!==r.nodeCount())throw new j;return a},et=function(t){try{tt(t)}catch(t){if(t instanceof j)return!1;throw t}return!0},nt=function(t,e){return O(t,e,"post")},rt=function(t,e){return O(t,e,"pre")},ot=function(e,t,n){return o=t||J,i=n||function(t){return e.outEdges(t)},a={},(s=e.nodes()).forEach(function(n){var r=String(n);a[r]={},a[r][r]={distance:0},s.forEach(function(t){n!==t&&(a[r][String(t)]={distance:Number.POSITIVE_INFINITY})}),i(n).forEach(function(t){var e=t.v===n?t.w:t.v,t=o(t);a[r][String(e)]={distance:t,predecessor:n}})}),s.forEach(function(t){var o=String(t),i=a[o];s.forEach(function(t){var t=String(t),r=a[t];s.forEach(function(t){var t=String(t),e=r[o],n=i[t],t=r[t],e=e.distance+n.distance;e<t.distance&&(t.distance=e,t.predecessor=n.predecessor)})})}),a;var o,i,a,s},it=function(t,e){for(var n=t.nodes(),r=0;r<n.length;r++){var o=n[r];if(e.hasNode(o))return!0}return!1},at=function(t,e){for(var n=t.edges(),r=0;r<n.length;r++){var o=n[r];if(e.hasEdge(o.v,o.w,o.name))return!0}return!1},st=function(t,e){return t.nodes().filter(function(t){return e.hasNode(t)})},ct=function(t,e){return t.edges().filter(function(t){return e.hasEdge(t.v,t.w,t.name)})},ut=function(t,e){return t.isCompound()===e.isCompound()&&t.isDirected()===e.isDirected()&&t.isMultigraph()===e.isMultigraph()},N=function(t,e){return st(t,e).length===t.nodes().length},D=function(t,e){return ct(t,e).length===t.edges().length},lt=function(t,e){return ut(t,e)&&t.nodeCount()===e.nodeCount()&&N(t,e)&&t.edgeCount()===e.edgeCount()&&D(t,e)},dt=function(t,e){return N(t,e)&&D(t,e)};function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ft(t){return t instanceof g}function P(t){if(t.isMultigraph())return!1;for(var e=t.edges(),n=new Map,r=0;r<e.length;r++){var o=e[r];if(o.v===o.w)return!1;o=[o.v,o.w].sort(),i=2;var o=function(t){if(Array.isArray(t))return t}(o)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(o,i)||function(t,e){var n;if(t)return"string"==typeof t?ht(t,e):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(t,e):void 0}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=o[0],o=o[1],i="".concat(i,"-").concat(o);if(n.has(i))return!1;n.set(i,!0)}return!0}function pt(t){return 0===t.nodes().length}function gt(t){for(var e=t.edges(),n=0;n<e.length;n++){var r=e[n];if(r.v===r.w)return!0}return!1}var yt=function(t,e){var n;return!(!P(t)||!P(e)||!N(t,e)||at(t,e)||(n=t.nodeCount(),t.edgeCount()+e.edgeCount()!==n*(n-1)/2))},mt=function(t){if(!P(t))return null;for(var e=t.nodeCount(),n=new g({compound:t.isCompound(),directed:t.isDirected(),multigraph:t.isMultigraph()}),r=t.nodes(),o=0;o<e;o++){var i=r[o];n.setNode(i,t.node(i));for(var a=o+1;a<e;a++){var s=r[a];t.hasEdge(i,s)||n.setEdge(i,s)}}return n}},,,,,,,,,,,,,function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.MESSAGE=e.ALGORITHM=void 0,e.ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"},e.MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var y=n(68),m=n(67),v=n(97);e.default=function(t,n,e,o){var r=t.nodes,i=void 0===r?[]:r,r=t.edges,a=void 0===r?[]:r,s=[],c={},u={},l={};i.forEach(function(t,e){t=t.id;s.push(t),u[t]=1/0,t===n&&(u[t]=0)});for(var d=i.length,h=0;h<d;h++)!function(){var n=function(t,e,n){for(var r,o=1/0,i=0;i<e.length;i++){var a=e[i].id;!n[a]&&t[a]<=o&&(o=t[a],r=e[i])}return r}(u,i,c),r=n.id;if(c[r]=!0,u[r]===1/0)return;(e?(0,v.getOutEdgesNodeId):(0,v.getEdgesByNodeId))(r,a).forEach(function(t){var e=t.target,e=e===r?t.source:e,t=o&&t[o]?t[o]:1;u[e]>u[n.id]+t?(u[e]=u[n.id]+t,l[e]=[n.id]):u[e]===u[n.id]+t&&l[e].push(n.id)})}();l[n]=[n];var f={};for(p in u)u[p]!==1/0&&function t(e,n,r,o){if(e===n)return[e];if(o[n])return o[n];for(var i=[],a=0,s=r[n];a<s.length;a++){var c=t(e,s[a],r,o);if(!c)return;for(var u=0,l=c;u<l.length;u++){var d=l[u];(0,m.isArray)(d)?i.push((0,y.__spreadArray)((0,y.__spreadArray)([],d,!0),[n],!1)):i.push([d,n])}}return o[n]=i,o[n]}(n,p,l,f);var p,g={};for(p in f)g[p]=f[p][0];return{length:u,path:g,allPath:f}}},function(t,n,e){Object.defineProperty(n,"__esModule",{value:!0}),n.toNumber=n.isNaN=n.isNumber=void 0,n.isNumber=function(t){return"number"==typeof t},n.isNaN=function(t){return Number.isNaN(Number(t))},n.toNumber=function(t){var e=parseFloat(t);return(0,n.isNaN)(e)?t:e}},function(t,i,e){Object.defineProperty(i,"__esModule",{value:!0}),i.getCoreNodeAndRelativeLeafNodes=i.getAvgNodePosition=i.getLayoutBBox=i.traverseTreeUp=i.scaleMatrix=i.getAdjMatrix=i.floydWarshall=i.getDegreeMap=i.getDegree=i.getEdgeTerminal=void 0;function r(t,e){if(t&&t.children)for(var n=t.children.length-1;0<=n;n--)if(!r(t.children[n],e))return;return!!e(t)}function f(t,e,n){return"source"===t?(null==(t=null==n?void 0:n.find(function(t){return t.target===e.id}))?void 0:t.source)||{}:(null==(t=null==n?void 0:n.find(function(t){return t.source===e.id}))?void 0:t.target)||{}}function p(t,e,n){var r=[];switch(t){case"source":r=null==n?void 0:n.filter(function(t){return t.source===e.id}).map(function(t){return t.target});break;case"target":r=null==n?void 0:n.filter(function(t){return t.target===e.id}).map(function(t){return t.source});break;case"both":r=null==n?void 0:n.filter(function(t){return t.source===e.id}).map(function(t){return t.target}).concat(null==n?void 0:n.filter(function(t){return t.target===e.id}).map(function(t){return t.source}))}return t=new Set(r),Array.from(t)}var u=e(190),l=e(149),n=e(191);i.getEdgeTerminal=function(t,e){t=t[e];return(0,n.isObject)(t)?t.cell:t},i.getDegree=function(t,n,e){for(var r=[],o=0;o<t;o++)r[o]={in:0,out:0,all:0};return e&&e.forEach(function(t){var e=(0,i.getEdgeTerminal)(t,"source"),t=(0,i.getEdgeTerminal)(t,"target");e&&r[n[e]]&&(r[n[e]].out+=1,r[n[e]].all+=1),t&&r[n[t]]&&(r[n[t]].in+=1,r[n[t]].all+=1)}),r},i.getDegreeMap=function(t,e){var n={};return t.forEach(function(t){n[t.id]={in:0,out:0,all:0}}),e&&e.forEach(function(t){var e=(0,i.getEdgeTerminal)(t,"source"),t=(0,i.getEdgeTerminal)(t,"target");e&&(n[e].out+=1,n[e].all+=1),t&&(n[t].in+=1,n[t].all+=1)}),n},i.floydWarshall=function(t){for(var e=[],n=t.length,r=0;r<n;r+=1){e[r]=[];for(var o=0;o<n;o+=1)r===o?e[r][o]=0:0!==t[r][o]&&t[r][o]?e[r][o]=t[r][o]:e[r][o]=1/0}for(var i=0;i<n;i+=1)for(r=0;r<n;r+=1)for(o=0;o<n;o+=1)e[r][o]>e[r][i]+e[i][o]&&(e[r][o]=e[r][i]+e[i][o]);return e},i.getAdjMatrix=function(t,n){var e=t.nodes,t=t.edges,r=[],o={};if(e)return e&&e.forEach(function(t,e){o[t.id]=e,r.push([])}),null!=t&&t.forEach(function(t){var e=(0,i.getEdgeTerminal)(t,"source"),t=(0,i.getEdgeTerminal)(t,"target"),e=o[e],t=o[t];void 0!==e&&void 0!==t&&(r[e][t]=1,n||(r[t][e]=1))}),r;throw new Error("invalid nodes data!")},i.scaleMatrix=function(t,n){var r=[];return t.forEach(function(t){var e=[];t.forEach(function(t){e.push(t*n)}),r.push(e)}),r},i.traverseTreeUp=function(t,e){"function"==typeof e&&r(t,e)},i.getLayoutBBox=function(t){var i=1/0,a=1/0,s=-1/0,c=-1/0;return t.forEach(function(t){var e=t.size,e=((0,u.isArray)(e)?1===e.length&&(e=[e[0],e[0]]):(0,l.isNumber)(e)?e=[e,e]:void 0!==e&&!isNaN(e)||(e=[30,30]),[e[0]/2,e[1]/2]),n=t.x-e[0],r=t.x+e[0],o=t.y-e[1],t=t.y+e[1];n<i&&(i=n),o<a&&(a=o),s<r&&(s=r),c<t&&(c=t)}),{minX:i,minY:a,maxX:s,maxY:c}},i.getAvgNodePosition=function(t){var e={x:0,y:0},t=(t.forEach(function(t){e.x+=t.x||0,e.y+=t.y||0}),t.length||1);return{x:e.x/t,y:e.y/t}};i.getCoreNodeAndRelativeLeafNodes=function(t,e,n,r,o,i){var a,s,c,u=o[e.id],l=u.in,u=u.out,d=e,h=[];return 0===l?(d=f("source",e,n),h=p("both",d,n).map(function(t){return i[t]})):0===u&&(d=f("target",e,n),h=p("both",d,n).map(function(t){return i[t]})),{coreNode:d,relativeLeafNodes:h=h.filter(function(t){return o[t.id]&&(0===o[t.id].in||0===o[t.id].out)}),sameTypeLeafNodes:(l=t,u=h,s=o,c=e[a=r]||"",u=(null==u?void 0:u.filter(function(t){return t[a]===c}))||[],u="leaf"===l?u.filter(function(t){var e;return 0===(null==(e=s[t.id])?void 0:e.in)||0===(null==(e=s[t.id])?void 0:e.out)}):u)}}},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},X=(Object.defineProperty(e,"__esModule",{value:!0}),e.DagreLayout=void 0,a(n(291))),Y=n(80),a=n(83),V=n(105),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},s.prototype.execute=function(){var l,d,i,o,e,L,s,a,c,u,h,n,f,r,p,g,t,R,y,m,v,b,x,w,_,E,S,B,O,M,z,F,G,U,k=this,C=this,A=C.nodes,I=C.nodeSize,T=C.rankdir,j=C.combos,N=C.begin,W=C.radial,D=C.comboEdges,D=void 0===D?[]:D,P=C.vedges,P=void 0===P?[]:P;if(A)return l=C.edges||[],d=new V.Graph({multigraph:!0,compound:!0}),C.nodeMap={},i={},A.forEach(function(t){(C.nodeMap[t.id]=t).comboId&&(i[t.comboId]=i[t.comboId]||[],i[t.comboId].push(t.id))}),e=[],L={},null!=(t=C.nodeOrder)&&t.length?(C.nodeOrder.forEach(function(t){L[t]=!0,e.push(C.nodeMap[t])}),A.forEach(function(t){L[t.id]||e.push(t)})):e=A,o=I?(0,Y.isArray)(I)?function(){return I}:function(){return[I,I]}:function(t){return t.size?(0,Y.isArray)(t.size)?t.size:(0,Y.isObject)(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40]},s=(0,Y.getFunc)(C.ranksep,50,C.ranksepFunc),a=(0,Y.getFunc)(C.nodesep,50,C.nodesepFunc),c=a,u=s,"LR"!==T&&"RL"!==T||(c=s,u=a),d.setDefaultEdgeLabel(function(){return{}}),d.setGraph(C),h={},this.sortByCombo&&j&&j.forEach(function(t){var e,n,r;(h[t.id]=t).collapsed&&(r=o(t),e=u(t),n=c(t),n=r[0]+2*n,r=r[1]+2*e,d.setNode(t.id,{width:n,height:r})),t.parentId&&(h[t.parentId]||d.setNode(t.parentId,{}),d.setParent(t.id,t.parentId))}),e.filter(function(t){return!1!==t.layout}).forEach(function(t){var e=o(t),n=u(t),r=c(t),r=e[0]+2*r,e=e[1]+2*n,n=t.layer;(0,Y.isNumber)(n)?d.setNode(t.id,{width:r,height:e,layer:n}):d.setNode(t.id,{width:r,height:e}),k.sortByCombo&&t.comboId&&(h[t.comboId]||(h[t.comboId]={id:t.comboId},d.setNode(t.comboId,{})),d.setParent(t.id,t.comboId))}),l.forEach(function(t){var e=(0,Y.getEdgeTerminal)(t,"source"),n=(0,Y.getEdgeTerminal)(t,"target");k.layoutNode(e)&&k.layoutNode(n)&&d.setEdge(e,n,{weight:t.weight||1})}),n=void(null!=(t=null==D?void 0:D.concat(P||[]))&&t.forEach(function(n){var t=n.source,e=n.target,r=(null==(r=h[t])||!r.collapsed)&&i[t]||[t],o=(null==(t=h[e])||!t.collapsed)&&i[e]||[e];r.forEach(function(e){o.forEach(function(t){d.setEdge(e,t,{weight:n.weight||1})})})})),null!=(D=C.preset)&&D.nodes&&(n=new V.Graph({multigraph:!0,compound:!0}),C.preset.nodes.forEach(function(t){null!=n&&n.setNode(t.id,t)})),X.default.layout(d,{prevGraph:n,edgeLabelSpace:C.edgeLabelSpace,keepNodeOrder:Boolean(!!C.nodeOrder),nodeOrder:C.nodeOrder}),f=[0,0],N&&(p=r=1/0,d.nodes().forEach(function(t){t=d.node(t);r>t.x&&(r=t.x),t.y<p&&(p=t.y)}),d.edges().forEach(function(t){null!=(t=d.edge(t).points)&&t.forEach(function(t){r>t.x&&(r=t.x),t.y<p&&(p=t.y)})}),f[0]=N[0]-r,f[1]=N[1]-p),g="LR"===T||"RL"===T,W?(P=this.focusNode,t=this.ranksep,R=this.getRadialPos,D=(0,Y.isString)(P)?P:null==P?void 0:P.id,y=D?null==(N=d.node(D))?void 0:N._rank:0,m=[],v=g?"y":"x",b=g?"height":"width",x=1/0,w=-1/0,d.nodes().forEach(function(t){var e,n,r,o=d.node(t);C.nodeMap[t]&&(e=a(C.nodeMap[t]),0===y?(m[o._rank]||(m[o._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),m[o._rank].nodes.push(t),m[o._rank].totalWidth+=2*e+o[b],m[o._rank].maxSize<Math.max(o.width,o.height)&&(m[o._rank].maxSize=Math.max(o.width,o.height))):0==(n=o._rank-y)?(m[n]||(m[n]={nodes:[],totalWidth:0,maxSize:-1/0}),m[n].nodes.push(t),m[n].totalWidth+=2*e+o[b],m[n].maxSize<Math.max(o.width,o.height)&&(m[n].maxSize=Math.max(o.width,o.height))):(r=Math.abs(n),m[r]||(m[r]={left:[],right:[],totalWidth:0,maxSize:-1/0}),m[r].totalWidth+=2*e+o[b],m[r].maxSize<Math.max(o.width,o.height)&&(m[r].maxSize=Math.max(o.width,o.height)),(n<0?m[r].left:m[r].right).push(t)),n=o[v]-o[b]/2-e,r=o[v]+o[b]/2+e,n<x&&(x=n),w<r)&&(w=r)}),_=t||50,E={},B=[.5*(x+w-(S=(w-x)/.9)),.5*(x+w+S)],O=function(t,o,e,i){void 0===i&&(i=[0,1]);var a=e=void 0===e?-1/0:e;return t.forEach(function(t){var e=d.node(t),n=(E[t]=o,R(e[v],B,S,o,i)),r=n.x,n=n.y;C.nodeMap[t]&&(C.nodeMap[t].x=r+f[0],C.nodeMap[t].y=n+f[1],C.nodeMap[t]._order=e._order,r=s(C.nodeMap[t]),a<r)&&(a=r)}),a},M=!0,m.forEach(function(t){if(null!=(n=null==t?void 0:t.nodes)&&n.length||null!=(n=null==t?void 0:t.left)&&n.length||null!=(n=null==t?void 0:t.right)&&n.length){if(M&&1===t.nodes.length)return n=t.nodes[0],C.nodeMap[n]?(C.nodeMap[n].x=f[0],C.nodeMap[n].y=f[1],E[t.nodes[0]]=0,_=s(C.nodeMap[n]),void(M=!1)):void 0;_=Math.max(_,t.totalWidth/(2*Math.PI));var e,n=-1/0;n=0===y||null!=(e=t.nodes)&&e.length?O(t.nodes,_,n,[0,1]):(e=(null==(e=t.left)?void 0:e.length)/((null==(e=t.left)?void 0:e.length)+(null==(e=t.right)?void 0:e.length)),n=O(t.left,_,n,[0,e]),O(t.right,_,n,[.05+e,1])),_+=n,M=!1,t.maxSize}}),d.edges().forEach(function(n){var r,t,o,i,a,s,c,e=d.edge(n),u=l.findIndex(function(t){var e=(0,Y.getEdgeTerminal)(t,"source"),t=(0,Y.getEdgeTerminal)(t,"target");return e===n.v&&t===n.w});u<=-1||!C.edgeLabelSpace||!C.controlPoints||"loop"===l[u].type||(r="x"===v?"y":"x",t=null==(t=null==e?void 0:e.points)?void 0:t.slice(1,e.points.length-1),o=[],i=null==(e=d.node(n.v))?void 0:e[r],a=i-(null==(e=d.node(n.w))?void 0:e[r]),s=E[n.v],c=s-E[n.w],null!=t&&t.forEach(function(t){var e=(t[r]-i)/a*c+s,t=R(t[v],B,S,e);o.push({x:t.x+f[0],y:t.y+f[1]})}),l[u].controlPoints=o)})):(z=new Set,W="BT"===T||"RL"===T?function(t,e){return e-t}:function(t,e){return t-e},d.nodes().forEach(function(e){var t,n=d.node(e);n&&(t=(t=k.nodeMap[e])||(null==j?void 0:j.find(function(t){return t.id===e})))&&(t.x=n.x+f[0],t.y=n.y+f[1],t._order=n._order,z.add(g?t.x:t.y))}),F=Array.from(z).sort(W),G=g?function(t,e){return t.x!==e.x}:function(t,e){return t.y!==e.y},U=g?function(t,e,n){var r=Math.max(e.y,n.y),o=Math.min(e.y,n.y);return t.filter(function(t){return t.y<=r&&o<=t.y})}:function(t,e,n){var r=Math.max(e.x,n.x),o=Math.min(e.x,n.x);return t.filter(function(t){return t.x<=r&&o<=t.x})},d.edges().forEach(function(n){var t,e,r=d.edge(n),o=l.findIndex(function(t){var e=(0,Y.getEdgeTerminal)(t,"source"),t=(0,Y.getEdgeTerminal)(t,"target");return e===n.v&&t===n.w});o<=-1||!C.edgeLabelSpace||!C.controlPoints||"loop"===l[o].type||(null!=(t=null==r?void 0:r.points)&&t.forEach(function(t){t.x+=f[0],t.y+=f[1]}),t=C.nodeMap[n.v],e=C.nodeMap[n.w],l[o].controlPoints=H(null==r?void 0:r.points,t,e,F,g,G,U))})),C.onLayoutEnd&&C.onLayoutEnd(),{nodes:A,edges:l}},s.prototype.getRadialPos=function(t,e,n,r,o){t=2*((t-e[0])/n*((o=void 0===o?[0,1]:o)[1]-o[0])+o[0])*Math.PI;return{x:Math.cos(t)*r,y:Math.sin(t)*r}},s.prototype.getType=function(){return"dagre"},s);function s(t){var n=o.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.ranksep=50,n.controlPoints=!1,n.sortByCombo=!1,n.edgeLabelSpace=!0,n.radial=!1,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.layoutNode=function(e){var t=n.nodes.find(function(t){return t.id===e});return!t||!1!==t.layout},n.updateCfg(t),n}e.DagreLayout=n;var H=function(t,e,n,r,o,i,a){var s,c,u,l,d,h,f,t=(null==t?void 0:t.slice(1,t.length-1))||[];return e&&n&&(s=e.x,c=e.y,u=n.x,l=n.y,o&&(s=e.y,c=e.x,u=n.y,l=n.x),l!==c)&&s!==u&&(f=r.indexOf(c),(h=r[f+1])&&(d=t[0],h=o?{x:(c+h)/2,y:(null==d?void 0:d.y)||u}:{x:(null==d?void 0:d.x)||u,y:(c+h)/2},d&&!i(d,h)||t.unshift(h)),d=r.indexOf(l),1===(h=Math.abs(d-f))?(t=a(t,e,n)).length||t.push(o?{x:(c+l)/2,y:s}:{x:s,y:(c+l)/2}):1<h&&(f=r[d-1])&&(a=t[t.length-1],e=o?{x:(l+f)/2,y:(null==a?void 0:a.y)||u}:{x:(null==a?void 0:a.x)||s,y:(l+f)/2},a&&!i(a,e)||t.push(e))),t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.slack=e.longestPathWithLayer=e.longestPath=void 0;function r(r){function o(t){var e,n=r.node(t);return n?i[t]?n.rank:(i[t]=!0,null!=(t=r.outEdges(t))&&t.forEach(function(t){t=o(t.w)-r.edge(t).minlen;t&&(void 0===e||t<e)&&(e=t)}),e=e||0,n.rank=e):0}var t,i={};null!=(t=r.sources())&&t.forEach(o)}function o(o){function r(t){var e,n=o.node(t);return n?s[t]?n.rank:(s[t]=!0,null!=(t=o.outEdges(t))&&t.forEach(function(t){t=r(t.w)-o.edge(t).minlen;t&&(void 0===e||t<e)&&(e=t)}),e=e||0,(void 0===a||e<a)&&(a=e),n.rank=e):0}function i(t,e){var n=o.node(t),r=isNaN(n.layer)?e:n.layer;(void 0===n.rank||n.rank<r)&&(n.rank=r),c[t]||(c[t]=!0,null==(e=o.outEdges(t)))||e.map(function(t){i(t.w,r+o.edge(t).minlen)})}var t,a,s={},c=(null!=(t=o.sources())&&t.forEach(function(t){o.node(t)&&r(t)}),void 0===a&&(a=0),{});o.nodes().forEach(function(t){var e=o.node(t);e&&(isNaN(e.layer)?e.rank-=a:i(t,e.layer))})}function i(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}e.longestPath=r,e.longestPathWithLayer=o;e.slack=i,e.default={longestPath:r,longestPathWithLayer:o,slack:i}},function(t,e,n){var r=n(320),o=n(325),n=n(326),n=n&&n.isTypedArray,o=n?o(n):r;t.exports=o},function(t,e,n){var r=n(207),o=n(322),i=n(323),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(a&&a in Object(t)?o:i)(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var r,o,i=n(2),a=n.n(i),n=(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(s,o=a.a.Component),s.getDerivedStateFromError=function(t){return{hasError:!0,error:t}},s.getDerivedStateFromProps=function(t,e){return e.children!==t.children?{children:t.children,hasError:!1,error:void 0}:null},s.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):a.a.createElement(i.Fragment,null,this.props.children)},s);function s(){var n=null!==o&&o.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(t){var e=n.props.errorTemplate;return"function"==typeof e?e(t):e||a.a.createElement("h5",null," ",t.message)},n}e.a=n},,function(t,e,n){n.r(e),n.d(e,"forceCenter",function(){return r}),n.d(e,"forceCollide",function(){return c}),n.d(e,"forceLink",function(){return u}),n.d(e,"forceManyBody",function(){return A}),n.d(e,"forceRadial",function(){return I}),n.d(e,"forceSimulation",function(){return C}),n.d(e,"forceX",function(){return T}),n.d(e,"forceY",function(){return j});var r=function(i,a){var s,c=1;function e(){for(var t,e=s.length,n=0,r=0,o=0;o<e;++o)n+=(t=s[o]).x,r+=t.y;for(n=(n/e-i)*c,r=(r/e-a)*c,o=0;o<e;++o)(t=s[o]).x-=n,t.y-=r}return null==i&&(i=0),null==a&&(a=0),e.initialize=function(t){s=t},e.x=function(t){return arguments.length?(i=+t,e):i},e.y=function(t){return arguments.length?(a=+t,e):a},e.strength=function(t){return arguments.length?(c=+t,e):c},e};function d(t,e,n,r){if(!isNaN(e)&&!isNaN(n)){var o,i,a,s,c,u,l,d,h,f=t._root,p={data:r},g=t._x0,y=t._y0,m=t._x1,v=t._y1;if(f){for(;f.length;)if((u=e>=(i=(g+m)/2))?g=i:m=i,(l=n>=(a=(y+v)/2))?y=a:v=a,!(f=(o=f)[d=l<<1|u]))return o[d]=p,t;if(s=+t._x.call(null,f.data),c=+t._y.call(null,f.data),e===s&&n===c)p.next=f,o?o[d]=p:t._root=p;else{for(;o=o?o[d]=new Array(4):t._root=new Array(4),(u=e>=(i=(g+m)/2))?g=i:m=i,(l=n>=(a=(y+v)/2))?y=a:v=a,(d=l<<1|u)==(h=(a<=c)<<1|i<=s););o[h]=f,o[d]=p}}else t._root=p}return t}function m(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o}function o(t){return t[0]}function i(t){return t[1]}function y(t,e,n){e=new a(null==e?o:e,null==n?i:n,NaN,NaN,NaN,NaN);return null==t?e:e.addAll(t)}function a(t,e,n,r,o,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function s(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function v(t){return function(){return t}}function b(t){return 1e-6*(t()-.5)}e=y.prototype=a.prototype;e.copy=function(){var t,e,n=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(r)if(r.length)for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var o=0;o<4;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(4)}):r.target[o]=s(e));else n._root=s(r);return n},e.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return d(this.cover(e,n),e,n,t)},e.addAll=function(t){for(var e,n,r=t.length,o=new Array(r),i=new Array(r),a=1/0,s=1/0,c=-1/0,u=-1/0,l=0;l<r;++l)isNaN(e=+this._x.call(null,n=t[l]))||isNaN(n=+this._y.call(null,n))||((o[l]=e)<a&&(a=e),c<e&&(c=e),(i[l]=n)<s&&(s=n),u<n&&(u=n));if(!(c<a||u<s))for(this.cover(a,s).cover(c,u),l=0;l<r;++l)d(this,o[l],i[l],t[l]);return this},e.cover=function(t,e){if(!isNaN(t=+t)&&!isNaN(e=+e)){var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var a,s,c=o-n||1,u=this._root;t<n||o<=t||e<r||i<=e;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=u,u=a,c*=2,s){case 0:o=n+c,i=r+c;break;case 1:n=o-c,i=r+c;break;case 2:o=n+c,r=i-c;break;case 3:n=o-c,r=i-c}this._root&&this._root.length&&(this._root=u)}this._x0=n,this._y0=r,this._x1=o,this._y1=i}return this},e.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},e.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},e.find=function(t,e,n){var r,o,i,a,s,c,u,l,d=this._x0,h=this._y0,f=this._x1,p=this._y1,g=[],y=this._root;for(y&&g.push(new m(y,d,h,f,p)),null==n?n=1/0:(d=t-n,h=e-n,f=t+n,p=e+n,n*=n);r=g.pop();)!(y=r.node)||(s=r.x0)>f||(c=r.y0)>p||(a=r.x1)<d||(o=r.y1)<h||(y.length?(g.push(new m(y[3],i=(s+a)/2,u=(c+o)/2,a,o),new m(y[2],s,u,i,o),new m(y[1],i,c,a,u),new m(y[0],s,c,i,u)),(o=(u<=e)<<1|i<=t)&&(r=g[g.length-1],g[g.length-1]=g[g.length-1-o],g[g.length-1-o]=r)):(c=(a=t-+this._x.call(null,y.data))*a+(s=e-+this._y.call(null,y.data))*s)<n&&(d=t-(u=Math.sqrt(n=c)),h=e-u,f=t+u,p=e+u,l=y.data));return l},e.remove=function(t){if(!isNaN(i=+this._x.call(null,t))&&!isNaN(a=+this._y.call(null,t))){var e,n,r,o,i,a,s,c,u,l,d,h=this._root,f=this._x0,p=this._y0,g=this._x1,y=this._y1;if(h){if(h.length)for(;;){if((c=i>=(s=(f+g)/2))?f=s:g=s,(u=a>=(s=(p+y)/2))?p=s:y=s,!(h=(e=h)[l=u<<1|c]))return this;if(!h.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,d=l)}for(;h.data!==t;)if(!(h=(r=h).next))return this;(o=h.next)&&delete h.next,r?o?r.next=o:delete r.next:e?(o?e[l]=o:delete e[l],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h)):this._root=o}}return this},e.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},e.root=function(){return this._root},e.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},e.visit=function(t){var e,n,r,o,i,a,s,c=[],u=this._root;for(u&&c.push(new m(u,this._x0,this._y0,this._x1,this._y1));i=c.pop();)!t(u=i.node,n=i.x0,r=i.y0,o=i.x1,i=i.y1)&&u.length&&(a=(n+o)/2,s=(r+i)/2,(e=u[3])&&c.push(new m(e,a,s,o,i)),(e=u[2])&&c.push(new m(e,n,s,a,i)),(e=u[1])&&c.push(new m(e,a,r,o,s)),e=u[0])&&c.push(new m(e,n,r,a,s));return this},e.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new m(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o,i,a,s,c,u,l,d=e.node;d.length&&(u=((i=e.x0)+(s=e.x1))/2,l=((a=e.y0)+(c=e.y1))/2,(o=d[0])&&n.push(new m(o,i,a,u,l)),(o=d[1])&&n.push(new m(o,u,a,s,l)),(o=d[2])&&n.push(new m(o,i,l,u,c)),o=d[3])&&n.push(new m(o,u,l,s,c)),r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},e.x=function(t){return arguments.length?(this._x=t,this):this._x},e.y=function(t){return arguments.length?(this._y=t,this):this._y};function x(t){return t.x+t.vx}function w(t){return t.y+t.vy}var c=function(r){var i,a,h,f=1,p=1;function e(){for(var t,e,s,c,u,l,d,n=i.length,r=0;r<p;++r)for(e=y(i,x,w).visitAfter(g),t=0;t<n;++t)s=i[t],l=a[s.index],d=l*l,c=s.x+s.vx,u=s.y+s.vy,e.visit(o);function o(t,e,n,r,o){var i=t.data,t=t.r,a=l+t;if(!i)return c+a<e||r<c-a||u+a<n||o<u-a;i.index>s.index&&(n=(e=c-i.x-i.vx)*e+(r=u-i.y-i.vy)*r)<a*a&&(0===e&&(n+=(e=b(h))*e),0===r&&(n+=(r=b(h))*r),n=(a-(n=Math.sqrt(n)))/n*f,s.vx+=(e*=n)*(a=(t*=t)/(d+t)),s.vy+=(r*=n)*a,i.vx-=e*(a=1-a),i.vy-=r*a)}}function g(t){if(t.data)return t.r=a[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function n(){if(i){var t,e,n=i.length;for(a=new Array(n),t=0;t<n;++t)e=i[t],a[e.index]=+r(e,t,i)}}return"function"!=typeof r&&(r=v(null==r?1:+r)),e.initialize=function(t,e){i=t,h=e,n()},e.iterations=function(t){return arguments.length?(p=+t,e):p},e.strength=function(t){return arguments.length?(f=+t,e):f},e.radius=function(t){return arguments.length?(r="function"==typeof t?t:v(+t),n(),e):r},e};function _(t){return t.index}function E(t,e){t=t.get(e);if(t)return t;throw new Error("node not found: "+e)}var u=function(u){var l,d,i,a,h,f,s=_,n=function(t){return 1/Math.min(a[t.source.index],a[t.target.index])},r=v(30),p=1;function e(t){for(var e=0,n=u.length;e<p;++e)for(var r,o,i,a,s,c=0;c<n;++c)r=(o=u[c]).source,i=(o=o.target).x+o.vx-r.x-r.vx||b(f),a=o.y+o.vy-r.y-r.vy||b(f),i*=s=((s=Math.sqrt(i*i+a*a))-d[c])/s*t*l[c],a*=s,o.vx-=i*(s=h[c]),o.vy-=a*s,r.vx+=i*(s=1-s),r.vy+=a*s}function o(){if(i){var t,e=i.length,n=u.length,r=new Map(i.map((t,e)=>[s(t,e,i),t])),o=0;for(a=new Array(e);o<n;++o)(t=u[o]).index=o,"object"!=typeof t.source&&(t.source=E(r,t.source)),"object"!=typeof t.target&&(t.target=E(r,t.target)),a[t.source.index]=(a[t.source.index]||0)+1,a[t.target.index]=(a[t.target.index]||0)+1;for(o=0,h=new Array(n);o<n;++o)t=u[o],h[o]=a[t.source.index]/(a[t.source.index]+a[t.target.index]);l=new Array(n),c(),d=new Array(n),g()}}function c(){if(i)for(var t=0,e=u.length;t<e;++t)l[t]=+n(u[t],t,u)}function g(){if(i)for(var t=0,e=u.length;t<e;++t)d[t]=+r(u[t],t,u)}return null==u&&(u=[]),e.initialize=function(t,e){i=t,f=e,o()},e.links=function(t){return arguments.length?(u=t,o(),e):u},e.id=function(t){return arguments.length?(s=t,e):s},e.iterations=function(t){return arguments.length?(p=+t,e):p},e.strength=function(t){return arguments.length?(n="function"==typeof t?t:v(+t),c(),e):n},e.distance=function(t){return arguments.length?(r="function"==typeof t?t:v(+t),g(),e):r},e},l={value:()=>{}};function h(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new f(r)}function f(t){this._=t}function p(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=l,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}f.prototype=h.prototype={constructor:f,on:function(t,e){var n,r,o=this._,i=(r=o,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=i[a]).type)o[n]=p(o[n],t.name,e);else if(null==e)for(n in o)o[n]=p(o[n],t.name,null);return this}for(;++a<s;)if(n=(n=(t=i[a]).type)&&function(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}(o[n],t.name))return n},copy:function(){var t,e={},n=this._;for(t in n)e[t]=n[t].slice();return new f(e)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var g=h,S=n(359);function O(t){return t.x}function M(t){return t.y}var k=Math.PI*(3-Math.sqrt(5)),C=function(c){var i,a=1,e=.001,s=1-Math.pow(e,1/300),u=0,l=.6,d=new Map,t=Object(S.a)(o),n=g("tick","end"),r=function(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}();function o(){h(),n.call("tick",i),a<e&&(t.stop(),n.call("end",i))}function h(t){var e,n,r=c.length;void 0===t&&(t=1);for(var o=0;o<t;++o)for(a+=(u-a)*s,d.forEach(function(t){t(a)}),e=0;e<r;++e)null==(n=c[e]).fx?n.x+=n.vx*=l:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=l:(n.y=n.fy,n.vy=0);return i}function f(){for(var t,e,n,r=0,o=c.length;r<o;++r)(t=c[r]).index=r,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),(isNaN(t.x)||isNaN(t.y))&&(e=10*Math.sqrt(.5+r),n=r*k,t.x=e*Math.cos(n),t.y=e*Math.sin(n)),(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}function p(t){return t.initialize&&t.initialize(c,r),t}return null==c&&(c=[]),f(),i={tick:h,restart:function(){return t.restart(o),i},stop:function(){return t.stop(),i},nodes:function(t){return arguments.length?(c=t,f(),d.forEach(p),i):c},alpha:function(t){return arguments.length?(a=+t,i):a},alphaMin:function(t){return arguments.length?(e=+t,i):e},alphaDecay:function(t){return arguments.length?(s=+t,i):+s},alphaTarget:function(t){return arguments.length?(u=+t,i):u},velocityDecay:function(t){return arguments.length?(l=1-t,i):1-l},randomSource:function(t){return arguments.length?(r=t,d.forEach(p),i):r},force:function(t,e){return 1<arguments.length?(null==e?d.delete(t):d.set(t,p(e)),i):d.get(t)},find:function(t,e,n){var r,o,i,a=0,s=c.length;for(null==n?n=1/0:n*=n,a=0;a<s;++a)(r=(r=t-(o=c[a]).x)*r+(r=e-o.y)*r)<n&&(i=o,n=r);return i},on:function(t,e){return 1<arguments.length?(n.on(t,e),i):n.on(t)}}},A=function(){var o,c,u,l,d,r=v(-30),h=1,f=1/0,p=.81;function e(t){var e,n=o.length,r=y(o,O,M).visitAfter(i);for(l=t,e=0;e<n;++e)c=o[e],r.visit(a)}function n(){if(o){var t,e,n=o.length;for(d=new Array(n),t=0;t<n;++t)e=o[t],d[e.index]=+r(e,t,o)}}function i(t){var e,n,r,o,i,a=0,s=0;if(t.length){for(r=o=i=0;i<4;++i)(e=t[i])&&(n=Math.abs(e.value))&&(a+=e.value,s+=n,r+=n*e.x,o+=n*e.y);t.x=r/s,t.y=o/s}else for((e=t).x=e.data.x,e.y=e.data.y;a+=d[e.data.index],e=e.next;);t.value=a}function a(t,e,n,r){if(!t.value)return!0;var o=t.x-c.x,i=t.y-c.y,a=r-e,s=o*o+i*i;if(a*a/p<s)return s<f&&(0===o&&(s+=(o=b(u))*o),0===i&&(s+=(i=b(u))*i),s<h&&(s=Math.sqrt(h*s)),c.vx+=o*t.value*l/s,c.vy+=i*t.value*l/s),!0;if(!(t.length||f<=s))for((t.data!==c||t.next)&&(0===o&&(s+=(o=b(u))*o),0===i&&(s+=(i=b(u))*i),s<h)&&(s=Math.sqrt(h*s));t.data!==c&&(a=d[t.data.index]*l/s,c.vx+=o*a,c.vy+=i*a),t=t.next;);}return e.initialize=function(t,e){o=t,u=e,n()},e.strength=function(t){return arguments.length?(r="function"==typeof t?t:v(+t),n(),e):r},e.distanceMin=function(t){return arguments.length?(h=t*t,e):Math.sqrt(h)},e.distanceMax=function(t){return arguments.length?(f=t*t,e):Math.sqrt(f)},e.theta=function(t){return arguments.length?(p=t*t,e):Math.sqrt(p)},e},I=function(n,s,c){var u,l,d,r=v(.1);function e(t){for(var e=0,n=u.length;e<n;++e){var r=u[e],o=r.x-s||1e-6,i=r.y-c||1e-6,a=Math.sqrt(o*o+i*i),a=(d[e]-a)*l[e]*t/a;r.vx+=o*a,r.vy+=i*a}}function o(){if(u){var t,e=u.length;for(l=new Array(e),d=new Array(e),t=0;t<e;++t)d[t]=+n(u[t],t,u),l[t]=isNaN(d[t])?0:+r(u[t],t,u)}}return"function"!=typeof n&&(n=v(+n)),null==s&&(s=0),null==c&&(c=0),e.initialize=function(t){u=t,o()},e.strength=function(t){return arguments.length?(r="function"==typeof t?t:v(+t),o(),e):r},e.radius=function(t){return arguments.length?(n="function"==typeof t?t:v(+t),o(),e):n},e.x=function(t){return arguments.length?(s=+t,e):s},e.y=function(t){return arguments.length?(c=+t,e):c},e},T=function(n){var o,i,a,r=v(.1);function e(t){for(var e,n=0,r=o.length;n<r;++n)(e=o[n]).vx+=(a[n]-e.x)*i[n]*t}function s(){if(o){var t,e=o.length;for(i=new Array(e),a=new Array(e),t=0;t<e;++t)i[t]=isNaN(a[t]=+n(o[t],t,o))?0:+r(o[t],t,o)}}return"function"!=typeof n&&(n=v(null==n?0:+n)),e.initialize=function(t){o=t,s()},e.strength=function(t){return arguments.length?(r="function"==typeof t?t:v(+t),s(),e):r},e.x=function(t){return arguments.length?(n="function"==typeof t?t:v(+t),s(),e):n},e},j=function(n){var o,i,a,r=v(.1);function e(t){for(var e,n=0,r=o.length;n<r;++n)(e=o[n]).vy+=(a[n]-e.y)*i[n]*t}function s(){if(o){var t,e=o.length;for(i=new Array(e),a=new Array(e),t=0;t<e;++t)i[t]=isNaN(a[t]=+n(o[t],t,o))?0:+r(o[t],t,o)}}return"function"!=typeof n&&(n=v(null==n?0:+n)),e.initialize=function(t){o=t,s()},e.strength=function(t){return arguments.length?(r="function"==typeof t?t:v(+t),s(),e):r},e.y=function(t){return arguments.length?(n="function"==typeof t?t:v(+t),s(),e):n},e}},function(f,t,e){e.d(t,"a",function(){return m});var r,F=e(104),G=e(67),_=e(2),E=e.n(_),U=e(352),W=e(351),S=e(84),x=window.console,h=function(){return(h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},c=function(t,n,r,o){void 0===n&&(n=0),void 0===r&&(r=""),void 0===o&&(o="");var e,i=t.id,a=t.children,a=void 0===a?[]:a;return s(s(((e={})["".concat(S.l,"_level")]=n,e["".concat(S.l,"_parentId")]=r,e["".concat(S.l,"_currentPath")]=o,e),t),{children:null==a?void 0:a.map(function(t,e){return c(t,n+1,r?"".concat(r,"-").concat(i):i,"".concat(o,"-").concat(e))})})},o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},u=function(t,e){var n=t.children,n=void 0===n?[]:n,r=t.g_level,r=void 0===r?0:r;return e<=0?t:o(o({},t),{children:r+1<e?null==n?void 0:n.map(function(t){return u(t,e)}):[]})},n=new Map,X=function(t){(n.get(t)||[]).forEach(function(t){"function"==typeof t&&t.apply(null,arguments)}),n.set(t,[])},Y=function(e,d){var n,r,t,o,i,a=Object(W.a)(e),s=a;return[a=d?(null==(i=e)?void 0:i.nodes)instanceof Array&&(null==i?void 0:i.edges)instanceof Array?(i=s=function(n){void 0===d&&(n=100);var o=[],t=e.nodes,r=void 0===t?[]:t,t=e.edges,i=void 0===t?[]:t,a=[],s=function(r){return i.filter(function(e){var t,n=o.findIndex(function(t){return t.id===e.target});return-1!==n&&e.source===r&&(t=c(e.source),x.warn("The data [".concat(e.source,",").concat(e.target,",").concat(null==(t=t[0])?void 0:t.source,"] is in a loop, please check the rationality."))),-1===n&&e.source===r})},c=function(e){return i.filter(function(t){return t.target===e})},u=(i.forEach(function(t){var e=t.source;i.find(function(t){return t.target===e})||a.push(e)}),0),l=function(t){var e;return(e={})["".concat(S.l,"_level")]=u,e["".concat(S.l,"_parent")]=c(t.id).map(function(t){return t.source}),e["".concat(S.l,"_children")]=u<n-1?s(t.id).map(function(t){return t.target}):[],e};if(!a.length)return{edges:i,nodes:r.map(function(t){return h(h({},t),l(t))})};for(;a.length;)!function(){var t=r.filter(function(t){return a.includes(t.id)}),e=(o=o.concat(t.map(function(t){return h(h({},t),l(t))})),[]);a.forEach(function(t){e.push.apply(e,s(t).map(function(t){return t.target}))}),a=e,u+=1}();return{nodes:o,edges:i}}(d),n=d,t=i.nodes,o=i.edges,n<=0?i:{nodes:r=t.filter(function(t){return!t.hasOwnProperty("".concat(S.l,"_level"))||t["".concat(S.l,"_level")]<n}),edges:o.filter(function(t){var e=t.source,n=t.target;return 2<=r.filter(function(t){return[e,n].includes(t.id)}).length})}):(s=c(e),u(s,d)):a,s]},V=function(t,e){return"function"==typeof t&&e?t(e)||{}:Array.isArray(t)?t:S.b},H=e(377),q=function(t,e,n){return"function"==typeof t?t(e,n):t},tt=e(350),K=function(t){var e=t.nodes,t=t.edges;if(1===e.length)return e[0].id;var n=[];t.forEach(function(t){n.push(t.source)});e=n;var r,o=Object(G.reduce)(e,function(t,e,n){return t.hasOwnProperty(n=e)?++t[n]:t[n]=1,t},{}),i=0,a="";for(r in o)o.hasOwnProperty(r)&&o[r]>i&&(i=o[r],a=r);return a},Z=function(t,e,n){var r,o;return n&&n.current&&(r=n.current.offsetWidth,o=n.current.offsetHeight||500),!t&&!r||!e&&!o?(x.warn(" Graph  width  height 500 * 500"),[500,500]):[t||r||500,e||o||500]},$=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},et=function(l,t){function e(e,c,u,t){t="node"===t?l.findAll("edge",function(t){return t.getSource()===e||t.getTarget()===e}):l.findAll("node",function(t){return e.getSource().get("id")===t.get("id")||e.getTarget().get("id")===t.get("id")}),[e].concat(t).forEach(function(t){var e,n,r,o,i,a,s;t=t,e=c,(n=u)?t.toFront():t.toBack(),a=null!=(a=t.getModel().style)?a:{},s=a.endArrow,a=a.startArrow,(s||a)&&(d[t.getID()]||(r=(null!=s?s:{}).fill,i=(null!=a?a:{}).fill,o=null==(o=null==(o=t.getModel().style)?void 0:o[e])?void 0:o.stroke,d[t.getID()]=[[null!=o?o:r,r],[null!=o?o:i,i]]),r=d[t.getID()],o=s&&r[0][n?0:1],i=a&&r[1][n?0:1],l.updateItem(t,{style:{endArrow:!!o&&{fill:o},startArrow:!!i&&{fill:i}}})),l.setItemState(t,e,n)})}var t=null!=t?t:{},n=t.nodeCfg,t=t.edgeCfg,n=(void 0===n?{}:n).nodeStateStyles,t=(void 0===t?{}:t).edgeStateStyles,d={};n&&(l.on("node:mouseenter",function(t){t=t.item;e(t,"hover",!0,"node")}),l.on("node:mouseleave",function(t){t=t.item;e(t,"hover",!1,"node")})),t&&(l.on("edge:mouseenter",function(t){t=t.item;e(t,"hover",!0,"edge")}),l.on("edge:mouseleave",function(t){t=t.item;e(t,"hover",!1,"edge")}))},i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},O=function(t,e){var n;void 0===t&&(t={}),e&&!e.destroyed&&((n=e.get("plugins").filter(function(t){return"minimap"===t.get("name")})[0])&&e.removePlugin(n),t.show)&&(n=Object.assign(S.f,t),t=new F.a.Minimap(i(i({},n),{name:"minimap"})),e.addPlugin(t))},M=e(353),k=function(){return(k=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},nt=function(t,e){var n={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n},p=e(81),t=e(112),t=e.n(t),g=(a.prototype.getDefaultCfgs=function(){return{}},a.prototype.initPlugin=function(n){var r=this,t=(r.set("graph",n),r.getEvents()),o={};Object(G.each)(t,function(t,e){t=Object(G.wrapBehavior)(r,t);o[e]=t,n.on(e,t)}),this._events=o,this.init()},a.prototype.getEvents=function(){return{}},a.prototype.get=function(t){var e;return null==(e=this._cfgs)?void 0:e[t]},a.prototype.set=function(t,e){this._cfgs[t]=e},a.prototype.destroy=function(){},a.prototype.destroyPlugin=function(){this.destroy();var n=this.get("graph"),t=this._events;Object(G.each)(t,function(t,e){n.off(e,t)}),this._events=null,this._cfgs=null,this.destroyed=!0},a),y=e(354);r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)};function a(t){this._cfgs=Object(G.deepMix)(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}"undefined"!=typeof document&&t()("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(d,l=g),d.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,customContent:function(t){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>1</li>\n            <li>2</li>\n          </ul>\n        "},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},d.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},d.prototype.init=function(){var t=this.get("className"),t=Object(p.b)("<div class=".concat(t||"g6-component-contextmenu","></div>"));Object(p.e)(t,{top:"0px",position:"absolute",visibility:"hidden"});var e=(e=this.get("container"))||this.get("graph").get("container");(e=Object(G.isString)(e)?document.getElementById(e):e).appendChild(t),this.set("menu",t)},d.prototype.onMenuShow=function(e){var n,r,t,o,i,a,s,c,u,l,d,h=this,f=(e.preventDefault(),this.get("itemTypes"));if(e.item){if(e.item.getType&&-1===f.indexOf(e.item.getType()))return void h.onMenuHide()}else if(-1===f.indexOf("canvas"))return void h.onMenuHide();this.get("shouldBegin")(e)&&(f=this.get("menu"),u=this.get("customContent"),n=this.get("graph"),u=u(e,n),Object(y.a)(u,f),this.removeMenuEventListener(),(r=this.get("handleMenuClick"))&&(this.set("handleMenuClickWrapper",u=function(t){r(t.target,e.item,n)}),f.addEventListener("click",u)),u=n.get("width"),t=n.get("height"),o=f.getBoundingClientRect(),d=this.get("offsetX")||0,i=this.get("offsetY")||0,a=n.getContainer().offsetTop,s=n.getContainer().offsetLeft,(c=e.canvasX+s+d)+o.width>u&&(c=e.canvasX-o.width-d+s),(u=e.canvasY+a+i)+o.height>t&&(u=e.canvasY-o.height-i+a),Object(p.e)(f,{top:"".concat(u,"px"),left:"".concat(c,"px"),visibility:"visible"}),l="click"===this.get("trigger"),d=function(t){l?l=!1:h.onMenuHide()},document.body.addEventListener("click",d),this.set("handler",d))},d.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");t&&(this.get("menu").removeEventListener("click",t),this.set("handleMenuClickWrapper",null)),e&&document.body.removeEventListener("click",e)},d.prototype.onMenuHide=function(){var t=this.get("menu");t&&Object(p.e)(t,{visibility:"hidden"}),this.removeMenuEventListener()},d.prototype.destroy=function(){var t,e=this.get("menu");this.removeMenuEventListener(),e&&(t=(t=this.get("container"))||this.get("graph").get("container"),(t=Object(G.isString)(t)?document.getElementById(t):t).removeChild(e))};var l,rt=d,C=function(){return(C=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ot=function(t){function e(){return c?{x:c.clientWidth/2,y:c.clientHeight/2}:{x:0,y:0}}function n(){var t;null!=(t=l.current)&&t.zoom(Math.min(f.current+p,5),e())}function r(){var t;null!=(t=l.current)&&t.zoom(Math.max(f.current-p,.25),e())}var o,i,a,s=t.toolbarCfg,c=t.container,u=t.graph,l=Object(_.useRef)(),d=Object(_.useRef)(),h=Object(_.useRef)(),f=Object(_.useRef)(1),t=s.zoomFactor,p=void 0===t?.25:t,t=s.renderIcon,s=s.customContent,g=(o=c,g=Object(_.useState)(!1),i=g[0],a=g[1],Object(_.useEffect)(function(){return document.addEventListener("fullscreenchange",v,!1),function(){document.removeEventListener("fullscreenchange",v)}},[]),[i,function(){o?i?document.exitFullscreen&&document.exitFullscreen().then(function(){a(!1)}).catch(function(t){x.error("exitFullscreen error: ",t)}):o&&o.requestFullscreen&&o.requestFullscreen().then(function(){a(!0)}).catch(function(t){x.error("requestFullscreen error: ",t)}):x.error("need dom")}]),y=g[0],m=g[1];function v(){document.fullscreenElement||a(!1)}Object(_.useEffect)(function(){u&&(l.current=u,d.current=null==c?void 0:c.clientWidth,h.current=null==c?void 0:c.clientHeight)},[u]);function b(){var t,e;m(),t=(t=!document.fullscreenElement)?[window.outerWidth,window.outerHeight]:[d.current,h.current],null!=(e=l.current)&&e.changeSize(t[0],t[1])}g=s||t;return g?g({zoomIn:n,zoomOut:r,toggleFullscreen:b,fullscreen:y,graph:u}):E.a.createElement(_.Fragment,null,y?E.a.createElement("span",{style:{cursor:"pointer"},onClick:b},""):E.a.createElement("span",{style:{cursor:"pointer"},onClick:b},""),E.a.createElement("span",{style:{cursor:"pointer"},onClick:n},"+"),E.a.createElement("span",{style:{cursor:"pointer"},onClick:r},"-"))},Q=function(){return(Q=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},it=function(t,e){var n={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n},at=e(218),J=function(){return(J=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function d(t){return l.call(this,t)||this}function m(A,I,T){void 0===T&&(T={});var j=Object(_.useRef)(null),N=Object(_.useRef)(),d=Object(_.useRef)(),D=Object(_.useRef)(),P=I.data,L=I.width,R=I.height,h=I.layout,f=I.minimapCfg,n=I.behaviors,p=I.fitCenter,g=I.nodeCfg,y=I.edgeCfg,B=I.markerCfg,z=I.level,m=I.toolbarCfg,v=I.tooltipCfg,b=I.menuCfg,x=I.customLayout,w=N.current;return Object(_.useEffect)(function(){var t,e,n;!w||w.destroyed||Object(G.isEqual)(P,D.current)||("RadialGraph"!==T.name||null!=(e=D.current.nodes)&&e.length?w&&(n=e=P,z&&(e=(t=Y(P,z))[0],n=t[1]),w.changeData(e),null!=(t=w.get("eventData"))&&t.setData(n),w.getEdges().forEach(function(t){var e=t.getModel(),n=e.source,e=e.target,n=null==(n=null==w?void 0:w.findById(n))?void 0:n.get("visible"),e=null==(e=null==w?void 0:w.findById(e))?void 0:e.get("visible");!1!==n&&!1!==e||t.changeVisibility(!1)}),p&&w.fitCenter(),X(w.get("id"))):(e=K(P),w.set("centerNode",e),w.updateLayout(J(J({},h),{focusNode:e}))),D.current=Object(W.a)(P))},[P]),Object(_.useEffect)(function(){var t,a,s,c,u,l,e,n,r,o,i;!w||w.destroyed||Object(G.isEqual)(I,d.current)||(x||Object(G.isEqual)(h,null==(e=d.current)?void 0:e.layout)||(null!=w&&w.updateLayout(h),p&&null!=w&&w.fitCenter()),Object(G.isEqual)(f,null==(e=d.current)?void 0:e.minimapCfg)||O(f,w),Object(G.isEqual)(g,null==(e=d.current)?void 0:e.nodeCfg)||w&&(n=(e=null!=g?g:{}).type,r=e.anchorPoints,o=e.style,i=e.title,w.getNodes().forEach(function(t){var e=V(r,t.getModel());w.updateItem(t,{nodeCfg:g,markerCfg:B,type:n,style:o,anchorPoints:e,labelCfg:i})}),X(w.get("id"))),Object(G.isEqual)(y,null==(t=d.current)?void 0:t.edgeCfg)||w&&(a=(t=null!=y?y:{}).type,s=t.style,c=t.startArrow,u=t.endArrow,l=t.label,w.getEdges().forEach(function(t){var e,n,r,o,i;["fund-line","labels-line"].includes(a)?w.updateItem(t,{edgeCfg:y}):(e=t.getModel(),n=Object(H.a)(c,e),r=Object(H.a)(u,e),i=(o=null!=l?l:{}).style,w.updateItem(t,{type:a,label:q(o.content,e,w),labelCfg:{style:q(i,e,w)},style:J({stroke:"#ccc",startArrow:n,endArrow:r},"function"==typeof s?s(e,w):s)}))})),Object(G.isEqual)(B,null==(t=d.current)?void 0:t.markerCfg)||w&&w.getNodes().forEach(function(t){var e=("function"==typeof B?B(t.getModel(),t.get("group")):B).position,e=void 0===e?"right":e,n=t.getBBox(),r=n.width,n=n.height,t=t.get("group").get("children").find(function(t){return"collapse-icon"===t.get("name")});t&&null!=t&&t.attr(J({},Object(tt.a)(e,[r,n])))}),d.current=I)},[I]),Object(_.useEffect)(function(){var t;w&&!w.destroyed&&(t=Z(L,R,j),w.changeSize(t[0],t[1]))},[j,L,R]),Object(_.useEffect)(function(){var t,e;w&&!w.destroyed&&(t=w.get("modes").default,e=[],t.forEach(function(t){Object(G.isObject)(t)?e.push(t.type):Object(G.isString)(t)&&e.push(t)}),w.removeBehaviors(e,"default"),w.addBehaviors(n,"default"))},[n]),Object(_.useEffect)(function(){var a,t,r,o,e,n,i,s,c,u,l,d,h,f,p,g,y,m,v,b,x,w,_,E,S,O,M,k,C;j.current&&A&&!N.current&&(t=T.name,a=void 0===t?"":t,t=T.bindEvents,O=Z(L,R,j),M=I.nodeCfg,o=void 0===(e=I.behaviors)?[]:e,e=I.layout,n=I.autoFit,i=I.fitCenter,s=I.onReady,S=I.customLayout,c=I.fetchLoading,u=(C=null!=M?M:{}).type,l=C.anchorPoints,k=C.nodeStateStyles,d=C.style,h=C.title,f=C.getChildren,p=C.asyncData,g=(x=null!=(r=I.edgeCfg)?r:{}).type,y=x.style,m=x.startArrow,v=x.endArrow,b=x.label,x=x.edgeStateStyles,x={container:j.current,width:O[0],height:O[1],animate:I.animate,linkCenter:C.linkCenter,modes:{default:o},defaultNode:J(J({},M),{nodeCfg:M}),defaultEdge:J(J({},Object(G.omit)(r,["label"])),{edgeCfg:r,labelCfg:null==b?void 0:b.style}),nodeStateStyles:k,edgeStateStyles:(O=x,"FundFlowGraph"!==(void 0===(C=T.name)?"":C)?O:O?(M=(C=void 0===(C=O.hover)?{}:C).endArrow,k=C.startArrow,M||k?{hover:J(J({},C),{endArrow:!!M&&Object(H.a)(M),startArrow:!!k&&Object(H.a)(k)})}:O):void 0),layout:S?void 0:e,fitView:n,fitCenter:i,extraPlugin:{getChildren:f,fetchLoading:c},markerCfg:B},N.current=new F.a[A](x),(C=N.current).current||(C.current="".concat(a,"-graph-").concat($())),(_=N.current).set("id",w=C.current),Object(at.b)(w,_),E=["fund-card","indicator-card","file-tree-node","organization-card"],_.node(function(t){var e,n;return E.includes(u)?(n=V(l,t),t.markerCfg=B,t.edgeCfg=r,{anchorPoints:n,_draggable:o.includes("drag-node"),_graphId:w}):(n=(null!=h?h:{}).style,{_graphId:w,label:(e=t.value,Object(G.isString)(e)?e:"FundFlowGraph"===a?null==e?void 0:e.text:null==e?void 0:e.title),labelCfg:{style:q(n,t,_)},style:J({stroke:"#ccc"},"function"==typeof d?d(t,_):d)})}),["fund-line","labels-line"].includes(g)||_.edge(function(t){var e,n,r=Object(H.a)(m,t),o=Object(H.a)(v,t),i=(null!=b?b:{}).style;return{label:(e=t,n=(null!=b?b:{}).content,["DecompositionTreeGraph","OrganizationGraph","RadialTreeGraph"].includes(a)?q(n,e,_):["FundFlowGraph","FlowAnalysisGraph"].includes(a)?"object"==typeof(n=e.value)?null==n?void 0:n.text:n:e.value),labelCfg:{style:q(i,t,_)},style:J({stroke:"#ccc",startArrow:r,endArrow:o},"function"==typeof y?y(t,_):y)}}),et(_,I),"RadialGraph"===a&&(M=K(P),_.set("centerNode",M)),"function"==typeof t&&t({graph:_,level:z,asyncData:p,getChildren:f,fetchLoading:c,layout:e}),k=_,O=Y(P,z),S=O[0],O=O[1],k.data(S),k.set("eventData",new U.a(O)),k.render(),k.get("canvas").set("localRefresh",!1),X(k.get("id")),i&&_.fitCenter(),s&&s(_),D.current=Object(W.a)(P))},[]),Object(_.useEffect)(function(){var t,e,n,r,o,i,a,s,c,u,l,d;N.current&&(t=N.current,O(f,t),void 0===(s=v)&&(s={}),(c=t)&&!c.destroyed&&((l=c.get("plugins").filter(function(t){return"tooltip"===t.get("name")})[0])&&c.removePlugin(l),s.show||void 0===s.show&&0<Object.keys(s).length)&&(u=s.customContent,l=nt(s,["customContent"]),d=$(),s=new F.a.Tooltip(k(k({offsetX:10,offsetY:20,itemTypes:["node"]},l),{getContent:function(t){return Object(G.isFunction)(u)?Object(M.a)(u(t.item.getModel()),{className:"g6-tooltip"},"tooltip",d):""},name:"tooltip"})),c.addPlugin(s)),void 0===(l=b)&&(l={}),(c=t)&&!c.destroyed&&((s=c.get("plugins").filter(function(t){return"menu"===t.get("name")})[0])&&c.removePlugin(s),l.show||void 0===l.show&&0<Object.keys(l).length)&&(s=new rt(C(C({offsetX:26,offsetY:0,itemTypes:["node"]},l),{name:"menu"})),c.addPlugin(s)),c=m,s=t,t=j.current,r=(c=void 0===c?{}:c).show,o=c.className,i=c.style,c=it(c,["show","className","style"]),a=null==s?void 0:s.get("id"),s)&&!s.destroyed&&(a="".concat(a,"-toolbar"),(e=document.querySelector("#".concat(a)))&&null!=(n=e.parentNode)&&n.removeChild(e),r)&&(n=Object(M.a)(E.a.createElement(ot,{graph:s,container:t,toolbarCfg:c}),{className:null!=o?o:"charts-toolbar",id:a},"toolbar",Q(Q({},S.k),i)),t.appendChild(n))},[N,m,v,b]),Object(_.useEffect)(function(){return function(){null!=w&&w.current&&!w.current.destroyed&&w.current.destroy()}},[]),{container:j}}},,function(t,e,n){n.d(e,"a",function(){return a});var r=n(2),o=n(351),i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function a(t,e){var n=Object(o.a)(t);return{uProps:Object(r.useCallback)(function(n,r){var o=i({},r);return Object.keys(n).forEach(function(t){var e;"Object"===(e=n[t],Object.prototype.toString.call(e).slice(8,-1))?o[t]=i(i({},r[t]),n[t]):o[t]=n[t]}),o},[t,e])(n,e)}}},,,,,,,,,,,,,,,,,,,,function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(e?o:r)(t)},e.detectStrongConnectComponents=e.detectConnectedComponents=void 0;var p=n(97),r=function(t){for(var e=t.nodes,o=void 0===e?[]:e,e=t.edges,i=void 0===e?[]:e,n=[],a={},s=[],r=function n(t){s.push(t),a[t.id]=!0;for(var r=(0,p.getNeighbors)(t.id,i),e=0;e<r.length;++e)!function(t){var e=r[t];a[e]||0<(t=o.filter(function(t){return t.id===e})).length&&n(t[0])}(e)},c=0;c<o.length;c++){var u=o[c];if(!a[u.id]){r(u);for(var l=[];0<s.length;)l.push(s.pop());n.push(l)}}return n},o=(e.detectConnectedComponents=r,function(t){for(var e=t.nodes,a=void 0===e?[]:e,e=t.edges,s=void 0===e?[]:e,c=[],u={},l={},d={},h=[],f=0,n=function n(r){l[r.id]=f,d[r.id]=f,f+=1,c.push(r),u[r.id]=!0;for(var o=(0,p.getNeighbors)(r.id,s,"target").filter(function(t){return-1<a.map(function(t){return t.id}).indexOf(t)}),t=0;t<o.length;t++)!function(t){var e=o[t];l[e]||0===l[e]?u[e]&&(d[r.id]=Math.min(d[r.id],l[e])):(0<(t=a.filter(function(t){return t.id===e})).length&&n(t[0]),d[r.id]=Math.min(d[r.id],d[e]))}(t);if(d[r.id]===l[r.id]){for(var e=[];0<c.length;){var i=c.pop();if(u[i.id]=!1,e.push(i),i===r)break}0<e.length&&h.push(e)}},r=0,o=a;r<o.length;r++){var i=o[r];l[i.id]||0===l[i.id]||n(i)}return h});e.detectStrongConnectComponents=o},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.getOutDegree=e.getInDegree=e.default=void 0;function r(t){var e={},n=void 0===(n=t.nodes)?[]:n,t=void 0===(t=t.edges)?[]:t;return n.forEach(function(t){e[t.id]={degree:0,inDegree:0,outDegree:0}}),t.forEach(function(t){e[t.source].degree++,e[t.source].outDegree++,e[t.target].degree++,e[t.target].inDegree++}),e}e.default=r,e.getInDegree=function(t,e){return r(t)[e]?r(t)[e].inDegree:0},e.getOutDegree=function(t,e){return r(t)[e]?r(t)[e].outDegree:0}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r){void 0===r&&(r=!0),function e(n,r,o,i,a){void 0===a&&(a=!0),i.enter({current:r,previous:o});var t=n.edges;(0,s.getNeighbors)(r,void 0===t?[]:t,a?"target":void 0).forEach(function(t){i.allowTraversal({previous:o,current:r,next:t})&&e(n,t,r,i,a)}),i.leave({current:r,previous:o})}(t,e,"",function(t){function e(){}var n,r=t=void 0===t?{}:t;n={};return r.allowTraversal=t.allowTraversal||function(t){t=t.next;return!n[t]&&(n[t]=!0)},r.enter=t.enter||e,r.leave=t.leave||e,r}(n),r)};var s=n(97)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=(n=n(128))&&n.__esModule?n:{default:n};e.default=function(t,e){for(var n=(0,c.default)(t,e),r=[],o=n.length,i=0;i<o;i+=1){r[i]=[];for(var a=0;a<o;a+=1)i===a?r[i][a]=0:0!==n[i][a]&&n[i][a]?r[i][a]=n[i][a]:r[i][a]=1/0}for(var s=0;s<o;s+=1)for(i=0;i<o;i+=1)for(a=0;a<o;a+=1)r[i][a]>r[i][s]+r[s][a]&&(r[i][a]=r[i][s]+r[s][a]);return r}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(67);function a(t){this.arr=t}a.prototype.getArr=function(){return this.arr||[]},a.prototype.add=function(t){var e=t.arr;if(null==(t=this.arr)||!t.length)return new a(e);if(null==e||!e.length)return new a(this.arr);if(this.arr.length===e.length){var n,r=[];for(n in this.arr)r[n]=this.arr[n]+e[n];return new a(r)}},a.prototype.subtract=function(t){var e=t.arr;if(null==(t=this.arr)||!t.length)return new a(e);if(null==e||!e.length)return new a(this.arr);if(this.arr.length===e.length){var n,r=[];for(n in this.arr)r[n]=this.arr[n]-e[n];return new a(r)}},a.prototype.avg=function(t){var e=[];if(0!==t)for(var n in this.arr)e[n]=this.arr[n]/t;return new a(e)},a.prototype.negate=function(){var t,e=[];for(t in this.arr)e[t]=-this.arr[t];return new a(e)},a.prototype.squareEuclideanDistance=function(t){var e,n=t.arr;if(null==(e=this.arr)||!e.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,o=0;for(r in this.arr)o+=Math.pow(this.arr[r]-t.arr[r],2);return o}},a.prototype.euclideanDistance=function(t){var e,n=t.arr;if(null==(e=this.arr)||!e.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,o=0;for(r in this.arr)o+=Math.pow(this.arr[r]-t.arr[r],2);return Math.sqrt(o)}console.error("The two vectors are unequal in length.")},a.prototype.normalize=function(){var t,e=[],n=(0,i.clone)(this.arr),r=(n.sort(function(t,e){return t-e}),n[n.length-1]),o=n[0];for(t in this.arr)e[t]=(this.arr[t]-o)/(r-o);return new a(e)},a.prototype.norm2=function(){var t;if(null==(t=this.arr)||!t.length)return 0;var e,n=0;for(e in this.arr)n+=Math.pow(this.arr[e],2);return Math.sqrt(n)},a.prototype.dot=function(t){var e,n=t.arr;if(null==(e=this.arr)||!e.length||null==n||!n.length)return 0;if(this.arr.length===n.length){var r,o=0;for(r in this.arr)o+=this.arr[r]*t.arr[r];return o}console.error("The two vectors are unequal in length.")},a.prototype.equal=function(t){var e,n=t.arr;if((null==(t=this.arr)?void 0:t.length)!==(null==n?void 0:n.length))return!1;for(e in this.arr)if(this.arr[e]!==n[e])return!1;return!0},e.default=a},function(t,e,n){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,n){var r,s=n(186),c={};for(r in s)s.hasOwnProperty(r)&&(c[s[r]]=r);var o,i=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(o in i)if(i.hasOwnProperty(o)){if(!("channels"in i[o]))throw new Error("missing channels property: "+o);if(!("labels"in i[o]))throw new Error("missing channel labels property: "+o);if(i[o].labels.length!==i[o].channels)throw new Error("channel and label counts mismatch: "+o);var a=i[o].channels,u=i[o].labels;delete i[o].channels,delete i[o].labels,Object.defineProperty(i[o],"channels",{value:a}),Object.defineProperty(i[o],"labels",{value:u})}i.rgb.hsl=function(t){var e,n=t[0]/255,r=t[1]/255,t=t[2]/255,o=Math.min(n,r,t),i=Math.max(n,r,t),a=i-o;return i===o?e=0:n===i?e=(r-t)/a:r===i?e=2+(t-n)/a:t===i&&(e=4+(n-r)/a),(e=Math.min(60*e,360))<0&&(e+=360),t=(o+i)/2,[e,100*(i===o?0:t<=.5?a/(i+o):a/(2-i-o)),100*t]},i.rgb.hsv=function(t){function e(t){return(u-t)/6/l+.5}var n,r,o,i,a,s=t[0]/255,c=t[1]/255,t=t[2]/255,u=Math.max(s,c,t),l=u-Math.min(s,c,t);return 0==l?i=a=0:(a=l/u,n=e(s),r=e(c),o=e(t),s===u?i=o-r:c===u?i=1/3+n-o:t===u&&(i=2/3+r-n),i<0?i+=1:1<i&&--i),[360*i,100*a,100*u]},i.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2];return[i.rgb.hsl(t)[0],1/255*Math.min(e,Math.min(n,r))*100,100*(1-1/255*Math.max(e,Math.max(n,r)))]},i.rgb.cmyk=function(t){var e=t[0]/255,n=t[1]/255,t=t[2]/255;return[100*((1-e-(e=Math.min(1-e,1-n,1-t)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-t-e)/(1-e)||0),100*e]},i.rgb.keyword=function(t){var e=c[t];if(e)return e;var n,r,o,i,a=1/0;for(o in s)s.hasOwnProperty(o)&&(i=t,r=s[o],(i=Math.pow(i[0]-r[0],2)+Math.pow(i[1]-r[1],2)+Math.pow(i[2]-r[2],2))<a)&&(a=i,n=o);return n},i.keyword.rgb=function(t){return s[t]},i.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,t=t[2]/255;return[100*(.4124*(e=.04045<e?Math.pow((.055+e)/1.055,2.4):e/12.92)+.3576*(n=.04045<n?Math.pow((.055+n)/1.055,2.4):n/12.92)+.1805*(t=.04045<t?Math.pow((.055+t)/1.055,2.4):t/12.92)),100*(.2126*e+.7152*n+.0722*t),100*(.0193*e+.1192*n+.9505*t)]},i.rgb.lab=function(t){var t=i.rgb.xyz(t),e=t[0],n=t[1],t=t[2];return n/=100,t/=108.883,e=.008856<(e/=95.047)?Math.pow(e,1/3):7.787*e+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(.008856<t?Math.pow(t,1/3):7.787*t+16/116))]},i.hsl.rgb=function(t){var e,n,r,o=t[0]/360,i=t[1]/100,t=t[2]/100;if(0==i)return[r=255*t,r,r];for(var a=2*t-(e=t<.5?t*(1+i):t+i-t*i),s=[0,0,0],c=0;c<3;c++)(n=o+1/3*-(c-1))<0&&n++,1<n&&n--,s[c]=255*(r=6*n<1?a+6*(e-a)*n:2*n<1?e:3*n<2?a+(e-a)*(2/3-n)*6:a);return s},i.hsl.hsv=function(t){var e=t[0],n=t[1]/100,t=t[2]/100,r=n,o=Math.max(t,.01);return n*=(t*=2)<=1?t:2-t,r*=o<=1?o:2-o,[e,100*(0==t?2*r/(o+r):2*n/(t+n)),(t+n)/2*100]},i.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,t=Math.floor(e)%6,e=e-Math.floor(e),o=255*r*(1-n),i=255*r*(1-n*e),a=255*r*(1-n*(1-e));switch(r*=255,t){case 0:return[r,a,o];case 1:return[i,r,o];case 2:return[o,r,a];case 3:return[o,i,r];case 4:return[a,o,r];case 5:return[r,o,i]}},i.hsv.hsl=function(t){var e=t[0],n=t[1]/100,t=t[2]/100,r=Math.max(t,.01),t=(2-n)*t;return[e,100*(n*r/((e=(2-n)*r)<=1?e:2-e)||0),100*(t/=2)]},i.hwb.rgb=function(t){var e,n,r,o,i,a=t[0]/360,s=t[1]/100,t=t[2]/100,c=s+t;switch(1<c&&(s/=c,t/=c),a=6*a-(c=Math.floor(6*a)),n=s+(a=0!=(1&c)?1-a:a)*((e=1-t)-s),c){default:case 6:case 0:r=e,o=n,i=s;break;case 1:r=n,o=e,i=s;break;case 2:r=s,o=e,i=n;break;case 3:r=s,o=n,i=e;break;case 4:r=n,o=s,i=e;break;case 5:r=e,o=s,i=n}return[255*r,255*o,255*i]},i.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,t=t[3]/100;return[255*(1-Math.min(1,e*(1-t)+t)),255*(1-Math.min(1,n*(1-t)+t)),255*(1-Math.min(1,r*(1-t)+t))]},i.xyz.rgb=function(t){var e=t[0]/100,n=t[1]/100,t=t[2]/100,r=-.9689*e+1.8758*n+.0415*t,o=.0557*e+-.204*n+1.057*t,e=.0031308<(e=3.2406*e+-1.5372*n+-.4986*t)?1.055*Math.pow(e,1/2.4)-.055:12.92*e;return r=.0031308<r?1.055*Math.pow(r,1/2.4)-.055:12.92*r,o=.0031308<o?1.055*Math.pow(o,1/2.4)-.055:12.92*o,[255*Math.min(Math.max(0,e),1),255*Math.min(Math.max(0,r),1),255*Math.min(Math.max(0,o),1)]},i.xyz.lab=function(t){var e=t[0],n=t[1],t=t[2];return n/=100,t/=108.883,e=.008856<(e/=95.047)?Math.pow(e,1/3):7.787*e+16/116,[116*(n=.008856<n?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(.008856<t?Math.pow(t,1/3):7.787*t+16/116))]},i.lab.xyz=function(t){var e=t[0],n=t[1]/500+(e=(e+16)/116),t=e-t[2]/200,r=Math.pow(e,3),o=Math.pow(n,3),i=Math.pow(t,3),e=.008856<r?r:(e-16/116)/7.787;return n=.008856<o?o:(n-16/116)/7.787,t=.008856<i?i:(t-16/116)/7.787,[n*=95.047,e*=100,t*=108.883]},i.lab.lch=function(t){var e,n=t[0],r=t[1],t=t[2];return(e=360*Math.atan2(t,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+t*t),e]},i.lch.lab=function(t){var e=t[0],n=t[1],t=t[2]/360*2*Math.PI;return[e,n*Math.cos(t),n*Math.sin(t)]},i.rgb.ansi16=function(t){var e=t[0],n=t[1],r=t[2],t=1 in arguments?arguments[1]:i.rgb.hsv(t)[2];return 0===(t=Math.round(t/50))?30:(r=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(e/255)),2===t&&(r+=60),r)},i.hsv.ansi16=function(t){return i.rgb.ansi16(i.hsv.rgb(t),t[2])},i.rgb.ansi256=function(t){var e=t[0],n=t[1],t=t[2];return e===n&&n===t?e<8?16:248<e?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(t/255*5)},i.ansi16.rgb=function(t){var e=t%10;return 0===e||7===e?(50<t&&(e+=3.5),[e=e/10.5*255,e,e]):[(1&e)*(t=.5*(1+~~(50<t)))*255,(e>>1&1)*t*255,(e>>2&1)*t*255]},i.ansi256.rgb=function(t){var e;return 232<=t?[e=10*(t-232)+8,e,e]:(t-=16,[Math.floor(t/36)/5*255,Math.floor((e=t%36)/6)/5*255,e%6/5*255])},i.rgb.hex=function(t){t=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},i.hex.rgb=function(t){var e,t=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);return t?(e=t[0],3===t[0].length&&(e=e.split("").map(function(t){return t+t}).join("")),[(t=parseInt(e,16))>>16&255,t>>8&255,255&t]):[0,0,0]},i.rgb.hcg=function(t){var e=t[0]/255,n=t[1]/255,t=t[2]/255,r=Math.max(Math.max(e,n),t),o=Math.min(Math.min(e,n),t),i=r-o;return[360*((i<=0?0:r===e?(n-t)/i%6:r===n?2+(t-e)/i:4+(e-n)/i+4)/6%1),100*i,100*(i<1?o/(1-i):0)]},i.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=0;return(e=n<.5?2*e*n:2*e*(1-n))<1&&(r=(n-.5*e)/(1-e)),[t[0],100*e,100*r]},i.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,e=e*n,n=e<1?(n-e)/(1-e):0;return[t[0],100*e,100*n]},i.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,t=t[2]/100;if(0==n)return[255*t,255*t,255*t];var r=[0,0,0],e=e%1*6,o=e%1,i=1-o;switch(Math.floor(e)){case 0:r[0]=1,r[1]=o,r[2]=0;break;case 1:r[0]=i,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=o;break;case 3:r[0]=0,r[1]=i,r[2]=1;break;case 4:r[0]=o,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=i}return[255*(n*r[0]+(e=(1-n)*t)),255*(n*r[1]+e),255*(n*r[2]+e)]},i.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),e=0<n?e/n:0;return[t[0],100*e,100*n]},i.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return 0<n&&n<.5?r=e/(2*n):.5<=n&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},i.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},i.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,e=n-e,n=e<1?(n-e)/(1-e):0;return[t[0],100*e,100*n]},i.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},i.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},i.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},i.gray.hsl=i.gray.hsv=function(t){return[0,0,t[0]]},i.gray.hwb=function(t){return[0,100,t[0]]},i.gray.cmyk=function(t){return[0,0,0,t[0]]},i.gray.lab=function(t){return[t[0],0,0]},i.gray.hex=function(t){t=255&Math.round(t[0]/100*255),t=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(t.length)+t},i.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)},i=(Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0,n(189));Object.defineProperty(e,"registerLayout",{enumerable:!0,get:function(){return i.registerLayout}}),Object.defineProperty(e,"unRegisterLayout",{enumerable:!0,get:function(){return i.unRegisterLayout}}),Object.defineProperty(e,"getLayoutByName",{enumerable:!0,get:function(){return i.getLayoutByName}}),o(n(192),e)},function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=(Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0,n(83)),c=n(80),u=new Map;e.registerLayout=function(t,i){var a;function e(t){var e,n=e=a.call(this)||this,r={},o=Object.assign({},n.getDefaultCfg(),(null==(o=i.getDefaultCfg)?void 0:o.call(i))||{});return Object.assign(r,o,i,t),Object.keys(r).forEach(function(t){n[t]=r[t]}),e}return u.get(t)&&console.warn("The layout with the name ".concat(t," exists already, it will be overridden")),(0,c.isObject)(i)?(a=s.Base,o(e,a),u.set(t,e)):u.set(t,i),u.get(t)},e.unRegisterLayout=function(t){u.has(t)&&u.delete(t)},e.getLayoutByName=function(t){return u.has(t)?u.get(t):null}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=void 0,e.isArray=Array.isArray},function(t,r,e){var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.clone=r.isObject=void 0,r.isObject=function(t){return null!==t&&"object"==typeof t},r.clone=function(t){var e,n;return null===t?t:t instanceof Date?new Date(t.getTime()):t instanceof Array?(e=[],t.forEach(function(t){e.push(t)}),e.map(function(t){return(0,r.clone)(t)})):"object"==typeof t&&Object.keys(t).length?(n=o({},t),Object.keys(n).forEach(function(t){n[t]=(0,r.clone)(n[t])}),n):t}},function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)},i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=e.ForceAtlas2Layout=e.ComboCombinedLayout=e.ComboForceLayout=e.GForceGPULayout=e.FruchtermanGPULayout=e.FruchtermanLayout=e.MDSLayout=e.ConcentricLayout=e.RadialLayout=e.DagreCompoundLayout=e.DagreLayout=e.CircularLayout=e.ForceLayout=e.Force2Layout=e.GForceLayout=e.RandomLayout=e.GridLayout=e.Layouts=e.Layout=void 0,n(193)),a=(Object.defineProperty(e,"GridLayout",{enumerable:!0,get:function(){return i.GridLayout}}),n(194)),s=(Object.defineProperty(e,"RandomLayout",{enumerable:!0,get:function(){return a.RandomLayout}}),n(195)),c=(Object.defineProperty(e,"GForceLayout",{enumerable:!0,get:function(){return s.GForceLayout}}),n(196)),u=(Object.defineProperty(e,"Force2Layout",{enumerable:!0,get:function(){return c.Force2Layout}}),n(197)),l=(Object.defineProperty(e,"ForceLayout",{enumerable:!0,get:function(){return u.ForceLayout}}),n(198)),d=(Object.defineProperty(e,"CircularLayout",{enumerable:!0,get:function(){return l.CircularLayout}}),n(151)),h=(Object.defineProperty(e,"DagreLayout",{enumerable:!0,get:function(){return d.DagreLayout}}),n(200)),f=(Object.defineProperty(e,"DagreCompoundLayout",{enumerable:!0,get:function(){return h.DagreCompoundLayout}}),n(201)),p=(Object.defineProperty(e,"RadialLayout",{enumerable:!0,get:function(){return f.RadialLayout}}),n(202)),g=(Object.defineProperty(e,"ConcentricLayout",{enumerable:!0,get:function(){return p.ConcentricLayout}}),n(203)),y=(Object.defineProperty(e,"MDSLayout",{enumerable:!0,get:function(){return g.MDSLayout}}),n(204)),m=(Object.defineProperty(e,"FruchtermanLayout",{enumerable:!0,get:function(){return y.FruchtermanLayout}}),n(205)),v=(Object.defineProperty(e,"FruchtermanGPULayout",{enumerable:!0,get:function(){return m.FruchtermanGPULayout}}),n(211)),b=(Object.defineProperty(e,"GForceGPULayout",{enumerable:!0,get:function(){return v.GForceGPULayout}}),n(212)),x=(Object.defineProperty(e,"ComboForceLayout",{enumerable:!0,get:function(){return b.ComboForceLayout}}),n(213)),w=(Object.defineProperty(e,"ComboCombinedLayout",{enumerable:!0,get:function(){return x.ComboCombinedLayout}}),n(214)),_=(Object.defineProperty(e,"ForceAtlas2Layout",{enumerable:!0,get:function(){return w.ForceAtlas2Layout}}),n(215)),E=(Object.defineProperty(e,"ERLayout",{enumerable:!0,get:function(){return _.ERLayout}}),n(348));Object.defineProperty(e,"Layout",{enumerable:!0,get:function(){return E.Layout}}),Object.defineProperty(e,"Layouts",{enumerable:!0,get:function(){return E.Layouts}}),o(n(349),e)},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),S=(Object.defineProperty(e,"__esModule",{value:!0}),e.GridLayout=void 0,n(80)),n=(o=n(83).Base,i(a,o),a.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},a.prototype.execute=function(){var r=this,t=r.nodes,e=r.edges,n=r.begin,o=t.length;if(0===o)return r.onLayoutEnd&&r.onLayoutEnd(),{nodes:t,edges:e};if(1===o)return t[0].x=n[0],t[0].y=n[1],r.onLayoutEnd&&r.onLayoutEnd(),{nodes:t,edges:e};var i,a,s,c=r.sortBy,n=r.width,u=r.height,l=r.condense,d=r.preventOverlapPadding,h=r.preventOverlap,f=r.nodeSpacing,p=r.nodeSize,g=[],y=(t.forEach(function(t){g.push(t)}),{}),t=(g.forEach(function(t,e){y[t.id]=e}),"degree"!==c&&(0,S.isString)(c)&&void 0!==g[0][c]||(c="degree",!(0,S.isNaN)(t[0].degree))||(i=(0,S.getDegree)(g.length,y,e),g.forEach(function(t,e){t.degree=i[e].all})),g.sort(function(t,e){return e[c]-t[c]}),n||"undefined"==typeof window||(n=window.innerWidth),u||"undefined"==typeof window||(u=window.innerHeight),r.rows),m=null!=r.cols?r.cols:r.columns;if(r.cells=o,null!=t&&null!=m?(r.rows=t,r.cols=m):null!=t&&null==m?(r.rows=t,r.cols=Math.ceil(r.cells/r.rows)):null==t&&null!=m?(r.cols=m,r.rows=Math.ceil(r.cells/r.cols)):(r.splits=Math.sqrt(r.cells*r.height/r.width),r.rows=Math.round(r.splits),r.cols=Math.round(r.width/r.height*r.splits)),r.rows=Math.max(r.rows,1),r.cols=Math.max(r.cols,1),r.cols*r.rows>r.cells)((b=r.small())-1)*(v=r.large())>=r.cells?r.small(b-1):(v-1)*b>=r.cells&&r.large(v-1);else for(;r.cols*r.rows<r.cells;){var v,b=r.small();((v=r.large())+1)*b>=r.cells?r.large(v+1):r.small(b+1)}r.cellWidth=n/r.cols,r.cellHeight=u/r.rows,l&&(r.cellWidth=0,r.cellHeight=0),(h||f)&&(a=(0,S.getFuncByUnknownType)(10,f),s=(0,S.getFuncByUnknownType)(30,p,!1),g.forEach(function(t){t.x&&t.y||(t.x=0,t.y=0);var e,n=s(t)||30,n=(0,S.isArray)(n)?(e=n[0],n[1]):e=n,t=void 0!==a?a(t):d,n=n+t;r.cellWidth=Math.max(r.cellWidth,e+t),r.cellHeight=Math.max(r.cellHeight,n)})),r.cellUsed={},r.row=0,r.col=0,r.id2manPos={};for(var x=0;x<g.length;x++){var w=g[x],_=void 0;if((_=r.position?r.position(w):_)&&(void 0!==_.row||void 0!==_.col)){var E={row:_.row,col:_.col};if(void 0===E.col)for(E.col=0;r.used(E.row,E.col);)E.col++;else if(void 0===E.row)for(E.row=0;r.used(E.row,E.col);)E.row++;r.id2manPos[w.id]=E,r.use(E.row,E.col)}r.getPos(w)}return r.onLayoutEnd&&r.onLayoutEnd(),{edges:e,nodes:g}},a.prototype.small=function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.min(n,r):Math.min(n,r)===this.rows?this.rows=t:this.cols=t,e},a.prototype.large=function(t){var e,n=this.rows||5,r=this.cols||5;return null==t?e=Math.max(n,r):Math.max(n,r)===this.rows?this.rows=t:this.cols=t,e},a.prototype.used=function(t,e){return this.cellUsed["c-".concat(t,"-").concat(e)]||!1},a.prototype.use=function(t,e){this.cellUsed["c-".concat(t,"-").concat(e)]=!0},a.prototype.moveToNextCell=function(){var t=this.cols||5;this.col++,this.col>=t&&(this.col=0,this.row++)},a.prototype.getPos=function(t){var e,n,r=this.begin,o=this.cellWidth,i=this.cellHeight,a=this.id2manPos[t.id];if(a)e=a.col*o+o/2+r[0],n=a.row*i+i/2+r[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();e=this.col*o+o/2+r[0],n=this.row*i+i/2+r[1],this.use(this.row,this.col),this.moveToNextCell()}t.x=e,t.y=n},a.prototype.getType=function(){return"grid"},a);function a(t){var e=o.call(this)||this;return e.begin=[0,0],e.preventOverlap=!0,e.preventOverlapPadding=10,e.condense=!1,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e.row=0,e.col=0,e.cellWidth=0,e.cellHeight=0,e.cellUsed={},e.id2manPos={},e.onLayoutEnd=function(){},e.updateCfg(t),e}e.GridLayout=n},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),n=(Object.defineProperty(e,"__esModule",{value:!0}),e.RandomLayout=void 0,o=n(83).Base,i(a,o),a.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},a.prototype.execute=function(){var e=this,t=e.nodes,n=e.center;return e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),t&&t.forEach(function(t){t.x=.9*(Math.random()-.5)*e.width+n[0],t.y=.9*(Math.random()-.5)*e.height+n[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:this.edges}},a.prototype.getType=function(){return"random"},a);function a(t){var e=o.call(this)||this;return e.center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}e.RandomLayout=n},function(t,e,n){function u(e,n){return e?(0,y.isNumber)(e)?function(t){return e}:e:function(t){return n||1}}var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.GForceLayout=void 0,n(83)),y=n(80),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},s.prototype.execute=function(){var n,r,e,t,o,i,a,s=this,c=s.nodes;void 0!==s.timeInterval&&"undefined"!=typeof window&&window.clearInterval(s.timeInterval),c&&0!==c.length?(s.width||"undefined"==typeof window||(s.width=window.innerWidth),s.height||"undefined"==typeof window||(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]),a=s.center,1===c.length?(c[0].x=a[0],c[0].y=a[1],null!=(a=s.onLayoutEnd)&&a.call(s)):(n={},r={},c.forEach(function(t,e){(0,y.isNumber)(t.x)||(t.x=Math.random()*s.width),(0,y.isNumber)(t.y)||(t.y=Math.random()*s.height),n[t.id]=t,r[t.id]=e}),s.nodeMap=n,s.nodeIdxMap=r,s.linkDistance=u(s.linkDistance,1),s.nodeStrength=u(s.nodeStrength,1),s.edgeStrength=u(s.edgeStrength,1),e=s.nodeSize,s.preventOverlap&&(t=s.nodeSpacing,o=(0,y.isNumber)(t)?function(){return t}:(0,y.isFunction)(t)?t:function(){return 0},i=e?(0,y.isArray)(e)?function(t){return Math.max(e[0],e[1])+o(t)}:function(t){return e+o(t)}:function(t){return t.size?(0,y.isArray)(t.size)?Math.max(t.size[0],t.size[1])+o(t):(0,y.isObject)(t.size)?Math.max(t.size.width,t.size.height)+o(t):t.size+o(t):10+o(t)}),s.nodeSize=i,a=s.edges,s.degrees=(0,y.getDegree)(c.length,s.nodeIdxMap,a),s.getMass||(s.getMass=function(t){return t.mass||s.degrees[s.nodeIdxMap[t.id]].all||1}),s.run())):null!=(i=s.onLayoutEnd)&&i.call(s)},s.prototype.run=function(){var t,e,n=this,r=n.maxIteration,o=n.nodes,i=n.minMovement;if(o)if(n.workerEnabled||!n.animate){for(var a=0;a<r;a++){var s=n.runOneStep(a);if(n.reachMoveThreshold(o,s,i))break}null!=(t=n.onLayoutEnd)&&t.call(n)}else"undefined"!=typeof window&&(e=0,this.timeInterval=window.setInterval(function(){var t;o&&(t=n.runOneStep(e)||[],n.reachMoveThreshold(o,t,i)&&(null!=(t=n.onLayoutEnd)&&t.call(n),window.clearInterval(n.timeInterval)),++e>=r)&&(null!=(t=n.onLayoutEnd)&&t.call(n),window.clearInterval(n.timeInterval))},0))},s.prototype.reachMoveThreshold=function(t,r,e){var o=0;return t.forEach(function(t,e){var n=t.x-r[e].x,t=t.y-r[e].y;o+=Math.sqrt(n*n+t*t)}),(o/=t.length)<e},s.prototype.runOneStep=function(t){var e,n=this.nodes,r=this.edges,o=[],i=[];if(n)return n.forEach(function(t,e){o[2*e]=0,i[2*e]=o[2*e+1]=0,i[2*e+1]=0}),this.calRepulsive(o,n),r&&this.calAttractive(o,r),this.calGravity(o,n),r=Math.max(.02,this.interval-.002*t),this.updateVelocity(o,i,r,n),e=[],n.forEach(function(t){e.push({x:t.x,y:t.y})}),this.updatePosition(i,r,n),null!=(t=this.tick)&&t.call(this),e},s.prototype.calRepulsive=function(d,t){var h=this.getMass,f=this.factor,p=this.coulombDisScale,g=this.preventOverlap,e=this.collideStrength,y=void 0===e?1:e,m=this.nodeStrength,v=this.nodeSize;t.forEach(function(c,u){var l=h?h(c):1;t.forEach(function(t,e){var n,r,o,i,a,s;e<=u||(o=c.x-t.x,i=c.y-t.y,0===o&&0===i&&(o=.01*Math.random(),i=.01*Math.random()),n=o*o+i*i,s=((r=Math.sqrt(n))+.1)*p,o=o/r,i=i/r,s=.5*(m(c)+m(t))*f/(s*s),a=h?h(t):1,d[2*u]+=o*s,d[2*u+1]+=i*s,d[2*e]-=o*s,d[2*e+1]-=i*s,g&&(v(c)+v(t))/2>r&&(s=y*(m(c)+m(t))*.5/n,d[2*u]+=o*s/l,d[2*u+1]+=i*s/l,d[2*e]-=o*s/a,d[2*e+1]-=i*s/a))})})},s.prototype.calAttractive=function(u,t){var l=this.nodeMap,d=this.nodeIdxMap,h=this.linkDistance,f=this.edgeStrength,p=this.nodeSize,g=this.getMass;t.forEach(function(t,e){var n=(0,y.getEdgeTerminal)(t,"source"),r=(0,y.getEdgeTerminal)(t,"target"),o=l[n],i=l[r],a=i.x-o.x,s=i.y-o.y,c=(0===a&&0===s&&(a=.01*Math.random(),s=.01*Math.random()),Math.sqrt(a*a+s*s)),a=a/c,s=s/c,c=((h(t,o,i)||1+(p(o)+p(i)||0)/2)-c)*f(t),t=d[n],n=d[r],r=g?g(o):1,o=g?g(i):1;u[2*t]-=a*c/r,u[2*t+1]-=s*c/r,u[2*n]+=a*c/o,u[2*n+1]+=s*c/o})},s.prototype.calGravity=function(t,e){for(var n=this.center,r=this.gravity,o=this.degrees,i=e.length,a=0;a<i;a++){var s,c=e[a],u=c.x-n[0],l=c.y-n[1],d=r;this.getCenter&&(s=this.getCenter(c,o[a].all))&&(0,y.isNumber)(s[0])&&(0,y.isNumber)(s[1])&&(0,y.isNumber)(s[2])&&(u=c.x-s[0],l=c.y-s[1],d=s[2]),d&&(t[2*a]-=d*u,t[2*a+1]-=d*l)}},s.prototype.updateVelocity=function(i,a,t,e){var s=this,c=t*s.damping;e.forEach(function(t,e){var n=i[2*e]*c||.01,r=i[2*e+1]*c||.01,o=Math.sqrt(n*n+r*r);o>s.maxSpeed&&(n*=o=s.maxSpeed/o,r*=o),a[2*e]=n,a[2*e+1]=r})},s.prototype.updatePosition=function(r,o,t){t.forEach(function(t,e){var n;(0,y.isNumber)(t.fx)&&(0,y.isNumber)(t.fy)?(t.x=t.fx,t.y=t.fy):(n=r[2*e]*o,e=r[2*e+1]*o,t.x+=n,t.y+=e)})},s.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},s.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},s.prototype.getType=function(){return"gForce"},s);function s(t){var e=o.call(this)||this;return e.maxIteration=500,e.workerEnabled=!1,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.preventOverlap=!0,e.collideStrength=1,e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.animate=!0,e.updateCfg(t),e}e.GForceLayout=n},function(t,e,n){function d(e,n){return e?(0,O.isNumber)(e)?function(t){return e}:e:function(t){return n||1}}var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=this&&this.__assign||function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.Force2Layout=void 0,n(83)),O=n(80),s=n(288),n=(o=a.Base,i(c,o),c.prototype.getCentripetalOptions=function(){function i(t){return"function"==typeof u?u(t):u}var a,s,r,t=this.leafCluster,e=this.clustering,o=this.nodeClusterBy,n=this.nodes,c=this.nodeMap,u=this.clusterNodeStrength,l={},e=(t&&(a=this.getSameTypeLeafMap()||{},s=Array.from(new Set(null==n?void 0:n.map(function(t){return t[o]})))||[],l={single:100,leaf:function(t,e,n){var r=a[t.id]||{},o=r.relativeLeafNodes,r=r.sameTypeLeafNodes;return(null==r?void 0:r.length)===(null==o?void 0:o.length)||1===(null==s?void 0:s.length)?1:i(t)},others:1,center:function(t,e,n){var r,o=((null==(o=t.data)?void 0:o.layout)||{}).degree;return o?(1!==o||1===(t=void 0===(o=(a[t.id]||{}).sameTypeLeafNodes)?[]:o).length?r=void 0:1<t.length&&(r=(0,O.getAvgNodePosition)(t)),{x:null==r?void 0:r.x,y:null==r?void 0:r.y}):{x:100,y:100}}}),e&&(a=a||this.getSameTypeLeafMap(),t=Array.from(new Set(n.map(function(t,e){return t[o]}))).filter(function(t){return void 0!==t}),r={},t.forEach(function(e){var t=n.filter(function(t){return t[o]===e}).map(function(t){return c[t.id]});r[e]=(0,O.getAvgNodePosition)(t)}),l={single:i,leaf:i,others:i,center:function(t,e,n){t=r[t[o]];return{x:null==t?void 0:t.x,y:null==t?void 0:t.y}}}),this.centripetalOptions=p(p({},this.centripetalOptions),l),this.centripetalOptions),d=e.leaf,h=e.single,f=e.others;d&&"function"!=typeof d&&(this.centripetalOptions.leaf=function(){return d}),h&&"function"!=typeof h&&(this.centripetalOptions.single=function(){return h}),f&&"function"!=typeof f&&(this.centripetalOptions.others=function(){return f})},c.prototype.updateCfg=function(t){t&&Object.assign(this,t)},c.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},c.prototype.execute=function(){var t,r,e,n,o,i,a,s=this,c=(s.stop(),s.nodes),u=s.edges,l=s.defSpringLen;s.judgingDistance=0,c&&0!==c.length?(s.width||"undefined"==typeof window||(s.width=window.innerWidth),s.height||"undefined"==typeof window||(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]),t=s.center,1===c.length?(c[0].x=t[0],c[0].y=t[1],s.onLayoutEnd([p({},c[0])])):(s.degreesMap=(0,O.getDegreeMap)(c,u),s.propsGetMass?s.getMass=s.propsGetMass:s.getMass=function(t){var e=1,t=((0,O.isNumber)(t.mass)&&(e=t.mass),s.degreesMap[t.id].all);return!t||t<5?e:5*t*e},r=s.nodeSize,s.preventOverlap&&(e=s.nodeSpacing,n=(0,O.isNumber)(e)?function(){return e}:(0,O.isFunction)(e)?e:function(){return 0},o=r?(0,O.isArray)(r)?function(t){return Math.max(r[0],r[1])+n(t)}:function(t){return r+n(t)}:function(t){return t.size?(0,O.isArray)(t.size)?Math.max(t.size[0],t.size[1])+n(t):(0,O.isObject)(t.size)?Math.max(t.size.width,t.size.height)+n(t):t.size+n(t):10+n(t)}),s.nodeSize=o,s.linkDistance=d(s.linkDistance,1),s.nodeStrength=d(s.nodeStrength,1),s.edgeStrength=d(s.edgeStrength,1),i={},a={},c.forEach(function(t,e){(0,O.isNumber)(t.x)||(t.x=Math.random()*s.width),(0,O.isNumber)(t.y)||(t.y=Math.random()*s.height);var n=s.degreesMap[t.id];i[t.id]=p(p({},t),{data:p(p({},t.data),{size:s.nodeSize(t)||30,layout:{inDegree:n.in,outDegree:n.out,degree:n.all,tDegree:n.in,sDegree:n.out,force:{mass:s.getMass(t),nodeStrength:s.nodeStrength(t,u)}}})}),a[t.id]=e}),s.nodeMap=i,s.nodeIdxMap=a,s.edgeInfos=[],null!=u&&u.forEach(function(t){var e=i[t.source],n=i[t.target];e&&n?s.edgeInfos.push({edgeStrength:s.edgeStrength(t),linkDistance:l?l(p(p({},t),{source:e,target:n}),e,n):s.linkDistance(t,e,n)||1+(r(e)+r(e)||0)/2}):elf.edgeInfos.push({})}),this.getCentripetalOptions(),s.onLayoutEnd=s.onLayoutEnd||function(){},s.run())):s.onLayoutEnd([])},c.prototype.run=function(){var t=this,e=t.maxIteration,n=t.nodes,r=t.edges,o=t.workerEnabled,i=t.minMovement,a=t.animate,s=t.nodeMap,c=t.height;if(t.currentMinY=0,t.currentMaxY=c,n){var u,l,d=[],h=(n.forEach(function(t,e){d[2*e]=0,d[2*e+1]=0}),this.defSideCoe&&"function"==typeof this.defSideCoe&&(u={},r.forEach(function(t){var e=t.source,n=t.target;u[e]=u[e]||[],u[e].push(t),u[n]=u[n]||[],u[n].push(t)}),this.relatedEdges=u),e);if(o||!a){for(var f=0;(t.judgingDistance>i||f<1)&&f<h;f++)t.runOneStep(f,d);t.onLayoutEnd(Object.values(s))}else"undefined"!=typeof window&&(l=0,this.timeInterval=window.setInterval(function(){n&&(t.runOneStep(l,d),++l>=h||t.judgingDistance<i)&&(t.onLayoutEnd(Object.values(s)),window.clearInterval(t.timeInterval))},0))}},c.prototype.runOneStep=function(t,e){var n,r=this.nodes,o=this.edges,i=(this.nodeMap,this.monitor),a=[];null!=r&&r.length&&(this.calRepulsive(a),o&&this.calAttractive(a),this.calGravity(a),this.attractToSide(a),n=this.interval,this.updateVelocity(a,e,n),this.updatePosition(e,n),null!=(e=this.tick)&&e.call(this),i)&&i({energy:this.calTotalEnergy(a),nodes:r,edges:o,iterations:t})},c.prototype.calTotalEnergy=function(r){var o,t=this.nodes,i=this.nodeMap;return null!=t&&t.length?(o=0,t.forEach(function(t,e){var n=r[2*e],e=r[2*e+1],t=i[t.id].data.layout.force.mass;o+=(void 0===t?1:t)*(n*n+e*e)*.5}),o):0},c.prototype.calRepulsive=function(t){var e=this.nodes,n=this.nodeMap,r=this.factor,o=this.coulombDisScale;this.nodeSize,(0,s.forceNBody)(e,n,r,o*o,t)},c.prototype.calAttractive=function(u){var t=this.edges,l=this.nodeMap,d=this.nodeIdxMap,h=this.edgeInfos;this.nodeSize,t.forEach(function(t,e){var n,r,o,i,a=(0,O.getEdgeTerminal)(t,"source"),t=(0,O.getEdgeTerminal)(t,"target"),s=l[a],c=l[t];s&&c&&(n=c.x-s.x,i=c.y-s.y,n||i||(n=.01*Math.random(),i=.01*Math.random()),r=Math.sqrt(n*n+i*i),o=(e=h[e]||{}).linkDistance,s=1/(s.data.layout.force.mass||1),c=1/(c.data.layout.force.mass||1),e=i/r*(o=((void 0===o?200:o)-r)*(void 0===(i=e.edgeStrength)?200:i)),i=2*d[a],a=2*d[t],u[i]-=(t=n/r*o)*s,u[1+i]-=e*s,u[a]+=t*c,u[1+a]+=e*c)})},c.prototype.calGravity=function(t){var e=this.nodes,n=this.edges,r=void 0===n?[]:n,o=this.nodeMap,i=this.width,a=this.height,s=this.center,c=this.gravity,u=this.degreesMap,l=this.centripetalOptions;if(e)for(var d=e.length,h=0;h<d;h++){var f,p,g=2*h,y=o[e[h].id],m=y.data.layout.force.mass,m=void 0===m?1:m,v=0,b=0,x=c,w=u[y.id],_=w.in,E=w.out,w=w.all,S=null==(S=this.getCenter)?void 0:S.call(this,y,w);S?(f=S[0],v=y.x-f,b=y.y-S[1],x=S[2]):(v=y.x-s[0],b=y.y-s[1]),x&&(t[g]-=x*v/m,t[1+g]-=x*b/m),l&&(f=l.leaf,S=l.single,v=l.others,x=(b=(null==(x=l.center)?void 0:x(y,e,r,i,a))||{x:0,y:0,centerStrength:0}).x,p=b.y,b=b.centerStrength,(0,O.isNumber)(x))&&(0,O.isNumber)(p)&&(x=(y.x-x)/m,p=(y.y-p)/m,b&&(t[g]-=b*x,t[1+g]-=b*p),0===w?(m=S(y))&&(t[g]-=m*x,t[1+g]-=m*p):0===_||0===E?(b=f(y,e,r))&&(t[g]-=b*x,t[1+g]-=b*p):(w=v(y))&&(t[g]-=w*x,t[1+g]-=w*p))}},c.prototype.attractToSide=function(o){var i=this.defSideCoe,t=(this.height,this.nodes),a=this.relatedEdges,e=this.currentMinY,s=void 0===e?0:e,e=this.currentMaxY,c=void 0===e?this.height:e;i&&"function"==typeof i&&null!=t&&t.length&&t.forEach(function(t,e){var n,r=i(t,a[t.id]||[]);0!==r&&(n=r<0?s:c,r=Math.abs(r),o[2*e+1]-=r*(t.y-n))})},c.prototype.updateVelocity=function(i,a,s){var t=this.nodes,c=this.damping,u=this.maxSpeed;null!=t&&t.length&&t.forEach(function(t,e){var n=(a[2*e]+i[2*e]*s)*c||.01,r=(a[2*e+1]+i[2*e+1]*s)*c||.01,o=Math.sqrt(n*n+r*r);u<o&&(n*=o=u/o,r*=o),a[2*e]=n,a[2*e+1]=r})},c.prototype.updatePosition=function(i,a){var s,c,u,l=this,t=l.nodes,d=l.distanceThresholdMode,h=l.nodeMap;null!=t&&t.length?(s=0,"max"===d?l.judgingDistance=-1/0:"min"===d&&(l.judgingDistance=1/0),c=1/0,u=-1/0,t.forEach(function(t,e){var n=h[t.id];if((0,O.isNumber)(t.fx)&&(0,O.isNumber)(t.fy))t.x=t.fx,t.y=t.fy,n.x=t.x,n.y=t.y;else{var r=i[2*e]*a,e=i[2*e+1]*a,o=(t.x+=r,t.y+=e,n.x=t.x,n.y=t.y,t.y<c&&(c=t.y),u<t.y&&(u=t.y),Math.sqrt(r*r+e*e));switch(d){case"max":l.judgingDistance<o&&(l.judgingDistance=o);break;case"min":l.judgingDistance>o&&(l.judgingDistance=o);break;default:s+=o}}}),this.currentMinY=c,this.currentMaxY=u,d&&"mean"!==d||(l.judgingDistance=s/t.length)):this.judgingDistance=0},c.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},c.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},c.prototype.getType=function(){return"force2"},c.prototype.getSameTypeLeafMap=function(){var n,r=this.nodeClusterBy,t=this.nodes,o=this.edges,i=this.nodeMap,a=this.degreesMap;if(null!=t&&t.length)return n={},t.forEach(function(t,e){1===a[t.id].all&&(n[t.id]=(0,O.getCoreNodeAndRelativeLeafNodes)("leaf",t,o,r,a,i))}),n},c);function c(t){var e=o.call(this)||this,n=(e.maxIteration=1e3,e.workerEnabled=!1,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=500,e.minMovement=.4,e.interval=.02,e.factor=1,e.linkDistance=200,e.gravity=0,e.clusterNodeStrength=20,e.preventOverlap=!0,e.distanceThresholdMode="mean",e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.judgingDistance=0,e.centripetalOptions={leaf:2,single:2,others:1,center:function(t){return{x:e.width/2,y:e.height/2}}},t.getMass);return e.propsGetMass=n,e.updateCfg(t),e}e.Force2Layout=n},function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(289),e)},function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.CircularLayout=void 0,n(83)),C=n(80);function a(t,e){t=t.degree,e=e.degree;return t<e?-1:e<t?1:0}s=i.Base,o(c,s),c.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},c.prototype.execute=function(){var t=this.nodes,e=this.edges,n=t.length;if(0!==n){this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]);var r=this.center;if(1===n)return t[0].x=r[0],t[0].y=r[1],void(this.onLayoutEnd&&this.onLayoutEnd());for(var o,i,a,s,c=this.radius,u=this.startRadius,l=this.endRadius,d=this.divisions,h=this.startAngle,f=this.endAngle,p=this.angleRatio,g=this.ordering,y=this.clockwise,m=this.nodeSpacing,v=this.nodeSize,b=(f-h)/n,x={},w=(t.forEach(function(t,e){x[t.id]=e}),this.nodeMap=x,(0,C.getDegree)(t.length,x,e)),_=(this.degrees=w,m?(o=(0,C.getFuncByUnknownType)(10,m),i=(0,C.getFuncByUnknownType)(10,v),a=-1/0,t.forEach(function(t){t=i(t);a<t&&(a=t)}),s=0,t.forEach(function(t,e){s+=0===e?a||10:(o(t)||0)+(a||10)}),c=s/(2*Math.PI)):c||u||l?!u&&l?u=l:u&&!l&&(l=u):c=this.height>this.width?this.width/2:this.height/2,b*p),E=[],E="topology"===g?this.topologyOrdering():"topology-directed"===g?this.topologyOrdering(!0):"degree"===g?this.degreeOrdering():t,S=Math.ceil(n/d),O=0;O<n;++O){var M=c,k=(M=(M=M||null===u||null===l?M:u+O*(l-u)/(n-1))||10+100*O/(n-1),h+O%S*_+2*Math.PI/d*Math.floor(O/S));y||(k=f-O%S*_-2*Math.PI/d*Math.floor(O/S)),E[O].x=r[0]+Math.cos(k)*M,E[O].y=r[1]+Math.sin(k)*M,E[O].weight=w[O].all}return null!=(e=this.onLayoutEnd)&&e.call(this),{nodes:E,edges:this.edges}}this.onLayoutEnd&&this.onLayoutEnd()},c.prototype.topologyOrdering=function(t){void 0===t&&(t=!1);var o,e,i,s=this.degrees,c=this.edges,u=this.nodes,l=(0,C.clone)(u),d=this.nodeMap,h=[l[0]],f=[u[0]],p=[],g=u.length,y=(p[0]=!0,e=c,i=d,t=t,(o=l).forEach(function(t,e){o[e].children=[],o[e].parent=[]}),t?e.forEach(function(t){var e=(0,C.getEdgeTerminal)(t,"source"),t=(0,C.getEdgeTerminal)(t,"target"),n=0,e=(e&&(n=i[e]),0),t=(t&&(e=i[t]),o[n].children),r=o[e].parent;t.push(o[e].id),r.push(o[n].id)}):e.forEach(function(t){var e=(0,C.getEdgeTerminal)(t,"source"),t=(0,C.getEdgeTerminal)(t,"target"),n=0,e=(e&&(n=i[e]),0),t=(t&&(e=i[t]),o[n].children),r=o[e].children;t.push(o[e].id),r.push(o[n].id)}),0);return l.forEach(function(t,e){if(0!==e)if(e!==g-1&&s[e].all===s[e+1].all&&!function(t,e,n){for(var r=n.length,o=0;o<r;o++){var i=(0,C.getEdgeTerminal)(n[o],"source"),a=(0,C.getEdgeTerminal)(n[o],"target");if(t.id===i&&e.id===a||e.id===i&&t.id===a)return 1}}(h[y],t,c)||p[e]){for(var n=h[y].children,r=!1,o=0;o<n.length;o++){var i=d[n[o]];if(s[i].all===s[e].all&&!p[i]){h.push(l[i]),f.push(u[d[l[i].id]]),r=p[i]=!0;break}}for(var a=0;!r&&(p[a]||(h.push(l[a]),f.push(u[d[l[a].id]]),r=p[a]=!0),++a!==g););}else h.push(t),f.push(u[d[t.id]]),p[e]=!0,y++}),f},c.prototype.degreeOrdering=function(){var t=this.nodes,n=[],r=this.degrees;return t.forEach(function(t,e){t.degree=r[e].all,n.push(t)}),n.sort(a),n},c.prototype.getType=function(){return"circular"};var s,n=c;function c(t){var e=s.call(this)||this;return e.radius=null,e.nodeSize=void 0,e.startRadius=null,e.endRadius=null,e.startAngle=0,e.endAngle=2*Math.PI,e.clockwise=!0,e.divisions=1,e.ordering=null,e.angleRatio=1,e.nodes=[],e.edges=[],e.nodeMap={},e.degrees=[],e.width=300,e.height=300,e.updateCfg(t),e}e.CircularLayout=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.feasibleTreeWithLayer=e.feasibleTree=void 0;function r(t){var e,n=new s.Graph({directed:!1}),r=t.nodes()[0],o=t.nodeCount();for(n.setNode(r,{});c(n,t)<o;)e=l(n,t),e=n.hasNode(e.v)?(0,a.slack)(t,e):-(0,a.slack)(t,e),d(n,t,e);return n}function o(e){var t,n=new s.Graph({directed:!1}),r=e.nodes()[0],o=e.nodes().filter(function(t){return!!e.node(t)}).length;for(n.setNode(r,{});u(n,e)<o;)t=l(n,e),t=n.hasNode(t.v)?(0,a.slack)(e,t):-(0,a.slack)(e,t),d(n,e,t);return n}var a=n(152),i=n(92),s=n(105),c=(e.feasibleTree=r,function(r,o){function i(n){o.nodeEdges(n).forEach(function(t){var e=t.v,e=n===e?t.w:e;r.hasNode(e)||(0,a.slack)(o,t)||(r.setNode(e,{}),r.setEdge(n,e,{}),i(e))})}return r.nodes().forEach(i),r.nodeCount()}),u=(e.feasibleTreeWithLayer=o,function(r,o){function i(n){var t;null!=(t=o.nodeEdges(n))&&t.forEach(function(t){var e=t.v,e=n===e?t.w:e;r.hasNode(e)||void 0===o.node(e).layer&&(0,a.slack)(o,t)||(r.setNode(e,{}),r.setEdge(n,e,{}),i(e))})}return r.nodes().forEach(i),r.nodeCount()}),l=function(e,n){return(0,i.minBy)(n.edges(),function(t){return e.hasNode(t.v)!==e.hasNode(t.w)?(0,a.slack)(n,t):1/0})},d=function(t,e,n){t.nodes().forEach(function(t){e.node(t).rank||(e.node(t).rank=0),e.node(t).rank+=n})};e.default={feasibleTree:r,feasibleTreeWithLayer:o}},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=this&&this.__assign||function(){return(b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},x=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||((r=r||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.DagreCompoundLayout=void 0,n(83)),w=n(315),_=n(80),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},s.prototype.init=function(t){var e=t.hiddenNodes||[],n=t.hiddenEdges||[],r=t.hiddenCombos||[];this.nodes=this.getDataByOrder((t.nodes||[]).concat(e)),this.edges=this.getDataByOrder((t.edges||[]).concat(n)),this.combos=(t.combos||[]).concat(r.map(function(t){return b(b({},t),{collapsed:!0})}))},s.prototype.execute=function(){var t,e,n=this.nodes,r=this.edges;if(n)return t=(e=this.getLayoutConfig()).graphDef,t=(0,w.buildGraph)(t,e.graphOption,e.graphSettings),e=(0,w.flatGraph)(t,!0),this.updatePosition(e),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:n,edges:r}},s.prototype.getNodePath=function(e){var t=this.nodes,r=this.combos,t=t.find(function(t){return t.id===e}),o=function(e,t){void 0===t&&(t=[]);var n=r.find(function(t){return t.id===e});return n&&(t.unshift(e),n.parentId)?o(n.parentId,t):t};return t&&t.comboId?o(t.comboId,[e]):[e]},s.prototype.getLayoutConfig=function(){var o=this.nodes,t=this.edges,i=this.combos,e=this.nodeSize,n=this.rankdir,r=this.align,a=this.edgesep,s=this.nodesep,c=this.ranksep,u=this.settings,l=(i||[]).reduce(function(t,e){var n=o.filter(function(t){return t.comboId===e.id}).map(function(t){return t.id}),r=(i||[]).filter(function(t){return t.parentId===e.id}).map(function(t){return t.id});return(n.length||r.length)&&(t[e.id]=x(x([],n,!0),r,!0)),t},{}),d=e?(0,_.isArray)(e)?function(){return e}:function(){return[e,e]}:function(t){return t&&t.size?(0,_.isArray)(t.size)?t.size:(0,_.isObject)(t.size)?[t.size.width||40,t.size.height||40]:[t.size,t.size]:[40,40]},h=(h=null==i?void 0:i[0])&&h.size?(0,_.isArray)(h.size)?h.size:[h.size,h.size]:[80,40],f=h[0],h=h[1],p=null==(p=null==(p=this.graphSettings)?void 0:p.subScene)?void 0:p.meta,g=(null==(g=i.find(function(t){return!t.collapsed}))?void 0:g.padding)||[20,20,20,20],y=g[0],m=g[1],v=g[2],g=g[3],l={compound:l,nodes:x([],(o||[]).map(function(t){var e=d(t),n=e[0],e=e[1];return b(b({},t),{width:n,height:e})}),!0),edges:x([],(t||[]).map(function(t){return b(b({},t),{v:t.source,w:t.target})}),!0)},t={expanded:(i||[]).filter(function(t){return!t.collapsed}).map(function(t){return t.id})},r={graph:{meta:{align:r,rankDir:n,nodeSep:s,edgeSep:a,rankSep:c}},subScene:{meta:{paddingTop:y||(null==p?void 0:p.paddingTop)||20,paddingRight:m||(null==p?void 0:p.paddingRight)||20,paddingBottom:v||(null==p?void 0:p.paddingBottom)||20,paddingLeft:g||(null==p?void 0:p.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:f,height:h}}},n=(0,w.mergeConfig)(u,b({},(0,w.mergeConfig)(r,w.LAYOUT_CONFIG)));return{graphDef:l,graphOption:t,graphSettings:this.graphSettings=n}},s.prototype.updatePosition=function(t){var e=t.nodes,t=t.edges;this.updateNodePosition(e,t),this.updateEdgePosition(e,t)},s.prototype.getBegin=function(t,e){var n,r,o=this.begin,i=[0,0];return o&&(r=n=1/0,t.forEach(function(t){n>t.x&&(n=t.x),t.y<r&&(r=t.y)}),e.forEach(function(t){t.points.forEach(function(t){n>t.x&&(n=t.x),t.y<r&&(r=t.y)})}),i[0]=o[0]-n,i[1]=o[1]-r),i},s.prototype.updateNodePosition=function(t,u){var l=this.combos,d=this.nodes,h=this.edges,f=this.anchorPoint,p=this.graphSettings,g=this.getBegin(t,u);t.forEach(function(r){var o,t,e,i=r.x,a=r.y,n=r.id,s=r.type,c=r.coreBox;s===w.HierarchyNodeType.META&&n!==w.ROOT_NAME?(e=l.findIndex(function(t){return t.id===n}),t=null==(t=null==p?void 0:p.subScene)?void 0:t.meta,l[e].offsetX=i+g[0],l[e].offsetY=a+g[1],l[e].fixSize=[c.width,c.height],l[e].fixCollapseSize=[c.width,c.height],r.expanded?l[e].padding=[null==t?void 0:t.paddingTop,null==t?void 0:t.paddingRight,null==t?void 0:t.paddingBottom,null==t?void 0:t.paddingLeft]:l[e].padding=[0,0,0,0]):s===w.HierarchyNodeType.OP&&(e=d.findIndex(function(t){return t.id===n}),d[e].x=i+g[0],d[e].y=a+g[1],f)&&(o=[],c=u.filter(function(t){return t.v===n}),t=u.filter(function(t){return t.w===n}),0<c.length&&c.forEach(function(t){var e=t.points[0],n=(e.x-i)/r.width+.5;o.push([n,(e.y-a)/r.height+.5]),t.baseEdgeList.forEach(function(e){var t=h.find(function(t){return t.source===e.v&&t.target===e.w});t&&(t.sourceAnchor=o.length-1)})}),0<t.length&&t.forEach(function(t){var e=t.points[t.points.length-1],n=(e.x-i)/r.width+.5;o.push([n,(e.y-a)/r.height+.5]),t.baseEdgeList.forEach(function(e){var t=h.find(function(t){return t.source===e.v&&t.target===e.w});t&&(t.targetAnchor=o.length-1)})}),d[e].anchorPoints=0<o.length?o:d[e].anchorPoints||[])})},s.prototype.updateEdgePosition=function(u,t){var l=this,d=l.combos,e=l.edges,n=l.controlPoints,h=this.getBegin(u,t);n&&(d.forEach(function(t){t.inEdges=[],t.outEdges=[]}),e.forEach(function(e){var t,n,r,o,i=u.find(function(t){return t.id===e.source}),a=u.find(function(t){return t.id===e.target}),s=[],s=(s=(i&&a?(0,w.getEdges)(null==i?void 0:i.id,null==a?void 0:a.id,u):(t=l.getNodePath(e.source),n=l.getNodePath(e.target),r=t.reverse().slice(i?0:1).find(function(e){return u.find(function(t){return t.id===e})}),o=n.reverse().slice(a?0:1).find(function(e){return u.find(function(t){return t.id===e})}),i=u.find(function(t){return t.id===r}),a=u.find(function(t){return t.id===o}),(0,w.getEdges)(null==i?void 0:i.id,null==a?void 0:a.id,u,{v:e.source,w:e.target}))).reduce(function(t,e){return x(x([],t,!0),e.points.map(function(t){return b(b({},t),{x:t.x+h[0],y:t.y+h[1]})}),!0)},[])).slice(1,-1);if(e.controlPoints=s,(null==a?void 0:a.type)===w.NodeType.META){var c=d.findIndex(function(t){return t.id===(null==a?void 0:a.id)});if(!d[c]||null!=(t=d[c].inEdges)&&t.some(function(t){return t.source===i.id&&t.target===a.id}))return;null!=(n=d[c].inEdges)&&n.push({source:i.id,target:a.id,controlPoints:s})}(null==i?void 0:i.type)===w.NodeType.META&&(c=d.findIndex(function(t){return t.id===(null==i?void 0:i.id)}),!d[c]||null!=(t=d[c].outEdges)&&t.some(function(t){return t.source===i.id&&t.target===a.id})||null!=(n=d[c].outEdges)&&n.push({source:i.id,target:a.id,controlPoints:s}))}))},s.prototype.getType=function(){return"dagreCompound"},s.prototype.getDataByOrder=function(t){return t.every(function(t){return void 0!==t.layoutOrder})||t.forEach(function(t,e){t.layoutOrder=e}),t.sort(function(t,e){return t.layoutOrder-e.layoutOrder})},s);function s(t){var e=o.call(this)||this;return e.rankdir="TB",e.nodesep=50,e.edgesep=5,e.ranksep=50,e.controlPoints=!0,e.anchorPoint=!0,e.nodes=[],e.edges=[],e.combos=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}e.DagreCompoundLayout=n},function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(316),e)},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=(Object.defineProperty(e,"__esModule",{value:!0}),e.ConcentricLayout=void 0,n(80)),n=(o=n(83).Base,i(a,o),a.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},a.prototype.execute=function(){var o=this,t=o.nodes,e=o.edges,n=t.length;if(0!==n){o.width||"undefined"==typeof window||(o.width=window.innerWidth),o.height||"undefined"==typeof window||(o.height=window.innerHeight),o.center||(o.center=[o.width/2,o.height/2]);var i=o.center;if(1===n)return t[0].x=i[0],t[0].y=i[1],void(null!=(n=o.onLayoutEnd)&&n.call(o));var r,n=o.nodeSize,a=o.nodeSpacing,s=[],c=0,u=(0,b.isArray)(n)?Math.max(n[0],n[1]):n,l=((0,b.isArray)(a)?c=Math.max(a[0],a[1]):(0,b.isNumber)(a)&&(c=a),t.forEach(function(t){s.push(t);var e=u;(0,b.isArray)(t.size)?e=Math.max(t.size[0],t.size[1]):(0,b.isNumber)(t.size)?e=t.size:(0,b.isObject)(t.size)&&(e=Math.max(t.size.width,t.size.height)),u=Math.max(u,e),(0,b.isFunction)(a)&&(c=Math.max(a(t),c))}),o.clockwise=void 0!==o.counterclockwise?!o.counterclockwise:o.clockwise,{}),d=(s.forEach(function(t,e){t.id,l[t.id]=e}),"degree"!==o.sortBy&&(0,b.isString)(o.sortBy)&&void 0!==s[0][o.sortBy]||(o.sortBy="degree",(0,b.isNumber)(t[0].degree))||(r=(0,b.getDegree)(t.length,l,e),s.forEach(function(t,e){t.degree=r[e].all})),s.sort(function(t,e){return e[o.sortBy]-t[o.sortBy]}),o.maxValueNode=s[0],o.maxLevelDiff=o.maxLevelDiff||o.maxValueNode[o.sortBy]/4,[[]]),h=d[0],f=(s.forEach(function(t){var e;0<h.length&&(e=Math.abs(h[0][o.sortBy]-t[o.sortBy]),o.maxLevelDiff)&&e>=o.maxLevelDiff&&(h=[],d.push(h)),h.push(t)}),u+(c||o.minNodeSpacing)),p=(o.preventOverlap||(n=0<d.length&&1<d[0].length,n=(Math.min(o.width,o.height)/2-f)/(d.length+(n?1:0)),f=Math.min(f,n)),0);if(d.forEach(function(t){var e,n=o.sweep,n=(void 0===n&&(n=2*Math.PI-2*Math.PI/t.length),t.dTheta=n/Math.max(1,t.length-1));1<t.length&&o.preventOverlap&&(e=Math.cos(n)-Math.cos(0),n=Math.sin(n)-Math.sin(0),e=Math.sqrt(f*f/(e*e+n*n)),p=Math.max(e,p)),t.r=p,p+=f}),o.equidistant){for(var g=0,y=0,m=0;m<d.length;m++)var v=d[m].r-y,g=Math.max(g,v);y=0,d.forEach(function(t,e){0===e&&(y=t.r),t.r=y,y+=g})}return d.forEach(function(t){var n=t.dTheta,r=t.r;t.forEach(function(t,e){e=o.startAngle+(o.clockwise?1:-1)*n*e;t.x=i[0]+r*Math.cos(e),t.y=i[1]+r*Math.sin(e)})}),o.onLayoutEnd&&o.onLayoutEnd(),{nodes:t,edges:e}}null!=(n=o.onLayoutEnd)&&n.call(o)},a.prototype.getType=function(){return"concentric"},a);function a(t){var e=o.call(this)||this;return e.nodeSize=30,e.minNodeSpacing=10,e.nodeSpacing=10,e.preventOverlap=!1,e.equidistant=!1,e.startAngle=1.5*Math.PI,e.clockwise=!0,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e.onLayoutEnd=function(){},e.updateCfg(t),e}e.ConcentricLayout=n},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.MDSLayout=void 0,n(222)),s=n(80),n=(o=n(83).Base,i(c,o),c.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},c.prototype.execute=function(){var t,e,n=this.nodes,r=this.edges,r=void 0===r?[]:r,o=this.center;if(n&&0!==n.length)return 1===n.length?(n[0].x=o[0],n[0].y=o[1],void(this.onLayoutEnd&&this.onLayoutEnd())):(e=this.linkDistance,t=(0,s.getAdjMatrix)({nodes:n,edges:r},!1),t=(0,s.floydWarshall)(t),this.handleInfinity(t),t=(0,s.scaleMatrix)(t,e),this.scaledDistances=t,e=this.runMDS(),(this.positions=e).forEach(function(t,e){n[e].x=t[0]+o[0],n[e].y=t[1]+o[1]}),this.onLayoutEnd&&this.onLayoutEnd(),{nodes:n,edges:r});this.onLayoutEnd&&this.onLayoutEnd()},c.prototype.runMDS=function(){var t=this.scaledDistances,t=a.Matrix.mul(a.Matrix.pow(t,2),-.5),e=t.mean("row"),n=t.mean("column"),r=t.mean(),r=(t.add(r).subRowVector(e).subColumnVector(n),new a.SingularValueDecomposition(t)),o=a.Matrix.sqrt(r.diagonalMatrix).diagonal();return r.leftSingularVectors.toJSON().map(function(t){return a.Matrix.mul([t],[o]).toJSON()[0].splice(0,2)})},c.prototype.handleInfinity=function(r){var o=-999999;r.forEach(function(t){t.forEach(function(t){t!==1/0&&o<t&&(o=t)})}),r.forEach(function(t,n){t.forEach(function(t,e){t===1/0&&(r[n][e]=o)})})},c.prototype.getType=function(){return"mds"},c);function c(t){var e=o.call(this)||this;return e.center=[0,0],e.linkDistance=50,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(t),e}e.MDSLayout=n},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanLayout=void 0,n(83)),f=n(80),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},s.prototype.execute=function(){var t,n,r,o=this,e=this.nodes;if(void 0!==this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval),e&&0!==e.length)return this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),this.center||(this.center=[this.width/2,this.height/2]),t=this.center,1===e.length?(e[0].x=t[0],e[0].y=t[1],void(null!=(t=this.onLayoutEnd)&&t.call(this))):(n={},r={},e.forEach(function(t,e){(0,f.isNumber)(t.x)||(t.x=Math.random()*o.width),(0,f.isNumber)(t.y)||(t.y=Math.random()*o.height),n[t.id]=t,r[t.id]=e}),this.nodeMap=n,this.nodeIdxMap=r,this.run());null!=(t=this.onLayoutEnd)&&t.call(this)},s.prototype.run=function(){var e=this,t=e.nodes;if(t){var n=e.edges,r=e.maxIteration,o=e.workerEnabled,i=e.animate,a={};if(e.clustering&&t.forEach(function(t){void 0===a[t.cluster]&&(a[t.cluster]={name:t.cluster,cx:0,cy:0,count:0})}),o||!i){for(var s=0;s<r;s++)e.runOneStep(a);null!=(o=e.onLayoutEnd)&&o.call(e)}else{if("undefined"==typeof window)return;var c=0;this.timeInterval=window.setInterval(function(){var t;e.runOneStep(a),++c>=r&&(null!=(t=e.onLayoutEnd)&&t.call(e),window.clearInterval(e.timeInterval))},0)}return{nodes:t,edges:n}}},s.prototype.runOneStep=function(i){var t=this.nodes;if(t){var e=this.edges,r=this.center,o=this.gravity,a=this.speed,n=this.clustering,s=this.height*this.width,c=Math.sqrt(s)/10,s=s/(t.length+1),u=Math.sqrt(s),l=[];if(t.forEach(function(t,e){l[e]={x:0,y:0}}),this.applyCalculate(t,e,l,u,s),n){for(var d in i)i[d].cx=0,i[d].cy=0,i[d].count=0;for(var d in t.forEach(function(t){var e=i[t.cluster];(0,f.isNumber)(t.x)&&(e.cx+=t.x),(0,f.isNumber)(t.y)&&(e.cy+=t.y),e.count++}),i)i[d].cx/=i[d].count,i[d].cy/=i[d].count;var h=this.clusterGravity||o;t.forEach(function(t,e){var n,r,o;(0,f.isNumber)(t.x)&&(0,f.isNumber)(t.y)&&(n=i[t.cluster],r=Math.sqrt((t.x-n.cx)*(t.x-n.cx)+(t.y-n.cy)*(t.y-n.cy)),l[e].x-=(o=u*h)*(t.x-n.cx)/r,l[e].y-=o*(t.y-n.cy)/r)})}t.forEach(function(t,e){var n;(0,f.isNumber)(t.x)&&(0,f.isNumber)(t.y)&&(l[e].x-=(n=.01*u*o)*(t.x-r[0]),l[e].y-=n*(t.y-r[1]))}),t.forEach(function(t,e){var n,r;(0,f.isNumber)(t.fx)&&(0,f.isNumber)(t.fy)?(t.x=t.fx,t.y=t.fy):(0,f.isNumber)(t.x)&&(0,f.isNumber)(t.y)&&0<(n=Math.sqrt(l[e].x*l[e].x+l[e].y*l[e].y))&&(r=Math.min(a/800*c,n),t.x+=l[e].x/n*r,t.y+=l[e].y/n*r)}),null!=(e=this.tick)&&e.call(this)}},s.prototype.applyCalculate=function(t,e,n,r,o){this.calRepulsive(t,n,o),e&&this.calAttractive(e,n,r)},s.prototype.calRepulsive=function(t,a,s){t.forEach(function(o,i){a[i]={x:0,y:0},t.forEach(function(t,e){var n,r;i!==e&&(0,f.isNumber)(o.x)&&(0,f.isNumber)(t.x)&&(0,f.isNumber)(o.y)&&(0,f.isNumber)(t.y)&&(0===(n=(r=o.x-t.x)*r+(t=o.y-t.y)*t)&&(n=1,t=r=.01*(e<i?1:-1)),a[i].x+=r*(e=s/n),a[i].y+=t*e)})})},s.prototype.calAttractive=function(t,a,s){var c=this;t.forEach(function(t){var e,n,r,o,i=(0,f.getEdgeTerminal)(t,"source"),t=(0,f.getEdgeTerminal)(t,"target");i&&t&&(e=c.nodeIdxMap[i])!==(n=c.nodeIdxMap[t])&&(i=c.nodeMap[i],t=c.nodeMap[t],(0,f.isNumber)(t.x))&&(0,f.isNumber)(i.x)&&(0,f.isNumber)(t.y)&&(0,f.isNumber)(i.y)&&(r=t.x-i.x,t=t.y-i.y,i=Math.sqrt(r*r+t*t),a[n].x-=r/i*(o=i*i/s),a[n].y-=t/i*o,a[e].x+=r/i*o,a[e].y+=t/i*o)})},s.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},s.prototype.destroy=function(){this.stop(),this.tick=null,this.nodes=null,this.edges=null,this.destroyed=!0},s.prototype.getType=function(){return"fruchterman"},s);function s(t){var e=o.call(this)||this;return e.maxIteration=1e3,e.workerEnabled=!1,e.gravity=10,e.speed=5,e.clustering=!1,e.clusterGravity=10,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.onLayoutEnd=function(){},e.tick=function(){},e.animate=!0,e.updateCfg(t),e}e.FruchtermanLayout=n},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),S=this&&this.__awaiter||function(t,a,s,c){return new(s=s||Promise)(function(n,e){function r(t){try{i(c.next(t))}catch(t){e(t)}}function o(t){try{i(c.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((c=c.apply(t,a||[])).next())})},O=this&&this.__generator||function(r,o){var i,a,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},u={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function t(n){return function(t){var e=[n,t];if(i)throw new TypeError("Generator is already executing.");for(;c=u&&e[u=0]?0:c;)try{if(i=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,a=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!((s=0<(s=c.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))c.label=e[1];else if(6===e[0]&&c.label<s[1])c.label=s[1],s=e;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(e)}}e=o.call(r,c)}catch(t){e=[6,t],a=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.FruchtermanGPULayout=void 0,n(83)),M=n(80),k=n(224),C=n(210),A=n(339),I=n(129),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},s.prototype.execute=function(){return S(this,void 0,void 0,function(){var e,n,r,o,i,a=this;return O(this,function(t){switch(t.label){case 0:return(n=(e=this).nodes)&&0!==n.length?(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),r=e.center,1===n.length?(n[0].x=r[0],n[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),[2]):(o={},i={},n.forEach(function(t,e){(0,M.isNumber)(t.x)||(t.x=Math.random()*a.width),(0,M.isNumber)(t.y)||(t.y=Math.random()*a.height),o[t.id]=t,i[t.id]=e}),e.nodeMap=o,e.nodeIdxMap=i,[4,e.run()])):(e.onLayoutEnd&&e.onLayoutEnd(),[2]);case 1:return t.sent(),[2]}})})},s.prototype.executeWithWorker=function(s,c){return S(this,void 0,void 0,function(){var e,n,r,o,i,a=this;return O(this,function(t){switch(t.label){case 0:return n=(e=this).nodes,r=e.center,n&&0!==n.length?1===n.length?(n[0].x=r[0],n[0].y=r[1],[2]):(o={},i={},n.forEach(function(t,e){(0,M.isNumber)(t.x)||(t.x=Math.random()*a.width),(0,M.isNumber)(t.y)||(t.y=Math.random()*a.height),o[t.id]=t,i[t.id]=e}),e.nodeMap=o,e.nodeIdxMap=i,[4,e.run(s,c)]):[2];case 1:return t.sent(),[2]}})})},s.prototype.run=function(_,E){return S(this,void 0,void 0,function(){var e,n,o,r,i,a,s,c,u,l,d,h,f,p,g,y,m,v,b,x,w=this;return O(this,function(t){switch(t.label){case 0:for(n=(e=this).nodes,p=e.edges,o=e.maxIteration,r=e.center,a=e.height*e.width,i=Math.sqrt(a)/10,a=a/(n.length+1),s=Math.sqrt(a),c=e.speed,u=e.clustering,h=(0,C.attributesToTextureData)([e.clusterField],n),l=h.array,d=h.count,n.forEach(function(t,e){var n=0,r=0;(0,M.isNumber)(t.fx)&&(0,M.isNumber)(t.fy)&&(n=t.fx||.001,r=t.fy||.001),l[4*e+1]=n,l[4*e+2]=r}),h=n.length,p=(0,C.buildTextureData)(n,p),f=p.maxEdgePerVetex,p=p.array,g=e.workerEnabled,g=g?k.World.create({canvas:_,engineOptions:{supportCompute:!0}}):k.World.create({engineOptions:{supportCompute:!0}}),y=e.onLayoutEnd,m=[],v=0;v<d;v++)m.push(0,0,0,0);return b=g.createKernel(A.fruchtermanBundle).setDispatch([h,1,1]).setBinding({u_Data:p,u_K:s,u_K2:a,u_Gravity:e.gravity,u_ClusterGravity:e.clusterGravity||e.gravity||1,u_Speed:c,u_MaxDisplace:i,u_Clustering:u?1:0,u_Center:r,u_AttributeArray:l,u_ClusterCenters:m,MAX_EDGE_PER_VERTEX:f,VERTEX_COUNT:h}),u&&(x=g.createKernel(A.clusterBundle).setDispatch([d,1,1]).setBinding({u_Data:p,u_NodeAttributes:l,u_ClusterCenters:m,VERTEX_COUNT:h,CLUSTER_COUNT:d})),[4,S(w,void 0,void 0,function(){var e,r;return O(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<o?[4,b.execute()]:[3,6];case 2:return t.sent(),u?(x.setBinding({u_Data:b}),[4,x.execute()]):[3,4];case 3:t.sent(),b.setBinding({u_ClusterCenters:x}),t.label=4;case 4:b.setBinding({u_MaxDisplace:i*=.99}),t.label=5;case 5:return e++,[3,1];case 6:return[4,b.getOutput()];case 7:return r=t.sent(),_?E.postMessage({type:I.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:r}):n.forEach(function(t,e){var n=r[4*e],e=r[4*e+1];t.x=n,t.y=e}),y&&y(),[2]}})})];case 1:return t.sent(),[2]}})})},s.prototype.getType=function(){return"fruchterman-gpu"},s);function s(t){var e=o.call(this)||this;return e.maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterField="cluster",e.clusterGravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}e.FruchtermanGPULayout=n},function(t,e,n){var r=n(132).default,o=n(319);t.exports=function(t){t=o(t,"string");return"symbol"==r(t)?t:t+""},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){n=n(321).Symbol;t.exports=n},function(e,t,n){!function(t){t="object"==typeof t&&t&&t.Object===Object&&t;e.exports=t}.call(this,n(116))},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.arrayToTextureData=e.attributesToTextureData=e.buildTextureDataWithTwoEdgeAttr=e.buildTextureData=e.proccessToFunc=void 0;var r=n(80),m=n(150);e.proccessToFunc=function(t,e){return t?(0,r.isNumber)(t)?function(){return t}:t:function(){return e||1}},e.buildTextureData=function(t,e){for(var n=[],r=[],o={},i=0,i=0;i<t.length;i++){var a=t[i];o[a.id]=i,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(i=0;i<e.length;i++){var s=e[i],c=(0,m.getEdgeTerminal)(s,"source"),s=(0,m.getEdgeTerminal)(s,"target");isNaN(o[c])||isNaN(o[s])||(r[o[c]].push(o[s]),r[o[s]].push(o[c]))}var u=0;for(i=0;i<t.length;i++){var l=r[i],d=l.length;n[4*i+2]=n.length,n[4*i+3]=d;for(var u=Math.max(u,d),h=0;h<d;++h){var f=l[h];n.push(+f)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:u,array:new Float32Array(n)}},e.buildTextureDataWithTwoEdgeAttr=function(t,e,n,r){for(var o=[],i=[],a={},s=0,s=0;s<t.length;s++){var c=t[s];a[c.id]=s,o.push(c.x),o.push(c.y),o.push(0),o.push(0),i.push([])}for(s=0;s<e.length;s++){var u=e[s],l=(0,m.getEdgeTerminal)(u,"source"),d=(0,m.getEdgeTerminal)(u,"target");i[a[l]].push(a[d]),i[a[l]].push(n(u)),i[a[l]].push(r(u)),i[a[l]].push(0),i[a[d]].push(a[l]),i[a[d]].push(n(u)),i[a[d]].push(r(u)),i[a[d]].push(0)}var h=0;for(s=0;s<t.length;s++){var f=i[s],p=f.length;o[4*s+2]=o.length+1048576*p/4,o[4*s+3]=0;for(var h=Math.max(h,p/4),g=0;g<p;++g){var y=f[g];o.push(+y)}}for(;o.length%4!=0;)o.push(0);return{maxEdgePerVetex:h,array:new Float32Array(o)}},e.attributesToTextureData=function(t,e){var r=[],o=t.length,i={};return e.forEach(function(n){t.forEach(function(t,e){if(void 0===i[n[t]]&&(i[n[t]]=Object.keys(i).length),r.push(i[n[t]]),e===o-1)for(;r.length%4!=0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(i).length}},e.arrayToTextureData=function(t){for(var r=[],o=t.length,e=t[0].length,n=0;n<e;n++)!function(n){t.forEach(function(t,e){if(r.push(t[n]),e===o-1)for(;r.length%4!=0;)r.push(0)})}(n);return new Float32Array(r)}},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),k=this&&this.__awaiter||function(t,a,s,c){return new(s=s||Promise)(function(n,e){function r(t){try{i(c.next(t))}catch(t){e(t)}}function o(t){try{i(c.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((c=c.apply(t,a||[])).next())})},C=this&&this.__generator||function(r,o){var i,a,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},u={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function t(n){return function(t){var e=[n,t];if(i)throw new TypeError("Generator is already executing.");for(;c=u&&e[u=0]?0:c;)try{if(i=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,a=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!((s=0<(s=c.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))c.label=e[1];else if(6===e[0]&&c.label<s[1])c.label=s[1],s=e;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(e)}}e=o.call(r,c)}catch(t){e=[6,t],a=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}},a=(Object.defineProperty(e,"__esModule",{value:!0}),e.GForceGPULayout=void 0,n(83)),A=n(80),I=n(224),T=n(210),j=n(150),N=n(340),D=n(129),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},s.prototype.execute=function(){return k(this,void 0,void 0,function(){var n,e,r,o,i;return C(this,function(t){switch(t.label){case 0:return(e=(n=this).nodes)&&0!==e.length?(n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]),r=n.center,1===e.length?(e[0].x=r[0],e[0].y=r[1],n.onLayoutEnd&&n.onLayoutEnd(),[2]):(o={},i={},e.forEach(function(t,e){(0,A.isNumber)(t.x)||(t.x=Math.random()*n.width),(0,A.isNumber)(t.y)||(t.y=Math.random()*n.height),o[t.id]=t,i[t.id]=e}),n.nodeMap=o,n.nodeIdxMap=i,n.nodeStrength=(0,T.proccessToFunc)(n.nodeStrength,1),n.edgeStrength=(0,T.proccessToFunc)(n.edgeStrength,1),[4,n.run()])):(n.onLayoutEnd&&n.onLayoutEnd(),[2]);case 1:return t.sent(),[2]}})})},s.prototype.executeWithWorker=function(t,e){var n,r,o=this,i=o.nodes,a=o.center;i&&0!==i.length&&(1===i.length?(i[0].x=a[0],i[0].y=a[1]):(n={},r={},i.forEach(function(t,e){(0,A.isNumber)(t.x)||(t.x=Math.random()*o.width),(0,A.isNumber)(t.y)||(t.y=Math.random()*o.height),n[t.id]=t,r[t.id]=e}),o.nodeMap=n,o.nodeIdxMap=r,o.nodeStrength=(0,T.proccessToFunc)(o.nodeStrength,1),o.edgeStrength=(0,T.proccessToFunc)(o.edgeStrength,1),o.run(t,e)))},s.prototype.run=function(O,M){return k(this,void 0,void 0,function(){var o,i,a,e,n,r,s,c,u,l,d,h,f,p,g,y,m,v,b,x,w,_,E,S=this;return C(this,function(t){switch(t.label){case 0:for(i=(o=this).nodes,y=o.edges,a=o.maxIteration,o.width||"undefined"==typeof window||(o.width=window.innerWidth),o.height||"undefined"==typeof window||(o.height=window.innerHeight),e=i.length,o.linkDistance=(0,T.proccessToFunc)(o.linkDistance),o.edgeStrength=(0,T.proccessToFunc)(o.edgeStrength),r=(0,T.buildTextureDataWithTwoEdgeAttr)(i,y,o.linkDistance,o.edgeStrength),n=r.maxEdgePerVetex,r=r.array,o.degrees=(0,j.getDegree)(i.length,o.nodeIdxMap,y).map(function(t){return t.all}),s=[],c=[],u=[],l=[],d=[],h=[],f=[],o.getMass||(o.getMass=function(t){return o.degrees[o.nodeIdxMap[t.id]]||1}),p=o.gravity,g=o.center,i.forEach(function(t,e){s.push(o.getMass(t)),c.push(o.nodeStrength(t)),o.degrees[e]||(o.degrees[e]=0);var n=[g[0],g[1],p];o.getCenter&&(e=o.getCenter(t,o.degrees[e]))&&(0,A.isNumber)(e[0])&&(0,A.isNumber)(e[1])&&(0,A.isNumber)(e[2])&&(n=e),u.push(n[0]),l.push(n[1]),d.push(n[2]),(0,A.isNumber)(t.fx)&&(0,A.isNumber)(t.fy)?(h.push(t.fx||.001),f.push(t.fy||.001)):(h.push(0),f.push(0))}),y=(0,T.arrayToTextureData)([s,o.degrees,c,h]),m=(0,T.arrayToTextureData)([u,l,d,f]),v=o.workerEnabled,v=v?I.World.create({canvas:O,engineOptions:{supportCompute:!0}}):I.World.create({engineOptions:{supportCompute:!0}}),b=o.onLayoutEnd,x=[],r.forEach(function(t){x.push(t)}),w=0;w<4;w++)x.push(0);return _=v.createKernel(N.gForceBundle).setDispatch([e,1,1]).setBinding({u_Data:r,u_damping:o.damping,u_maxSpeed:o.maxSpeed,u_minMovement:o.minMovement,u_coulombDisScale:o.coulombDisScale,u_factor:o.factor,u_NodeAttributeArray1:y,u_NodeAttributeArray2:m,MAX_EDGE_PER_VERTEX:n,VERTEX_COUNT:e,u_AveMovement:x,u_interval:o.interval}),E=v.createKernel(N.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:r,VERTEX_COUNT:e,u_AveMovement:[0,0,0,0]}),[4,k(S,void 0,void 0,function(){var e,n,r;return C(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<a?[4,_.execute()]:[3,5];case 2:return t.sent(),E.setBinding({u_Data:_}),[4,E.execute()];case 3:t.sent(),n=Math.max(.02,o.interval-.002*e),_.setBinding({u_interval:n,u_AveMovement:E}),t.label=4;case 4:return e++,[3,1];case 5:return[4,_.getOutput()];case 6:return r=t.sent(),O?M.postMessage({type:D.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:r}):i.forEach(function(t,e){var n=r[4*e],e=r[4*e+1];t.x=n,t.y=e}),b&&b(),[2]}})})];case 1:return t.sent(),[2]}})})},s.prototype.getType=function(){return"gForce-gpu"},s);function s(t){var e=o.call(this)||this;return e.maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(t),e}e.GForceGPULayout=n},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=(Object.defineProperty(e,"__esModule",{value:!0}),e.ComboForceLayout=void 0,n(83)),w=n(80),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},s.prototype.execute=function(){var t=this.nodes,e=this.center;this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},t&&0!==t.length&&(1===t.length?(t[0].x=e[0],t[0].y=e[1]):(this.initVals(),this.run())),this.onLayoutEnd&&this.onLayoutEnd()},s.prototype.run=function(){var t=this,e=t.nodes,n=t.previousLayouted?t.maxIteration/5:t.maxIteration,r=(t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center),o=t.velocityDecay,i=t.comboMap;t.previousLayouted||t.initPos(i);for(var a=0;a<n;a++)!function(){var n=[];e.forEach(function(t,e){n[e]={x:0,y:0}}),t.applyCalculate(n),t.applyComboCenterForce(n),e.forEach(function(t,e){(0,w.isNumber)(t.x)&&(0,w.isNumber)(t.y)&&(t.x+=n[e].x*o,t.y+=n[e].y*o)}),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()}();var s=[0,0],c=(e.forEach(function(t){(0,w.isNumber)(t.x)&&(0,w.isNumber)(t.y)&&(s[0]+=t.x,s[1]+=t.y)}),s[0]/=e.length,s[1]/=e.length,[r[0]-s[0],r[1]-s[1]]);e.forEach(function(t,e){(0,w.isNumber)(t.x)&&(0,w.isNumber)(t.y)&&(t.x+=c[0],t.y+=c[1])}),t.combos.forEach(function(t){var e=i[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)}),t.previousLayouted=!0},s.prototype.initVals=function(){var t=this.edges,e=this.nodes,n=this.combos,r={},o={},i={},a=(e.forEach(function(t,e){o[t.id]=t,i[t.id]=e}),this.nodeMap=o,this.indexMap=i,{}),e=(n.forEach(function(t){a[t.id]=t}),this.oriComboMap=a,this.comboMap=this.getComboMap(),this.preventOverlap),n=(this.preventComboOverlap=this.preventComboOverlap||e,this.preventNodeOverlap=this.preventNodeOverlap||e,this.collideStrength);n&&(this.comboCollideStrength=n,this.nodeCollideStrength=n),this.comboCollideStrength=this.comboCollideStrength||0,this.nodeCollideStrength=this.nodeCollideStrength||0;for(var s=0;s<t.length;++s){var c=(0,w.getEdgeTerminal)(t[s],"source"),u=(0,w.getEdgeTerminal)(t[s],"target");r[c]?r[c]++:r[c]=1,r[u]?r[u]++:r[u]=1}for(var l=[],s=0;s<t.length;++s)c=(0,w.getEdgeTerminal)(t[s],"source"),u=(0,w.getEdgeTerminal)(t[s],"target"),l[s]=r[c]/(r[c]+r[u]);this.bias=l;var d,h,f=this.nodeSize,p=this.nodeSpacing,e=(0,w.isNumber)(p)?function(){return p}:(0,w.isFunction)(p)?p:function(){return 0};this.nodeSpacing=e,n=f?(0,w.isFunction)(f)?function(t){return f(t)}:(0,w.isArray)(f)?(d=(f[0]>f[1]?f[0]:f[1])/2,function(t){return d}):(h=f/2,function(t){return h}):function(t){return t.size?(0,w.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2:(0,w.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)/2:t.size/2:10},this.nodeSize=n;var g=this.comboSpacing,e=(0,w.isNumber)(g)?function(){return g}:(0,w.isFunction)(g)?g:function(){return 0};this.comboSpacing=e;var y=this.comboPadding,n=(0,w.isNumber)(y)?function(){return y}:(0,w.isArray)(y)?function(){return Math.max.apply(null,y)}:(0,w.isFunction)(y)?y:function(){return 0};this.comboPadding=n;var m=(m=this.linkDistance)||10,e=(0,w.isNumber)(m)?function(t){return m}:m;this.linkDistance=e;var v=(v=this.edgeStrength)||1,n=(0,w.isNumber)(v)?function(t){return v}:v;this.edgeStrength=n;var b=(b=this.nodeStrength)||30,e=(0,w.isNumber)(b)?function(t){return b}:b;this.nodeStrength=e},s.prototype.initPos=function(o){this.nodes.forEach(function(t,e){var n=t.comboId,r=o[n];n&&r?(t.x=r.cx+100/(e+1),t.y=r.cy+100/(e+1)):(t.x=100/(e+1),t.y=100/(e+1))})},s.prototype.getComboMap=function(){var o=this,i=o.nodeMap,t=o.comboTrees,a=o.oriComboMap,s={};return(t||[]).forEach(function(t){var r=[];(0,w.traverseTreeUp)(t,function(t){var n,e;return"node"!==t.itemType&&a[t.id]&&(void 0===s[t.id]&&(e={id:t.id,name:t.id,cx:0,cy:0,count:0,depth:o.oriComboMap[t.id].depth||0,children:[]},s[t.id]=e),(e=t.children)&&e.forEach(function(t){if(!s[t.id]&&!i[t.id])return!0;r.push(t)}),(n=s[t.id]).cx=0,(n.cy=0)===r.length&&(n.empty=!0,e=a[t.id],n.cx=e.x,n.cy=e.y),r.forEach(function(t){var e;n.count++,"node"!==t.itemType?((0,w.isNumber)((e=s[t.id]).cx)&&(n.cx+=e.cx),(0,w.isNumber)(e.cy)&&(n.cy+=e.cy)):(e=i[t.id])&&((0,w.isNumber)(e.x)&&(n.cx+=e.x),(0,w.isNumber)(e.y))&&(n.cy+=e.y)}),n.cx/=n.count||1,n.cy/=n.count||1,n.children=r),!0})}),s},s.prototype.applyComboCenterForce=function(u){var t=this.gravity,l=this.comboGravity||t,d=this.alpha,t=this.comboTrees,h=this.indexMap,f=this.nodeMap,p=this.comboMap;(t||[]).forEach(function(t){(0,w.traverseTreeUp)(t,function(t){var i,a,s,c;return"node"!==t.itemType&&p[t.id]&&(i=p[t.id],a=(i.depth+1)/10*.5,s=i.cx,c=i.cy,i.cx=0,i.cy=0,i.children.forEach(function(t){var e,n,r,o;"node"!==t.itemType?((e=p[t.id])&&(0,w.isNumber)(e.cx)&&(i.cx+=e.cx),e&&(0,w.isNumber)(e.cy)&&(i.cy+=e.cy)):(t=(e=f[t.id]).x-s||.005,n=e.y-c||.005,r=Math.sqrt(t*t+n*n),o=h[e.id],u[o].x-=t*(t=l*d/r*a),u[o].y-=n*t,(0,w.isNumber)(e.x)&&(i.cx+=e.x),(0,w.isNumber)(e.y)&&(i.cy+=e.y))}),i.cx/=i.count||1,i.cy/=i.count||1),!0})})},s.prototype.applyCalculate=function(t){var e=this.comboMap,n=this.nodes,s={};n.forEach(function(i,a){n.forEach(function(t,e){var n,r,o;a<e||(r=(e=i.x-t.x||.005)*e+(n=i.y-t.y||.005)*n,o=Math.sqrt(r),r<1&&(r=o),s["".concat(i.id,"-").concat(t.id)]={vx:e,vy:n,vl2:r,vl:o},s["".concat(t.id,"-").concat(i.id)]={vl2:r,vl:o,vx:-e,vy:-n})})}),this.updateComboSizes(e),this.calRepulsive(t,s),this.calAttractive(t,s),this.preventComboOverlap&&this.comboNonOverlapping(t,e)},s.prototype.updateComboSizes=function(r){var o=this,t=o.comboTrees,a=o.nodeMap,s=o.nodeSize,c=o.comboSpacing,u=o.comboPadding;(t||[]).forEach(function(t){var n=[];(0,w.traverseTreeUp)(t,function(t){if("node"!==t.itemType){var i=r[t.id];if(!i)return!1;var e=t.children,e=(e&&e.forEach(function(t){(r[t.id]||a[t.id])&&n.push(t)}),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0,n.forEach(function(t){var e,n,r,o;return"node"!==t.itemType||!(t=a[t.id])||(e=s(t),n=t.x-e,r=t.y-e,o=t.x+e,t=t.y+e,i.minX>n&&(i.minX=n),i.minY>r&&(i.minY=r),i.maxX<o&&(i.maxX=o),void(i.maxY<t&&(i.maxY=t)))}),o.oriComboMap[t.id].size||10),t=((0,w.isArray)(e)&&(e=e[0]),Math.max(i.maxX-i.minX,i.maxY-i.minY,e));i.r=t/2+c(i)/2+u(i)}return!0})})},s.prototype.comboNonOverlapping=function(y,m){var t=this.comboTree,v=this.comboCollideStrength,b=this.indexMap,x=this.nodeMap;(0,w.traverseTreeUp)(t,function(t){var e;return!(!m[t.id]&&!x[t.id]&&"comboTreeRoot"!==t.id||((e=t.children)&&1<e.length&&e.forEach(function(f,p){if("node"===f.itemType)return!1;var g=m[f.id];g&&e.forEach(function(t,e){var n,r,o,i,a,s,c,u,l,d,h;return!(p<=e||"node"===t.itemType||!(e=m[t.id]))&&(n=g.cx-e.cx||.005,r=g.cy-e.cy||.005,o=g.r||1,i=(e=e.r||1)*e,a=o*o,(c=n*n+r*r)<(o=o+e)*o?!(!(e=f.children)||0===e.length||!(s=t.children)||0===s.length)&&(t=Math.sqrt(c),u=n*(c=(o-t)/t*v),l=r*c,h=1-(d=i/(a+i)),void e.forEach(function(t){if("node"!==t.itemType)return!1;var e;x[t.id]&&(e=b[t.id],s.forEach(function(t){return"node"===t.itemType&&!!x[t.id]&&(t=b[t.id],y[e].x+=u*d,y[e].y+=l*d,y[t].x-=u*h,void(y[t].y-=l*h))}))})):void 0)})}),0))})},s.prototype.calRepulsive=function(u,l){var o=this,i=o.nodes,d=o.width*o.optimizeRangeFactor,h=o.nodeStrength,f=o.alpha,p=o.nodeCollideStrength,g=o.preventNodeOverlap,y=o.nodeSize,m=o.nodeSpacing,v=o.depthRepulsiveForceScale,a=o.center;i.forEach(function(s,c){var t,e,n,r;s.x&&s.y&&(a&&(t=o.gravity,e=s.x-a[0]||.005,n=s.y-a[1]||.005,r=Math.sqrt(e*e+n*n),u[c].x-=e*t*f/r,u[c].y-=n*t*f/r),i.forEach(function(t,e){var n,r,o,i,a;c!==e&&t.x&&t.y&&(r=(a=l["".concat(s.id,"-").concat(t.id)]).vl2,d<(a=a.vl)||(o=(i=l["".concat(s.id,"-").concat(t.id)]).vx,i=i.vy,n=(n=Math.log(Math.abs(t.depth-s.depth)/10)+1||1)<1?1:n,t.comboId!==s.comboId&&(n+=1),n=n?Math.pow(v,n):1,n=h(t)*f/r*n,u[c].x+=o*n,u[c].y+=i*n,c<e&&g&&r<(t=(n=y(s)+m(s)||1)+(r=y(t)+m(t)||1))*t&&(t=i*(i=(t-a)/a*p),u[c].x+=(a=o*i)*(i=(o=r*r)/(n*n+o)),u[c].y+=t*i,u[e].x-=a*(i=1-i),u[e].y-=t*i)))}))})},s.prototype.calAttractive=function(u,l){var d=this,t=d.edges,h=d.linkDistance,f=d.alpha,p=d.edgeStrength,g=d.bias,y=d.depthAttractiveForceScale;t.forEach(function(t,e){var n,r,o,i,a,s=(0,w.getEdgeTerminal)(t,"source"),c=(0,w.getEdgeTerminal)(t,"target");s&&c&&s!==c&&(n=d.indexMap[s],r=d.indexMap[c],a=d.nodeMap[s],i=d.nodeMap[c],a)&&i&&(o=a.depth===i.depth?0:Math.log(Math.abs(a.depth-i.depth)/10),a.comboId===i.comboId&&(o/=2),o=o?Math.pow(y,o):1,a.comboId!==i.comboId&&1===o?o=y/2:a.comboId===i.comboId&&(o=2),(0,w.isNumber)(i.x))&&(0,w.isNumber)(a.x)&&(0,w.isNumber)(i.y)&&(0,w.isNumber)(a.y)&&(a=(i=l["".concat(c,"-").concat(s)]).vl,c=i.vx,i=i.vy*(s=(a-h(t))/a*f*p(t)*o),a=g[e],u[r].x-=(t=c*s)*a,u[r].y-=i*a,u[n].x+=t*(1-a),u[n].y+=i*(1-a))})},s.prototype.getType=function(){return"comboForce"},s);function s(t){var e=o.call(this)||this;return e.center=[0,0],e.maxIteration=100,e.gravity=10,e.comboGravity=10,e.linkDistance=10,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.edgeStrength=.6,e.nodeStrength=30,e.preventOverlap=!1,e.preventNodeOverlap=!1,e.preventComboOverlap=!1,e.collideStrength=void 0,e.nodeCollideStrength=.5,e.comboCollideStrength=.5,e.comboSpacing=20,e.comboPadding=10,e.optimizeRangeFactor=1,e.onTick=function(){},e.onLayoutEnd=function(){},e.depthAttractiveForceScale=1,e.depthRepulsiveForceScale=2,e.nodes=[],e.edges=[],e.combos=[],e.comboTrees=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.oriComboMap={},e.indexMap={},e.comboMap={},e.previousLayouted=!1,e.updateCfg(t),e}e.ComboForceLayout=n},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v=this&&this.__assign||function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},b=(Object.defineProperty(e,"__esModule",{value:!0}),e.ComboCombinedLayout=void 0,n(129)),a=n(83),x=n(80),w=n(192),n=(o=a.Base,i(s,o),s.prototype.getDefaultCfg=function(){return{}},s.prototype.execute=function(){var t=this.nodes,e=this.center;t&&0!==t.length&&(1===t.length?(t[0].x=e[0],t[0].y=e[1]):(this.initVals(),this.run())),this.onLayoutEnd&&this.onLayoutEnd()},s.prototype.run=function(){var t,e,n,r=this.nodes,o=this.edges,i=this.combos,a=this.comboEdges,s=this.center,c={},u=(r.forEach(function(t){c[t.id]=t}),{}),l=(i.forEach(function(t){u[t.id]=t}),this.getInnerGraphs(c)),d=[],h=[],f={},p=!0,g=(this.comboTrees.forEach(function(e){var t=l[e.id];t&&(t=v(v({},e),{x:t.x||u[e.id].x,y:t.y||u[e.id].y,fx:t.fx||u[e.id].fx,fy:t.fy||u[e.id].fy,mass:t.mass||u[e.id].mass,size:t.size}),h.push(t),isNaN(t.x)||0===t.x||isNaN(t.y)||0===t.y?(t.x=100*Math.random(),t.y=100*Math.random()):p=!1,d.push(e.id),(0,x.traverseTreeUp)(e,function(t){return t.id!==e.id&&(f[t.id]=e.id),!0}))}),r.forEach(function(t){var e;t.comboId&&u[t.comboId]||(e=v({},t),h.push(e),isNaN(e.x)||0===e.x||isNaN(e.y)||0===e.y?(e.x=100*Math.random(),e.y=100*Math.random()):p=!1,d.push(t.id))}),[]);o.concat(a).forEach(function(t){var e=f[t.source]||t.source,t=f[t.target]||t.target;e!==t&&d.includes(e)&&d.includes(t)&&g.push({source:e,target:t})}),null!=h&&h.length&&(1===h.length?(h[0].x=s[0],h[0].y=s[1]):(t={nodes:h,edges:g},n=null==(n=(e=this.outerLayout||new w.GForceLayout({gravity:1,factor:4,linkDistance:function(t,e,n){n=(((null==(e=e.size)?void 0:e[0])||30)+((null==(e=n.size)?void 0:e[0])||30))/2;return Math.min(1.5*n,700)}})).getType)?void 0:n.call(e),e.updateCfg({center:s,kg:5,preventOverlap:!0,animate:!1}),p&&b.FORCE_LAYOUT_TYPE_MAP[n]&&(new(h.length<100?w.MDSLayout:w.GridLayout)).layout(t),e.layout(t)),h.forEach(function(e){var t=l[e.id];t?(t.visited=!0,t.x=e.x,t.y=e.y,t.nodes.forEach(function(t){t.x+=e.x,t.y+=e.y})):(t=c[e.id])&&(t.x=e.x,t.y=e.y)}));for(var y=Object.keys(l),m=y.length-1;0<=m;m--)!function(t){var t=y[t],e=l[t];if(!e)return;e.nodes.forEach(function(t){e.visited||(t.x+=e.x||0,t.y+=e.y||0),c[t.id]&&(c[t.id].x=t.x,c[t.id].y=t.y)}),u[t]&&(u[t].x=e.x,u[t].y=e.y)}(m);return{nodes:r,edges:o,combos:i,comboEdges:a}},s.prototype.getInnerGraphs=function(h){var t=this.comboTrees,f=this.nodeSize,p=this.edges,g=this.comboPadding,e=this.spacing,y={},m=this.innerLayout||new w.ConcentricLayout({type:"concentric",sortBy:"id"});return m.center=[0,0],m.preventOverlap=!0,m.nodeSpacing=e,(t||[]).forEach(function(t){(0,x.traverseTreeUp)(t,function(t){var e,n,r,o,i,a,s,c,u,l,d=(null==g?void 0:g(t))||10;return(0,x.isArray)(d)&&(d=Math.max.apply(Math,d)),null!=(e=t.children)&&e.length?(e=t.children.map(function(t){var e;return"combo"===t.itemType?y[t.id]:(e=h[t.id]||{},v(v({},e),t))}),n=e.map(function(t){return t.id}),u={nodes:e,edges:p.filter(function(t){return n.includes(t.source)&&n.includes(t.target)})},r=1/0,e.forEach(function(t){var e;t.size||(t.size=(null==(e=y[t.id])?void 0:e.size)||(null==f?void 0:f(t))||[30,30]),(0,x.isNumber)(t.size)&&(t.size=[t.size,t.size]),(r=r>t.size[0]?t.size[0]:r)>t.size[1]&&(r=t.size[1])}),m.layout(u),o=(i=(0,x.getLayoutBBox)(e)).minX,s=((l=i.maxX)+o)/2,c=((a=i.maxY)+(i=i.minY))/2,u.nodes.forEach(function(t){t.x-=s,t.y-=c}),u=Math.max(l-o,r)+2*d,l=Math.max(a-i,r)+2*d,y[t.id]={id:t.id,nodes:e,size:[u,l]}):"combo"===t.itemType&&(y[t.id]={id:t.id,nodes:[],size:d?[2*d,2*d]:[30,30]}),!0})}),y},s.prototype.initVals=function(){var e,n,r=this.nodeSize,t=this.spacing,o=(0,x.isNumber)(t)?function(){return t}:(0,x.isFunction)(t)?t:function(){return 0};this.spacing=o,a=r?(0,x.isFunction)(r)?function(t){var e=r(t),n=o(t);return(0,x.isArray)(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+n)/2:((e||10)+n)/2}:(0,x.isArray)(r)?(e=(r[0]>r[1]?r[0]:r[1])/2,function(t){return e+o(t)/2}):(n=r/2,function(t){return n+o(t)/2}):function(t){var e=o(t);return t.size?(0,x.isArray)(t.size)?((t.size[0]>t.size[1]?t.size[0]:t.size[1])+e)/2:(0,x.isObject)(t.size)?((t.size.width>t.size.height?t.size.width:t.size.height)+e)/2:(t.size+e)/2:10+e/2},this.nodeSize=a;var i=this.comboPadding,a=(0,x.isNumber)(i)?function(){return i}:(0,x.isArray)(i)?function(){return Math.max.apply(null,i)}:(0,x.isFunction)(i)?i:function(){return 0};this.comboPadding=a},s.prototype.getType=function(){return"comboCombined"},s);function s(t){var e=o.call(this)||this;return e.center=[0,0],e.nodes=[],e.edges=[],e.combos=[],e.comboEdges=[],e.comboPadding=10,e.comboTrees=[],e.updateCfg(t),e}e.ComboCombinedLayout=n},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.ForceAtlas2Layout=void 0,n(83)),x=n(80),b=a(n(341)),v=a(n(342)),w=a(n(343)),a=(o=s.Base,i(c,o),c.prototype.getDefaultCfg=function(){return{}},c.prototype.execute=function(){var t=this.nodes,e=this.onLayoutEnd,n=this.prune,r=this.maxIteration;this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight);for(var o=[],i=t.length,a=0;a<i;a+=1){var s=t[a],c=10,u=10,s=((0,x.isNumber)(s.size)&&(c=s.size,u=s.size),(0,x.isArray)(s.size)?(isNaN(s.size[0])||(c=s.size[0]),isNaN(s.size[1])||(u=s.size[1])):(0,x.isObject)(s.size)&&(c=s.size.width,u=s.size.height),this.getWidth&&!isNaN(this.getWidth(s))&&(u=this.getWidth(s)),this.getHeight&&!isNaN(this.getHeight(s))&&(c=this.getHeight(s)),Math.max(c,u));o.push(s)}void 0===this.barnesHut&&250<i&&(this.barnesHut=!0),void 0===this.prune&&100<i&&(this.prune=!0),0!==this.maxIteration||this.prune?0===this.maxIteration&&n&&(r=100,i<=200&&100<i?r=500:200<i&&(r=950),this.maxIteration=r):(r=250,i<=200&&100<i?r=1e3:200<i&&(r=1200),this.maxIteration=r),this.kr||(this.kr=50,100<i&&i<=500?this.kr=20:500<i&&(this.kr=1)),this.kg||(this.kg=20,100<i&&i<=500?this.kg=10:500<i&&(this.kg=1)),this.nodes=this.updateNodesByForces(o),e()},c.prototype.updateNodesByForces=function(t){for(var e=this.edges,n=this.maxIteration,r=this.nodes,o=e.filter(function(t){return(0,x.getEdgeTerminal)(t,"source")!==(0,x.getEdgeTerminal)(t,"target")}),i=r.length,a=o.length,s=[],c={},u={},l=[],d=0;d<i;d+=1)void(s[c[r[d].id]=d]=0)!==r[d].x&&!isNaN(r[d].x)||(r[d].x=1e3*Math.random()),void 0!==r[d].y&&!isNaN(r[d].y)||(r[d].y=1e3*Math.random()),l.push({x:r[d].x,y:r[d].y});for(d=0;d<a;d+=1){for(var h=void 0,f=void 0,p=0,g=0,y=0;y<i;y+=1){var m=(0,x.getEdgeTerminal)(o[d],"source"),v=(0,x.getEdgeTerminal)(o[d],"target");r[y].id===m?(h=r[y],p=y):r[y].id===v&&(f=r[y],g=y),u[d]={sourceIdx:p,targetIdx:g}}h&&(s[c[h.id]]+=1),f&&(s[c[f.id]]+=1)}r=this.iterate(n,c,u,a,s,t);if(this.prune){for(y=0;y<a;y+=1)s[u[y].sourceIdx]<=1?(r[u[y].sourceIdx].x=r[u[y].targetIdx].x,r[u[y].sourceIdx].y=r[u[y].targetIdx].y):s[u[y].targetIdx]<=1&&(r[u[y].targetIdx].x=r[u[y].sourceIdx].x,r[u[y].targetIdx].y=r[u[y].sourceIdx].y);this.prune=!1,this.barnesHut=!1,r=this.iterate(100,c,u,a,s,t)}return r},c.prototype.iterate=function(t,e,n,r,o,i){for(var a,s=this.nodes,c=this.kr,u=this.preventOverlap,l=this.barnesHut,d=s.length,h=0,f=t,p=[],g=[],y=[],m=0;m<d;m+=1)p[2*m]=0,p[2*m+1]=0,l&&(a={id:m,rx:s[m].x,ry:s[m].y,mass:1,g:c,degree:o[m]},y[m]=new b.default(a));for(;0<f;){for(m=0;m<d;m+=1)g[2*m]=p[2*m],g[2*m+1]=p[2*m+1],p[2*m]=0,p[2*m+1]=0;p=this.getAttrForces(f,50,r,e,n,o,i,p);var p=l&&(u&&50<f||!u)?this.getOptRepGraForces(p,y,o):this.getRepGraForces(f,50,p,100,i,o),v=this.updatePos(p,g,h,o),s=v.nodes,h=v.sg;f--,this.tick&&this.tick()}return s},c.prototype.getAttrForces=function(t,e,n,r,o,i,a,s){for(var c=this.nodes,u=this.preventOverlap,l=this.dissuadeHubs,d=this.mode,h=this.prune,f=0;f<n;f+=1){var p,g,y,m,v=c[o[f].sourceIdx],b=o[f].sourceIdx,x=c[o[f].targetIdx],w=o[f].targetIdx;h&&(i[b]<=1||i[w]<=1)||(p=[x.x-v.x,x.y-v.y],g=(g=Math.hypot(p[0],p[1]))<1e-4?1e-4:g,p[0]=p[0]/g,p[1]=p[1]/g,m=y=g=u&&t<e?g-a[b]-a[w]:g,"linlog"===d&&(m=y=Math.log(1+g)),l&&(y=g/i[b],m=g/i[w]),u&&t<e&&g<=0?m=y=0:u&&t<e&&0<g&&(m=y=g),s[2*r[v.id]]+=y*p[0],s[2*r[x.id]]-=m*p[0],s[2*r[v.id]+1]+=y*p[1],s[2*r[x.id]+1]-=m*p[1])}return s},c.prototype.getRepGraForces=function(t,e,n,r,o,i){for(var a=this.nodes,s=this.preventOverlap,c=this.kr,u=this.kg,l=this.center,d=this.prune,h=a.length,f=0;f<h;f+=1){for(var p,g,y,m=f+1;m<h;m+=1)d&&(i[f]<=1||i[m]<=1)||(p=[a[m].x-a[f].x,a[m].y-a[f].y],g=(g=Math.hypot(p[0],p[1]))<1e-4?1e-4:g,p[0]=p[0]/g,p[1]=p[1]/g,s&&t<e&&(g=g-o[f]-o[m]),y=c*(i[f]+1)*(i[m]+1)/g,s&&t<e&&g<0?y=r*(i[f]+1)*(i[m]+1):s&&t<e&&0===g?y=0:s&&t<e&&0<g&&(y=c*(i[f]+1)*(i[m]+1)/g),n[2*f]-=y*p[0],n[2*m]+=y*p[0],n[2*f+1]-=y*p[1],n[2*m+1]+=y*p[1]);var v=[a[f].x-l[0],a[f].y-l[1]],b=Math.hypot(v[0],v[1]),b=(v[0]=v[0]/b,v[1]=v[1]/b,u*(i[f]+1));n[2*f]-=b*v[0],n[2*f+1]-=b*v[1]}return n},c.prototype.getOptRepGraForces=function(t,e,n){for(var r=this.nodes,o=this.kg,i=this.center,a=this.prune,s=r.length,c=9e10,u=-9e10,l=9e10,d=-9e10,h=0;h<s;h+=1)a&&n[h]<=1||(e[h].setPos(r[h].x,r[h].y),r[h].x>=u&&(u=r[h].x),r[h].x<=c&&(c=r[h].x),r[h].y>=d&&(d=r[h].y),r[h].y<=l&&(l=r[h].y));for(var f,p,g={xmid:(u+c)/2,ymid:(d+l)/2,length:Math.max(u-c,d-l),massCenter:i,mass:s},y=new v.default(g),m=new w.default(y),h=0;h<s;h+=1)a&&n[h]<=1||e[h].in(y)&&m.insert(e[h]);for(h=0;h<s;h+=1)a&&n[h]<=1||(e[h].resetForce(),m.updateForce(e[h]),t[2*h]-=e[h].fx,t[2*h+1]-=e[h].fy,f=[r[h].x-i[0],r[h].y-i[1]],p=Math.hypot(f[0],f[1]),f[0]=f[0]/(p=p<1e-4?1e-4:p),f[1]=f[1]/p,p=o*(n[h]+1),t[2*h]-=p*f[0],t[2*h+1]-=p*f[1]);return t},c.prototype.updatePos=function(t,e,n,r){for(var o,i,a=this.nodes,s=this.ks,c=this.tao,u=this.prune,l=this.ksmax,d=a.length,h=[],f=[],p=0,g=0,y=0;y<d;y+=1)u&&r[y]<=1||(o=[t[2*y]-e[2*y],t[2*y+1]-e[2*y+1]],o=Math.hypot(o[0],o[1]),i=[t[2*y]+e[2*y],t[2*y+1]+e[2*y+1]],i=Math.hypot(i[0],i[1]),h[y]=o,f[y]=i/2,p+=(r[y]+1)*h[y],g+=(r[y]+1)*f[y]);var m,v,b=n;for(n=c*g/p,0!==b&&(n=1.5*b<n?1.5*b:n),y=0;y<d;y+=1)u&&r[y]<=1||(0,x.isNumber)(a[y].fx)&&(0,x.isNumber)(a[y].fy)||(v=s*n/(1+n*Math.sqrt(h[y])),m=(v=(m=l/(m=(m=Math.hypot(t[2*y],t[2*y+1]))<1e-4?1e-4:m))<v?m:v)*t[2*y],v=v*t[2*y+1],a[y].x+=m,a[y].y+=v);return{nodes:a,sg:n}},c);function c(t){var e=o.call(this)||this;return e.center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.kr=5,e.kg=1,e.mode="normal",e.preventOverlap=!1,e.dissuadeHubs=!1,e.barnesHut=void 0,e.maxIteration=0,e.ks=.1,e.ksmax=10,e.tao=.1,e.onLayoutEnd=function(){},e.prune=void 0,e.updateCfg(t),e}e.ForceAtlas2Layout=a},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=(Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=void 0,n(83)),c=a(n(344)),a=(o=s.Base,i(u,o),u.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},u.prototype.execute=function(){var t=this,e=t.nodes,n=t.edges;return null!=e&&e.forEach(function(t){t.size||(t.size=[50,50])}),(0,c.default)({nodes:e,edges:n},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){t.onLayoutEnd&&t.onLayoutEnd()})},u.prototype.getType=function(){return"er"},u);function u(t){var e=o.call(this)||this;return e.width=300,e.height=300,e.nodeMinGap=50,e.onLayoutEnd=function(){},t&&e.updateCfg(t),e}e.ERLayout=a},function(t,e,n){t.exports=function(){return n=[function(t,e){t.exports={assign:Object.assign,getHeight:function(t,e,n,r){return void 0===r&&(r="height"),"center"===n?(t[r]+e[r])/2:t.height}}},function(t,e,n){var r=n(3);function o(t,e){this.options=e=void 0===e?{}:e,this.rootNode=r(t,e)}o.prototype.execute=function(){throw new Error("please override this method")},t.exports=o},function(t,e,n){var i=n(4),a=["LR","RL","TB","BT","H","V"],s=["LR","RL","H"],c=a[0];t.exports=function(t,e,n){var r=e.direction||c;if(e.isHorizontal=-1<s.indexOf(r),r&&-1===a.indexOf(r))throw new TypeError("Invalid direction: "+r);r===a[0]?n(t,e):r===a[1]?(n(t,e),t.right2left()):r===a[2]?n(t,e):r===a[3]?(n(t,e),t.bottom2top()):r!==a[4]&&r!==a[5]||(o=(r=i(t,e)).left,r=r.right,n(o,e),n(r,e),e.isHorizontal?o.right2left():o.bottom2top(),r.translate(o.x-r.x,o.y-r.y),t.x=o.x,t.y=r.y,n=t.getBoundingBox(),e.isHorizontal?n.top<0&&t.translate(0,-n.top):n.left<0&&t.translate(-n.left,0));var o=e.fixedRoot;return(o=void 0===o?!0:o)&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},function(t,e,n){var l=n(0),d={getId:function(t){return t.id||t.name},getPreH:function(t){return t.preH||0},getPreV:function(t){return t.preV||0},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.label||" ";return t.width||18*e.split("").length}};function h(t,e){var n,r,o=this;return o.vgap=o.hgap=0,t instanceof h?t:(n=e.getHGap(o.data=t),r=e.getVGap(t),o.preH=e.getPreH(t),o.preV=e.getPreV(t),o.width=e.getWidth(t),o.height=e.getHeight(t),o.width+=o.preH,o.height+=o.preV,o.id=e.getId(t),o.x=o.y=0,o.depth=0,o.children||(o.children=[]),o.addGap(n,r),o)}l.assign(h.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){this.hgap+=t,this.vgap+=e,this.width+=2*t,this.height+=2*e},eachNode:function(t){for(var e,n=[this];e=n.shift();)t(e),n=e.children.concat(n)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,n=[this];e=n.shift();)t(e),n=n.concat(e.children)},getBoundingBox:function(){var e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.width=Math.max(e.width,t.x+t.width),e.height=Math.max(e.height,t.y+t.height)}),e},translate:function(e,n){void 0===e&&(e=0),void 0===n&&(n=0),this.eachNode(function(t){t.x+=e,t.y+=n,t.x+=t.preH,t.y+=t.preV})},right2left:function(){var e=this.getBoundingBox();this.eachNode(function(t){t.x=t.x-2*(t.x-e.left)-t.width}),this.translate(e.width,0)},bottom2top:function(){var e=this.getBoundingBox();this.eachNode(function(t){t.y=t.y-2*(t.y-e.top)-t.height}),this.translate(0,e.height)}}),t.exports=function(t,e,n){var r,o=new h(t,e=l.assign({},d,e=void 0===e?{}:e)),i=[o];if(!n&&!t.collapsed)for(;r=i.shift();)if(!r.data.collapsed){var a=e.getChildren(r.data),s=a?a.length:0;if(r.children=new Array(s),a&&s)for(var c=0;c<s;c++){var u=new h(a[c],e);r.children[c]=u,i.push(u),u.parent=r,u.depth=r.depth+1}}return o}},function(t,e,n){var u=n(3);t.exports=function(t,e){for(var n=u(t.data,e,!0),r=u(t.data,e,!0),o=t.children.length,i=Math.round(o/2),a=e.getSide||function(t,e){return e<i?"right":"left"},s=0;s<o;s++){var c=t.children[s];("right"===a(c,s)?r:n).children.push(c)}return n.eachNode(function(t){t.isRoot()||(t.side="left")}),r.eachNode(function(t){t.isRoot()||(t.side="right")}),{left:n,right:r}}},function(t,e,n){n={compactBox:n(6),dendrogram:n(8),indented:n(10),mindmap:n(12)};t.exports=n},function(t,e,n){function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var o,i=n(1),a=n(7),s=n(2),c=n(0),u=(n=o=i,(i=d).prototype=Object.create(n.prototype),r(i.prototype.constructor=i,n),d.prototype.execute=function(){return s(this.rootNode,this.options,a)},d),l={};function d(){return o.apply(this,arguments)||this}t.exports=function(t,e){return e=c.assign({},l,e),new u(t,e).execute()}},function(t,e){function r(t,e,n,r){void 0===r&&(r=[]);var o=this;o.w=t||0,o.h=e||0,o.y=n||0,o.x=0,o.c=r||[],o.cs=r.length,o.prelim=0,o.mod=0,o.shift=0,o.change=0,o.tl=null,o.tr=null,o.el=null,o.er=null,o.msel=0,o.mser=0}r.fromNode=function(t,e){var n;return t?(n=[],t.children.forEach(function(t){n.push(r.fromNode(t,e))}),e?new r(t.height,t.width,t.x,n):new r(t.width,t.height,t.y,n)):null},t.exports=function(t,e){e=(e=void 0===e?{}:e).isHorizontal;function E(t){0===t.cs?((t.el=t).er=t).msel=t.mser=0:(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function S(t){return t.y+t.h}function O(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}!function e(t,n,r){void 0===r&&(r=0),n?(t.x=r,r+=t.width):(t.y=r,r+=t.height),t.children.forEach(function(t){e(t,n,r)})}(t,e);var n=r.fromNode(t,e);return function t(e){if(0!==e.cs){t(e.c[0]);for(var n=O(S(e.c[0].el),0,null),r=1;r<e.cs;++r){t(e.c[r]);for(var o,i,a,s,c,u=S(e.c[r].er),l=(c=o=i=a=s=m=_=w=x=b=v=y=g=p=f=h=d=l=void 0,e),d=r,h=n,f=l.c[d-1],p=f.mod,g=l.c[d],y=g.mod;null!==f&&null!==g;){S(f)>h.low&&(h=h.nxt);var m,v=p+f.prelim+f.w-(y+g.prelim);if(0<v){y+=v;{b=void 0;x=void 0;w=void 0;_=void 0;m=void 0;var b=l;var x=d;var w=h.index;var _=v;b.c[x].mod+=_,b.c[x].msel+=_,b.c[x].mser+=_;w!==x-1&&(m=x-w,b.c[w+1].shift+=_/m,b.c[x].shift-=_/m,b.c[x].change-=_-_/m)}}v=S(f),w=S(g);v<=w&&null!==(f=0===(b=f).cs?b.tr:b.c[b.cs-1])&&(p+=f.mod),w<=v&&null!==(g=0===(x=g).cs?x.tl:x.c[0])&&(y+=g.mod)}!f&&g?(i=d,a=g,s=y,c=(o=l).c[0].el,s=s-(c.tl=a).mod-o.c[0].msel,c.mod+=s,c.prelim-=s,o.c[0].el=o.c[i].el,o.c[0].msel=o.c[i].msel):f&&!g&&(a=d,c=f,s=p,i=(o=l).c[a].er,s=s-(i.tr=c).mod-o.c[a].mser,i.mod+=s,i.prelim-=s,o.c[a].er=o.c[a-1].er,o.c[a].mser=o.c[a-1].mser),n=O(u,r,n)}e.prelim=(e.c[0].prelim+e.c[0].mod+e.c[e.cs-1].mod+e.c[e.cs-1].prelim+e.c[e.cs-1].w)/2-e.w/2}E(e)}(n),function t(e,n){n+=e.mod,e.x=e.prelim+n;for(var r=e,o=0,i=0,a=0;a<r.cs;a++)i+=(o+=r.c[a].shift)+r.c[a].change,r.c[a].mod+=i;for(var s=0;s<e.cs;s++)t(e.c[s],n)}(n,0),function n(t,r,o){o?r.y=t.x:r.x=t.x,t.c.forEach(function(t,e){n(t,r.children[e],o)})}(n,t,e),function e(t,n,r){r?t.y+=n:t.x+=n,t.children.forEach(function(t){e(t,n,r)})}(t,-function e(t,n){var r=n?t.y:t.x;return t.children.forEach(function(t){r=Math.min(e(t,n),r)}),r}(t,n=e),n),t}},function(t,e,n){function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var o,i=n(1),a=n(9),s=n(2),c=n(0),u=(n=o=i,(i=d).prototype=Object.create(n.prototype),r(i.prototype.constructor=i,n),d.prototype.execute=function(){return this.rootNode.width=0,s(this.rootNode,this.options,a)},d),l={};function d(){return o.apply(this,arguments)||this}t.exports=function(t,e){return e=c.assign({},l,e),new u(t,e).execute()}},function(t,e,n){var o=n(0);function a(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);this.x=this.y=0,this.leftChild=this.rightChild=null,this.height=0,this.children=e}var s={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};t.exports=function(t,n){void 0===n&&(n={}),n=o.assign({},s,n);var r,i=0,e=function n(t){if(!t)return null;t.width=0,t.depth&&i<t.depth&&(i=t.depth);var e=t.children,r=e.length,o=new a(t.height,[]);return e.forEach(function(t,e){t=n(t);o.children.push(t),0===e&&(o.leftChild=t),e===r-1&&(o.rightChild=t)}),o.originNode=t,o.isLeaf=t.isLeaf(),o}(t);return function t(e){var n;return e.isLeaf||0===e.children.length?e.drawingDepth=i:(n=e.children.map(t),n=Math.min.apply(null,n),e.drawingDepth=n-1),e.drawingDepth}(e),function e(t){t.x=t.drawingDepth*n.rankSep,t.isLeaf?(t.y=0,r&&(t.y=r.y+r.height+n.nodeSep,t.originNode.parent!==r.originNode.parent)&&(t.y+=n.subTreeSep),r=t):(t.children.forEach(function(t){e(t)}),t.y=(t.leftChild.y+t.rightChild.y)/2)}(e),function n(t,r,o){o?(r.x=t.x,r.y=t.y):(r.x=t.y,r.y=t.x),t.children.forEach(function(t,e){n(t,r.children[e],o)})}(e,t,n.isHorizontal),t}},function(t,e,n){function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var o,i=n(1),a=n(11),s=n(4),c=n(0),u=["LR","RL","H"],l=u[0],d=(n=o=i,(i=f).prototype=Object.create(n.prototype),r(i.prototype.constructor=i,n),f.prototype.execute=function(){var t=this.options,e=this.rootNode,n=(t.isHorizontal=!0,t.indent),n=void 0===n?20:n,r=t.dropCap,r=void 0===r||r,o=t.direction,o=void 0===o?l:o,i=t.align;if(o&&-1===u.indexOf(o))throw new TypeError("Invalid direction: "+o);return o===u[0]?a(e,n,r,i):o===u[1]?(a(e,n,r,i),e.right2left()):o===u[2]&&(t=(o=s(e,t)).left,o=o.right,a(t,n,r,i),t.right2left(),a(o,n,r,i),n=t.getBoundingBox(),o.translate(n.width,0),e.x=o.x-e.width/2),e},f),h={};function f(){return o.apply(this,arguments)||this}t.exports=function(t,e){return e=c.assign({},h,e),new d(t,e).execute()}},function(t,e,n){var i=n(0);t.exports=function(t,e,n,r){var o=null;t.eachNode(function(t){!function(t,e,n,r,o){var n="function"==typeof n?n(t):n*t.depth;if(!r)try{if(t.id===t.parent.children[0].id)return t.x+=n,t.y=e?e.y:0}catch(t){}t.x+=n,e?(t.y=e.y+i.getHeight(e,t,o),e.parent&&t.parent.id!==e.parent.id&&(n=(r=e.parent).y+i.getHeight(r,t,o),t.y=t.y<n?n:t.y)):t.y=0}(t,o,e,n,r),o=t})}},function(t,e,n){function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var o,i=n(1),a=n(13),s=n(2),c=n(0),u=(n=o=i,(i=d).prototype=Object.create(n.prototype),r(i.prototype.constructor=i,n),d.prototype.execute=function(){return s(this.rootNode,this.options,a)},d),l={};function d(){return o.apply(this,arguments)||this}t.exports=function(t,e){return e=c.assign({},l,e),new u(t,e).execute()}},function(t,e,n){var r=n(0),o={getSubTreeSep:function(){return 0}};t.exports=function(t,e){e=r.assign({},o,e=void 0===e?{}:e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse(function(t){t.x=t.parent.x+t.parent.width}),t.parent=null,function e(t,n){var r=0;return t.children.length?t.children.forEach(function(t){r+=e(t,n)}):r=t.height,t._subTreeSep=n.getSubTreeSep(t.data),t.totalHeight=Math.max(t.height,r)+2*t._subTreeSep,t.totalHeight}(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode(function(t){var e=t.children,n=e.length;if(n){var r=e[0];if(r.startY=t.startY+t._subTreeSep,1===n)r.y=t.y+t.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var o=1;o<n;o++){var i=e[o];i.startY=e[o-1].startY+e[o-1].totalHeight,i.y=i.startY+i.totalHeight/2-i.height/2}}}}),function e(t){var n,r,o,i,a=t.children,s=a.length;s&&(a.forEach(function(t){e(t)}),n=a[0],r=(s=a[s-1]).y-n.y+s.height,o=0,a.forEach(function(t){o+=t.totalHeight}),r>t.height?t.y=n.y+r/2-t.height/2:1!==a.length||o<t.height?(i=t.y+(t.height-r)/2-n.y,a.forEach(function(t){t.translate(0,i)})):t.y=(n.y+n.height/2+s.y+s.height/2)/2-t.height/2)}(t)}}],o={},r.m=n,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=5);function r(t){var e;return(o[t]||(e=o[t]={i:t,l:!1,exports:{}},n[t].call(e.exports,e,e.exports,r),e.l=!0,e)).exports}var n,o}()},function(t,e,n){n.d(e,"a",function(){return o});var r=n(84),o=function(t){return Array.isArray(t)?t:t?[t,t]:r.g}},function(t,e,n){n.d(e,"b",function(){return o}),n.d(e,"a",function(){return i});var r={},o=function(t,e){r[t]=e},i=function(t){return r[t]}},function(t,e,n){n.d(e,"a",function(){return r});var r=function(e,n){void 0===n&&(n={}),Object.keys(n).forEach(function(t){e.style[t]=n[t]})}},function(t,e,n){n.d(e,"a",function(){return r});var r="marker:click"},function(D,t,e){function P(t){return[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]}function n(t){t=Math.round(t).toString(16);return 1===t.length?"0"+t:t}function L(t){return"#"+n(t[0])+n(t[1])+n(t[2])}e.r(t),e.d(t,"rgb2arr",function(){return P}),e.d(t,"gradient",function(){return U}),e.d(t,"toRGB",function(){return z}),e.d(t,"toCSSGradient",function(){return V}),e.d(t,"transform",function(){return H}),e.d(t,"angleTo",function(){return K}),e.d(t,"direction",function(){return q}),e.d(t,"vertical",function(){return Z}),e.d(t,"path2String",function(){return $}),e.d(t,"path2Curve",function(){return st}),e.d(t,"path2Absolute",function(){return it}),e.d(t,"path2Array",function(){return ct}),e.d(t,"clonePath",function(){return ut}),e.d(t,"normalizePath",function(){return E}),e.d(t,"reverseCurve",function(){return lt}),e.d(t,"arcToCubic",function(){return O}),e.d(t,"getPathBBox",function(){return gt}),e.d(t,"getTotalLength",function(){return x}),e.d(t,"getPathBBoxTotalLength",function(){return yt}),e.d(t,"getRotatedCurve",function(){return mt}),e.d(t,"getPathArea",function(){return vt}),e.d(t,"getDrawDirection",function(){return bt}),e.d(t,"getPointAtLength",function(){return w}),e.d(t,"isPointInStroke",function(){return xt}),e.d(t,"distanceSquareRoot",function(){return F}),e.d(t,"equalizeSegments",function(){return _t}),e.d(t,"contains",function(){return o}),e.d(t,"includes",function(){return o}),e.d(t,"difference",function(){return Ot}),e.d(t,"find",function(){return At}),e.d(t,"findIndex",function(){return It}),e.d(t,"firstValue",function(){return Tt}),e.d(t,"flatten",function(){return jt}),e.d(t,"flattenDeep",function(){return Nt}),e.d(t,"getRange",function(){return Lt}),e.d(t,"pull",function(){return zt}),e.d(t,"pullAt",function(){return Gt}),e.d(t,"reduce",function(){return Ut}),e.d(t,"remove",function(){return Wt}),e.d(t,"sortBy",function(){return Xt}),e.d(t,"union",function(){return Vt}),e.d(t,"uniq",function(){return Yt}),e.d(t,"valuesOfKey",function(){return Ht}),e.d(t,"head",function(){return qt}),e.d(t,"last",function(){return Kt}),e.d(t,"startsWith",function(){return Zt}),e.d(t,"endsWith",function(){return $t}),e.d(t,"filter",function(){return St}),e.d(t,"every",function(){return Qt}),e.d(t,"some",function(){return Jt}),e.d(t,"group",function(){return re}),e.d(t,"groupBy",function(){return ee}),e.d(t,"groupToMap",function(){return ne}),e.d(t,"getWrapBehavior",function(){return oe}),e.d(t,"wrapBehavior",function(){return ie}),e.d(t,"number2color",function(){return se}),e.d(t,"parseRadius",function(){return ce}),e.d(t,"clamp",function(){return ue}),e.d(t,"fixedBase",function(){return le}),e.d(t,"isDecimal",function(){return de}),e.d(t,"isEven",function(){return he}),e.d(t,"isInteger",function(){return fe}),e.d(t,"isNegative",function(){return pe}),e.d(t,"isNumberEqual",function(){return ge}),e.d(t,"isOdd",function(){return ye}),e.d(t,"isPositive",function(){return me}),e.d(t,"max",function(){return Dt}),e.d(t,"maxBy",function(){return ve}),e.d(t,"min",function(){return Pt}),e.d(t,"minBy",function(){return be}),e.d(t,"mod",function(){return xe}),e.d(t,"toDegree",function(){return _e}),e.d(t,"toInteger",function(){return Ee}),e.d(t,"toRadian",function(){return Oe}),e.d(t,"forIn",function(){return Me}),e.d(t,"has",function(){return ke}),e.d(t,"hasKey",function(){return Ce}),e.d(t,"hasValue",function(){return Ie}),e.d(t,"keys",function(){return kt}),e.d(t,"isMatch",function(){return Ct}),e.d(t,"values",function(){return Ae}),e.d(t,"lowerCase",function(){return Te}),e.d(t,"lowerFirst",function(){return je}),e.d(t,"substitute",function(){return Ne}),e.d(t,"upperCase",function(){return De}),e.d(t,"upperFirst",function(){return Pe}),e.d(t,"getType",function(){return Re}),e.d(t,"isArguments",function(){return Be}),e.d(t,"isArray",function(){return y}),e.d(t,"isArrayLike",function(){return u}),e.d(t,"isBoolean",function(){return ze}),e.d(t,"isDate",function(){return Fe}),e.d(t,"isError",function(){return Ge}),e.d(t,"isFunction",function(){return d}),e.d(t,"isFinite",function(){return Ue}),e.d(t,"isNil",function(){return l}),e.d(t,"isNull",function(){return We}),e.d(t,"isNumber",function(){return A}),e.d(t,"isObject",function(){return v}),e.d(t,"isObjectLike",function(){return M}),e.d(t,"isPlainObject",function(){return k}),e.d(t,"isPrototype",function(){return Ye}),e.d(t,"isRegExp",function(){return Ve}),e.d(t,"isString",function(){return C}),e.d(t,"isType",function(){return i}),e.d(t,"isUndefined",function(){return He}),e.d(t,"isElement",function(){return qe}),e.d(t,"requestAnimationFrame",function(){return Ke}),e.d(t,"clearAnimationFrame",function(){return Ze}),e.d(t,"augment",function(){return Je}),e.d(t,"clone",function(){return tn}),e.d(t,"debounce",function(){return en}),e.d(t,"memoize",function(){return R}),e.d(t,"deepMix",function(){return an}),e.d(t,"each",function(){return _}),e.d(t,"extend",function(){return sn}),e.d(t,"indexOf",function(){return cn}),e.d(t,"isEmpty",function(){return ln}),e.d(t,"isEqual",function(){return dn}),e.d(t,"isEqualWith",function(){return hn}),e.d(t,"map",function(){return fn}),e.d(t,"mapValues",function(){return pn}),e.d(t,"mix",function(){return T}),e.d(t,"assign",function(){return T}),e.d(t,"get",function(){return gn}),e.d(t,"set",function(){return yn}),e.d(t,"pick",function(){return vn}),e.d(t,"omit",function(){return bn}),e.d(t,"throttle",function(){return xn}),e.d(t,"toArray",function(){return wn}),e.d(t,"toString",function(){return I}),e.d(t,"uniqueId",function(){return _n}),e.d(t,"noop",function(){return En}),e.d(t,"identity",function(){return Sn}),e.d(t,"size",function(){return On}),e.d(t,"Cache",function(){return Mn}),e.d(t,"isPointInPolygon",function(){return Cn}),e.d(t,"isPolygonsIntersect",function(){return Nn}),e.d(t,"createDOM",function(){return Dn}),e.d(t,"modifyCSS",function(){return Pn});var r,d=function(t){return"function"==typeof t},R=function(i,a,t){var s,n,r,o,c;if(void 0===t&&(t=128),d(i))return(s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=a?a.apply(this,t):t[0],o=s.cache;return o.has(r)?o.get(r):(n=i.apply(this,t),o.set(r,n),n)}).cache=(c=t||1,l(),{clear:l,has:function(t){return void 0!==r[t]||void 0!==o[t]},get:function(t){var e=r[t];return void 0!==e?e:void 0!==(e=o[t])?(u(t,e),e):void 0},set:function(t,e){void 0!==r[t]?r[t]=e:u(t,e)}}),s;throw new TypeError("Expected a function");function u(t,e){++n>c&&(o=r,l(1),++n),r[t]=e}function l(t){n=0,r=Object.create(null),t||(o=Object.create(null))}},B=/rgba?\(([\s.,0-9]+)\)/,z=R(function(t){var e;return"#"===t[0]&&7===t.length?t:(r||((e=document.createElement("i")).title="Web Colour Picker",e.style.display="none",document.body.appendChild(e),r=e),r.style.color=t,e=document.defaultView.getComputedStyle(r,"").getPropertyValue("color"),L(B.exec(e)[1].split(/\s*,\s*/).map(function(t){return Number(t)})))},function(t){return t},256);function a(t,e,n,r){return t[r]+(e[r]-t[r])*n}function U(t){var i=("string"==typeof t?t.split("-"):t).map(function(t){return P(-1===t.indexOf("#")?z(t):t)});return function(t){return e=i,t=t,t=isNaN(Number(t))||t<0?0:1<t?1:Number(t),n=e.length-1,r=Math.floor(n*t),t=n*t-r,L([a(o=e[r],n=r===n?o:e[r+1],t,0),a(o,n,t,1),a(o,n,t,2)]);var e,n,r,o}}var W=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,X=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Y=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function V(t){var e,n,r,o,i;return/^[r,R,L,l]{1}[\s]*\(/.test(t)?(n=void 0,"l"===t[0]?(e=+(o=W.exec(t))[1]+90,n=o[2],r="linear-gradient("+e+"deg, "):"r"===t[0]&&(r="radial-gradient(",n=(o=X.exec(t))[4]),(i=n.match(Y)).forEach(function(t,e){t=t.split(":");r+=t[1]+" "+100*Number(t[0])+"%",e!==i.length-1&&(r+=", ")}),r+=")"):t}var f=e(69);function H(t,e){for(var n,r,o,i,a,s,c,u=t?[].concat(t):[1,0,0,0,1,0,0,0,1],l=0,d=e.length;l<d;l++){var h=e[l];switch(h[0]){case"t":s=i=u,f.mat3.fromTranslation(a=[0,0,0,0,0,0,0,0,0],[h[1],h[2]]),f.mat3.multiply(i,a,s);break;case"s":a=i=u,s=[h[1],h[2]],c=[0,0,0,0,0,0,0,0,0],f.mat3.fromScaling(c,s),f.mat3.multiply(i,c,a);break;case"r":n=c=u,r=h[1],o=[0,0,0,0,0,0,0,0,0],f.mat3.fromRotation(o,r),f.mat3.multiply(c,o,n);break;case"m":r=h[1],f.mat3.multiply(u,r,u)}}return u}function q(t,e){return t[0]*e[1]-e[0]*t[1]}function K(t,e,n){var r=f.vec2.angle(t,e),t=0<=q(t,e);return n?t?2*Math.PI-r:r:t?r:2*Math.PI-r}function Z(t,e,n){return n?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t}function $(t,e){return t=t,("off"===(n=e=void 0===e?"off":e)?[].concat(t):(r="number"==typeof n&&1<=n?Math.pow(10,n):1,t.map(function(t){var e=t.slice(1).map(Number).map(function(t){return n?Math.round(t*r)/r:Math.round(t)});return[t[0]].concat(e)}))).map(function(t){return t[0]+t.slice(1).join(" ")}).join("");var n,r}var m=e(68),Q={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};var h={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function J(t){return Array.isArray(t)&&t.every(function(t){var e=t[0].toLowerCase();return h[e]===t.length-1&&"achlmqstvz".includes(e)})}function tt(t){return J(t)&&t.every(function(t){t=t[0];return t===t.toUpperCase()})}function et(t){return tt(t)&&t.every(function(t){t=t[0];return"ACLMQZ".includes(t)})}function nt(t){for(var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;r.length>=h[n]&&("m"===n&&2<r.length?(t.segments.push([e].concat(r.splice(0,2))),n="l",e="m"===e?"l":"L"):t.segments.push([e].concat(r.splice(0,h[n]))),h[n]););}function p(t){return 48<=t&&t<=57}function g(t){for(var e,n=t.pathValue,r=t.max;t.index<r&&(10===(e=n.charCodeAt(t.index))||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||5760<=e&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e));)t.index+=1}function rt(t){var e,n,r,o,i,a=t.max,s=t.pathValue,c=t.index,u=s.charCodeAt(c),l=h[s[c].toLowerCase()];if(t.segmentStart=c,function(){switch(32|u){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return 1;default:return}}()){if(t.index+=1,g(t),t.data=[],l)for(;;){for(var d=l;0<d;--d){if(97!=(32|u)||3!==d&&4!==d?function(t){var e,n,r=t.max,o=t.pathValue,i=t.index,a=i,s=!1,c=!1,u=!1;if(r<=a)t.err="[path-util]: Invalid path value at index "+a+', "pathValue" is missing param';else if(p(e=43!==(e=o.charCodeAt(a))&&45!==e?e:o.charCodeAt(a+=1))||46===e){if(46!==e){if(n=48===e,e=o.charCodeAt(a+=1),n&&a<r&&e&&p(e))return t.err="[path-util]: Invalid path value at index "+i+', "'+o[i]+'" illegal number';for(;a<r&&p(o.charCodeAt(a));)a+=1,s=!0;e=o.charCodeAt(a)}if(46===e){for(u=!0,a+=1;p(o.charCodeAt(a));)a+=1,c=!0;e=o.charCodeAt(a)}if(101===e||69===e){if(u&&!s&&!c)return t.err="[path-util]: Invalid path value at index "+a+', "'+o[a]+'" invalid float exponent';if(43!==(e=o.charCodeAt(a+=1))&&45!==e||(a+=1),!(a<r&&p(o.charCodeAt(a))))return t.err="[path-util]: Invalid path value at index "+a+', "'+o[a]+'" invalid integer exponent';for(;a<r&&p(o.charCodeAt(a));)a+=1}t.index=a,t.param=+t.pathValue.slice(i,a)}else t.err="[path-util]: Invalid path value at index "+a+', "'+o[a]+'" is not a number'}(t):(i=o=r=void 0,r=(n=t).index,48===(i=(o=n.pathValue).charCodeAt(r))?(n.param=0,n.index+=1):49===i?(n.param=1,n.index+=1):n.err='[path-util]: invalid Arc flag "'+o[r]+'", expecting 0 or 1 at index '+r),t.err.length)return;t.data.push(t.param),g(t),t.index<a&&44===s.charCodeAt(t.index)&&(t.index+=1,g(t))}if(t.index>=t.max)break;if(!(48<=(e=s.charCodeAt(t.index))&&e<=57||43===e||45===e||46===e))break}nt(t)}else t.err='[path-util]: Invalid path value "'+s[c]+'" is not a path command'}var ot=function(t){this.pathValue=t,this.segments=[],this.max=t.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""};function b(t){if(J(t))return[].concat(t);var e=new ot(t);for(g(e);e.index<e.max&&!e.err.length;)rt(e);return e.err||e.segments}function it(t){var a,s,c,u;return tt(t)?[].concat(t):(t=b(t),u=c=s=a=0,t.map(function(t){var e=t.slice(1).map(Number),t=t[0],n=t.toUpperCase();if("M"===t)return a=e[0],s=e[1],["M",c=a,u=s];if(t!==n)switch(n){case"A":o=[n,e[0],e[1],e[2],e[3],e[4],e[5]+a,e[6]+s];break;case"V":o=[n,e[0]+s];break;case"H":o=[n,e[0]+a];break;default:var r=e.map(function(t,e){return t+(e%2?s:a)}),o=[n].concat(r)}else o=[n].concat(e);var i=o.length;switch(n){case"Z":a=c,s=u;break;case"H":a=o[1];break;case"V":s=o[1];break;default:a=o[i-2],s=o[i-1],"M"===n&&(c=a,u=s)}return o}))}function E(t){if(et(t))return[].concat(t);for(var e,n,r,o,i,a,s,c=it(t),u=Object(m.__assign)({},Q),l=0;l<c.length;l+=1){c[l]=(e=c[l],n=u,s=a=h=i=d=o=r=void 0,r=e[0],o=n.x1,d=n.y1,i=n.x2,h=n.y2,a=e.slice(1).map(Number),s=e,"TQ".includes(r)||(n.qx=null,n.qy=null),"H"===r?s=["L",e[1],d]:"V"===r?s=["L",o,e[1]]:"S"===r?(e=2*d-h,s=["C",n.x1=2*o-i,n.y1=e].concat(a)):"T"===r?(h=2*o-n.qx,i=2*d-n.qy,s=["Q",n.qx=h,n.qy=i].concat(a)):"Q"===r&&(e=a[0],o=a[1],n.qx=e,n.qy=o),s);var d=c[l],h=d.length;u.x1=+d[h-2],u.y1=+d[h-1],u.x2=+d[h-4]||u.x1,u.y2=+d[h-3]||u.y1}return c}function S(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}}function O(t,e,n,r,o,i,a,s,c,u){var l=120*Math.PI/180,d=Math.PI/180*(+o||0),h=[],f=(u?(b=u[0],x=u[1],m=u[2],v=u[3]):(t=(g=S(t,e,-d)).x,e=g.y,1<(f=(p=(t-(s=(g=S(s,c,-d)).x))/2)*p/(n*n)+(g=(e-(c=g.y))/2)*g/(r*r))&&(n*=f=Math.sqrt(f),r*=f),f=n*n,y=r*r,m=(i=(i===a?-1:1)*Math.sqrt(Math.abs((f*y-f*g*g-y*p*p)/(f*g*g+y*p*p))))*n*g/r+(t+s)/2,v=i*-r*p/n+(e+c)/2,b=Math.asin(((e-v)/r*Math.pow(10,9)>>0)/Math.pow(10,9)),x=Math.asin(((c-v)/r*Math.pow(10,9)>>0)/Math.pow(10,9)),b=t<m?Math.PI-b:b,x=s<m?Math.PI-x:x,b<0&&(b=2*Math.PI+b),x<0&&(x=2*Math.PI+x),a&&x<b&&(b-=2*Math.PI),!a&&b<x&&(x-=2*Math.PI)),x-b),p=(Math.abs(f)>l&&(y=x,g=s,i=c,x=b+l*(a&&b<x?1:-1),h=O(s=m+n*Math.cos(x),c=v+r*Math.sin(x),n,r,o,0,a,g,i,[x,y,m,v])),f=x-b,Math.cos(b)),l=Math.sin(b),o=Math.cos(x),a=Math.sin(x),g=Math.tan(f/4),i=4/3*n*g,y=4/3*r*g,m=[t,e],v=[t+i*l,e-y*p],b=[s+i*a,c-y*o],x=[s,c];if(v[0]=2*m[0]-v[0],v[1]=2*m[1]-v[1],u)return v.concat(b,x,h);for(var w=[],_=0,E=(h=v.concat(b,x,h)).length;_<E;_+=1)w[_]=_%2?S(h[_-1],h[_],d).y:S(h[_],h[_+1],d).x;return w}function c(t,e,n){var r=t[0],t=t[1];return[r+(e[0]-r)*n,t+(e[1]-t)*n]}var at=function(t,e,n,r){t=c([t,e],[n,r],.5);return Object(m.__spreadArray)(Object(m.__spreadArray)([],t,!0),[n,r,n,r],!1)};function st(t,e){var n;if(void 0===e&&(e=!1),et(n=t)&&n.every(function(t){t=t[0];return"MC".includes(t)}))return n=[].concat(t),e?[n,[]]:n;for(var r,o=E(t),i=Object(m.__assign)({},Q),a=[],s="",c=o.length,u=[],l=0;l<c;l+=1){o[l]&&(s=o[l][0]),a[l]=s;var d=function(t,e){var n,r,o,i,a=t[0],s=t.slice(1).map(Number),c=s[0],u=s[1],l=e.x1,d=e.y1,h=e.x,f=e.y;switch("TQ".includes(a)||(e.qx=null,e.qy=null),a){case"M":return e.x=c,e.y=u,t;case"A":return n=[l,d].concat(s),["C"].concat(O(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]));case"Q":return e.qx=c,e.qy=u,n=[l,d].concat(s),["C"].concat([1/3*n[0]+2/3*(i=n[2]),1/3*n[1]+2/3*(r=n[3]),1/3*(o=n[4])+2/3*i,1/3*(i=n[5])+2/3*r,o,i]);case"L":return["C"].concat(at(l,d,c,u));case"Z":return l===h&&d===f?["C",l,d,h,f,h,f]:["C"].concat(at(l,d,h,f))}return t}(o[l],i),h=(o[l]=d,y=g=p=f=h=void 0,o),f=a,p=l;if(7<h[p].length){h[p].shift();for(var g=h[p],y=p;g.length;)f[p]="A",h.splice(y+=1,0,["C"].concat(g.splice(0,6)));h.splice(p,1)}c=o.length,"Z"===s&&u.push(l),r=(d=o[l]).length,i.x1=+d[r-2],i.y1=+d[r-1],i.x2=+d[r-4]||i.x1,i.y2=+d[r-3]||i.y1}return e?[o,u]:o}function ct(t){return b(t)}function ut(t){return t.map(function(t){return Array.isArray(t)?[].concat(t):t})}function lt(r){var t=r.slice(1).map(function(t,e,n){return(e?n[e-1].slice(-2):r[0].slice(1)).concat(t.slice(1))}).map(function(n){return n.map(function(t,e){return n[n.length-e-2*(1-e%2)]})}).reverse();return[["M"].concat(t[0].slice(0,2))].concat(t.map(function(t){return["C"].concat(t.slice(2))}))}function F(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function G(t,e,n,r,o){var i=F([t,e],[n,r]),a={x:0,y:0};return{length:i,point:a="number"==typeof o?o<=0?{x:t,y:e}:i<=o?{x:n,y:r}:{x:(o=c([t,e],[n,r],o/i))[0],y:o[1]}:a,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function dt(t,e){var n=t.x,t=t.y,r=e.x,e=e.y,o=n*r+t*e,i=Math.sqrt((Math.pow(n,2)+Math.pow(t,2))*(Math.pow(r,2)+Math.pow(e,2)));return(n*e-t*r<0?-1:1)*Math.acos(o/i)}function ht(t,e,n,r,o,L,R,i,a,s,c){var u=c.bbox,B=void 0===u||u,u=c.length,z=void 0===u||u,u=c.sampleSize,l=void 0===u?30:u,d="number"==typeof s,h=t,f=e,p=0,g=[h,f,p],y=[h,f],m={x:0,y:0},v=[{x:h,y:f}];d&&s<=0&&(m={x:h,y:f});for(var b,x,w,_,E,S,O,M,k,C,A,I,T,j,N,D,P=0;P<=l;P+=1)b=t,x=e,w=n,_=r,E=o,S=L,O=R,M=i,k=a,C=P/l,I=D=N=j=T=I=A=void 0,I=Math.abs,T=Math.sin,j=Math.cos,N=Math.sqrt,D=Math.PI,w=I(w),I=I(_),_=(E%360+360)%360*(D/180),h=(A=b===M&&x===k?{x:b,y:x}:0===w||0===I?G(b,x,M,k,C).point:(E=(b-M)/2,A=(x-k)/2,E={x:j(_)*E+T(_)*A,y:-T(_)*E+j(_)*A},1<(A=Math.pow(E.x,2)/Math.pow(w,2)+Math.pow(E.y,2)/Math.pow(I,2))&&(w*=N(A),I*=N(A)),S=(S!==O?1:-1)*N(A=(A=(Math.pow(w,2)*Math.pow(I,2)-Math.pow(w,2)*Math.pow(E.y,2)-Math.pow(I,2)*Math.pow(E.x,2))/(Math.pow(w,2)*Math.pow(E.y,2)+Math.pow(I,2)*Math.pow(E.x,2)))<0?0:A),N=w*E.y/I*S,A=-I*E.x/w*S,S=j(_)*N-T(_)*A+(b+M)/2,b=T(_)*N+j(_)*A+(x+k)/2,x=dt({x:1,y:0},M={x:(E.x-N)/w,y:(E.y-A)/I}),k=dt(M,{x:(-E.x-N)/w,y:(-E.y-A)/I}),!O&&0<k?k-=2*D:O&&k<0&&(k+=2*D),N=w*j(M=x+(k%=2*D)*C),E=I*T(M),{x:j(_)*N-T(_)*E+S,y:T(_)*N+j(_)*E+b})).x,f=A.y,B&&v.push({x:h,y:f}),z&&(p+=F(y,[h,f])),y=[h,f],d&&s<=p&&s>g[2]&&(O=(p-s)/(p-g[2]),m={x:y[0]*(1-O)+g[0]*O,y:y[1]*(1-O)+g[1]*O}),g=[h,f,p];return{length:p,point:m=d&&p<=s?{x:i,y:a}:m,min:{x:Math.min.apply(null,v.map(function(t){return t.x})),y:Math.min.apply(null,v.map(function(t){return t.y}))},max:{x:Math.max.apply(null,v.map(function(t){return t.x})),y:Math.max.apply(null,v.map(function(t){return t.y}))}}}function ft(t,e,n,r,o,i,a,s,c,u){var l=u.bbox,d=void 0===l||l,l=u.length,h=void 0===l||l,l=u.sampleSize,f=void 0===l?10:l,p="number"==typeof c,g=t,y=e,m=0,v=[g,y,m],b=[g,y],x={x:0,y:0},w=[{x:g,y:y}];p&&c<=0&&(x={x:g,y:y});for(var _,E,S,O,M,k,C,A,I,T,j=0;j<=f;j+=1)_=t,E=e,S=n,O=r,M=o,k=i,C=a,A=s,T=void 0,T=1-(I=j/f),g=(_={x:Math.pow(T,3)*_+3*Math.pow(T,2)*I*S+3*T*Math.pow(I,2)*M+Math.pow(I,3)*C,y:Math.pow(T,3)*E+3*Math.pow(T,2)*I*O+3*T*Math.pow(I,2)*k+Math.pow(I,3)*A}).x,y=_.y,d&&w.push({x:g,y:y}),h&&(m+=F(b,[g,y])),b=[g,y],p&&c<=m&&c>v[2]&&(S=(m-c)/(m-v[2]),x={x:b[0]*(1-S)+v[0]*S,y:b[1]*(1-S)+v[1]*S}),v=[g,y,m];return{length:m,point:x=p&&m<=c?{x:a,y:s}:x,min:{x:Math.min.apply(null,w.map(function(t){return t.x})),y:Math.min.apply(null,w.map(function(t){return t.y}))},max:{x:Math.max.apply(null,w.map(function(t){return t.x})),y:Math.max.apply(null,w.map(function(t){return t.y}))}}}function pt(t,e,n,r,o,i,a,s){var c=s.bbox,u=void 0===c||c,c=s.length,l=void 0===c||c,c=s.sampleSize,d=void 0===c?10:c,h="number"==typeof a,f=t,p=e,g=0,y=[f,p,g],m=[f,p],v={x:0,y:0},b=[{x:f,y:p}];h&&a<=0&&(v={x:f,y:p});for(var x,w,_,E,S,O,M,k,C=0;C<=d;C+=1)x=t,w=e,_=n,E=r,S=o,O=i,k=void 0,k=1-(M=C/d),f=(x={x:Math.pow(k,2)*x+2*k*M*_+Math.pow(M,2)*S,y:Math.pow(k,2)*w+2*k*M*E+Math.pow(M,2)*O}).x,p=x.y,u&&b.push({x:f,y:p}),l&&(g+=F(m,[f,p])),m=[f,p],h&&a<=g&&a>y[2]&&(_=(g-a)/(g-y[2]),v={x:m[0]*(1-_)+y[0]*_,y:m[1]*(1-_)+y[1]*_}),y=[f,p,g];return{length:g,point:v=h&&g<=a?{x:o,y:i}:v,min:{x:Math.min.apply(null,b.map(function(t){return t.x})),y:Math.min.apply(null,b.map(function(t){return t.y}))},max:{x:Math.max.apply(null,b.map(function(t){return t.x})),y:Math.max.apply(null,b.map(function(t){return t.y}))}}}function s(t,e,n){for(var r,o,i,a=E(t),s="number"==typeof e,c=[],u=0,l=0,d=0,h=0,f=[],p=[],g=0,y={x:0,y:0},m=y,v=y,b=y,x=0,w=0,_=a.length;w<_;w+=1)c=(r="M"===(o=(i=a[w])[0]))?c:[u,l].concat(i.slice(1)),r?(m=y={x:d=i[1],y:h=i[2]},g=0,s&&e<.001&&(b=y)):"L"===o?(g=(r=G(c[0],c[1],c[2],c[3],(e||0)-x)).length,y=r.min,m=r.max,v=r.point):"A"===o?(g=(r=ht(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],(e||0)-x,n||{})).length,y=r.min,m=r.max,v=r.point):"C"===o?(g=(r=ft(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],(e||0)-x,n||{})).length,y=r.min,m=r.max,v=r.point):"Q"===o?(g=(r=pt(c[0],c[1],c[2],c[3],c[4],c[5],(e||0)-x,n||{})).length,y=r.min,m=r.max,v=r.point):"Z"===o&&(g=(r=G((c=[u,l,d,h])[0],c[1],c[2],c[3],(e||0)-x)).length,y=r.min,m=r.max,v=r.point),s&&x<e&&e<=x+g&&(b=v),p.push(m),f.push(y),x+=g,u=(r="Z"!==o?i.slice(-2):[d,h])[0],l=r[1];return{length:x,point:b=s&&x<=e?{x:u,y:l}:b,min:{x:Math.min.apply(null,f.map(function(t){return t.x})),y:Math.min.apply(null,f.map(function(t){return t.y}))},max:{x:Math.max.apply(null,p.map(function(t){return t.x})),y:Math.max.apply(null,p.map(function(t){return t.y}))}}}function gt(t,e){var n,r,o,i;return t?(n=(e=(t=s(t,void 0,Object(m.__assign)(Object(m.__assign)({},e),{length:!1}))).min).x,{width:o=(r=(t=t.max).x)-n,height:i=(t=t.y)-(e=e.y),x:n,y:e,x2:r,y2:t,cx:n+o/2,cy:e+i/2,cz:Math.max(o,i)+Math.min(o,i)/2}):{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0}}function x(t,e){return s(t,void 0,Object(m.__assign)(Object(m.__assign)({},e),{bbox:!1,length:!0})).length}function yt(t,e){var n,r,o,i;return t?(e=(t=s(t,void 0,Object(m.__assign)(Object(m.__assign)({},e),{bbox:!0,length:!0}))).length,n=(r=t.min).x,{length:e,width:o=(t=(e=t.max).x)-n,height:i=(e=e.y)-(r=r.y),x:n,y:r,x2:t,y2:e,cx:n+o/2,cy:r+i/2,cz:Math.max(o,i)+Math.min(o,i)/2}):{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0}}function mt(r,o){var i,a,s,c=r.length-1,e=[],u=0,t=(a=(i=r).length,s=a-1,i.map(function(t,r){return i.map(function(t,e){var n=r+e;return 0===e||i[n]&&"M"===i[n][0]?(e=i[n],["M"].concat(e.slice(-2))):(a<=n&&(n-=s),i[n])})}));return t.forEach(function(t,n){r.slice(1).forEach(function(t,e){u+=F(r[(n+e)%c].slice(-2),o[e%c].slice(-2))}),e[n]=u,u=0}),t[e.indexOf(Math.min.apply(null,e))]}function vt(t){var s,c=0,u=0;return st(t).map(function(t){var e,n,r,o,i,a;return"M"===t[0]?(c=t[1],u=t[2],0):(o=t.slice(1),e=o[0],s=3*(((a=o[5])-u)*(e+(r=o[2]))-((i=o[4])-c)*((n=o[1])+(o=o[3]))+n*(c-r)-e*(u-o)+a*(r+c/3)-i*(o+u/3))/20,n=t.slice(-2),c=n[0],u=n[1],s)}).reduce(function(t,e){return t+e},0)}function bt(t){return 0<=vt(t)}function w(t,e,n){return s(t,e,Object(m.__assign)(Object(m.__assign)({},n),{bbox:!1,length:!0})).point}function xt(t,e){t=function(t,n){for(var e,r,o,i,a,s,c,u,l,d=b(t),h=E(d),f=x(d),p=function(t){var e=t.x-n.x,t=t.y-n.y;return e*e+t*t},g=8,y=0,m=1/0,v=0;v<=f;v+=g)(a=p(e=w(h,v)))<m&&(r=e,y=v,m=a);for(g/=2;.5<g;)u=p(o=w(h,s=y-g)),l=p(i=w(h,c=y+g)),0<=s&&u<m?(r=o,y=s,m=u):c<=f&&l<m?(r=i,y=c,m=l):g/=2;return t=function(e){var t=b(d);if("string"==typeof t)throw TypeError(t);var n=t.slice(),r=x(n),o=n.length-1,i=0,a=0,s=t[0],c=s.slice(-2),c={x:c[0],y:c[1]};if(o<=0||!e||!Number.isFinite(e))return{segment:s,index:0,length:a,point:c,lengthAtSegment:i};if(r<=e)return a=r-(i=x(n=t.slice(0,-1))),{segment:t[o],index:o,length:a,lengthAtSegment:i};for(var u=[];0<o;)s=n[o],a=r-(i=x(n=n.slice(0,-1))),r=i,u.push({segment:s,index:o,length:a,lengthAtSegment:i}),--o;return u.find(function(t){return t.lengthAtSegment<=e})}(y),{closest:r,distance:Math.sqrt(m),segment:t}}(t,e).distance;return Math.abs(t)<.001}function wt(t){return t.map(function(t,e,n){var r,o,i,a,n=e&&n[e-1].slice(-2).concat(t.slice(1)),s=e?ft(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],{bbox:!1}).length:0;return{s:t,ss:e?s?(void 0===r&&(r=.5),n=(e=n).slice(0,2),o=e.slice(2,4),i=e.slice(4,6),e=e.slice(6,8),n=c(n,o,r),o=c(o,i,r),i=c(i,e,r),a=c(n,o,r),o=c(o,i,r),r=c(a,o,r),[["C"].concat(n,a,r),["C"].concat(o,i,e)]):[t,t]:[t],l:s}})}function _t(t,e,n){var r,t=wt(t),e=wt(e),o=t.length,i=e.length,a=t.filter(function(t){return t.l}).length,s=e.filter(function(t){return t.l}).length,a=t.filter(function(t){return t.l}).reduce(function(t,e){return t+e.l},0)/a||0,s=e.filter(function(t){return t.l}).reduce(function(t,e){return t+e.l},0)/s||0,c=n||Math.max(o,i),u=[a,s],l=[c-o,c-i],n=[t,e].map(function(t,n){return t.l===c?t.map(function(t){return t.s}):t.map(function(t,e){return r=e&&l[n]&&t.l>=u[n],l[n]-=r?1:0,r?t.ss:[t.s]}).flat()});return n[0].length===n[1].length?n:_t(n[0],n[1],c)}function Et(t,e){if(void 0===e&&(e=[]),y(t))for(var n=0;n<t.length;n+=1)Et(t[n],e);else e.push(t);return e}var u=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},o=function(t,e){return!!u(t)&&-1<t.indexOf(e)},St=function(t,e){if(!u(t))return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];e(o,r)&&n.push(o)}return n},Ot=function(t,e){return void 0===e&&(e=[]),St(t,function(t){return!o(e,t)})},l=function(t){return null==t},Mt={}.toString,i=function(t,e){return Mt.call(t)==="[object "+e+"]"},y=function(t){return Array.isArray?Array.isArray(t):i(t,"Array")},v=function(t){var e=typeof t;return null!==t&&"object"==e||"function"==e},_=function(t,e){if(t)if(y(t))for(var n=0,r=t.length;n<r&&!1!==e(t[n],n);n++);else if(v(t))for(var o in t)if(t.hasOwnProperty(o)&&!1===e(t[o],o))break},kt=Object.keys?function(t){return Object.keys(t)}:function(n){var r=[];return _(n,function(t,e){d(n)&&"prototype"===e||r.push(e)}),r},Ct=function(t,e){var n=kt(e),r=n.length;if(l(t))return!r;for(var o=0;o<r;o+=1){var i=n[o];if(e[i]!==t[i]||!(i in t))return!1}return!0},M=function(t){return"object"==typeof t&&null!==t},k=function(t){if(!M(t)||!i(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},At=function(t,e){var n;if(y(t)&&(d(e)&&(n=e),n=k(e)?function(t){return Ct(t,e)}:n))for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r];return null},It=function(t,e,n){for(var r=n=void 0===n?0:n;r<t.length;r++)if(e(t[r],r))return r;return-1},Tt=function(t,e){for(var n=null,r=0;r<t.length;r++){var o=t[r][e];if(!l(o)){n=y(o)?o[0]:o;break}}return n},jt=function(t){if(!y(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e},Nt=Et,Dt=function(t){if(y(t))return t.reduce(function(t,e){return Math.max(t,e)},t[0])},Pt=function(t){if(y(t))return t.reduce(function(t,e){return Math.min(t,e)},t[0])},Lt=function(t){var e=t.filter(function(t){return!isNaN(t)});if(!e.length)return{min:0,max:0};if(y(t[0])){for(var n=[],r=0;r<t.length;r++)n=n.concat(t[r]);e=n}var o=Dt(e);return{min:Pt(e),max:o}},t=Array.prototype,Rt=t.splice,Bt=t.indexOf,zt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var o,i=e[r];-1<(o=Bt.call(t,i));)Rt.call(t,o,1);return t},Ft=Array.prototype.splice,Gt=function(t,e){if(!u(t))return[];for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];n!==r&&void 0===o||Ft.call(t,o,1)}return t},Ut=function(t,n,e){var r;return y(t)||k(t)?(r=e,_(t,function(t,e){r=n(r,t,e)}),r):t},Wt=function(t,e){var n=[];if(u(t)){for(var r=-1,o=[],i=t.length;++r<i;){var a=t[r];e(a,r,t)&&(n.push(a),o.push(r))}Gt(t,o)}return n},C=function(t){return i(t,"String")},Xt=function(t,n){var o,e=d(n)?function(t,e){return n(t)-n(e)}:(o=[],C(n)?o.push(n):y(n)&&(o=n),function(t,e){for(var n=0;n<o.length;n+=1){var r=o[n];if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return 0});return t.sort(e),t};function Yt(t,e){void 0===e&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,o=t.length;r<o;r++){var i=t[r];e.has(i)||(n.push(i),e.set(i,!0))}return n}var Vt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Yt([].concat.apply([],t))},Ht=function(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o][e];if(!l(i)){y(i)||(i=[i]);for(var a=0;a<i.length;a++){var s=i[a];r[s]||(n.push(s),r[s]=!0)}}}return n};function qt(t){if(u(t))return t[0]}function Kt(t){if(u(t))return t[t.length-1]}var Zt=function(t,e){return!(!y(t)&&!C(t))&&t[0]===e},$t=function(t,e){return!(!y(t)&&!C(t))&&t[t.length-1]===e},Qt=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0},Jt=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n))return!0;return!1},te=Object.prototype.hasOwnProperty,ee=function(t,e){if(!e||!y(t))return{};for(var n={},r=d(e)?e:function(t){return t[e]},o=0;o<t.length;o++){var i=t[o],a=r(i);te.call(n,a)?n[a].push(i):n[a]=[i]}return n};function ne(t,e){var o;return e?(d(e)||(o=y(e)?e:e.replace(/\s+/g,"").split("*"),e=function(t){for(var e="_",n=0,r=o.length;n<r;n++)e+=t[o[n]]&&t[o[n]].toString();return e}),ee(t,e)):{0:t}}var re=function(t,e){if(!e)return[t];var n,r=ne(t,e),o=[];for(n in r)o.push(r[n]);return o},oe=function(t,e){return t["_wrap_"+e]},ie=function(e,n){return e["_wrap_"+n]||(e["_wrap_"+n]=function(t){e[n](t)})},ae={},se=function(t){var e=ae[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;ae[t]=e="#"+n}return e},ce=function(t){var e=0,n=0,r=0,o=0;return y(t)?1===t.length?e=n=r=o=t[0]:2===t.length?(e=r=t[0],n=o=t[1]):3===t.length?(e=t[0],n=o=t[1],r=t[2]):(e=t[0],n=t[1],r=t[2],o=t[3]):e=n=r=o=t,{r1:e,r2:n,r3:r,r4:o}},ue=function(t,e,n){return t<e?e:n<t?n:t},le=function(t,e){var e=e.toString(),n=e.indexOf(".");return-1===n?Math.round(t):(20<(e=e.substr(n+1).length)&&(e=20),parseFloat(t.toFixed(e)))},A=function(t){return i(t,"Number")},de=function(t){return A(t)&&t%1!=0},he=function(t){return A(t)&&t%2==0},fe=Number.isInteger||function(t){return A(t)&&t%1==0},pe=function(t){return A(t)&&t<0};function ge(t,e,n){return void 0===n&&(n=1e-5),Math.abs(t-e)<n}var ye=function(t){return A(t)&&t%2!=0},me=function(t){return A(t)&&0<t},ve=function(t,e){if(y(t)){for(var n,r=-1/0,o=0;o<t.length;o++){var i=t[o],a=d(e)?e(i):i[e];r<a&&(n=i,r=a)}return n}},be=function(t,e){if(y(t)){for(var n,r=1/0,o=0;o<t.length;o++){var i=t[o],a=d(e)?e(i):i[e];a<r&&(n=i,r=a)}return n}},xe=function(t,e){return(t%e+e)%e},we=180/Math.PI,_e=function(t){return we*t},Ee=parseInt,Se=Math.PI/180,Oe=function(t){return Se*t},Me=_,ke=function(t,e){return t.hasOwnProperty(e)},Ce=ke,Ae=Object.values?function(t){return Object.values(t)}:function(n){var r=[];return _(n,function(t,e){d(n)&&"prototype"===e||r.push(t)}),r},Ie=function(t,e){return o(Ae(t),e)},I=function(t){return l(t)?"":t.toString()},Te=function(t){return I(t).toLowerCase()},je=function(t){t=I(t);return t.charAt(0).toLowerCase()+t.substring(1)},Ne=function(t,n){return t&&n?t.replace(/\\?\{([^{}]+)\}/g,function(t,e){return"\\"===t.charAt(0)?t.slice(1):void 0===n[e]?"":n[e]}):t},De=function(t){return I(t).toUpperCase()},Pe=function(t){t=I(t);return t.charAt(0).toUpperCase()+t.substring(1)},Le={}.toString,Re=function(t){return Le.call(t).replace(/^\[object /,"").replace(/]$/,"")},Be=function(t){return i(t,"Arguments")},ze=function(t){return i(t,"Boolean")},Fe=function(t){return i(t,"Date")},Ge=function(t){return i(t,"Error")},Ue=function(t){return A(t)&&isFinite(t)},We=function(t){return null===t},Xe=Object.prototype,Ye=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Xe)},Ve=function(t){return i(t,"RegExp")},He=function(t){return void 0===t},qe=function(t){return t instanceof Element||t instanceof Document};function Ke(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}function Ze(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}function $e(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}function T(t,e,n,r){return e&&$e(t,e),n&&$e(t,n),r&&$e(t,r),t}function Qe(t){if("object"!=typeof t||null===t)return t;if(y(t))for(var e=[],n=0,r=t.length;n<r;n++)"object"==typeof t[n]&&null!=t[n]?e[n]=Qe(t[n]):e[n]=t[n];else for(var o in e={},t)"object"==typeof t[o]&&null!=t[o]?e[o]=Qe(t[o]):e[o]=t[o];return e}var Je=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t[0],r=1;r<t.length;r++){var o=t[r];d(o)&&(o=o.prototype),T(n.prototype,o)}},tn=Qe,en=function(r,o,i){var a;return function(){var t=this,e=arguments,n=i&&!a;clearTimeout(a),a=setTimeout(function(){a=null,i||r.apply(t,e)},o),n&&r.apply(t,e)}};function nn(t,e,n,r){for(var o in n=n||0,r=r||5,e){var i;!function(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(null==t)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}(e,o)||(null!==(i=e[o])&&k(i)?(k(t[o])||(t[o]={}),n<r?nn(t[o],i,n+1,r):t[o]=e[o]):y(i)?(t[o]=[],t[o]=t[o].concat(i)):void 0!==i&&(t[o]=i))}}function rn(t,e){if(t===e)return!0;if(t&&e&&!C(t)&&!C(e)){if(u(t)||u(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=rn(t[r],e[r]));r++);return n}if(M(t)||M(e)){var o=Object.keys(t),i=Object.keys(e);if(o.length!==i.length)return!1;for(n=!0,r=0;r<o.length&&(n=rn(t[o[r]],e[o[r]]));r++);return n}}return!1}function on(t){return t}var an=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)nn(t,e[r]);return t},sn=function(t,e,n,r){d(e)||(n=e,e=t,t=function(){});var o=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;t=new n;return t.constructor=e,t},i=o(e.prototype,t);return t.prototype=T(i,t.prototype),t.superclass=o(e.prototype,e),T(i,n),T(t,r),t},cn=function(t,e){if(!u(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,o=0;o<t.length;o++)if(t[o]===e){r=o;break}return r},un=Object.prototype.hasOwnProperty,ln=function(t){if(!l(t)){if(u(t))return!t.length;var e,n=Re(t);if("Map"===n||"Set"===n)return!t.size;if(Ye(t))return!Object.keys(t).length;for(e in t)if(un.call(t,e))return!1}return!0},dn=rn,hn=function(t,e,n){return d(n)?!!n(t,e):dn(t,e)},fn=function(t,e){if(!u(t))return t;for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n},pn=function(e,n){void 0===n&&(n=on);var r={};return v(e)&&!l(e)&&Object.keys(e).forEach(function(t){r[t]=n(e[t],t)}),r},gn=function(t,e,n){for(var r=0,o=C(e)?e.split("."):e;t&&r<o.length;)t=t[o[r++]];return void 0===t||r<o.length?n:t},yn=function(t,e,n){var r=t,o=C(e)?e.split("."):e;return o.forEach(function(t,e){e<o.length-1?(v(r[t])||(r[t]=A(o[e+1])?[]:{}),r=r[t]):r[t]=n}),t},mn=Object.prototype.hasOwnProperty,vn=function(e,t){var n;return null!==e&&k(e)?(n={},_(t,function(t){mn.call(e,t)&&(n[t]=e[t])}),n):{}},bn=function(t,r){return Ut(t,function(t,e,n){return r.includes(n)||(t[n]=e),t},{})},xn=function(n,r,o){function i(){l=!1===o.leading?0:Date.now(),a=null,u=n.apply(s,c),a||(s=c=null)}function t(){var t=Date.now(),e=(l||!1!==o.leading||(l=t),r-(t-l));return s=this,c=arguments,e<=0||r<e?(a&&(clearTimeout(a),a=null),l=t,u=n.apply(s,c),a||(s=c=null)):a||!1===o.trailing||(a=setTimeout(i,e)),u}var a,s,c,u,l=0;o=o||{};return t.cancel=function(){clearTimeout(a),l=0,a=s=c=null},t},wn=function(t){return u(t)?Array.prototype.slice.call(t):[]},j={},_n=function(t){return j[t=t||"g"]?j[t]+=1:j[t]=1,t+j[t]},En=function(){},Sn=function(t){return t};function On(t){return l(t)?0:(u(t)?t:Object.keys(t)).length}N.prototype.has=function(t){return void 0!==this.map[t]},N.prototype.get=function(t,e){t=this.map[t];return void 0===t?e:t},N.prototype.set=function(t,e){this.map[t]=e},N.prototype.clear=function(){this.map={}},N.prototype.delete=function(t){delete this.map[t]},N.prototype.size=function(){return Object.keys(this.map).length};var Mn=N;function N(){this.map={}}function kn(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function Cn(t,e,n){var r=!1,o=t.length;if(o<=2)return!1;for(var i,a,s,c=0;c<o;c++){var u=t[c],l=t[(c+1)%o];if(a=l,((s=[e,n])[0]-(i=u)[0])*(a[1]-i[1])==(a[0]-i[0])*(s[1]-i[1])&&Math.min(i[0],a[0])<=s[0]&&s[0]<=Math.max(i[0],a[0])&&Math.min(i[1],a[1])<=s[1]&&s[1]<=Math.max(i[1],a[1]))return!0;0<kn(u[1]-n)!=0<kn(l[1]-n)&&kn(e-(n-u[1])*(u[0]-l[0])/(u[1]-l[1])-u[0])<0&&(r=!r)}return r}var An=function(t,e,n){return e<=t&&t<=n};function In(t){for(var e,n=[],r=t.length,o=0;o<r-1;o++){var i=t[o],a=t[o+1];n.push({from:{x:i[0],y:i[1]},to:{x:a[0],y:a[1]}})}return 1<n.length&&n.push({from:{x:(e=t[r-1])[0],y:e[1]},to:{x:(e=t[0])[0],y:e[1]}}),n}function Tn(t,l){var d=!1;return t.forEach(function(t){if(e=t.from,t=t.to,n=l.from,r=l.to,i=n.x-e.x,a=n.y-e.y,s=t.x-e.x,t=t.y-e.y,c=r.x-n.x,u=null,u=.001*(s*s+t*t)*(c*c+(r=r.y-n.y)*r)<(n=s*r-t*c)*n&&(o=(i*t-a*s)/n,An(i=(i*r-a*c)/n,0,1))&&An(o,0,1)?{x:e.x+i*s,y:e.y+i*t}:u)return!(d=!0);var e,n,r,o,i,a,s,c,u}),d}function jn(t){var e=t.map(function(t){return t[0]}),t=t.map(function(t){return t[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function Nn(e,n){var t,r,o,i,a;return!(e.length<2||n.length<2||(t=jn(e),(i=jn(n)).minX>t.maxX)||i.maxX<t.minX||i.minY>t.maxY||i.maxY<t.minY)&&(r=!1,n.forEach(function(t){if(Cn(e,t[0],t[1]))return!(r=!0)}),!!r||(e.forEach(function(t){if(Cn(n,t[0],t[1]))return!(r=!0)}),!!r)||(o=In(e),i=In(n),a=!1,i.forEach(function(t){if(Tn(o,t))return!(a=!0)}),a))}function Dn(t){var e=document.createElement("div"),t=(e.innerHTML=t,e.childNodes[0]);return t&&e.contains(t)&&e.removeChild(t),t}function Pn(e,n){if(e)return Object.keys(n).forEach(function(t){e.style[t]=n[t]}),e}},function(j,t,e){e.r(t),e.d(t,"AbstractMatrix",function(){return x}),e.d(t,"default",function(){return L}),e.d(t,"Matrix",function(){return L}),e.d(t,"MatrixColumnView",function(){return N}),e.d(t,"MatrixColumnSelectionView",function(){return D}),e.d(t,"MatrixFlipColumnView",function(){return P}),e.d(t,"MatrixFlipRowView",function(){return F}),e.d(t,"MatrixRowView",function(){return G}),e.d(t,"MatrixRowSelectionView",function(){return U}),e.d(t,"MatrixSelectionView",function(){return _}),e.d(t,"MatrixSubView",function(){return W}),e.d(t,"MatrixTransposeView",function(){return X}),e.d(t,"wrap",function(){return Y}),e.d(t,"WrapperMatrix1D",function(){return E}),e.d(t,"WrapperMatrix2D",function(){return R}),e.d(t,"solve",function(){return k}),e.d(t,"inverse",function(){return V}),e.d(t,"determinant",function(){return C}),e.d(t,"linearDependencies",function(){return H}),e.d(t,"pseudoInverse",function(){return q}),e.d(t,"covariance",function(){return K}),e.d(t,"correlation",function(){return Z}),e.d(t,"SingularValueDecomposition",function(){return M}),e.d(t,"SVD",function(){return M}),e.d(t,"EigenvalueDecomposition",function(){return A}),e.d(t,"EVD",function(){return A}),e.d(t,"CholeskyDecomposition",function(){return I}),e.d(t,"CHO",function(){return I}),e.d(t,"LuDecomposition",function(){return S}),e.d(t,"LU",function(){return S}),e.d(t,"QrDecomposition",function(){return O}),e.d(t,"QR",function(){return O}),e.d(t,"Nipals",function(){return T}),e.d(t,"NIPALS",function(){return T});let n=Object.prototype.toString;function u(t){t=n.call(t);return t.endsWith("Array]")&&!t.includes("Big")}function i(t,e){var n,e=1<arguments.length&&void 0!==e?e:{};if(!u(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==e.output){if(!u(e.output))throw new TypeError("output option must be an array if specified");n=e.output}else n=new Array(t.length);var r=function(t,e){if(e=1<arguments.length&&void 0!==e?e:{},!u(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,e=e.toIndex,r=void 0===e?t.length:e;if((n=void 0===n?0:n)<0||t.length<=n||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(r<=n||t.length<r||!Number.isInteger(r))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[n],i=n+1;i<r;i++)t[i]<o&&(o=t[i]);return o}(t),o=function(t,e){if(e=1<arguments.length&&void 0!==e?e:{},!u(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=e.fromIndex,e=e.toIndex,r=void 0===e?t.length:e;if((n=void 0===n?0:n)<0||t.length<=n||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(r<=n||t.length<r||!Number.isInteger(r))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[n],i=n+1;i<r;i++)t[i]>o&&(o=t[i]);return o}(t);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=e.min,a=void 0===i?e.autoMinMax?r:0:i,i=e.max,e=void 0===i?e.autoMinMax?o:1:i;if(e<=a)throw new RangeError("min option must be smaller than max option");for(var s=(e-a)/(o-r),c=0;c<t.length;c++)n[c]=(t[c]-r)*s+a}let o=" ".repeat(2),l=" ".repeat(4);function r(t,e={}){var{maxRows:e=15,maxColumns:n=10,maxNumSize:r=8}=e;return""+t.constructor.name+` {
${o}[
${l}${function(n,t,e,r){var{rows:o,columns:i}=n,a=Math.min(o,t),s=Math.min(i,e),c=[];for(let e=0;e<a;e++){var u=[];for(let t=0;t<s;t++)u.push(function(t,e){var n=String(t);if(n.length<=e)return n.padEnd(e," ");n=t.toPrecision(e-2);if(n.length<=e)return n;n=t.toExponential(e-2),t=n.indexOf("e"),t=n.slice(t);return n.slice(0,e-t.length)+t}(n.get(e,t),r));c.push(""+u.join(" "))}return s!==i&&(c[c.length-1]+=` ... ${i-e} more columns`),a!==o&&c.push(`... ${o-t} more rows`),c.join("\n"+l)}(t,e,n,r)}
${o}]
${o}rows: ${t.rows}
${o}columns: ${t.columns}
}`}function a(t,e,n){n=n?t.rows:t.rows-1;if(e<0||n<e)throw new RangeError("Row index out of range")}function s(t,e,n){n=n?t.columns:t.columns-1;if(e<0||n<e)throw new RangeError("Column index out of range")}function c(t,e){if((e=e.to1DArray?e.to1DArray():e).length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function d(t,e){if((e=e.to1DArray?e.to1DArray():e).length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function h(t,e,n){return{row:f(t,e),column:p(t,n)}}function f(e,t){if("object"!=typeof t)throw new TypeError("unexpected type for row indices");if(t.some(t=>t<0||t>=e.rows))throw new RangeError("row indices are out of range");return t=Array.isArray(t)?t:Array.from(t)}function p(e,t){if("object"!=typeof t)throw new TypeError("unexpected type for column indices");if(t.some(t=>t<0||t>=e.columns))throw new RangeError("column indices are out of range");return t=Array.isArray(t)?t:Array.from(t)}function g(t,e,n,r,o){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(m("startRow",e),m("endRow",n),m("startColumn",r),m("endColumn",o),n<e||o<r||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||o<0||o>=t.columns)throw new RangeError("Submatrix indices are out of range")}function y(e,n=0){var r=[];for(let t=0;t<e;t++)r.push(n);return r}function m(t,e){if("number"!=typeof e)throw new TypeError(t+" must be a number")}class x{static from1DArray(t,n,r){if(t*n!==r.length)throw new RangeError("data length does not match given dimensions");var o=new L(t,n);for(let e=0;e<t;e++)for(let t=0;t<n;t++)o.set(e,t,r[e*n+t]);return o}static rowVector(e){var n=new L(1,e.length);for(let t=0;t<e.length;t++)n.set(0,t,e[t]);return n}static columnVector(e){var n=new L(e.length,1);for(let t=0;t<e.length;t++)n.set(t,0,e[t]);return n}static zeros(t,e){return new L(t,e)}static ones(t,e){return new L(t,e).fill(1)}static rand(t,n,e={}){if("object"!=typeof e)throw new TypeError("options must be an object");var{random:r=Math.random}=e,o=new L(t,n);for(let e=0;e<t;e++)for(let t=0;t<n;t++)o.set(e,t,r());return o}static randInt(t,n,e={}){if("object"!=typeof e)throw new TypeError("options must be an object");var{min:r=0,max:e=1e3,random:o=Math.random}=e;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(e))throw new TypeError("max must be an integer");if(e<=r)throw new RangeError("min must be smaller than max");var i=e-r,a=new L(t,n);for(let e=0;e<t;e++)for(let t=0;t<n;t++){var s=r+Math.round(o()*i);a.set(e,t,s)}return a}static eye(t,e,n){void 0===e&&(e=t),void 0===n&&(n=1);var r=Math.min(t,e),o=this.zeros(t,e);for(let t=0;t<r;t++)o.set(t,t,n);return o}static diag(e,t,n){var r=e.length,o=(void 0===t&&(t=r),void 0===n&&(n=t),Math.min(r,t,n)),i=this.zeros(t,n);for(let t=0;t<o;t++)i.set(t,t,e[t]);return i}static min(n,r){n=this.checkMatrix(n),r=this.checkMatrix(r);var t=n.rows,o=n.columns,i=new L(t,o);for(let e=0;e<t;e++)for(let t=0;t<o;t++)i.set(e,t,Math.min(n.get(e,t),r.get(e,t)));return i}static max(n,r){n=this.checkMatrix(n),r=this.checkMatrix(r);var t=n.rows,o=n.columns,i=new this(t,o);for(let e=0;e<t;e++)for(let t=0;t<o;t++)i.set(e,t,Math.max(n.get(e,t),r.get(e,t)));return i}static checkMatrix(t){return x.isMatrix(t)?t:new L(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(n){if("function"!=typeof n)throw new TypeError("callback must be a function");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)n.call(this,e,t);return this}to1DArray(){var n=[];for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)n.push(this.get(e,t));return n}to2DArray(){var n=[];for(let e=0;e<this.rows;e++){n.push([]);for(let t=0;t<this.columns;t++)n[e].push(this.get(e,t))}return n}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,n=-1,r=!0,o=!1;for(;t<this.rows&&r;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>n?(o=!0,n=e):(r=!1,o=!0);t++}return r}isReducedEchelonForm(){let e=0,n=0,t=-1,r=!0,o=!1;for(;e<this.rows&&r;){for(n=0,o=!1;n<this.columns&&!1===o;)0===this.get(e,n)?n++:1===this.get(e,n)&&n>t?(o=!0,t=n):(r=!1,o=!0);for(let t=n+1;t<this.rows;t++)0!==this.get(e,t)&&(r=!1);e++}return r}echelonForm(){let n=this.clone(),r=0,o=0;for(;r<n.rows&&o<n.columns;){let e=r;for(let t=r;t<n.rows;t++)n.get(t,o)>n.get(e,o)&&(e=t);if(0!==n.get(e,o)){n.swapRows(r,e);var i=n.get(r,o);for(let t=o;t<n.columns;t++)n.set(r,t,n.get(r,t)/i);for(let e=r+1;e<n.rows;e++){var a=n.get(e,o)/n.get(r,o);n.set(e,o,0);for(let t=o+1;t<n.columns;t++)n.set(e,t,n.get(e,t)-n.get(r,t)*a)}r++}o++}return n}reducedEchelonForm(){let r=this.echelonForm(),o=r.columns,e=r.rows,i=e-1;for(;0<=i;){if(0!==r.maxRow(i)){let n=0,t=!1;for(;n<e&&!1===t;)1===r.get(i,n)?t=!0:n++;for(let e=0;e<i;e++){var a=r.get(e,n);for(let t=n;t<o;t++){var s=r.get(e,t)-a*r.get(i,t);r.set(e,t,s)}}}i--}return r}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");var{rows:n=1,columns:r=1}=t;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new TypeError("columns must be a positive integer");var o=new L(this.rows*n,this.columns*r);for(let e=0;e<n;e++)for(let t=0;t<r;t++)o.setSubMatrix(this,this.rows*e,this.columns*t);return o}fill(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,n);return this}neg(){return this.mulS(-1)}getRow(e){a(this,e);var n=[];for(let t=0;t<this.columns;t++)n.push(this.get(e,t));return n}getRowVector(t){return L.rowVector(this.getRow(t))}setRow(e,n){a(this,e),n=c(this,n);for(let t=0;t<this.columns;t++)this.set(e,t,n[t]);return this}swapRows(e,n){a(this,e),a(this,n);for(let t=0;t<this.columns;t++){var r=this.get(e,t);this.set(e,t,this.get(n,t)),this.set(n,t,r)}return this}getColumn(e){s(this,e);var n=[];for(let t=0;t<this.rows;t++)n.push(this.get(t,e));return n}getColumnVector(t){return L.columnVector(this.getColumn(t))}setColumn(e,n){s(this,e),n=d(this,n);for(let t=0;t<this.rows;t++)this.set(t,e,n[t]);return this}swapColumns(e,n){s(this,e),s(this,n);for(let t=0;t<this.rows;t++){var r=this.get(t,e);this.set(t,e,this.get(t,n)),this.set(t,n,r)}return this}addRowVector(n){n=c(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+n[t]);return this}subRowVector(n){n=c(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-n[t]);return this}mulRowVector(n){n=c(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n[t]);return this}divRowVector(n){n=c(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/n[t]);return this}addColumnVector(n){n=d(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+n[e]);return this}subColumnVector(n){n=d(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-n[e]);return this}mulColumnVector(n){n=d(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n[e]);return this}divColumnVector(n){n=d(this,n);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/n[e]);return this}mulRow(e,n){a(this,e);for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n);return this}mulColumn(e,n){s(this,e);for(let t=0;t<this.rows;t++)this.set(t,e,this.get(t,e)*n);return this}max(){let n=this.get(0,0);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.get(e,t)>n&&(n=this.get(e,t));return n}maxIndex(){let n=this.get(0,0),r=[0,0];for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.get(e,t)>n&&(n=this.get(e,t),r[0]=e,r[1]=t);return r}min(){let n=this.get(0,0);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.get(e,t)<n&&(n=this.get(e,t));return n}minIndex(){let n=this.get(0,0),r=[0,0];for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.get(e,t)<n&&(n=this.get(e,t),r[0]=e,r[1]=t);return r}maxRow(e){a(this,e);let n=this.get(e,0);for(let t=1;t<this.columns;t++)this.get(e,t)>n&&(n=this.get(e,t));return n}maxRowIndex(e){a(this,e);let n=this.get(e,0),r=[e,0];for(let t=1;t<this.columns;t++)this.get(e,t)>n&&(n=this.get(e,t),r[1]=t);return r}minRow(e){a(this,e);let n=this.get(e,0);for(let t=1;t<this.columns;t++)this.get(e,t)<n&&(n=this.get(e,t));return n}minRowIndex(e){a(this,e);let n=this.get(e,0),r=[e,0];for(let t=1;t<this.columns;t++)this.get(e,t)<n&&(n=this.get(e,t),r[1]=t);return r}maxColumn(e){s(this,e);let n=this.get(0,e);for(let t=1;t<this.rows;t++)this.get(t,e)>n&&(n=this.get(t,e));return n}maxColumnIndex(e){s(this,e);let n=this.get(0,e),r=[0,e];for(let t=1;t<this.rows;t++)this.get(t,e)>n&&(n=this.get(t,e),r[0]=t);return r}minColumn(e){s(this,e);let n=this.get(0,e);for(let t=1;t<this.rows;t++)this.get(t,e)<n&&(n=this.get(t,e));return n}minColumnIndex(e){s(this,e);let n=this.get(0,e),r=[0,e];for(let t=1;t<this.rows;t++)this.get(t,e)<n&&(n=this.get(t,e),r[0]=t);return r}diag(){var e=Math.min(this.rows,this.columns),n=[];for(let t=0;t<e;t++)n.push(this.get(t,t));return n}norm(t="frobenius"){let n=0;if("max"===t)return this.max();if("frobenius"!==t)throw new RangeError("unknown norm type: "+t);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)n+=this.get(e,t)*this.get(e,t);return Math.sqrt(n)}cumulativeSum(){let n=0;for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)n+=this.get(e,t),this.set(e,t,n);return this}dot(e){x.isMatrix(e)&&(e=e.to1DArray());var n=this.to1DArray();if(n.length!==e.length)throw new RangeError("vectors do not have the same size");let r=0;for(let t=0;t<n.length;t++)r+=n[t]*e[t];return r}mmul(e){e=L.checkMatrix(e);var t=this.rows,o=this.columns,n=e.columns,i=new L(t,n),a=new Float64Array(o);for(let r=0;r<n;r++){for(let t=0;t<o;t++)a[t]=e.get(t,r);for(let n=0;n<t;n++){let e=0;for(let t=0;t<o;t++)e+=this.get(n,t)*a[t];i.set(n,r,e)}}return i}strassen2x2(t){t=L.checkMatrix(t);var e=new L(2,2),n=this.get(0,0),r=t.get(0,0),o=this.get(0,1),i=t.get(0,1),a=this.get(1,0),s=t.get(1,0),c=this.get(1,1),t=t.get(1,1),u=(n+c)*(r+t),l=(a+c)*r,d=n*(i-t),h=c*(s-r),f=(n+o)*t,p=d+f,g=l+h,l=u-l+d+(a-n)*(r+i);return e.set(0,0,u+h-f+(o-c)*(s+t)),e.set(0,1,p),e.set(1,0,g),e.set(1,1,l),e}strassen3x3(t){t=L.checkMatrix(t);var e=new L(3,3),n=this.get(0,0),r=this.get(0,1),o=this.get(0,2),i=this.get(1,0),a=this.get(1,1),s=this.get(1,2),c=this.get(2,0),u=this.get(2,1),l=this.get(2,2),d=t.get(0,0),h=t.get(0,1),f=t.get(0,2),p=t.get(1,0),g=t.get(1,1),y=t.get(1,2),m=t.get(2,0),v=t.get(2,1),t=t.get(2,2),b=(n-i)*(-h+g),x=(-n+i+a)*(d-h+g),w=(i+a)*(-d+h),_=n*d,E=(-n+c+u)*(d-f+y),S=(-n+c)*(f-y),O=(c+u)*(-d+f),M=(-o+u+l)*(g+m-v),k=(o-l)*(g-v),C=o*m,A=(u+l)*(-m+v),I=(-o+a+s)*(y+m-t),T=(o-s)*(y-t),j=(a+s)*(-m+t),N=(n+r+o-i-a-u-l)*g+x+w+_+M+C+A,n=_+E+O+(n+r+o-a-s-c-u)*y+C+I+j,o=b+a*(-d+h+p-g-y-m+t)+x+_+C+I+T,a=b+x+w+_+s*v,b=C+I+T+j+i*f,x=_+E+S+u*(-d+f+p-g-y-m+v)+M+k+C,w=M+k+C+A+c*h,s=_+E+S+O+l*t;return e.set(0,0,_+C+r*p),e.set(0,1,N),e.set(0,2,n),e.set(1,0,o),e.set(1,1,a),e.set(1,2,b),e.set(2,0,x),e.set(2,1,w),e.set(2,2,s),e}mmulStrassen(t){t=L.checkMatrix(t);var e=this.clone(),n=e.rows,r=e.columns,o=t.rows,i=t.columns;function b(e,n,r){if(e.rows===n&&e.columns===r)return e;{let t=x.zeros(n,r);return t=t.setSubMatrix(e,0,0)}}r!==o&&console.warn(`Multiplying ${n} x ${r} and ${o} x ${i} matrix: dimensions do not match.`);n=Math.max(n,o),o=Math.max(r,i);return function t(e,n,r,o){if(r<=512||o<=512)return e.mmul(n);r%2==1&&o%2==1?(e=b(e,r+1,o+1),n=b(n,r+1,o+1)):r%2==1?(e=b(e,r+1,o),n=b(n,r+1,o)):o%2==1&&(e=b(e,r,o+1),n=b(n,r,o+1));var i=parseInt(e.rows/2,10),a=parseInt(e.columns/2,10),s=e.subMatrix(0,i-1,0,a-1),c=n.subMatrix(0,i-1,0,a-1),u=e.subMatrix(0,i-1,a,e.columns-1),l=n.subMatrix(0,i-1,a,n.columns-1),d=e.subMatrix(i,e.rows-1,0,a-1),h=n.subMatrix(i,n.rows-1,0,a-1),e=e.subMatrix(i,e.rows-1,a,e.columns-1),n=n.subMatrix(i,n.rows-1,a,n.columns-1),f=t(x.add(s,e),x.add(c,n),i,a),p=t(x.add(d,e),c,i,a),g=t(s,x.sub(l,n),i,a),y=t(e,x.sub(h,c),i,a),m=t(x.add(s,u),n,i,a),d=t(x.sub(d,s),x.add(c,l),i,a),s=t(x.sub(u,e),x.add(h,n),i,a),c=x.add(f,y),l=(c.sub(m),c.add(s),x.add(g,m)),u=x.add(p,y),e=x.sub(f,p);e.add(g),e.add(d);let v=x.zeros(2*c.rows,2*c.columns);return(v=(v=(v=(v=v.setSubMatrix(c,0,0)).setSubMatrix(l,c.rows,0)).setSubMatrix(u,0,c.columns)).setSubMatrix(e,c.rows,c.columns)).subMatrix(0,r-1,0,o-1)}(b(e,n,o),t=b(t,n,o),n,o)}scaleRows(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");var{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(n<=e)throw new RangeError("min must be smaller than max");var r=new L(this.rows,this.columns);for(let t=0;t<this.rows;t++){var o=this.getRow(t);i(o,{min:e,max:n,output:o}),r.setRow(t,o)}return r}scaleColumns(t={}){if("object"!=typeof t)throw new TypeError("options must be an object");var{min:e=0,max:n=1}=t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(n<=e)throw new RangeError("min must be smaller than max");var r=new L(this.rows,this.columns);for(let t=0;t<this.columns;t++){var o=this.getColumn(t);i(o,{min:e,max:n,output:o}),r.setColumn(t,o)}return r}flipRows(){var n=Math.ceil(this.columns/2);for(let e=0;e<this.rows;e++)for(let t=0;t<n;t++){var r=this.get(e,t),o=this.get(e,this.columns-1-t);this.set(e,t,o),this.set(e,this.columns-1-t,r)}return this}flipColumns(){var n=Math.ceil(this.rows/2);for(let e=0;e<this.columns;e++)for(let t=0;t<n;t++){var r=this.get(t,e),o=this.get(this.rows-1-t,e);this.set(t,e,o),this.set(this.rows-1-t,e,r)}return this}kroneckerProduct(o){o=L.checkMatrix(o);var t=this.rows,e=this.columns,i=o.rows,a=o.columns,s=new L(t*i,e*a);for(let r=0;r<t;r++)for(let n=0;n<e;n++)for(let e=0;e<i;e++)for(let t=0;t<a;t++)s.set(i*r+e,a*n+t,this.get(r,n)*o.get(e,t));return s}transpose(){var n=new L(this.columns,this.rows);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)n.set(t,e,this.get(e,t));return n}sortRows(e=v){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e=v){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(n,t,r,o){g(this,n,t,r,o);var i=new L(t-n+1,o-r+1);for(let e=n;e<=t;e++)for(let t=r;t<=o;t++)i.set(e-n,t-r,this.get(e,t));return i}subMatrixRow(n,r,o){if((o=void 0===o?this.columns-1:o)<(r=void 0===r?0:r)||r<0||r>=this.columns||o<0||o>=this.columns)throw new RangeError("Argument out of range");var i=new L(n.length,o-r+1);for(let e=0;e<n.length;e++)for(let t=r;t<=o;t++){if(n[e]<0||n[e]>=this.rows)throw new RangeError("Row index out of range: "+n[e]);i.set(e,t-r,this.get(n[e],t))}return i}subMatrixColumn(n,r,o){if((o=void 0===o?this.rows-1:o)<(r=void 0===r?0:r)||r<0||r>=this.rows||o<0||o>=this.rows)throw new RangeError("Argument out of range");var i=new L(o-r+1,n.length);for(let e=0;e<n.length;e++)for(let t=r;t<=o;t++){if(n[e]<0||n[e]>=this.columns)throw new RangeError("Column index out of range: "+n[e]);i.set(t-r,e,this.get(t,n[e]))}return i}setSubMatrix(n,r,o){g(this,r,r+(n=L.checkMatrix(n)).rows-1,o,o+n.columns-1);for(let e=0;e<n.rows;e++)for(let t=0;t<n.columns;t++)this.set(r+e,o+t,n.get(e,t));return this}selection(t,e){var n=h(this,t,e),r=new L(t.length,e.length);for(let e=0;e<n.row.length;e++){var o=n.row[e];for(let t=0;t<n.column.length;t++){var i=n.column[t];r.set(e,t,this.get(o,i))}}return r}trace(){let e=Math.min(this.rows,this.columns),n=0;for(let t=0;t<e;t++)n+=this.get(t,t);return n}clone(){var n=new L(this.rows,this.columns);for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)n.set(e,t,this.get(e,t));return n}sum(t){switch(t){case"row":var n=this,r=y(n.rows);for(let e=0;e<n.rows;++e)for(let t=0;t<n.columns;++t)r[e]+=n.get(e,t);return r;case"column":var o=this,i=y(o.columns);for(let e=0;e<o.rows;++e)for(let t=0;t<o.columns;++t)i[t]+=o.get(e,t);return i;case void 0:{var a=this;let n=0;for(let e=0;e<a.rows;e++)for(let t=0;t<a.columns;t++)n+=a.get(e,t);return n;return}default:throw new Error("invalid option: "+t)}}product(t){switch(t){case"row":var n=this,r=y(n.rows,1);for(let e=0;e<n.rows;++e)for(let t=0;t<n.columns;++t)r[e]*=n.get(e,t);return r;case"column":var o=this,i=y(o.columns,1);for(let e=0;e<o.rows;++e)for(let t=0;t<o.columns;++t)i[t]*=o.get(e,t);return i;case void 0:{var a=this;let n=1;for(let e=0;e<a.rows;e++)for(let t=0;t<a.columns;t++)n*=a.get(e,t);return n;return}default:throw new Error("invalid option: "+t)}}mean(t){var e=this.sum(t);switch(t){case"row":for(let t=0;t<this.rows;t++)e[t]/=this.columns;return e;case"column":for(let t=0;t<this.columns;t++)e[t]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: "+t)}}variance(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");var{unbiased:i=!0,mean:a=this.mean(t)}=e;if("boolean"!=typeof i)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(Array.isArray(a)){var s=this,c=i,u=a,n=s.rows,l=s.columns,d=[];for(let o=0;o<n;o++){let e=0,n=0,r;for(let t=0;t<l;t++)r=s.get(o,t)-u[o],e+=r,n+=r*r;d.push(c?(n-e*e/l)/(l-1):(n-e*e/l)/l)}return d}throw new TypeError("mean must be an array");case"column":if(Array.isArray(a)){var h=this,f=i,p=a,g=h.rows,r=h.columns,y=[];for(let o=0;o<r;o++){let e=0,n=0,r;for(let t=0;t<g;t++)r=h.get(t,o)-p[o],e+=r,n+=r*r;y.push(f?(n-e*e/g)/(g-1):(n-e*e/g)/g)}return y}throw new TypeError("mean must be an array");case void 0:if("number"!=typeof a)throw new TypeError("mean must be a number");{var m=this;var v=i;var b=a;var x=m.rows,w=m.columns,_=x*w;let n=0,r=0,o;for(let e=0;e<x;e++)for(let t=0;t<w;t++)o=m.get(e,t)-b,n+=o,r+=o*o;return v?(r-n*n/_)/(_-1):(r-n*n/_)/_;return}default:throw new Error("invalid option: "+t)}}standardDeviation(t,e){"object"==typeof t&&(e=t,t=void 0);var n=this.variance(t,e);if(void 0===t)return Math.sqrt(n);for(let t=0;t<n.length;t++)n[t]=Math.sqrt(n[t]);return n}center(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");var{center:n=this.mean(t)}=e;switch(t){case"row":if(Array.isArray(n)){var r=this,o=n;for(let e=0;e<r.rows;e++)for(let t=0;t<r.columns;t++)r.set(e,t,r.get(e,t)-o[e]);return this}throw new TypeError("center must be an array");case"column":if(Array.isArray(n)){var i=this,a=n;for(let e=0;e<i.rows;e++)for(let t=0;t<i.columns;t++)i.set(e,t,i.get(e,t)-a[t]);return this}throw new TypeError("center must be an array");case void 0:if("number"!=typeof n)throw new TypeError("center must be a number");var s=this,c=n;for(let e=0;e<s.rows;e++)for(let t=0;t<s.columns;t++)s.set(e,t,s.get(e,t)-c);return this;default:throw new Error("invalid option: "+t)}}scale(t,e={}){if("object"==typeof t&&(e=t,t=void 0),"object"!=typeof e)throw new TypeError("options must be an object");let n=e.scale;switch(t){case"row":if(void 0===n)n=function(r){var t=[];for(let n=0;n<r.rows;n++){let e=0;for(let t=0;t<r.columns;t++)e+=Math.pow(r.get(n,t),2)/(r.columns-1);t.push(Math.sqrt(e))}return t}(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");var r=this,o=n;for(let e=0;e<r.rows;e++)for(let t=0;t<r.columns;t++)r.set(e,t,r.get(e,t)/o[e]);return this;case"column":if(void 0===n)n=function(r){var t=[];for(let n=0;n<r.columns;n++){let e=0;for(let t=0;t<r.rows;t++)e+=Math.pow(r.get(t,n),2)/(r.rows-1);t.push(Math.sqrt(e))}return t}(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");var i=this,a=n;for(let e=0;e<i.rows;e++)for(let t=0;t<i.columns;t++)i.set(e,t,i.get(e,t)/a[t]);return this;case void 0:if(void 0===n)n=function(n){var r=n.size-1;let o=0;for(let e=0;e<n.columns;e++)for(let t=0;t<n.rows;t++)o+=Math.pow(n.get(t,e),2)/r;return Math.sqrt(o)}(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");var s=this,c=n;for(let e=0;e<s.rows;e++)for(let t=0;t<s.columns;t++)s.set(e,t,s.get(e,t)/c);return this;default:throw new Error("invalid option: "+t)}}toString(t){return r(this,t)}}function v(t,e){return t-e}x.prototype.klass="Matrix","undefined"!=typeof Symbol&&(x.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return r(this)}),x.random=x.rand,x.randomInt=x.randInt,x.diagonal=x.diag,x.prototype.diagonal=x.prototype.diag,x.identity=x.eye,x.prototype.negate=x.prototype.neg,x.prototype.tensorProduct=x.prototype.kroneckerProduct;class L extends x{constructor(e,n){if(super(),L.isMatrix(e))return e.clone();if(Number.isInteger(e)&&0<e){if(this.data=[],!(Number.isInteger(n)&&0<n))throw new TypeError("nColumns must be a positive integer");for(let t=0;t<e;t++)this.data.push(new Float64Array(n))}else{if(!Array.isArray(e))throw new TypeError("First argument must be a positive number or an array");var r=e;if(e=r.length,"number"!=typeof(n=r[0].length)||0===n)throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let t=0;t<e;t++){if(r[t].length!==n)throw new RangeError("Inconsistent array dimensions");this.data.push(Float64Array.from(r[t]))}}return this.rows=e,this.columns=n,this}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}removeRow(t){if(a(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(t,1),--this.rows,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),a(this,t,!0),e=Float64Array.from(c(this,e)),this.data.splice(t,0,e),this.rows+=1,this}removeColumn(n){if(s(this,n),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(let e=0;e<this.rows;e++){var r=new Float64Array(this.columns-1);for(let t=0;t<n;t++)r[t]=this.data[e][t];for(let t=n+1;t<this.columns;t++)r[t-1]=this.data[e][t];this.data[e]=r}return--this.columns,this}addColumn(n,r){void 0===r&&(r=n,n=this.columns),s(this,n,!0),r=d(this,r);for(let e=0;e<this.rows;e++){var o=new Float64Array(this.columns+1);let t=0;for(;t<n;t++)o[t]=this.data[e][t];for(o[t++]=r[e];t<this.columns+1;t++)o[t]=this.data[e][t-1];this.data[e]=o}return this.columns+=1,this}}var b=L;(e=x).prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},e.prototype.addS=function(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+n);return this},e.prototype.addM=function(n){if(n=b.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+n.get(e,t));return this},e.add=function(t,e){return new b(t).add(e)},e.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},e.prototype.subS=function(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-n);return this},e.prototype.subM=function(n){if(n=b.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-n.get(e,t));return this},e.sub=function(t,e){return new b(t).sub(e)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},e.prototype.mulS=function(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n);return this},e.prototype.mulM=function(n){if(n=b.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n.get(e,t));return this},e.mul=function(t,e){return new b(t).mul(e)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},e.prototype.divS=function(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/n);return this},e.prototype.divM=function(n){if(n=b.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/n.get(e,t));return this},e.div=function(t,e){return new b(t).div(e)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},e.prototype.modS=function(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)%n);return this},e.prototype.modM=function(n){if(n=b.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)%n.get(e,t));return this},e.mod=function(t,e){return new b(t).mod(e)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},e.prototype.andS=function(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)&n);return this},e.prototype.andM=function(n){if(n=b.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)&n.get(e,t));return this},e.and=function(t,e){return new b(t).and(e)},e.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},e.prototype.orS=function(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)|n);return this},e.prototype.orM=function(n){if(n=b.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)|n.get(e,t));return this},e.or=function(t,e){return new b(t).or(e)},e.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},e.prototype.xorS=function(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)^n);return this},e.prototype.xorM=function(n){if(n=b.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)^n.get(e,t));return this},e.xor=function(t,e){return new b(t).xor(e)},e.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},e.prototype.leftShiftS=function(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)<<n);return this},e.prototype.leftShiftM=function(n){if(n=b.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)<<n.get(e,t));return this},e.leftShift=function(t,e){return new b(t).leftShift(e)},e.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},e.prototype.signPropagatingRightShiftS=function(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>n);return this},e.prototype.signPropagatingRightShiftM=function(n){if(n=b.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>n.get(e,t));return this},e.signPropagatingRightShift=function(t,e){return new b(t).signPropagatingRightShift(e)},e.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},e.prototype.rightShiftS=function(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>>n);return this},e.prototype.rightShiftM=function(n){if(n=b.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>>n.get(e,t));return this},e.rightShift=function(t,e){return new b(t).rightShift(e)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,~this.get(e,t));return this},e.not=function(t){return new b(t).not()},e.prototype.abs=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.abs(this.get(e,t)));return this},e.abs=function(t){return new b(t).abs()},e.prototype.acos=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.acos(this.get(e,t)));return this},e.acos=function(t){return new b(t).acos()},e.prototype.acosh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.acosh(this.get(e,t)));return this},e.acosh=function(t){return new b(t).acosh()},e.prototype.asin=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.asin(this.get(e,t)));return this},e.asin=function(t){return new b(t).asin()},e.prototype.asinh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.asinh(this.get(e,t)));return this},e.asinh=function(t){return new b(t).asinh()},e.prototype.atan=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.atan(this.get(e,t)));return this},e.atan=function(t){return new b(t).atan()},e.prototype.atanh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.atanh(this.get(e,t)));return this},e.atanh=function(t){return new b(t).atanh()},e.prototype.cbrt=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cbrt(this.get(e,t)));return this},e.cbrt=function(t){return new b(t).cbrt()},e.prototype.ceil=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.ceil(this.get(e,t)));return this},e.ceil=function(t){return new b(t).ceil()},e.prototype.clz32=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.clz32(this.get(e,t)));return this},e.clz32=function(t){return new b(t).clz32()},e.prototype.cos=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cos(this.get(e,t)));return this},e.cos=function(t){return new b(t).cos()},e.prototype.cosh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cosh(this.get(e,t)));return this},e.cosh=function(t){return new b(t).cosh()},e.prototype.exp=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.exp(this.get(e,t)));return this},e.exp=function(t){return new b(t).exp()},e.prototype.expm1=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.expm1(this.get(e,t)));return this},e.expm1=function(t){return new b(t).expm1()},e.prototype.floor=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.floor(this.get(e,t)));return this},e.floor=function(t){return new b(t).floor()},e.prototype.fround=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.fround(this.get(e,t)));return this},e.fround=function(t){return new b(t).fround()},e.prototype.log=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log(this.get(e,t)));return this},e.log=function(t){return new b(t).log()},e.prototype.log1p=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log1p(this.get(e,t)));return this},e.log1p=function(t){return new b(t).log1p()},e.prototype.log10=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log10(this.get(e,t)));return this},e.log10=function(t){return new b(t).log10()},e.prototype.log2=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log2(this.get(e,t)));return this},e.log2=function(t){return new b(t).log2()},e.prototype.round=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.round(this.get(e,t)));return this},e.round=function(t){return new b(t).round()},e.prototype.sign=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sign(this.get(e,t)));return this},e.sign=function(t){return new b(t).sign()},e.prototype.sin=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sin(this.get(e,t)));return this},e.sin=function(t){return new b(t).sin()},e.prototype.sinh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sinh(this.get(e,t)));return this},e.sinh=function(t){return new b(t).sinh()},e.prototype.sqrt=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sqrt(this.get(e,t)));return this},e.sqrt=function(t){return new b(t).sqrt()},e.prototype.tan=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.tan(this.get(e,t)));return this},e.tan=function(t){return new b(t).tan()},e.prototype.tanh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.tanh(this.get(e,t)));return this},e.tanh=function(t){return new b(t).tanh()},e.prototype.trunc=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.trunc(this.get(e,t)));return this},e.trunc=function(t){return new b(t).trunc()},e.pow=function(t,e){return new b(t).pow(e)},e.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},e.prototype.powS=function(n){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.pow(this.get(e,t),n));return this},e.prototype.powM=function(n){if(n=b.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.pow(this.get(e,t),n.get(e,t)));return this};class w extends x{constructor(t,e,n){super(),this.matrix=t,this.rows=e,this.columns=n}}class N extends w{constructor(t,e){s(t,e),super(t,t.rows,1),this.column=e}set(t,e,n){return this.matrix.set(t,this.column,n),this}get(t){return this.matrix.get(t,this.column)}}class D extends w{constructor(t,e){e=p(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,n){return this.matrix.set(t,this.columnIndices[e],n),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class P extends w{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(t,this.columns-e-1,n),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}class F extends w{constructor(t){super(t,t.rows,t.columns)}set(t,e,n){return this.matrix.set(this.rows-t-1,e,n),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class G extends w{constructor(t,e){a(t,e),super(t,1,t.columns),this.row=e}set(t,e,n){return this.matrix.set(this.row,e,n),this}get(t,e){return this.matrix.get(this.row,e)}}class U extends w{constructor(t,e){super(t,(e=f(t,e)).length,t.columns),this.rowIndices=e}set(t,e,n){return this.matrix.set(this.rowIndices[t],e,n),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class _ extends w{constructor(t,e,n){e=h(t,e,n);super(t,e.row.length,e.column.length),this.rowIndices=e.row,this.columnIndices=e.column}set(t,e,n){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],n),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class W extends w{constructor(t,e,n,r,o){g(t,e,n,r,o),super(t,n-e+1,o-r+1),this.startRow=e,this.startColumn=r}set(t,e,n){return this.matrix.set(this.startRow+t,this.startColumn+e,n),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class X extends w{constructor(t){super(t,t.columns,t.rows)}set(t,e,n){return this.matrix.set(e,t,n),this}get(t,e){return this.matrix.get(e,t)}}class E extends x{constructor(t,e={}){var{rows:e=1}=e;if(t.length%e!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=e,this.columns=t.length/e,this.data=t}set(t,e,n){t=this._calculateIndex(t,e);return this.data[t]=n,this}get(t,e){t=this._calculateIndex(t,e);return this.data[t]}_calculateIndex(t,e){return t*this.columns+e}}class R extends x{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,n){return this.data[t][e]=n,this}get(t,e){return this.data[t][e]}}function Y(t,e){if(Array.isArray(t))return t[0]&&Array.isArray(t[0])?new R(t):new E(t,e);throw new Error("the argument is not an array")}class S{constructor(t){let e,n,r,o,i,a,s,c,u,l=(t=R.checkMatrix(t)).clone(),d=l.rows,h=l.columns,f=new Float64Array(d),p=1;for(e=0;e<d;e++)f[e]=e;for(c=new Float64Array(d),n=0;n<h;n++){for(e=0;e<d;e++)c[e]=l.get(e,n);for(e=0;e<d;e++){for(u=Math.min(e,n),i=0,r=0;r<u;r++)i+=l.get(e,r)*c[r];c[e]-=i,l.set(e,n,c[e])}for(o=n,e=n+1;e<d;e++)Math.abs(c[e])>Math.abs(c[o])&&(o=e);if(o!==n){for(r=0;r<h;r++)a=l.get(o,r),l.set(o,r,l.get(n,r)),l.set(n,r,a);s=f[o],f[o]=f[n],f[n]=s,p=-p}if(n<d&&0!==l.get(n,n))for(e=n+1;e<d;e++)l.set(e,n,l.get(e,n)/l.get(n,n))}this.LU=l,this.pivotVector=f,this.pivotSign=p}isSingular(){var e=this.LU,n=e.columns;for(let t=0;t<n;t++)if(0===e.get(t,t))return!0;return!1}solve(t){t=L.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let n,r,o,i=t.columns,a=t.subMatrixRow(this.pivotVector,0,i-1),s=e.columns;for(o=0;o<s;o++)for(n=o+1;n<s;n++)for(r=0;r<i;r++)a.set(n,r,a.get(n,r)-a.get(o,r)*e.get(n,o));for(o=s-1;0<=o;o--){for(r=0;r<i;r++)a.set(o,r,a.get(o,r)/e.get(o,o));for(n=0;n<o;n++)for(r=0;r<i;r++)a.set(n,r,a.get(n,r)-a.get(o,r)*e.get(n,o))}return a}get determinant(){var e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let n=this.pivotSign,r=e.columns;for(let t=0;t<r;t++)n*=e.get(t,t);return n}get lowerTriangularMatrix(){var n=this.LU,t=n.rows,r=n.columns,o=new L(t,r);for(let e=0;e<t;e++)for(let t=0;t<r;t++)e>t?o.set(e,t,n.get(e,t)):e===t?o.set(e,t,1):o.set(e,t,0);return o}get upperTriangularMatrix(){var n=this.LU,t=n.rows,r=n.columns,o=new L(t,r);for(let e=0;e<t;e++)for(let t=0;t<r;t++)e<=t?o.set(e,t,n.get(e,t)):o.set(e,t,0);return o}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function B(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==e?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}class O{constructor(t){let e,n,r,o,i=(t=R.checkMatrix(t)).clone(),a=t.rows,s=t.columns,c=new Float64Array(s);for(r=0;r<s;r++){let t=0;for(e=r;e<a;e++)t=B(t,i.get(e,r));if(0!==t){for(i.get(r,r)<0&&(t=-t),e=r;e<a;e++)i.set(e,r,i.get(e,r)/t);for(i.set(r,r,i.get(r,r)+1),n=r+1;n<s;n++){for(o=0,e=r;e<a;e++)o+=i.get(e,r)*i.get(e,n);for(o=-o/i.get(r,r),e=r;e<a;e++)i.set(e,n,i.get(e,n)+o*i.get(e,r))}}c[r]=-t}this.QR=i,this.Rdiag=c}solve(t){t=L.checkMatrix(t);var e=this.QR,n=e.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r,o,i,a,s=t.columns,c=t.clone(),u=e.columns;for(i=0;i<u;i++)for(o=0;o<s;o++){for(a=0,r=i;r<n;r++)a+=e.get(r,i)*c.get(r,o);for(a=-a/e.get(i,i),r=i;r<n;r++)c.set(r,o,c.get(r,o)+a*e.get(r,i))}for(i=u-1;0<=i;i--){for(o=0;o<s;o++)c.set(i,o,c.get(i,o)/this.Rdiag[i]);for(r=0;r<i;r++)for(o=0;o<s;o++)c.set(r,o,c.get(r,o)-c.get(i,o)*e.get(r,i))}return c.subMatrix(0,u-1,0,s-1)}isFullRank(){var e=this.QR.columns;for(let t=0;t<e;t++)if(0===this.Rdiag[t])return!1;return!0}get upperTriangularMatrix(){let t,e,n=this.QR,r=n.columns,o=new L(r,r);for(t=0;t<r;t++)for(e=0;e<r;e++)t<e?o.set(t,e,n.get(t,e)):t===e?o.set(t,e,this.Rdiag[t]):o.set(t,e,0);return o}get orthogonalMatrix(){let t,e,n,r,o=this.QR,i=o.rows,a=o.columns,s=new L(i,a);for(n=a-1;0<=n;n--){for(t=0;t<i;t++)s.set(t,n,0);for(s.set(n,n,1),e=n;e<a;e++)if(0!==o.get(n,n)){for(r=0,t=n;t<i;t++)r+=o.get(t,n)*s.get(t,e);for(r=-r/o.get(n,n),t=n;t<i;t++)s.set(t,e,s.get(t,e)+r*o.get(t,n))}}return s}}class M{constructor(t,e={}){let h=(t=R.checkMatrix(t)).rows,f=t.columns,{computeLeftSingularVectors:n=!0,computeRightSingularVectors:r=!0,autoTranspose:o=!1}=e,i,p=Boolean(n),g=Boolean(r),a=!1;h<f?o?(i=t.transpose(),h=i.rows,f=i.columns,a=!0,e=p,p=g,g=e):(i=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose")):i=t.clone();let s=Math.min(h,f),c=Math.min(h+1,f),y=new Float64Array(c),m=new L(h,s),v=new L(f,f),b=new Float64Array(f),u=new Float64Array(h),l=new Float64Array(c);for(let t=0;t<c;t++)l[t]=t;var d=Math.min(h-1,f),x=Math.max(0,Math.min(f-2,h)),w=Math.max(d,x);for(let r=0;r<w;r++){if(r<d){y[r]=0;for(let t=r;t<h;t++)y[r]=B(y[r],i.get(t,r));if(0!==y[r]){i.get(r,r)<0&&(y[r]=-y[r]);for(let t=r;t<h;t++)i.set(t,r,i.get(t,r)/y[r]);i.set(r,r,i.get(r,r)+1)}y[r]=-y[r]}for(let n=r+1;n<f;n++){if(r<d&&0!==y[r]){let e=0;for(let t=r;t<h;t++)e+=i.get(t,r)*i.get(t,n);e=-e/i.get(r,r);for(let t=r;t<h;t++)i.set(t,n,i.get(t,n)+e*i.get(t,r))}b[n]=i.get(r,n)}if(p&&r<d)for(let t=r;t<h;t++)m.set(t,r,i.get(t,r));if(r<x){b[r]=0;for(let t=r+1;t<f;t++)b[r]=B(b[r],b[t]);if(0!==b[r]){b[r+1]<0&&(b[r]=0-b[r]);for(let t=r+1;t<f;t++)b[t]/=b[r];b[r+1]+=1}if(b[r]=-b[r],r+1<h&&0!==b[r]){for(let t=r+1;t<h;t++)u[t]=0;for(let e=r+1;e<h;e++)for(let t=r+1;t<f;t++)u[e]+=b[t]*i.get(e,t);for(let e=r+1;e<f;e++){var _=-b[e]/b[r+1];for(let t=r+1;t<h;t++)i.set(t,e,i.get(t,e)+_*u[t])}}if(g)for(let t=r+1;t<f;t++)v.set(t,r,b[t])}}let E=Math.min(f,h+1);if(d<f&&(y[d]=i.get(d,d)),h<E&&(y[E-1]=0),x+1<E&&(b[x]=i.get(x,E-1)),b[E-1]=0,p){for(let e=d;e<s;e++){for(let t=0;t<h;t++)m.set(t,e,0);m.set(e,e,1)}for(let r=d-1;0<=r;r--)if(0!==y[r]){for(let n=r+1;n<s;n++){let e=0;for(let t=r;t<h;t++)e+=m.get(t,r)*m.get(t,n);e=-e/m.get(r,r);for(let t=r;t<h;t++)m.set(t,n,m.get(t,n)+e*m.get(t,r))}for(let t=r;t<h;t++)m.set(t,r,-m.get(t,r));m.set(r,r,1+m.get(r,r));for(let t=0;t<r-1;t++)m.set(t,r,0)}else{for(let t=0;t<h;t++)m.set(t,r,0);m.set(r,r,1)}}if(g)for(let r=f-1;0<=r;r--){if(r<x&&0!==b[r])for(let n=r+1;n<f;n++){let e=0;for(let t=r+1;t<f;t++)e+=v.get(t,r)*v.get(t,n);e=-e/v.get(r+1,r);for(let t=r+1;t<f;t++)v.set(t,n,v.get(t,n)+e*v.get(t,r))}for(let t=0;t<f;t++)v.set(t,r,0);v.set(r,r,1)}let S=E-1,O=0,M=Number.EPSILON;for(;0<E;){let d,e;for(d=E-2;-1<=d&&-1!==d;d--){let t=Number.MIN_VALUE+M*Math.abs(y[d]+Math.abs(y[d+1]));if(Math.abs(b[d])<=t||Number.isNaN(b[d])){b[d]=0;break}}if(d===E-2)e=4;else{let t;for(t=E-1;t>=d&&t!==d;t--){var k=(t!==E?Math.abs(b[t]):0)+(t!==d+1?Math.abs(b[t-1]):0);if(Math.abs(y[t])<=M*k){y[t]=0;break}}t===d?e=3:t===E-1?e=1:(e=2,d=t)}switch(d++,e){case 1:{let t=b[E-2];b[E-2]=0;for(let e=E-2;e>=d;e--){var C=B(y[e],t),A=y[e]/C,I=t/C;if(y[e]=C,e!==d&&(t=-I*b[e-1],b[e-1]=A*b[e-1]),g)for(let t=0;t<f;t++)C=A*v.get(t,e)+I*v.get(t,E-1),v.set(t,E-1,-I*v.get(t,e)+A*v.get(t,E-1)),v.set(t,e,C)}break}case 2:{let t=b[d-1];b[d-1]=0;for(let e=d;e<E;e++){var T=B(y[e],t),j=y[e]/T,N=t/T;if(y[e]=T,t=-N*b[e],b[e]=j*b[e],p)for(let t=0;t<h;t++)T=j*m.get(t,e)+N*m.get(t,d-1),m.set(t,d-1,-N*m.get(t,e)+j*m.get(t,d-1)),m.set(t,e,T)}break}case 3:{let t=Math.max(Math.abs(y[E-1]),Math.abs(y[E-2]),Math.abs(b[E-2]),Math.abs(y[d]),Math.abs(b[d])),e=y[E-1]/t,n=y[E-2]/t,r=b[E-2]/t,o=y[d]/t,i=b[d]/t,a=((n+e)*(n-e)+r*r)/2,s=e*r*(e*r),c=0,u=(o+e)*(o-e)+(c=0==a&&0==s?c:s/(a+(c=a<0?0-Math.sqrt(a*a+s):Math.sqrt(a*a+s)))),l=o*i;for(let o=d;o<E-1;o++){let e=B(u,l),n=(0===e&&(e=Number.MIN_VALUE),u/e),r=l/e;if(o!==d&&(b[o-1]=e),u=n*y[o]+r*b[o],b[o]=n*b[o]-r*y[o],l=r*y[o+1],y[o+1]=n*y[o+1],g)for(let t=0;t<f;t++)e=n*v.get(t,o)+r*v.get(t,o+1),v.set(t,o+1,-r*v.get(t,o)+n*v.get(t,o+1)),v.set(t,o,e);if(0===(e=B(u,l))&&(e=Number.MIN_VALUE),n=u/e,r=l/e,y[o]=e,u=n*b[o]+r*y[o+1],y[o+1]=-r*b[o]+n*y[o+1],l=r*b[o+1],b[o+1]=n*b[o+1],p&&o<h-1)for(let t=0;t<h;t++)e=n*m.get(t,o)+r*m.get(t,o+1),m.set(t,o+1,-r*m.get(t,o)+n*m.get(t,o+1)),m.set(t,o,e)}b[E-2]=u,O+=1;break}case 4:if(y[d]<=0&&(y[d]=y[d]<0?-y[d]:0,g))for(let t=0;t<=S;t++)v.set(t,d,-v.get(t,d));for(;d<S&&!(y[d]>=y[d+1]);){let e=y[d];if(y[d]=y[d+1],y[d+1]=e,g&&d<f-1)for(let t=0;t<f;t++)e=v.get(t,d+1),v.set(t,d+1,v.get(t,d)),v.set(t,d,e);if(p&&d<h-1)for(let t=0;t<h;t++)e=m.get(t,d+1),m.set(t,d+1,m.get(t,d)),m.set(t,d,e);d++}O=0,E--}}a&&(e=v,v=m,m=e),this.m=h,this.n=f,this.s=y,this.U=m,this.V=v}solve(t){var e=this.threshold,o=this.s.length,n=L.zeros(o,o);for(let t=0;t<o;t++)Math.abs(this.s[t])<=e?n.set(t,t,0):n.set(t,t,1/this.s[t]);var i=this.U,r=this.rightSingularVectors,a=r.mmul(n),s=r.rows,c=i.rows,u=L.zeros(s,c);for(let r=0;r<s;r++)for(let n=0;n<c;n++){let e=0;for(let t=0;t<o;t++)e+=a.get(r,t)*i.get(n,t);u.set(r,n,e)}return u.mmul(t)}solveForDiagonal(t){return this.solve(L.diag(t))}inverse(){var n=this.V,r=this.threshold,t=n.rows,o=n.columns,i=new L(t,this.s.length);for(let e=0;e<t;e++)for(let t=0;t<o;t++)Math.abs(this.s[t])>r&&i.set(e,t,n.get(e,t)/this.s[t]);var a=this.U,e=a.rows,s=a.columns,c=new L(t,e);for(let r=0;r<t;r++)for(let n=0;n<e;n++){let e=0;for(let t=0;t<s;t++)e+=i.get(r,t)*a.get(n,t);c.set(r,n,e)}return c}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let n=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,o=this.s;for(let t=0,e=o.length;t<e;t++)o[t]>n&&r++;return r}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return L.diag(this.s)}}function V(t,e=!1){return t=R.checkMatrix(t),e?new M(t).inverse():k(t,L.eye(t.rows))}function k(t,e,n=!1){return t=R.checkMatrix(t),e=R.checkMatrix(e),new(n?M:t.isSquare()?S:O)(t).solve(e)}function C(o){if((o=L.checkMatrix(o)).isSquare()){let t,e,n,r;var i,a,s;return 2===o.columns?(t=o.get(0,0),e=o.get(0,1),n=o.get(1,0),r=o.get(1,1),t*r-e*n):3===o.columns?(i=new _(o,[1,2],[1,2]),a=new _(o,[1,2],[0,2]),s=new _(o,[1,2],[0,1]),t=o.get(0,0),e=o.get(0,1),n=o.get(0,2),t*C(i)-e*C(a)+n*C(s)):new S(o).determinant}throw Error("determinant can only be calculated for a square matrix")}function H(e,t={}){var{thresholdValue:n=1e-9,thresholdError:r=1e-9}=t,o=(e=L.checkMatrix(e)).rows,i=new L(o,o);for(let t=0;t<o;t++){var a=L.columnVector(e.getRow(t)),s=e.subMatrixRow(function(e,n){var r=[];for(let t=0;t<e;t++)t!==n&&r.push(t);return r}(o,t)).transpose(),c=new M(s).solve(a),a=L.sub(a,s.mmul(c)).abs().max();i.setRow(t,function(t,e,n,r=1e-9,o=1e-9){if(o<t)return new Array(e.rows+1).fill(0);var i=e.addRow(n,[0]);for(let t=0;t<i.rows;t++)Math.abs(i.get(t,0))<r&&i.set(t,0,0);return i.to1DArray()}(a,c,t,n,r))}return i}function q(t,e=Number.EPSILON){t=L.checkMatrix(t);var t=new M(t,{autoTranspose:!0}),n=t.leftSingularVectors,r=t.rightSingularVectors,o=t.diagonal;for(let t=0;t<o.length;t++)Math.abs(o[t])>e?o[t]=1/o[t]:o[t]=0;return r.mmul(L.diag(o).mmul(n.transpose()))}function K(n,t=n,e={}){n=new L(n);let r=!1;if("object"!=typeof t||L.isMatrix(t)||Array.isArray(t)?t=new L(t):(e=t,t=n,r=!0),n.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");var{center:e=!0}=e,o=(e&&(n=n.center("column"),r||(t=t.center("column"))),n.transpose().mmul(t));for(let e=0;e<o.rows;e++)for(let t=0;t<o.columns;t++)o.set(e,t,o.get(e,t)*(1/(n.rows-1)));return o}function Z(n,t=n,e={}){n=new L(n);let r=!1;if("object"!=typeof t||L.isMatrix(t)||Array.isArray(t)?t=new L(t):(e=t,t=n,r=!0),n.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");var{center:e=!0,scale:o=!0}=e,i=(e&&(n.center("column"),r||t.center("column")),o&&(n.scale("column"),r||t.scale("column")),n.standardDeviation("column",{unbiased:!0})),a=r?i:t.standardDeviation("column",{unbiased:!0}),s=n.transpose().mmul(t);for(let e=0;e<s.rows;e++)for(let t=0;t<s.columns;t++)s.set(e,t,s.get(e,t)*(1/(i[e]*a[t]))*(1/(n.rows-1)));return s}class A{constructor(t,c={}){var{assumeSymmetric:c=!1}=c;if(!(t=R.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");let e,n,M=t.columns,k=new L(M,M),C=new Float64Array(M),A=new Float64Array(M),r=t;if(!!c||t.isSymmetric()){for(e=0;e<M;e++)for(n=0;n<M;n++)k.set(e,n,r.get(e,n));{var u=M;var l=A;var d=C;var h=k;let t,e,n,r,o,i,a,s;for(o=0;o<u;o++)d[o]=h.get(u-1,o);for(r=u-1;0<r;r--){for(s=0,n=0,i=0;i<r;i++)s+=Math.abs(d[i]);if(0===s)for(l[r]=d[r-1],o=0;o<r;o++)d[o]=h.get(r-1,o),h.set(r,o,0),h.set(o,r,0);else{for(i=0;i<r;i++)d[i]/=s,n+=d[i]*d[i];for(t=d[r-1],e=Math.sqrt(n),0<t&&(e=-e),l[r]=s*e,n-=t*e,d[r-1]=t-e,o=0;o<r;o++)l[o]=0;for(o=0;o<r;o++){for(t=d[o],h.set(o,r,t),e=l[o]+h.get(o,o)*t,i=o+1;i<=r-1;i++)e+=h.get(i,o)*d[i],l[i]+=h.get(i,o)*t;l[o]=e}for(t=0,o=0;o<r;o++)l[o]/=n,t+=l[o]*d[o];for(a=t/(n+n),o=0;o<r;o++)l[o]-=a*d[o];for(o=0;o<r;o++){for(t=d[o],e=l[o],i=o;i<=r-1;i++)h.set(i,o,h.get(i,o)-(t*l[i]+e*d[i]));d[o]=h.get(r-1,o),h.set(r,o,0)}}d[r]=n}for(r=0;r<u-1;r++){if(h.set(u-1,r,h.get(r,r)),h.set(r,r,1),0!==(n=d[r+1])){for(i=0;i<=r;i++)d[i]=h.get(i,r+1)/n;for(o=0;o<=r;o++){for(e=0,i=0;i<=r;i++)e+=h.get(i,r+1)*h.get(i,o);for(i=0;i<=r;i++)h.set(i,o,h.get(i,o)-e*d[i])}}for(i=0;i<=r;i++)h.set(i,r+1,0)}for(o=0;o<u;o++)d[o]=h.get(u-1,o),h.set(u-1,o,0);h.set(u-1,u-1,1),l[0]=0}{var x=M;var w=A;var _=C;var E=k;let t,e,n,r,o,i,a,s,c,u,l,d,h,f,p,g,y;for(n=1;n<x;n++)w[n-1]=w[n];let m=w[x-1]=0,v=0,b=Number.EPSILON;for(i=0;i<x;i++){for(v=Math.max(v,Math.abs(_[i])+Math.abs(w[i])),a=i;a<x&&!(Math.abs(w[a])<=b*v);)a++;if(a>i){y=0;do{for(y+=1,t=_[i],s=(_[i+1]-t)/(2*w[i]),c=B(s,1),s<0&&(c=-c),_[i]=w[i]/(s+c),_[i+1]=w[i]*(s+c),u=_[i+1],e=t-_[i],n=i+2;n<x;n++)_[n]-=e;for(m+=e,s=_[a],l=1,d=l,h=l,f=w[i+1],p=0,g=0,n=a-1;n>=i;n--)for(h=d,d=l,g=p,t=l*w[n],e=l*s,c=B(s,w[n]),w[n+1]=p*c,p=w[n]/c,l=s/c,s=l*_[n]-p*t,_[n+1]=e+p*(l*t+p*_[n]),o=0;o<x;o++)e=E.get(o,n+1),E.set(o,n+1,p*E.get(o,n)+l*e),E.set(o,n,l*E.get(o,n)-p*e)}while(s=-p*g*h*f*w[i]/u,w[i]=p*s,_[i]=l*s,Math.abs(w[i])>b*v)}_[i]=_[i]+m,w[i]=0}for(n=0;n<x-1;n++){for(o=n,s=_[n],r=n+1;r<x;r++)_[r]<s&&(o=r,s=_[r]);if(o!==n)for(_[o]=_[n],_[n]=s,r=0;r<x;r++)s=E.get(r,n),E.set(r,n,E.get(r,o)),E.set(r,o,s)}}}else{var I=new L(M,M),c=new Float64Array(M);for(n=0;n<M;n++)for(e=0;e<M;e++)I.set(e,n,r.get(e,n));{var f=M;var p=I;var g=c;var y=k;let t,e,n,r,o,i,a,s=f-1;for(i=1;i<=s-1;i++){for(a=0,r=i;r<=s;r++)a+=Math.abs(p.get(r,i-1));if(0!==a){for(n=0,r=s;r>=i;r--)g[r]=p.get(r,i-1)/a,n+=g[r]*g[r];for(e=Math.sqrt(n),0<g[i]&&(e=-e),n-=g[i]*e,g[i]=g[i]-e,o=i;o<f;o++){for(t=0,r=s;r>=i;r--)t+=g[r]*p.get(r,o);for(t/=n,r=i;r<=s;r++)p.set(r,o,p.get(r,o)-t*g[r])}for(r=0;r<=s;r++){for(t=0,o=s;o>=i;o--)t+=g[o]*p.get(r,o);for(t/=n,o=i;o<=s;o++)p.set(r,o,p.get(r,o)-t*g[o])}g[i]=a*g[i],p.set(i,i-1,a*e)}}for(r=0;r<f;r++)for(o=0;o<f;o++)y.set(r,o,r===o?1:0);for(i=s-1;1<=i;i--)if(0!==p.get(i,i-1)){for(r=i+1;r<=s;r++)g[r]=p.get(r,i-1);for(o=i;o<=s;o++){for(e=0,r=i;r<=s;r++)e+=g[r]*y.get(r,o);for(e=e/g[i]/p.get(i,i-1),r=i;r<=s;r++)y.set(r,o,y.get(r,o)+e*g[r])}}}{var T=M;var j=A;var N=C;var D=k;var P=I;let t,e,n,r,o,i,a,s,c,u,l,d,h,f,p,g=T-1,y=T-1,m=Number.EPSILON,v=0,b=0,x=0,w=0,_=0,E=0,S=0,O=0;for(t=0;t<T;t++)for((t<0||t>y)&&(N[t]=P.get(t,t),j[t]=0),e=Math.max(t-1,0);e<T;e++)b+=Math.abs(P.get(t,e));for(;0<=g;){for(r=g;0<r&&(0===(E=Math.abs(P.get(r-1,r-1))+Math.abs(P.get(r,r)))&&(E=b),!(Math.abs(P.get(r,r-1))<m*E));)r--;if(r===g)P.set(g,g,P.get(g,g)+v),N[g]=P.get(g,g),j[g]=0,g--,O=0;else if(r===g-1){if(a=P.get(g,g-1)*P.get(g-1,g),x=(P.get(g-1,g-1)-P.get(g,g))/2,w=x*x+a,S=Math.sqrt(Math.abs(w)),P.set(g,g,P.get(g,g)+v),P.set(g-1,g-1,P.get(g-1,g-1)+v),s=P.get(g,g),0<=w){for(S=0<=x?x+S:x-S,N[g-1]=s+S,N[g]=N[g-1],0!==S&&(N[g]=s-a/S),j[g-1]=0,j[g]=0,s=P.get(g,g-1),E=Math.abs(s)+Math.abs(S),x=s/E,w=S/E,_=Math.sqrt(x*x+w*w),x/=_,w/=_,e=g-1;e<T;e++)S=P.get(g-1,e),P.set(g-1,e,w*S+x*P.get(g,e)),P.set(g,e,w*P.get(g,e)-x*S);for(t=0;t<=g;t++)S=P.get(t,g-1),P.set(t,g-1,w*S+x*P.get(t,g)),P.set(t,g,w*P.get(t,g)-x*S);for(t=0;t<=y;t++)S=D.get(t,g-1),D.set(t,g-1,w*S+x*D.get(t,g)),D.set(t,g,w*D.get(t,g)-x*S)}else N[g-1]=s+x,N[g]=s+x,j[g-1]=S,j[g]=-S;g-=2,O=0}else{if(s=P.get(g,g),c=0,a=0,r<g&&(c=P.get(g-1,g-1),a=P.get(g,g-1)*P.get(g-1,g)),10===O){for(v+=s,t=0;t<=g;t++)P.set(t,t,P.get(t,t)-s);E=Math.abs(P.get(g,g-1))+Math.abs(P.get(g-1,g-2)),s=c=.75*E,a=-.4375*E*E}if(30===O&&0<(E=(E=(c-s)/2)*E+a)){for(E=Math.sqrt(E),c<s&&(E=-E),E=s-a/((c-s)/2+E),t=0;t<=g;t++)P.set(t,t,P.get(t,t)-E);v+=E,s=c=a=.964}for(O+=1,o=g-2;o>=r&&(S=P.get(o,o),_=s-S,E=c-S,x=(_*E-a)/P.get(o+1,o)+P.get(o,o+1),w=P.get(o+1,o+1)-S-_-E,_=P.get(o+2,o+1),E=Math.abs(x)+Math.abs(w)+Math.abs(_),x/=E,w/=E,_/=E,o!==r)&&!(Math.abs(P.get(o,o-1))*(Math.abs(w)+Math.abs(_))<m*(Math.abs(x)*(Math.abs(P.get(o-1,o-1))+Math.abs(S)+Math.abs(P.get(o+1,o+1)))));)o--;for(t=o+2;t<=g;t++)P.set(t,t-2,0),t>o+2&&P.set(t,t-3,0);for(n=o;n<=g-1&&(f=n!==g-1,n!==o&&(x=P.get(n,n-1),w=P.get(n+1,n-1),_=f?P.get(n+2,n-1):0,0!==(s=Math.abs(x)+Math.abs(w)+Math.abs(_)))&&(x/=s,w/=s,_/=s),0!==s);n++)if(E=Math.sqrt(x*x+w*w+_*_),0!==(E=x<0?-E:E)){for(n!==o?P.set(n,n-1,-E*s):r!==o&&P.set(n,n-1,-P.get(n,n-1)),x+=E,s=x/E,c=w/E,S=_/E,w/=x,_/=x,e=n;e<T;e++)x=P.get(n,e)+w*P.get(n+1,e),f&&(x+=_*P.get(n+2,e),P.set(n+2,e,P.get(n+2,e)-x*S)),P.set(n,e,P.get(n,e)-x*s),P.set(n+1,e,P.get(n+1,e)-x*c);for(t=0;t<=Math.min(g,n+3);t++)x=s*P.get(t,n)+c*P.get(t,n+1),f&&(x+=S*P.get(t,n+2),P.set(t,n+2,P.get(t,n+2)-x*_)),P.set(t,n,P.get(t,n)-x),P.set(t,n+1,P.get(t,n+1)-x*w);for(t=0;t<=y;t++)x=s*D.get(t,n)+c*D.get(t,n+1),f&&(x+=S*D.get(t,n+2),D.set(t,n+2,D.get(t,n+2)-x*_)),D.set(t,n,D.get(t,n)-x),D.set(t,n+1,D.get(t,n+1)-x*w)}}}if(0!==b){for(g=T-1;0<=g;g--)if(x=N[g],0===(w=j[g]))for(r=g,P.set(g,g,1),t=g-1;0<=t;t--){for(a=P.get(t,t)-x,_=0,e=r;e<=g;e++)_+=P.get(t,e)*P.get(e,g);if(j[t]<0)S=a,E=_;else if(0===j[r=t]?P.set(t,g,0!==a?-_/a:-_/(m*b)):(s=P.get(t,t+1),c=P.get(t+1,t),w=(N[t]-x)*(N[t]-x)+j[t]*j[t],i=(s*E-S*_)/w,P.set(t,g,i),P.set(t+1,g,Math.abs(s)>Math.abs(S)?(-_-a*i)/s:(-E-c*i)/S)),1<m*(i=Math.abs(P.get(t,g)))*i)for(e=t;e<=g;e++)P.set(e,g,P.get(e,g)/i)}else if(w<0)for(r=g-1,Math.abs(P.get(g,g-1))>Math.abs(P.get(g-1,g))?(P.set(g-1,g-1,w/P.get(g,g-1)),P.set(g-1,g,-(P.get(g,g)-x)/P.get(g,g-1))):(p=z(0,-P.get(g-1,g),P.get(g-1,g-1)-x,w),P.set(g-1,g-1,p[0]),P.set(g-1,g,p[1])),P.set(g,g-1,0),P.set(g,g,1),t=g-2;0<=t;t--){for(u=0,l=0,e=r;e<=g;e++)u+=P.get(t,e)*P.get(e,g-1),l+=P.get(t,e)*P.get(e,g);if(a=P.get(t,t)-x,j[t]<0)S=a,_=u,E=l;else if(0===j[r=t]?(p=z(-u,-l,a,w),P.set(t,g-1,p[0]),P.set(t,g,p[1])):(s=P.get(t,t+1),c=P.get(t+1,t),d=(N[t]-x)*(N[t]-x)+j[t]*j[t]-w*w,h=2*(N[t]-x)*w,0===d&&0==h&&(d=m*b*(Math.abs(a)+Math.abs(w)+Math.abs(s)+Math.abs(c)+Math.abs(S))),p=z(s*_-S*u+w*l,s*E-S*l-w*u,d,h),P.set(t,g-1,p[0]),P.set(t,g,p[1]),Math.abs(s)>Math.abs(S)+Math.abs(w)?(P.set(t+1,g-1,(-u-a*P.get(t,g-1)+w*P.get(t,g))/s),P.set(t+1,g,(-l-a*P.get(t,g)-w*P.get(t,g-1))/s)):(p=z(-_-c*P.get(t,g-1),-E-c*P.get(t,g),S,w),P.set(t+1,g-1,p[0]),P.set(t+1,g,p[1]))),1<m*(i=Math.max(Math.abs(P.get(t,g-1)),Math.abs(P.get(t,g))))*i)for(e=t;e<=g;e++)P.set(e,g-1,P.get(e,g-1)/i),P.set(e,g,P.get(e,g)/i)}for(t=0;t<T;t++)if(t<0||t>y)for(e=t;e<T;e++)D.set(t,e,P.get(t,e));for(e=T-1;0<=e;e--)for(t=0;t<=y;t++){for(S=0,n=0;n<=Math.min(e,y);n++)S+=D.get(t,n)*P.get(n,e);D.set(t,e,S)}}}}this.n=M,this.e=A,this.d=C,this.V=k}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,n=this.n,r=this.e,o=this.d,i=new L(n,n);for(t=0;t<n;t++){for(e=0;e<n;e++)i.set(t,e,0);i.set(t,t,o[t]),0<r[t]?i.set(t,t+1,r[t]):r[t]<0&&i.set(t,t-1,r[t])}return i}}function z(t,e,n,r){let o,i;return Math.abs(n)>Math.abs(r)?(o=r/n,i=n+o*r,[(t+o*e)/i,(e-o*t)/i]):(o=n/r,i=r+o*n,[(o*t+e)/i,(o*e-t)/i])}class I{constructor(t){if(!(t=R.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");let n,r,o,i=t,a=i.rows,s=new L(a,a),c=!0;for(r=0;r<a;r++){let e=0;for(o=0;o<r;o++){let t=0;for(n=0;n<o;n++)t+=s.get(o,n)*s.get(r,n);t=(i.get(r,o)-t)/s.get(o,o),s.set(r,o,t),e+=t*t}for(e=i.get(r,r)-e,c&=0<e,s.set(r,r,Math.sqrt(Math.max(e,0))),o=r+1;o<a;o++)s.set(r,o,0)}this.L=s,this.positiveDefinite=Boolean(c)}isPositiveDefinite(){return this.positiveDefinite}solve(t){t=R.checkMatrix(t);var e=this.L,n=e.rows;if(t.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let r,o,i,a=t.columns,s=t.clone();for(i=0;i<n;i++)for(o=0;o<a;o++){for(r=0;r<i;r++)s.set(i,o,s.get(i,o)-s.get(r,o)*e.get(i,r));s.set(i,o,s.get(i,o)/e.get(i,i))}for(i=n-1;0<=i;i--)for(o=0;o<a;o++){for(r=i+1;r<n;r++)s.set(i,o,s.get(i,o)-s.get(r,o)*e.get(r,i));s.set(i,o,s.get(i,o)/e.get(i,i))}return s}get lowerTriangularMatrix(){return this.L}}class T{constructor(e,t={}){e=R.checkMatrix(e);let n=t.Y;var{scaleScores:t=!1,maxIterations:r=1e3,terminationCriteria:o=1e-10}=t;let i;if(n){if(!(n=Array.isArray(n)&&"number"==typeof n[0]?L.columnVector(n):R.checkMatrix(n)).isColumnVector()||n.rows!==e.rows)throw new Error("Y must be a column vector of length X.rows");i=n}else i=e.getColumnVector(0);let a,s,c,u,l=1;for(let t=0;t<r&&l>o;t++)c=(c=e.transpose().mmul(i).div(i.transpose().mmul(i).get(0,0))).div(c.norm()),a=e.mmul(c).div(c.transpose().mmul(c).get(0,0)),0<t&&(l=a.clone().sub(u).pow(2).sum()),u=a.clone(),i=n?(s=(s=n.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0))).div(s.norm()),n.mmul(s).div(s.transpose().mmul(s).get(0,0))):a;if(n){let t=e.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0));t=t.div(t.norm());var d=e.clone().sub(a.clone().mmul(t.transpose())),h=i.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),f=n.clone().sub(a.clone().mulS(h.get(0,0)).mmul(s.transpose()));this.t=a,this.p=t.transpose(),this.w=c.transpose(),this.q=s,this.u=i,this.s=a.transpose().mmul(a),this.xResidual=d,this.yResidual=f,this.betas=h}else this.w=c.transpose(),this.s=a.transpose().mmul(a).sqrt(),this.t=t?a.clone().div(this.s.get(0,0)):a,this.xResidual=e.sub(a.mmul(c.transpose()))}}},,function(L,t,e){e.r(t),e.d(t,"World",function(){return pt}),e.d(t,"Kernel",function(){return m});var v,t=e(130),i=e.n(t),t=e(131),r=e.n(t),t=e(93),b=e.n(t),t=e(94),t=e.n(t),n=e(153),u=e.n(n),n=e(327),R=e.n(n),n=e(328),B=e.n(n),n=e(133),c=e.n(n),o=1;(n=v=v||{})[n.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",n[n.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",n[n.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n[n.ZERO=0]="ZERO",n[n.ONE=1]="ONE",n[n.SRC_COLOR=768]="SRC_COLOR",n[n.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",n[n.SRC_ALPHA=770]="SRC_ALPHA",n[n.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",n[n.DST_ALPHA=772]="DST_ALPHA",n[n.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",n[n.DST_COLOR=774]="DST_COLOR",n[n.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",n[n.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",n[n.FUNC_ADD=32774]="FUNC_ADD",n[n.BLEND_EQUATION=32777]="BLEND_EQUATION",n[n.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",n[n.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",n[n.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",n[n.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",n[n.MAX_EXT=32776]="MAX_EXT",n[n.MIN_EXT=32775]="MIN_EXT",n[n.BLEND_DST_RGB=32968]="BLEND_DST_RGB",n[n.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",n[n.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",n[n.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",n[n.CONSTANT_COLOR=32769]="CONSTANT_COLOR",n[n.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",n[n.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",n[n.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",n[n.BLEND_COLOR=32773]="BLEND_COLOR",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",n[n.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",n[n.STREAM_DRAW=35040]="STREAM_DRAW",n[n.STATIC_DRAW=35044]="STATIC_DRAW",n[n.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",n[n.BUFFER_SIZE=34660]="BUFFER_SIZE",n[n.BUFFER_USAGE=34661]="BUFFER_USAGE",n[n.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",n[n.FRONT=1028]="FRONT",n[n.BACK=1029]="BACK",n[n.FRONT_AND_BACK=1032]="FRONT_AND_BACK",n[n.CULL_FACE=2884]="CULL_FACE",n[n.BLEND=3042]="BLEND",n[n.DITHER=3024]="DITHER",n[n.STENCIL_TEST=2960]="STENCIL_TEST",n[n.DEPTH_TEST=2929]="DEPTH_TEST",n[n.SCISSOR_TEST=3089]="SCISSOR_TEST",n[n.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",n[n.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",n[n.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",n[n.NO_ERROR=0]="NO_ERROR",n[n.INVALID_ENUM=1280]="INVALID_ENUM",n[n.INVALID_VALUE=1281]="INVALID_VALUE",n[n.INVALID_OPERATION=1282]="INVALID_OPERATION",n[n.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",n[n.CW=2304]="CW",n[n.CCW=2305]="CCW",n[n.LINE_WIDTH=2849]="LINE_WIDTH",n[n.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",n[n.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",n[n.CULL_FACE_MODE=2885]="CULL_FACE_MODE",n[n.FRONT_FACE=2886]="FRONT_FACE",n[n.DEPTH_RANGE=2928]="DEPTH_RANGE",n[n.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",n[n.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",n[n.DEPTH_FUNC=2932]="DEPTH_FUNC",n[n.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",n[n.STENCIL_FUNC=2962]="STENCIL_FUNC",n[n.STENCIL_FAIL=2964]="STENCIL_FAIL",n[n.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",n[n.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",n[n.STENCIL_REF=2967]="STENCIL_REF",n[n.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",n[n.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",n[n.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",n[n.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",n[n.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",n[n.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",n[n.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",n[n.VIEWPORT=2978]="VIEWPORT",n[n.SCISSOR_BOX=3088]="SCISSOR_BOX",n[n.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",n[n.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",n[n.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",n[n.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",n[n.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",n[n.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",n[n.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",n[n.RED_BITS=3410]="RED_BITS",n[n.GREEN_BITS=3411]="GREEN_BITS",n[n.BLUE_BITS=3412]="BLUE_BITS",n[n.ALPHA_BITS=3413]="ALPHA_BITS",n[n.DEPTH_BITS=3414]="DEPTH_BITS",n[n.STENCIL_BITS=3415]="STENCIL_BITS",n[n.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",n[n.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",n[n.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",n[n.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",n[n.SAMPLES=32937]="SAMPLES",n[n.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",n[n.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",n[n.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",n[n.DONT_CARE=4352]="DONT_CARE",n[n.FASTEST=4353]="FASTEST",n[n.NICEST=4354]="NICEST",n[n.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.INT=5124]="INT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.ALPHA=6406]="ALPHA",n[n.RGB=6407]="RGB",n[n.RGBA=6408]="RGBA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",n[n.VERTEX_SHADER=35633]="VERTEX_SHADER",n[n.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",n[n.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",n[n.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",n[n.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",n[n.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",n[n.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",n[n.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",n[n.SHADER_TYPE=35663]="SHADER_TYPE",n[n.DELETE_STATUS=35712]="DELETE_STATUS",n[n.LINK_STATUS=35714]="LINK_STATUS",n[n.VALIDATE_STATUS=35715]="VALIDATE_STATUS",n[n.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",n[n.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",n[n.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",n[n.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",n[n.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",n[n.NEVER=512]="NEVER",n[n.LESS=513]="LESS",n[n.EQUAL=514]="EQUAL",n[n.LEQUAL=515]="LEQUAL",n[n.GREATER=516]="GREATER",n[n.NOTEQUAL=517]="NOTEQUAL",n[n.GEQUAL=518]="GEQUAL",n[n.ALWAYS=519]="ALWAYS",n[n.KEEP=7680]="KEEP",n[n.REPLACE=7681]="REPLACE",n[n.INCR=7682]="INCR",n[n.DECR=7683]="DECR",n[n.INVERT=5386]="INVERT",n[n.INCR_WRAP=34055]="INCR_WRAP",n[n.DECR_WRAP=34056]="DECR_WRAP",n[n.VENDOR=7936]="VENDOR",n[n.RENDERER=7937]="RENDERER",n[n.VERSION=7938]="VERSION",n[n.NEAREST=9728]="NEAREST",n[n.LINEAR=9729]="LINEAR",n[n.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",n[n.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",n[n.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",n[n.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",n[n.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",n[n.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",n[n.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",n[n.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE=5890]="TEXTURE",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n[n.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",n[n.TEXTURE0=33984]="TEXTURE0",n[n.TEXTURE1=33985]="TEXTURE1",n[n.TEXTURE2=33986]="TEXTURE2",n[n.TEXTURE3=33987]="TEXTURE3",n[n.TEXTURE4=33988]="TEXTURE4",n[n.TEXTURE5=33989]="TEXTURE5",n[n.TEXTURE6=33990]="TEXTURE6",n[n.TEXTURE7=33991]="TEXTURE7",n[n.TEXTURE8=33992]="TEXTURE8",n[n.TEXTURE9=33993]="TEXTURE9",n[n.TEXTURE10=33994]="TEXTURE10",n[n.TEXTURE11=33995]="TEXTURE11",n[n.TEXTURE12=33996]="TEXTURE12",n[n.TEXTURE13=33997]="TEXTURE13",n[n.TEXTURE14=33998]="TEXTURE14",n[n.TEXTURE15=33999]="TEXTURE15",n[n.TEXTURE16=34e3]="TEXTURE16",n[n.TEXTURE17=34001]="TEXTURE17",n[n.TEXTURE18=34002]="TEXTURE18",n[n.TEXTURE19=34003]="TEXTURE19",n[n.TEXTURE20=34004]="TEXTURE20",n[n.TEXTURE21=34005]="TEXTURE21",n[n.TEXTURE22=34006]="TEXTURE22",n[n.TEXTURE23=34007]="TEXTURE23",n[n.TEXTURE24=34008]="TEXTURE24",n[n.TEXTURE25=34009]="TEXTURE25",n[n.TEXTURE26=34010]="TEXTURE26",n[n.TEXTURE27=34011]="TEXTURE27",n[n.TEXTURE28=34012]="TEXTURE28",n[n.TEXTURE29=34013]="TEXTURE29",n[n.TEXTURE30=34014]="TEXTURE30",n[n.TEXTURE31=34015]="TEXTURE31",n[n.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",n[n.REPEAT=10497]="REPEAT",n[n.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n[n.FLOAT_VEC2=35664]="FLOAT_VEC2",n[n.FLOAT_VEC3=35665]="FLOAT_VEC3",n[n.FLOAT_VEC4=35666]="FLOAT_VEC4",n[n.INT_VEC2=35667]="INT_VEC2",n[n.INT_VEC3=35668]="INT_VEC3",n[n.INT_VEC4=35669]="INT_VEC4",n[n.BOOL=35670]="BOOL",n[n.BOOL_VEC2=35671]="BOOL_VEC2",n[n.BOOL_VEC3=35672]="BOOL_VEC3",n[n.BOOL_VEC4=35673]="BOOL_VEC4",n[n.FLOAT_MAT2=35674]="FLOAT_MAT2",n[n.FLOAT_MAT3=35675]="FLOAT_MAT3",n[n.FLOAT_MAT4=35676]="FLOAT_MAT4",n[n.SAMPLER_2D=35678]="SAMPLER_2D",n[n.SAMPLER_CUBE=35680]="SAMPLER_CUBE",n[n.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",n[n.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",n[n.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",n[n.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",n[n.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",n[n.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",n[n.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",n[n.COMPILE_STATUS=35713]="COMPILE_STATUS",n[n.LOW_FLOAT=36336]="LOW_FLOAT",n[n.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",n[n.HIGH_FLOAT=36338]="HIGH_FLOAT",n[n.LOW_INT=36339]="LOW_INT",n[n.MEDIUM_INT=36340]="MEDIUM_INT",n[n.HIGH_INT=36341]="HIGH_INT",n[n.FRAMEBUFFER=36160]="FRAMEBUFFER",n[n.RENDERBUFFER=36161]="RENDERBUFFER",n[n.RGBA4=32854]="RGBA4",n[n.RGB5_A1=32855]="RGB5_A1",n[n.RGB565=36194]="RGB565",n[n.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",n[n.STENCIL_INDEX=6401]="STENCIL_INDEX",n[n.STENCIL_INDEX8=36168]="STENCIL_INDEX8",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n[n.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",n[n.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",n[n.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",n[n.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",n[n.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",n[n.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",n[n.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",n[n.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",n[n.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",n[n.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",n[n.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",n[n.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",n[n.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",n[n.NONE=0]="NONE",n[n.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",n[n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",n[n.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",n[n.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",n[n.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",n[n.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",n[n.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",n[n.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",n[n.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",n[n.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",n[n.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",n[n.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",n[n.COPY_SRC=1]="COPY_SRC",n[n.COPY_DST=2]="COPY_DST",n[n.SAMPLED=4]="SAMPLED",n[n.STORAGE=8]="STORAGE",n[n.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";t()(s,[{key:"get",value:function(){return this.config}},{key:"set",value:function(t){this.config=t}}]);var l,d,a,z=s;function s(){b()(this,s),this.config=void 0}function h(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}"undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),(n=l=l||{}).Void="Void",n.Boolean="Boolean",n.Float="Float",n.Uint32="Uint32",n.Int32="Int32",n.Vector="Vector",n.Vector2Float="vec2<f32>",n.Vector3Float="vec3<f32>",n.Vector4Float="vec4<f32>",n.Vector2Boolean="vec2<bool>",n.Vector3Boolean="vec3<bool>",n.Vector4Boolean="vec4<bool>",n.Vector2Uint="vec2<u32>",n.Vector3Uint="vec3<u32>",n.Vector4Uint="vec4<u32>",n.Vector2Int="vec2<i32>",n.Vector3Int="vec3<i32>",n.Vector4Int="vec4<i32>",n.Matrix="Matrix",n.Matrix3x3Float="mat3x3<f32>",n.Matrix4x4Float="mat4x4<i32>",n.Struct="Struct",n.FloatArray="Float[]",n.Vector4FloatArray="vec4<f32>[]",(n=d=d||{}).Input="Input",n.Output="Output",n.Uniform="Uniform",n.Workgroup="Workgroup",n.UniformConstant="UniformConstant",n.Image="Image",n.StorageBuffer="StorageBuffer",n.Private="Private",n.Function="Function",(n=a=a||{}).GLSL100="GLSL100",n.GLSL450="GLSL450",n.WGSL="WGSL";t()(M,[{key:"init",value:function(){var t=this.configService.get(),e=t.canvas,t=t.engineOptions;this.initPromise=this.engine.init(f({canvas:e||function(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(),antialiasing:!1},t))}},{key:"setBundle",value:function(t){this.compiledBundle=JSON.parse(JSON.stringify(t))}},{key:"setDispatch",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=t),this}},{key:"setMaxIteration",value:function(t){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=t),this}},{key:"setBinding",value:function(e,t){var n=this;if("string"==typeof e){var r=R()(t)||u()(t)||B()(t);if(this.compiledBundle&&this.compiledBundle.context){var o=this.compiledBundle.context.defines.find(function(t){return t.name===e});if(o)return o.value=t,this;o=this.compiledBundle.context.uniforms.find(function(t){return t.name===e});o&&(r?(o.data=t,o.isReferer=!1,o.storageClass===d.Uniform?this.model&&this.model.updateUniform(e,t):this.model&&this.model.updateBuffer(e,t)):(o.isReferer=!0,o.data=t))}}else Object.keys(e).forEach(function(t){n.setBinding(t,e[t])});return this}},{key:"execute",value:(y=i()(c.a.mark(function t(){var e,n,r=this,o=arguments;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=0<o.length&&void 0!==o[0]?o[0]:1,this.dirty)return this.compiledBundle.context&&(1<e?this.compiledBundle.context.maxIteration=e:this.compiledBundle.context.maxIteration++),t.next=5,this.compile();t.next=6;break;case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(t){return t.isReferer}).forEach(function(t){var e=t.data;r.model.confirmInput(e.model,t.name)}),n=0;n<e;n++)this.model.run();return this.engine.endFrame(),t.abrupt("return",this);case 12:case"end":return t.stop()}},t,this)})),function(){return y.apply(this,arguments)})},{key:"getOutput",value:(g=i()(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}},t,this)})),function(){return g.apply(this,arguments)})},{key:"compile",value:(p=i()(c.a.mark(function t(){var n,e,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initPromise;case 2:return n=f({},this.compiledBundle.context),e=this.engine.supportWebGPU?this.engine.useWGSL?a.WGSL:a.GLSL450:a.GLSL100,r=this.compiledBundle.shaders[e],n.defines.filter(function(t){return t.runtime}).forEach(function(t){var e="".concat("__DefineValuePlaceholder__").concat(t.name);r=r.replace(e,"".concat(t.value))}),n.shader=r,n.uniforms.forEach(function(t){var e;t.data||t.storageClass!==d.StorageBuffer||(e=1,t.type===l.FloatArray?e=1:t.type===l.Vector4FloatArray&&(e=4),t.data=new Float32Array(n.output.length*e).fill(0))}),this.compiledBundle.context=n,t.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=t.sent;case 12:case"end":return t.stop()}},t,this)})),function(){return p.apply(this,arguments)})}]);var p,g,y,m=M,n=e(330),F=e.n(n),G=(t()(O,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),O),U=(n={},r()(n,v.POINTS,"points"),r()(n,v.LINES,"lines"),r()(n,v.LINE_LOOP,"line loop"),r()(n,v.LINE_STRIP,"line strip"),r()(n,v.TRIANGLES,"triangles"),r()(n,v.TRIANGLE_FAN,"triangle fan"),r()(n,v.TRIANGLE_STRIP,"triangle strip"),n),x=(n={},r()(n,v.STATIC_DRAW,"static"),r()(n,v.DYNAMIC_DRAW,"dynamic"),r()(n,v.STREAM_DRAW,"stream"),n),w=(n={},r()(n,v.BYTE,"int8"),r()(n,v.UNSIGNED_INT,"int16"),r()(n,v.INT,"int32"),r()(n,v.UNSIGNED_BYTE,"uint8"),r()(n,v.UNSIGNED_SHORT,"uint16"),r()(n,v.UNSIGNED_INT,"uint32"),r()(n,v.FLOAT,"float"),n),W=(n={},r()(n,v.ALPHA,"alpha"),r()(n,v.LUMINANCE,"luminance"),r()(n,v.LUMINANCE_ALPHA,"luminance alpha"),r()(n,v.RGB,"rgb"),r()(n,v.RGBA,"rgba"),r()(n,v.RGBA4,"rgba4"),r()(n,v.RGB5_A1,"rgb5 a1"),r()(n,v.RGB565,"rgb565"),r()(n,v.DEPTH_COMPONENT,"depth"),r()(n,v.DEPTH_STENCIL,"depth stencil"),n),X=(n={},r()(n,v.DONT_CARE,"dont care"),r()(n,v.NICEST,"nice"),r()(n,v.FASTEST,"fast"),n),Y=(n={},r()(n,v.NEAREST,"nearest"),r()(n,v.LINEAR,"linear"),r()(n,v.LINEAR_MIPMAP_LINEAR,"mipmap"),r()(n,v.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),r()(n,v.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),r()(n,v.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),n),V=(n={},r()(n,v.REPEAT,"repeat"),r()(n,v.CLAMP_TO_EDGE,"clamp"),r()(n,v.MIRRORED_REPEAT,"mirror"),n),H=(n={},r()(n,v.NONE,"none"),r()(n,v.BROWSER_DEFAULT_WEBGL,"browser"),n),q=(n={},r()(n,v.NEVER,"never"),r()(n,v.ALWAYS,"always"),r()(n,v.LESS,"less"),r()(n,v.LEQUAL,"lequal"),r()(n,v.GREATER,"greater"),r()(n,v.GEQUAL,"gequal"),r()(n,v.EQUAL,"equal"),r()(n,v.NOTEQUAL,"notequal"),n),K=(n={},r()(n,v.FUNC_ADD,"add"),r()(n,v.MIN_EXT,"min"),r()(n,v.MAX_EXT,"max"),r()(n,v.FUNC_SUBTRACT,"subtract"),r()(n,v.FUNC_REVERSE_SUBTRACT,"reverse subtract"),n),_=(n={},r()(n,v.ZERO,"zero"),r()(n,v.ONE,"one"),r()(n,v.SRC_COLOR,"src color"),r()(n,v.ONE_MINUS_SRC_COLOR,"one minus src color"),r()(n,v.SRC_ALPHA,"src alpha"),r()(n,v.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),r()(n,v.DST_COLOR,"dst color"),r()(n,v.ONE_MINUS_DST_COLOR,"one minus dst color"),r()(n,v.DST_ALPHA,"dst alpha"),r()(n,v.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),r()(n,v.CONSTANT_COLOR,"constant color"),r()(n,v.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),r()(n,v.CONSTANT_ALPHA,"constant alpha"),r()(n,v.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),r()(n,v.SRC_ALPHA_SATURATE,"src alpha saturate"),n),Z=(n={},r()(n,v.NEVER,"never"),r()(n,v.ALWAYS,"always"),r()(n,v.LESS,"less"),r()(n,v.LEQUAL,"lequal"),r()(n,v.GREATER,"greater"),r()(n,v.GEQUAL,"gequal"),r()(n,v.EQUAL,"equal"),r()(n,v.NOTEQUAL,"notequal"),n),E=(n={},r()(n,v.ZERO,"zero"),r()(n,v.KEEP,"keep"),r()(n,v.REPLACE,"replace"),r()(n,v.INVERT,"invert"),r()(n,v.INCR,"increment"),r()(n,v.DECR,"decrement"),r()(n,v.INCR_WRAP,"increment wrap"),r()(n,v.DECR_WRAP,"decrement wrap"),n),$=(n={},r()(n,v.FRONT,"front"),r()(n,v.BACK,"back"),n),Q=(t()(S,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(t){var e=t.data;this.buffer.subdata(e,t.offset)}}]),S),n=e(331),J=e.n(n);function S(t,e){b()(this,S),this.buffer=void 0;var n=e.data;this.buffer=t.buffer({data:n,usage:x[e.usage||v.STATIC_DRAW],type:w[e.type||v.UNSIGNED_BYTE]})}function O(t,e){b()(this,O),this.attribute=void 0,this.buffer=void 0;var n=e.buffer,r=e.offset,o=e.stride,i=e.normalized,a=e.size,e=e.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:r||0,stride:o||0,normalized:i||!1,divisor:e||0},a&&(this.attribute.size=a)}function M(t,e){b()(this,M),this.engine=t,this.configService=e,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}function tt(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nt,rt=0,ot=(t()(A,[{key:"run",value:function(){var t=this;1<this.context.maxIteration&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){t.computeCommand()})}},{key:"readData",value:(nt=i()(c.a.mark(function t(){var e,n,r,o,i,a,s=this;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){e=s.reGl.read()}),!e){t.next=6;break}if(o=this.getOuputDataTexture(),n=o.originalDataLength,r=o.elementsPerTexel,o=void 0===(o=o.typedArrayConstructor)?Float32Array:o,i=[],4!==r)for(a=0;a<e.length;a+=4)1===r?i.push(e[a]):2===r?i.push(e[a],e[a+1]):i.push(e[a],e[a+1],e[a+2]);else i=e;return t.abrupt("return",new o(i.slice(0,n)));case 6:return t.abrupt("return",new Float32Array);case 7:case"end":return t.stop()}},t,this)})),function(){return nt.apply(this,arguments)})},{key:"confirmInput",value:function(t,e){t=this.entity===t.entity?(this.dynamicPingpong=!0,this):t;this.textureCache[e].id=t.getOuputDataTexture().id,this.textureCache[e].texture=t.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(e,t){var n=this.context.uniforms.find(function(t){return t.name===e});n&&(t=(n=this.calcDataTexture(e,n.type,t)).texture,this.textureCache[e].data=n.data,this.textureCache[e].texture=t)}},{key:"destroy",value:function(){}},{key:"swap",value:function(){this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong&&(t=this.context.output.name,this.textureCache[t].id=this.getOuputDataTexture().id,this.textureCache[t].texture=this.getOuputDataTexture().texture);var t=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=t}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var t=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=t}},{key:"cloneDataTexture",value:function(t){var e=t.data,n=t.textureWidth;return et(et({},t),{},{id:rt++,texture:this.reGl.texture({width:n,height:n,data:e,type:"float"})})}},{key:"calcDataTexture",value:function(t,e,n){var r=1;e===l.Vector4FloatArray&&(r=4);for(var o=[],i=0;i<n.length;i+=r)1===r?o.push(n[i],0,0,0):2===r?o.push(n[i],n[i+1],0,0):3===r?o.push(n[i],n[i+1],n[i+2],0):4===r&&o.push(n[i],n[i+1],n[i+2],n[i+3]);var e=n.length,a=Math.ceil(e/r),s=Math.ceil(Math.sqrt(a)),c=s*s,c=(a<c&&o.push.apply(o,J()(new Array(4*(c-a)).fill(0))),this.reGl.texture({width:s,height:s,data:o,type:"float"}));return{id:rt++,data:o,originalDataLength:e,typedArrayConstructor:u()(n)?n.constructor:void 0,textureWidth:s,texture:c,texelCount:a,elementsPerTexel:r,isOutput:t===this.context.output.name}}}]),A),it=(t()(C,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){t=t.data;this.elements.subdata(t)}},{key:"destroy",value:function(){this.elements.destroy()}}]),C),at=(t()(k,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width;this.framebuffer.resize(e,t.height)}}]),k),n=e(132),st=e.n(n),n=e(336),ct=e.n(n);function k(t,e){b()(this,k),this.framebuffer=void 0;var n=e.width,r=e.color,o=e.colors,n={width:n,height:e.height};Array.isArray(o)&&(n.colors=o.map(function(t){return t.get()})),r&&"boolean"!=typeof r&&(n.color=r.get()),this.framebuffer=t.framebuffer(n)}function C(t,e){b()(this,C),this.elements=void 0;var n=e.data;this.elements=t.elements({data:n,usage:x[e.usage||v.STATIC_DRAW],type:w[e.type||v.UNSIGNED_BYTE],count:e.count})}function A(t,e){var s=this,c=(b()(this,A),this.reGl=t,this.context=e,this.entity=o++,this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0,{}),t=(this.context.uniforms.forEach(function(t){var e,n=t.name,r=t.type,o=t.data,i=t.isReferer,a=t.storageClass;if(a===d.StorageBuffer)i?(s.textureCache[n]={data:void 0},c["".concat(n,"Size")]=function(){return o.compiledBundle.context.output.textureSize}):(s.textureCache[n]=s.calcDataTexture(n,r,o),e=(i=s.textureCache[n]).textureWidth,i=i.isOutput,c["".concat(n,"Size")]=[e,e],i&&(s.outputTextureName=n,s.context.needPingpong)&&(s.outputTextureName="".concat(n,"Output"),s.textureCache[s.outputTextureName]=s.calcDataTexture(n,r,o))),c[n]=function(){return s.textureCache[n].texture};else if(a===d.Uniform){if(o&&(Array.isArray(o)||u()(o))&&16<o.length)throw new Error("invalid data type ".concat(r));c[n]=function(){return t.data}}}),this.getOuputDataTexture()),e=t.textureWidth,t=t.texelCount,t=(c.u_OutputTextureSize=[e,e],c.u_OutputTexelCount=t,this.context.output.textureSize=[e,e],{attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:c,vert:"attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",primitive:"triangle strip",count:4});this.computeCommand=this.reGl(t)}function I(e){var n={};return Object.keys(e).forEach(function(t){!function r(o,e,i,a){return null===e||"number"==typeof e||"boolean"==typeof e||Array.isArray(e)&&"number"==typeof e[0]||u()(e)||""===e||void 0!==e.resize?(i["".concat(a&&a+".").concat(o)]=e,0):(ct()(e)&&Object.keys(e).forEach(function(t){r(t,e[t],i,"".concat(a&&a+".").concat(o))}),void(Array.isArray(e)&&e.forEach(function(e,n){Object.keys(e).forEach(function(t){r(t,e[t],i,"".concat(a&&a+".").concat(o,"[").concat(n,"]"))})})))}(t,e[t],n,"")}),n}function ut(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach(function(t){r()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t()(P,[{key:"addUniforms",value:function(t){this.uniforms=T(T({},this.uniforms),I(t))}},{key:"draw",value:function(t){var n=T(T({},this.uniforms),I(t.uniforms||{})),r={};Object.keys(n).forEach(function(t){var e=st()(n[t]);"boolean"===e||"number"===e||Array.isArray(n[t])||n[t].BYTES_PER_ELEMENT?r[t]=n[t]:"string"!==e&&(r[t]=n[t].get())}),this.drawCommand(r)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(t,e){t=t.depth;t&&(e.depth={enable:void 0===t.enable||!!t.enable,mask:void 0===t.mask||!!t.mask,func:q[t.func||v.LESS],range:t.range||[0,1]})}},{key:"initBlendDrawParams",value:function(t,e){var n,t=t.blend;t&&(n=t.enable,e.blend={enable:!!n,func:{srcRGB:_[(e=t.func)&&e.srcRGB||v.SRC_ALPHA],srcAlpha:_[e&&e.srcAlpha||v.SRC_ALPHA],dstRGB:_[e&&e.dstRGB||v.ONE_MINUS_SRC_ALPHA],dstAlpha:_[e&&e.dstAlpha||v.ONE_MINUS_SRC_ALPHA]},equation:{rgb:K[(n=t.equation)&&n.rgb||v.FUNC_ADD],alpha:K[n&&n.alpha||v.FUNC_ADD]},color:void 0===(e=t.color)?[0,0,0,0]:e})}},{key:"initStencilDrawParams",value:function(t,e){var n,r,o,i,t=t.stencil;t&&(n=t.enable,r=void 0===(r=t.func)?{cmp:v.ALWAYS,ref:0,mask:-1}:r,o=void 0===(o=t.opFront)?{fail:v.KEEP,zfail:v.KEEP,zpass:v.KEEP}:o,i=void 0===(i=t.opBack)?{fail:v.KEEP,zfail:v.KEEP,zpass:v.KEEP}:i,e.stencil={enable:!!n,mask:void 0===(e=t.mask)?-1:e,func:T(T({},r),{},{cmp:Z[r.cmp]}),opFront:{fail:E[o.fail],zfail:E[o.zfail],zpass:E[o.zpass]},opBack:{fail:E[i.fail],zfail:E[i.zfail],zpass:E[i.zpass]}})}},{key:"initCullDrawParams",value:function(t,e){var n,t=t.cull;t&&(n=t.enable,t=void 0===(t=t.face)?v.BACK:t,e.cull={enable:!!n,face:$[t]})}},{key:"generateDefines",value:function(e){return Object.keys(e).map(function(t){return"#define ".concat(t," ").concat(Number(e[t]))}).join("\n")}}]);var lt,dt=P,ht=(t()(D,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,t=t.height;this.texture.resize(e,t),this.width=e,this.height=t}},{key:"destroy",value:function(){this.texture.destroy()}}]),D),ft=(t()(N,[{key:"init",value:(lt=i()(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.inited)return t.abrupt("return");t.next=2;break;case 2:return this.$canvas=e.canvas,t.next=5,new Promise(function(n,r){F()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(t,e){!t&&e||r(t),n(e)}})});case 5:this.gl=t.sent,this.inited=!0;case 7:case"end":return t.stop()}},t,this)})),function(t){return lt.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),N),pt=(t()(j,[{key:"setConfig",value:function(t){this.configService.set(t)}},{key:"setEngine",value:function(t){this.engine=t}},{key:"createEntity",value:function(){return o++}},{key:"createKernel",value:function(t){var e=new m(this.engine,this.configService);return"string"==typeof t?e.setBundle(JSON.parse(t)):e.setBundle(t),e.init(),e}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=new j;return e.setConfig(t),e.setEngine(new ft),e}}]),j);function j(){b()(this,j),this.engine=void 0,this.configService=new z}function N(){var e,n,o=this;b()(this,N),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=(n=i()(c.a.mark(function t(r){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.uniforms)return t.next=3,Promise.all(Object.keys(r.uniforms).map(function(){var e=i()(c.a.mark(function t(e){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.uniforms[e]&&void 0!==r.uniforms[e].load)return t.next=3,r.uniforms[e].load();t.next=5;break;case 3:n=t.sent,r.uniforms[e]=n;case 5:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()));t.next=3;break;case 3:return t.abrupt("return",new dt(o.gl,r));case 4:case"end":return t.stop()}},t)})),function(t){return n.apply(this,arguments)}),this.createAttribute=function(t){return new G(o.gl,t)},this.createBuffer=function(t){return new Q(o.gl,t)},this.createElements=function(t){return new it(o.gl,t)},this.createTexture2D=function(t){return new ht(o.gl,t)},this.createFramebuffer=function(t){return new at(o.gl,t)},this.useFramebuffer=function(t,e){o.gl({framebuffer:t?t.get():null})(e)},this.createComputeModel=(e=i()(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new ot(o.gl,e));case 1:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)}),this.clear=function(t){var e=t.color,n=t.framebuffer,n=void 0===n?null:n,e={color:e,depth:t.depth,stencil:t.stencil};e.framebuffer=null===n?n:n.get(),o.gl.clear(e)},this.setScissor=function(t){o.gl&&o.gl._gl&&(t.enable&&t.box?(o.gl._gl.enable(v.SCISSOR_TEST),o.gl._gl.scissor(t.box.x,t.box.y,t.box.width,t.box.height)):o.gl._gl.disable(v.SCISSOR_TEST),o.gl._refresh())},this.viewport=function(t){var e=t.x;o.gl&&o.gl._gl&&(o.gl._gl.viewport(e,t.y,t.width,t.height),o.gl._refresh())},this.readPixels=function(t){var e=t.framebuffer,t={x:t.x,y:t.y,width:t.width,height:t.height};return e&&(t.framebuffer=e.get()),o.gl.read(t)},this.getCanvas=function(){return o.$canvas},this.getGLContext=function(){return o.gl._gl},this.destroy=function(){o.gl&&(o.gl.destroy(),o.inited=!1)}}function D(t,e){b()(this,D),this.texture=void 0,this.width=void 0,this.height=void 0;var n=e.data,r=e.type,r=void 0===r?v.UNSIGNED_BYTE:r,o=e.width,i=e.height,a=e.flipY,a=void 0!==a&&a,s=e.format,s=void 0===s?v.RGBA:s,c=e.mipmap,c=void 0!==c&&c,u=e.wrapS,u=void 0===u?v.CLAMP_TO_EDGE:u,l=e.wrapT,l=void 0===l?v.CLAMP_TO_EDGE:l,d=e.aniso,d=void 0===d?0:d,h=e.alignment,h=void 0===h?1:h,f=e.premultiplyAlpha,f=void 0!==f&&f,p=e.mag,p=void 0===p?v.NEAREST:p,g=e.min,g=void 0===g?v.NEAREST:g,e=e.colorSpace,e=void 0===e?v.BROWSER_DEFAULT_WEBGL:e,o={width:this.width=o,height:this.height=i,type:w[r],format:W[s],wrapS:V[u],wrapT:V[l],mag:Y[p],min:Y[g],alignment:h,flipY:a,colorSpace:H[e],premultiplyAlpha:f,aniso:d};n&&(o.data=n),"number"==typeof c?o.mipmap=X[c]:"boolean"==typeof c&&(o.mipmap=c),this.texture=t.texture(o)}function P(e,t){b()(this,P),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=e;var n=t.vs,r=t.fs,o=t.defines,i=t.attributes,a=t.uniforms,s=t.primitive,c=t.count,u=t.elements,l=t.depth,d=t.blend,h=t.stencil,f=t.cull,p=t.instances,g=t.scissor,t=t.viewport,y={},m=(a&&(this.uniforms=I(a),Object.keys(a).forEach(function(t){y[t]=e.prop(t)})),{}),a=(Object.keys(i).forEach(function(t){m[t]=i[t].get()}),o&&this.generateDefines(o)||""),o={attributes:m,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(a,"\n").concat(r),uniforms:y,vert:"\n".concat(a,"\n").concat(n),primitive:U[void 0===s?v.TRIANGLES:s]};p&&(o.instances=p),c&&(o.count=c),u&&(o.elements=u.get()),g&&(o.scissor=g),t&&(o.viewport=t),this.initDepthDrawParams({depth:l},o),this.initBlendDrawParams({blend:d},o),this.initStencilDrawParams({stencil:h},o),this.initCullDrawParams({cull:f},o),this.drawCommand=e(o)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var a=n(69);function s(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return a.mat3.fromTranslation(r,n),a.mat3.multiply(t,r,e)}function c(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return a.mat3.fromRotation(r,n),a.mat3.multiply(t,r,e)}function u(t,e,n){var r=[0,0,0,0,0,0,0,0,0];return a.mat3.fromScaling(r,n),a.mat3.multiply(t,r,e)}function o(t,e){return t[0]*e[1]-e[0]*t[1]}e.leftTranslate=s,e.leftRotate=c,e.leftScale=u,e.transform=function(t,e){for(var n=t?[].concat(t):[1,0,0,0,1,0,0,0,1],r=0,o=e.length;r<o;r++){var i=e[r];switch(i[0]){case"t":s(n,n,[i[1],i[2]]);break;case"s":u(n,n,[i[1],i[2]]);break;case"r":c(n,n,i[1]);break;case"m":a.mat3.multiply(n,i[1],n)}}return n},e.direction=o,e.angleTo=function(t,e,n){var r=a.vec2.angle(t,e),t=0<=o(t,e);return n?t?2*Math.PI-r:r:t?r:2*Math.PI-r},e.vertical=function(t,e,n){return n?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDIAsync",{enumerable:!0,get:function(){return r.GADDIAsync}}),Object.defineProperty(e,"connectedComponentAsync",{enumerable:!0,get:function(){return r.connectedComponentAsync}}),e.default=void 0,Object.defineProperty(e,"detectAllCyclesAsync",{enumerable:!0,get:function(){return r.detectAllCyclesAsync}}),Object.defineProperty(e,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllDirectedCycleAsync}}),Object.defineProperty(e,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return r.detectAllUndirectedCycleAsync}}),Object.defineProperty(e,"detectCycleAsync",{enumerable:!0,get:function(){return r.detectCycleAsync}}),e.detectDirectedCycleAsync=void 0,Object.defineProperty(e,"dijkstraAsync",{enumerable:!0,get:function(){return r.dijkstraAsync}}),Object.defineProperty(e,"findAllPathAsync",{enumerable:!0,get:function(){return r.findAllPathAsync}}),Object.defineProperty(e,"findShortestPathAsync",{enumerable:!0,get:function(){return r.findShortestPathAsync}}),Object.defineProperty(e,"floydWarshallAsync",{enumerable:!0,get:function(){return r.floydWarshallAsync}}),Object.defineProperty(e,"getAdjMatrixAsync",{enumerable:!0,get:function(){return r.getAdjMatrixAsync}}),Object.defineProperty(e,"getDegreeAsync",{enumerable:!0,get:function(){return r.getDegreeAsync}}),Object.defineProperty(e,"getInDegreeAsync",{enumerable:!0,get:function(){return r.getInDegreeAsync}}),Object.defineProperty(e,"getNeighborsAsync",{enumerable:!0,get:function(){return r.getNeighborsAsync}}),Object.defineProperty(e,"getOutDegreeAsync",{enumerable:!0,get:function(){return r.getOutDegreeAsync}}),Object.defineProperty(e,"labelPropagationAsync",{enumerable:!0,get:function(){return r.labelPropagationAsync}}),Object.defineProperty(e,"louvainAsync",{enumerable:!0,get:function(){return r.louvainAsync}}),Object.defineProperty(e,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return r.minimumSpanningTreeAsync}}),Object.defineProperty(e,"pageRankAsync",{enumerable:!0,get:function(){return r.pageRankAsync}});var r=n(257),n=r.detectCycleAsync,n=(e.detectDirectedCycleAsync=n,{getAdjMatrixAsync:r.getAdjMatrixAsync,connectedComponentAsync:r.connectedComponentAsync,getDegreeAsync:r.getDegreeAsync,getInDegreeAsync:r.getInDegreeAsync,getOutDegreeAsync:r.getOutDegreeAsync,detectCycleAsync:r.detectCycleAsync,detectDirectedCycleAsync:n,detectAllCyclesAsync:r.detectAllCyclesAsync,detectAllDirectedCycleAsync:r.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:r.detectAllUndirectedCycleAsync,dijkstraAsync:r.dijkstraAsync,findAllPathAsync:r.findAllPathAsync,findShortestPathAsync:r.findShortestPathAsync,floydWarshallAsync:r.floydWarshallAsync,labelPropagationAsync:r.labelPropagationAsync,louvainAsync:r.louvainAsync,minimumSpanningTreeAsync:r.minimumSpanningTreeAsync,pageRankAsync:r.pageRankAsync,getNeighborsAsync:r.getNeighborsAsync,GADDIAsync:r.GADDIAsync});e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.pageRankAsync=e.minimumSpanningTreeAsync=e.louvainAsync=e.labelPropagationAsync=e.getOutDegreeAsync=e.getNeighborsAsync=e.getInDegreeAsync=e.getDegreeAsync=e.getAdjMatrixAsync=e.floydWarshallAsync=e.findShortestPathAsync=e.findAllPathAsync=e.dijkstraAsync=e.detectCycleAsync=e.detectAllUndirectedCycleAsync=e.detectAllDirectedCycleAsync=e.detectAllCyclesAsync=e.connectedComponentAsync=e.GADDIAsync=void 0;var r,s=(r=n(258))&&r.__esModule?r:{default:r},c=n(147);e.getAdjMatrixAsync=function(t,e){return(0,s.default)(c.ALGORITHM.getAdjMatrix).apply(void 0,[t,e])},e.connectedComponentAsync=function(t,e){return(0,s.default)(c.ALGORITHM.connectedComponent).apply(void 0,[t,e])},e.getDegreeAsync=function(t){return(0,s.default)(c.ALGORITHM.getDegree)(t)},e.getInDegreeAsync=function(t,e){return(0,s.default)(c.ALGORITHM.getInDegree)(t,e)},e.getOutDegreeAsync=function(t,e){return(0,s.default)(c.ALGORITHM.getOutDegree)(t,e)},e.detectCycleAsync=function(t){return(0,s.default)(c.ALGORITHM.detectCycle)(t)},e.detectAllCyclesAsync=function(t){return(0,s.default)(c.ALGORITHM.detectAllCycles)(t)},e.detectAllDirectedCycleAsync=function(t){return(0,s.default)(c.ALGORITHM.detectAllDirectedCycle)(t)},e.detectAllUndirectedCycleAsync=function(t){return(0,s.default)(c.ALGORITHM.detectAllUndirectedCycle)(t)},e.dijkstraAsync=function(t,e,n,r){return(0,s.default)(c.ALGORITHM.dijkstra).apply(void 0,[t,e,n,r])},e.findAllPathAsync=function(t,e,n,r){return(0,s.default)(c.ALGORITHM.findAllPath).apply(void 0,[t,e,n,r])},e.findShortestPathAsync=function(t,e,n,r,o){return(0,s.default)(c.ALGORITHM.findShortestPath).apply(void 0,[t,e,n,r,o])},e.floydWarshallAsync=function(t,e){return(0,s.default)(c.ALGORITHM.floydWarshall).apply(void 0,[t,e])},e.labelPropagationAsync=function(t,e,n,r){return void 0===r&&(r=1e3),(0,s.default)(c.ALGORITHM.labelPropagation)(t,e,n,r)},e.louvainAsync=function(t,e,n,r){return(0,s.default)(c.ALGORITHM.louvain)(t,e,n,r)},e.minimumSpanningTreeAsync=function(t,e,n){return(0,s.default)(c.ALGORITHM.minimumSpanningTree).apply(void 0,[t,e,n])},e.pageRankAsync=function(t,e,n){return(0,s.default)(c.ALGORITHM.pageRank).apply(void 0,[t,e,n])},e.getNeighborsAsync=function(t,e,n){return(0,s.default)(c.ALGORITHM.getNeighbors).apply(void 0,[t,e,n])},e.GADDIAsync=function(t,e,n,r,o,i,a){return void 0===n&&(n=!1),void 0===i&&(i="cluster"),void 0===a&&(a="cluster"),(0,s.default)(c.ALGORITHM.GADDI).apply(void 0,[t,e,n,r,o,i,a])}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(147),s=(n=n(259))&&n.__esModule?n:{default:n};e.default=function(i){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Promise(function(n,r){var o=new s.default;o.postMessage({_algorithmType:i,data:t}),o.onmessage=function(t){var t=t.data,e=t.data;a.MESSAGE.SUCCESS===t._algorithmType?n(e):r(),o.terminate()}})}}},function(t,e,n){function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=s(void 0);if(e&&e.has(t))return e.get(t);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&((r=i?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=t[n]);return o.default=t,e&&e.set(t,o),o}(n(260)),o=n(147);function s(t){var e,n;return"function"!=typeof WeakMap?null:(e=new WeakMap,n=new WeakMap,(s=function(t){return t?n:e})(t))}var i="undefined"!=typeof self?self:{};i.onmessage=function(t){var t=t.data,e=t._algorithmType,t=t.data;e&&("function"!=typeof r[e]?i.postMessage({_algorithmType:o.MESSAGE.FAILURE}):(e=r[e].apply(r,t),i.postMessage({_algorithmType:o.MESSAGE.SUCCESS,data:e})))},e.default=null},function(t,e,n){function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDI",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"breadthFirstSearch",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"connectedComponent",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"depthFirstSearch",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"detectCycle",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"dijkstra",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"findAllPath",{enumerable:!0,get:function(){return d.findAllPath}}),Object.defineProperty(e,"findShortestPath",{enumerable:!0,get:function(){return d.findShortestPath}}),Object.defineProperty(e,"floydWarshall",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"getAdjMatrix",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"getDegree",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"getInDegree",{enumerable:!0,get:function(){return s.getInDegree}}),Object.defineProperty(e,"getNeighbors",{enumerable:!0,get:function(){return v.getNeighbors}}),Object.defineProperty(e,"getOutDegree",{enumerable:!0,get:function(){return s.getOutDegree}}),Object.defineProperty(e,"labelPropagation",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"louvain",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"minimumSpanningTree",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"pageRank",{enumerable:!0,get:function(){return y.default}});var r=x(n(128)),o=x(n(261)),i=x(n(181)),s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=b(void 0);if(e&&e.has(t))return e.get(t);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&((r=i?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=t[n]);return o.default=t,e&&e.set(t,o),o}(n(182)),c=x(n(264)),u=x(n(183)),l=x(n(148)),d=n(265),h=x(n(184)),f=x(n(266)),p=x(n(267)),g=x(n(272)),y=x(n(275)),m=x(n(276)),v=n(97);function b(t){var e,n;return"function"!=typeof WeakMap?null:(e=new WeakMap,n=new WeakMap,(b=function(t){return t?n:e})(t))}function x(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,c=(r=n(262))&&r.__esModule?r:{default:r},u=n(97);e.default=function(t,e,n,r){void 0===r&&(r=!0);var o=function(t){function e(){}var n,r=t=void 0===t?{}:t;n={};return r.allowTraversal=t.allowTraversal||function(t){t=t.next;return!n[t]&&(n[t]=!0)},r.enter=t.enter||e,r.leave=t.leave||e,r}(n),i=new c.default,n=t.edges,a=void 0===n?[]:n;i.enqueue(e);for(var s="";!i.isEmpty();)!function(){var e=i.dequeue();o.enter({current:e,previous:s}),(0,u.getNeighbors)(e,a,r?"target":void 0).forEach(function(t){o.allowTraversal({previous:s,current:e,next:t})&&i.enqueue(t)}),o.leave({current:e,previous:s}),s=e}()}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=(n=n(263))&&n.__esModule?n:{default:n};function o(){this.linkedList=new r.default}o.prototype.isEmpty=function(){return!this.linkedList.head},o.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},o.prototype.enqueue=function(t){this.linkedList.append(t)},o.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},o.prototype.toString=function(t){return this.linkedList.toString(t)},e.default=o},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.LinkedListNode=void 0;function r(t,e){return t===e}i.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)};var o=i;function i(t,e){void 0===e&&(e=null),this.value=t,this.next=e}function a(t){void 0===t&&(t=r),this.head=null,this.tail=null,this.compare=t}e.LinkedListNode=o,a.prototype.prepend=function(t){t=new o(t,this.head);return this.head=t,this.tail||(this.tail=t),this},a.prototype.append=function(t){t=new o(t);return this.head?this.tail.next=t:this.head=t,this.tail=t,this},a.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,t)?(e=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,t)&&(this.tail=n),e},a.prototype.find=function(t){var e=t.value,n=void 0===e?void 0:e,e=t.callback,r=void 0===e?void 0:e;if(this.head)for(var o=this.head;o;){if(r&&r(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},a.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)this.head=null,this.tail=null;else{for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;this.tail=e}return t},a.prototype.deleteHead=function(){var t;return this.head?(t=this.head,this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t):null},a.prototype.fromArray=function(t){var e=this;return t.forEach(function(t){return e.append(t)}),this},a.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},a.prototype.reverse=function(){for(var t,e=this.head,n=null;e;)t=e.next,e.next=n,n=e,e=t;this.tail=this.head,this.head=n},a.prototype.toString=function(e){return void 0===e&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},e.default=a},function(t,e,n){function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.detectAllUndirectedCycle=e.detectAllDirectedCycle=e.detectAllCycles=e.default=void 0;var r,u=(r=n(183))&&r.__esModule?r:{default:r},w=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var e=s(void 0);if(e&&e.has(t))return e.get(t);var n,r,o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&((r=i?Object.getOwnPropertyDescriptor(t,n):null)&&(r.get||r.set)?Object.defineProperty(o,n,r):o[n]=t[n]);return o.default=t,e&&e.set(t,o),o}(n(181)),_=n(97);function s(t){var e,n;return"function"!=typeof WeakMap?null:(e=new WeakMap,n=new WeakMap,(s=function(t){return t?n:e})(t))}function o(s,c,u){var t;void 0===u&&(u=!0);for(var l=[],e=0,n=(0,w.default)(s,!1);e<n.length;e++){var r=n[e];if(r.length)for(var r=r[0],o=r.id,d=[r],h=((t={})[o]=r,t),f=((r={})[o]=new Set,r);0<d.length;)for(var p=d.pop(),g=p.id,y=(0,_.getNeighbors)(g,s.edges),i=0;i<y.length;i+=1)!function(t){var e=y[t],t=s.nodes.find(function(t){return t.id===e});if(e===g)l.push(((n={})[e]=p,n));else if(e in f){if(!f[g].has(t)){for(var n=!0,r=[t,p],o=h[g];f[e].size&&!f[e].has(o)&&(r.push(o),o!==h[o.id]);)o=h[o.id];if(r.push(o),c&&u?(n=!1,-1<r.findIndex(function(t){return-1<c.indexOf(t.id)})&&(n=!0)):c&&!u&&-1<r.findIndex(function(t){return-1<c.indexOf(t.id)})&&(n=!1),n){for(var i={},a=1;a<r.length;a+=1)i[r[a-1].id]=r[a];r.length&&(i[r[r.length-1].id]=r[0]),l.push(i)}f[e].add(p)}}else h[e]=p,d.push(t),f[e]=new Set([p])}(i)}return l}function i(f,p,g){void 0===g&&(g=!0);for(var h=[],y=new Set,m=[],v=[],b={},x={},t=function t(e,n,r){var o=!1;if(!(p&&!1===g&&-1<p.indexOf(e.id))){h.push(e),y.add(e);for(var i=r[e.id],a=0;a<i.length;a+=1)if((d=b[i[a]])===n){for(var s={},c=1;c<h.length;c+=1)s[h[c-1].id]=h[c];h.length&&(s[h[h.length-1].id]=h[0]),v.push(s),o=!0}else y.has(d)||t(d,n,r)&&(o=!0);if(o)for(var u=[e];0<u.length;){var l=u.pop();y.has(l)&&(y.delete(l),m[l.id].forEach(function(t){u.push(t)}),m[l.id].clear())}else for(a=0;a<i.length;a+=1){var d=b[i[a]];m[d.id].has(e)||m[d.id].add(e)}h.pop()}return o},e=f.nodes,n=void 0===e?[]:e,r=0;r<n.length;r+=1){var o=n[r],i=o.id;b[x[i]=r]=o}if(p&&g)for(r=0;r<p.length;r++)!function(t){var e=p[t];x[n[t].id]=x[e],b[x[e]=0]=n.find(function(t){return t.id===e}),b[x[n[t].id]]=n[t]}(r);for(var a=0;a<n.length;){var s=n.filter(function(t){return x[t.id]>=a}),s=(0,w.detectStrongConnectComponents)({nodes:s,edges:f.edges}).filter(function(t){return 1<t.length});if(0===s.length)break;var s=function(t){for(var e,n=1/0,r=0;r<t.length;r+=1)for(var o=t[r],i=0;i<o.length;i++){var a=x[o[i].id];a<n&&(n=a,e=r)}for(var s=t[e],c=[],r=0;r<s.length;r+=1){var u=s[r];c[u.id]=[];for(var l=0,d=(0,_.getNeighbors)(u.id,f.edges,"target").filter(function(t){return-1<s.map(function(t){return t.id}).indexOf(t)});l<d.length;l++){var h=d[l];h!==u.id||!1===g&&-1<p.indexOf(u.id)?c[u.id].push(x[h]):v.push(((h={})[u.id]=u,h))}}return{component:s,adjList:c,minIdx:n}}(s),c=s.minIdx,u=s.adjList,s=s.component;if(!(1<s.length))break;s.forEach(function(t){m[t.id]=new Set});s=b[c];if(p&&g&&-1===p.indexOf(s.id))return v;t(s,s,u),a=c+1}return v}e.detectAllUndirectedCycle=o,e.detectAllDirectedCycle=i,e.detectAllCycles=function(t,e,n,r){return(e?i:o)(t,n,r=void 0===r?!0:r)};e.default=function(t){var o=null,e=t.nodes,i={},a={},s={},n={};(void 0===e?[]:e).forEach(function(t){a[t.id]=t});for(var r={enter:function(t){var e=t.current,t=t.previous;if(s[e]){o={};for(var n=e,r=t;r!==e;)o[n]=r,r=i[n=r];o[n]=r}else delete a[s[e]=e],i[e]=t},leave:function(t){t=t.current;delete s[n[t]=t]},allowTraversal:function(t){t=t.next;return!o&&!n[t]}};Object.keys(a).length;){var c=Object.keys(a)[0];(0,u.default)(t,c,r)}return o}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.findShortestPath=e.findAllPath=void 0;var r,i=(r=n(148))&&r.__esModule?r:{default:r},h=n(97);e.findShortestPath=function(t,e,n,r,o){t=(0,i.default)(t,e,r,o);return{length:t.length[n],path:t.path[n],allPath:t.allPath[n]}},e.findAllPath=function(t,e,n,r){if(e===n)return[[e]];var t=t.edges,o=void 0===t?[]:t,i=[e],a=((t={})[e]=!0,t),s=[],c=[],u=r?(0,h.getNeighbors)(e,o,"target"):(0,h.getNeighbors)(e,o);for(s.push(u);0<i.length&&0<s.length;){var l,d=s[s.length-1];d.length?((d=d.shift())&&(i.push(d),a[d]=!0,u=r?(0,h.getNeighbors)(d,o,"target"):(0,h.getNeighbors)(d,o),s.push(u.filter(function(t){return!a[t]}))),i[i.length-1]===n&&(d=i.map(function(t){return t}),c.push(d),l=i.pop(),a[l]=!1,s.pop())):(l=i.pop(),a[l]=!1,s.pop())}return c}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,p=(r=n(128))&&r.__esModule?r:{default:r},g=n(97);e.default=function(t,e,o,n){void 0===e&&(e=!1),void 0===o&&(o="weight"),void 0===n&&(n=1e3);var r=t.nodes,i=void 0===r?[]:r,r=t.edges,r=void 0===r?[]:r,s={},c={},t=(i.forEach(function(t,e){var n=(0,g.uniqueId)();t.clusterId=n,s[n]={id:n,nodes:[t]},c[t.id]={node:t,idx:e}}),(0,p.default)(t,e)),a=[],u={};t.forEach(function(t,e){var n=0,r=i[e].id;u[r]={},t.forEach(function(t,e){t&&(n+=t,e=i[e].id,u[r][e]=t)}),a.push(n)});for(var l=0;l<n&&"break"!==function(){var a=!1;if(i.forEach(function(n){var t,e,r={},o=(Object.keys(u[n.id]).forEach(function(t){var e=u[n.id][t],t=c[t].node.clusterId;r[t]||(r[t]=0),r[t]+=e}),-1/0),i=[];Object.keys(r).forEach(function(t){o<r[t]?(o=r[t],i=[t]):o===r[t]&&i.push(t)}),1===i.length&&i[0]===n.clusterId||(0<=(t=i.indexOf(n.clusterId))&&i.splice(t,1),i&&i.length&&(a=!0,e=(t=s[n.clusterId]).nodes.indexOf(n),t.nodes.splice(e,1),t=Math.floor(Math.random()*i.length),(e=s[i[t]]).nodes.push(n),n.clusterId=e.id))}),!a)return"break";l++}(););Object.keys(s).forEach(function(t){var e=s[t];e.nodes&&e.nodes.length||delete s[t]});var d=[],h={},f=(r.forEach(function(t){var e=t.source,n=t[o]||1,e=c[e].node.clusterId,t=c[t.target].node.clusterId,r="".concat(e,"---").concat(t);h[r]?(h[r].weight+=n,h[r].count++):d.push(h[r]={source:e,target:t,weight:n,count:1})}),[]);return Object.keys(s).forEach(function(t){f.push(s[t])}),{clusters:f,clusterEdges:d}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var j=n(67),N=r(n(128)),g=r(n(185)),D=n(268),P=n(270);function r(t){return t&&t.__esModule?t:{default:t}}function L(t,e,n,r){for(var o=e.length,i=2*r,a=0,s=0;s<o;s++)for(var c=t[s].clusterId,u=0;u<o;u++)c===t[u].clusterId&&(a+=(e[s][u]||0)-(n[s]||0)*(n[u]||0)/i);return a*(1/i)}function R(t,e){for(var n=(t=void 0===t?[]:t).length,r=new g.default([]),o=0;o<n;o++)r=r.add(new g.default(e[o]));for(var i=r.avg(n),a=(i.normalize(),0),o=0;o<n;o++)a+=(u=new g.default(e[o])).squareEuclideanDistance(i);var s=[];for(t.forEach(function(){s.push([])}),o=0;o<n;o++)for(var c,u=new g.default(e[o]),l=t[o].clusterInertial=0;l<n;l++)o!==l?(c=new g.default(e[l]),s[o][l]=u.squareEuclideanDistance(c),t[o].clusterInertial+=s[o][l]):s[o][l]=0;var d=0,h=2*n*a;for(o=0;o<n;o++)for(var f=t[o].clusterId,l=0;l<n;l++){var p=t[l].clusterId;o!==l&&f===p&&(d+=t[o].clusterInertial*t[l].clusterInertial/Math.pow(h,2)-s[o][l]/h)}return Number(d.toFixed(4))}e.default=function(t,e,f,n,p,r,o,i,g){void 0===e&&(e=!1),void 0===f&&(f="weight"),void 0===n&&(n=1e-4),void 0===p&&(p=!1),void 0===r&&(r=void 0),void 0===o&&(o=[]),void 0===i&&(i=["id"]),void 0===g&&(g=1);var a,s=t.nodes,c=void 0===s?[]:s,s=t.edges,y=void 0===s?[]:s,m=[],u=(p&&(c.forEach(function(t,e){t.properties=t.properties||{},t.originIndex=e}),a=[],c.every(function(t){return t.hasOwnProperty("nodeType")})&&(a=Array.from(new Set(c.map(function(t){return t.nodeType}))),c.forEach(function(e){e.properties.nodeType=a.findIndex(function(t){return t===e.nodeType})})),s=(0,D.getAllProperties)(c,r),m=(0,P.oneHot)(s,o,i)),1),v={},b={},x=(c.forEach(function(t,e){var n=String(u++);t.clusterId=n,v[n]={id:n,nodes:[t]},b[t.id]={node:t,idx:e}}),(0,N.default)(t,e)),w=[],_={},E=0;x.forEach(function(t,e){var n=0,r=c[e].id;_[r]={},t.forEach(function(t,e){t&&(n+=t,e=c[e].id,_[r][e]=t,E+=t)}),w.push(n)}),E/=2;for(var l,d=1/0,h=0,S=[],O={};;){l=p&&c.every(function(t){return t.hasOwnProperty("properties")})?L(c,x,w,E)+R(c,m)*g:L(c,x,w,E),0===h&&(d=l,S=c,O=v);var M=0<l&&d<l&&l-d<n;if(d<l&&(S=c.map(function(t){return{node:t,clusterId:t.clusterId}}),O=(0,j.clone)(v),d=l),M||100<h)break;h++,Object.keys(v).forEach(function(r){var o=0;y.forEach(function(t){var e=t.source,e=b[e].node.clusterId,n=b[t.target].node.clusterId;(e===r&&n!==r||n===r&&e!==r)&&(o+=t[f]||1)}),v[r].sumTot=o}),c.forEach(function(o,i){var a,r,s,c,t=v[o.clusterId],u=0,l=w[i]/(2*E),e=0,n=t.nodes,d=(n.forEach(function(t){t=b[t.id].idx;e+=x[i][t]||0}),e-t.sumTot*l),n=n.filter(function(t){return t.id!==o.id}),h=(n.forEach(function(t,e){e,m[t.originIndex]}),R(n,m)*g),n=_[o.id];Object.keys(n).forEach(function(t){var e,n,r,t=b[t].node.clusterId;t!==o.clusterId&&(r=(t=v[t]).nodes)&&r.length&&(e=0,r.forEach(function(t){t=b[t.id].idx;e+=x[i][t]||0}),n=e-t.sumTot*l,r=r.concat([o]),r.forEach(function(t,e){e,m[t.originIndex]}),r=R(r,m)*g,u<(r=p?n+r-(d+h):n-d))&&(u=r,a=t)}),0<u&&(a.nodes.push(o),r=o.clusterId,o.clusterId=a.id,n=t.nodes.indexOf(o),t.nodes.splice(n,1),c=s=0,y.forEach(function(t){var e=t.source,e=b[e].node.clusterId,n=b[t.target].node.clusterId;(e===a.id&&n!==a.id||n===a.id&&e!==a.id)&&(s+=t[f]||1),(e===r&&n!==r||n===r&&e!==r)&&(c+=t[f]||1)}),a.sumTot=s,t.sumTot=c)})}var k={},C=0,A=(Object.keys(O).forEach(function(t){var e,n=O[t];n.nodes&&n.nodes.length?(e=String(C+1))!==t&&(n.id=e,n.nodes=n.nodes.map(function(t){return{id:t.id,clusterId:e}}),O[e]=n,k[t]=e,delete O[t],C++):delete O[t]}),S.forEach(function(t){var e=t.node;e&&(e.clusterId=t.clusterId,e.clusterId)&&k[e.clusterId]&&(e.clusterId=k[e.clusterId])}),[]),I={},T=(y.forEach(function(t){var e,n=t.source,r=t[f]||1,n=b[n].node.clusterId,t=b[t.target].node.clusterId;n&&t&&(e="".concat(n,"---").concat(t),I[e]?(I[e].weight+=r,I[e].count++):A.push(I[e]={source:n,target:t,weight:r,count:1}))}),[]);return Object.keys(O).forEach(function(t){T.push(O[t])}),{clusters:T,clusterEdges:A}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.getPropertyWeight=e.getAllSortProperties=e.getAllProperties=e.default=void 0;function o(t,e){void 0===e&&(e=100);var n={};return(t=void 0===t?[]:t).forEach(function(e){e.properties&&Object.keys(e.properties).forEach(function(t){"id"===t||!"".concat(e.properties[t]).match(a.secondReg)&&!"".concat(e.properties[t]).match(a.dateReg)&&isNaN(Number(e.properties[t]))?n.hasOwnProperty(t)&&delete n[t]:n.hasOwnProperty(t)?n[t]+=1:n[t]=1})}),(t=Object.keys(n).sort(function(t,e){return n[e]-n[t]})).length<e?t:t.slice(0,e)}function r(t){for(var e=o(t),n=[],r=0;r<t.length;r++)n[r]=function(e,t){return t.map(function(t){return e.hasOwnProperty(t)?e[t]:0})}(t[r].properties,e);return n}function i(t,e){void 0===e&&(e=void 0);var n=[];return t.forEach(function(t){void 0===e&&n.push(t),void 0!==t[e]&&n.push(t[e])}),n}var a=n(269),n=(e.getAllSortProperties=o,{getAllSortProperties:o,getPropertyWeight:e.getPropertyWeight=r,getAllProperties:e.getAllProperties=i});e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.secondReg=e.dateReg=void 0,e.secondReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,e.dateReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.oneHot=e.getDistance=e.getAllKeyValueMap=e.default=void 0;function o(t,e,r){var n=[],n=null!=e&&e.length?e:(t.forEach(function(t){n=n.concat(Object.keys(t))}),(0,a.uniq)(n)),o={};return n.forEach(function(e){var n=[];t.forEach(function(t){void 0!==t[e]&&""!==t[e]&&n.push(t[e])}),!n.length||null!=r&&r.includes(e)||(o[e]=(0,a.uniq)(n))}),o}function r(t,e,n){var c,u=o(t,e,n),r=[];return Object.keys(u).length&&(c=Object.values(u).every(function(t){return t.every(function(t){return"number"==typeof t})}),t.forEach(function(a,t){var s=[];Object.keys(u).forEach(function(t){var e=a[t],n=u[t],r=n.findIndex(function(t){return e===t}),o=[];if(c)o.push(e);else for(var i=0;i<n.length;i++)o.push(i===r?1:0);s=s.concat(o)}),r[t]=s})),r}function i(t,e,n,r){var o=0;return o=(n=void 0===n?s.DistanceType.EuclideanDistance:n)===s.DistanceType.EuclideanDistance?new c.default(t).euclideanDistance(new c.default(e)):o}var a=n(67),s=n(271),c=(n=n(185))&&n.__esModule?n:{default:n},n={getAllKeyValueMap:e.getAllKeyValueMap=o,oneHot:e.oneHot=r,getDistance:e.getDistance=i};e.default=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.DistanceType=void 0,e.DistanceType=void 0,(e.DistanceType={}).EuclideanDistance="euclideanDistance"},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=r(n(273)),l=r(n(274)),d=n(97);function r(t){return t&&t.__esModule?t:{default:t}}var o=function(t,e){var n=[],r=t.nodes,r=void 0===r?[]:r,t=t.edges,t=void 0===t?[]:t;if(0!==r.length){var o=t.map(function(t){return t});e&&o.sort(function(t,e){return t.weight-e.weight});for(var i=new u.default(r.map(function(t){return t.id}));0<o.length;){var a=o.shift(),s=a.source,c=a.target;i.connected(s,c)||(n.push(a),i.union(s,c))}}return n};e.default=function(t,e,n){return n?{prim:function(t,n){var e=[],r=t.nodes,r=void 0===r?[]:r,t=t.edges,o=void 0===t?[]:t;if(0!==r.length){var t=r[0],i=new Set,a=(i.add(t),new l.default(function(t,e){return n?t.weight-e.weight:0}));for((0,d.getEdgesByNodeId)(t.id,o).forEach(function(t){a.insert(t)});!a.isEmpty();){var s=a.delMin(),c=s.source,u=s.target;i.has(c)&&i.has(u)||(e.push(s),i.has(c)||(i.add(c),(0,d.getEdgesByNodeId)(c,o).forEach(function(t){a.insert(t)})),i.has(u))||(i.add(u),(0,d.getEdgesByNodeId)(u,o).forEach(function(t){a.insert(t)}))}}return e},kruskal:o}[n](t,e):o(t,e)}},function(t,e,n){function r(t){this.count=t.length,this.parent={};for(var e=0,n=t;e<n.length;e++){var r=n[e];this.parent[r]=r}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},r.prototype.union=function(t,e){var n=this.find(t),r=this.find(e);n!==r&&(n<r?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},r.prototype.connected=function(t,e){return this.find(t)===this.find(e)},e.default=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function r(t,e){return t-e}function o(t){this.compareFn=t=void 0===t?r:t,this.list=[]}o.prototype.getLeft=function(t){return 2*t+1},o.prototype.getRight=function(t){return 2*t+2},o.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},o.prototype.isEmpty=function(){return this.list.length<=0},o.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},o.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return 0<this.list.length&&(this.list[0]=e,this.moveDown(0)),t},o.prototype.insert=function(t){return null!==t&&(this.list.push(t),t=this.list.length-1,this.moveUp(t),!0)},o.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&0<t&&0<this.compareFn(this.list[e],this.list[t]);){var n=this.list[e];this.list[e]=this.list[t],this.list[t]=n,t=e,e=this.getParent(t)}},o.prototype.moveDown=function(t){var e=t,n=this.getLeft(t),r=this.getRight(t),o=this.list.length;null!==n&&n<o&&0<this.compareFn(this.list[e],this.list[n])?e=n:null!==r&&r<o&&0<this.compareFn(this.list[e],this.list[r])&&(e=r),t!==e&&(n=[this.list[e],this.list[t]],this.list[t]=n[0],this.list[e]=n[1],this.moveDown(e))},e.default=o},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,w=(r=n(182))&&r.__esModule?r:{default:r},_=n(97);e.default=function(t,e,n){"number"!=typeof e&&(e=1e-6),"number"!=typeof n&&(n=.85);for(var r=1,o=0,i=1e3,a=t.nodes,s=void 0===a?[]:a,a=t.edges,c=void 0===a?[]:a,u=s.length,l={},d={},h=0;h<u;++h)l[g=(f=s[h]).id]=1/u,d[g]=1/u;for(var f,p=(0,w.default)(t);0<i&&e<r;){for(h=o=0;h<u;++h){var g=(f=s[h]).id,y=0;if(0===p[f.id].inDegree)l[g]=0;else{for(var m=(0,_.getNeighbors)(g,c,"source"),v=0;v<m.length;++v){var b=m[v],x=p[b].outDegree;0<x&&(y+=d[b]/x)}l[g]=n*y,o+=l[g]}}for(o=(1-o)/u,h=r=0;h<u;++h)y=l[g=(f=s[h]).id]+o,r+=Math.abs(y-d[g]),d[g]=y;--i}return d}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var H=n(68),q=r(n(184)),K=r(n(277)),Z=r(n(148)),a=n(97);function r(t){return t&&t.__esModule?t:{default:t}}function $(t,e,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var o=[],i=t.nodes;return e.forEach(function(t,e){o.push(nt(i,t,e,n,r))}),o}function Q(t,n){var r={},o={};return t.forEach(function(t,e){r[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};e=t[n];o[e]||(o[e]=[]),o[e].push(t)}),{nodeMap:r,nodeLabelMap:o}}function J(t,n,r){var o={},i={};return t.forEach(function(t,e){o["".concat(a.uniqueId)]={idx:e,edge:t};e=t[n],i[e]||(i[e]=[]),i[e].push(t),e=r[t.source],e&&(e.degree++,e.outDegree++),e=r[t.target];e&&(e.degree++,e.inDegree++)}),{edgeMap:o,edgeLabelMap:i}}function tt(a,t,s){var c=t.length,u={};return t.forEach(function(t,e){for(var n,r,o=a[e].id,i=s?0:e+1;i<c;i++)e!==i&&(n=a[i].id,r=t[i],u["".concat(o,"-").concat(n)]=r,s||(u["".concat(n,"-").concat(o)]=r))}),u}function et(t,e,n,r){var o,i=null==(o=t[e])?void 0:o.degree,a=null==(o=t[e])?void 0:o.inDegree,s=null==(o=t[e])?void 0:o.outDegree;return void 0===t[e]&&(s=a=i=1/0,r[e].forEach(function(t){var e=n[t.id].degree,e=(e<i&&(i=e),n[t.id].inDegree),e=(e<a&&(a=e),n[t.id].outDegree);e<s&&(s=e)}),t[e]={degree:i,inDegree:a,outDegree:s}),{minPatternNodeLabelDegree:i,minPatternNodeLabelInDegree:a,minPatternNodeLabelOutDegree:s}}var nt=function(n,t,r,o,i){var a=[r],s=[],c={};return t.forEach(function(t,e){t<=i&&r!==e&&(a.push(e),s.push(n[e]),e=n[e][o],c[e]?(c[e].count++,c[e].dists.push(t)):c[e]={count:1,dists:[t]})}),Object.keys(c).forEach(function(t){c[t].dists=c[t].dists.sort(function(t,e){return t-e})}),{nodeIdx:r,nodeId:n[r].id,nodeIdxs:a,neighbors:s,neighborNum:a.length-1,nodeLabelCountMap:c}},rt=function(u,l,d,h){var f=d.nodes;return h=h||{},Object.keys(u).forEach(function(e){if(!h||!h[e]){h[e]={nodes:[],edges:[]};var t=u[e],n=null==(n=l[t.start])?void 0:n.nodeIdxs,t=null==(t=l[t.end])?void 0:t.nodeIdxs;if(n&&t){var r=new Set(t),o=n.filter(function(t){return r.has(t)});if(o&&o.length){for(var i={},a=o.length,s=0;s<a;s++){var c=f[o[s]];h[e].nodes.push(c),i[c.id]=!0}d.edges.forEach(function(t){i[t.source]&&i[t.target]&&h[e].edges.push(t)})}}}}),h},ot=function(t,a,s,c){var e,u={},l=(t.nodes.forEach(function(t){u[t.id]=t}),0);return null==(e=null==a?void 0:a.edges)||!e.length||(null==(e=null==a?void 0:a.nodes)?void 0:e.length)<2?0:(t.edges.forEach(function(t){var e=u[t.source][s],n=u[t.target][s],r=null==a?void 0:a.nodes[0][s],o=null==a?void 0:a.nodes[1][s],i=null==a?void 0:a.edges[0][c];t[c]===i&&(e===r&&n===o||e===o&&n===r)&&l++}),l)};e.default=function(M,k,C,t,b,A,I){var c,u,p,l,d,g;if(void 0===C&&(C=!1),void 0===A&&(A="cluster"),void 0===I&&(I="cluster"),M&&M.nodes){var e=M.nodes.length;if(e){var x=(0,q.default)(M,C),n=(0,q.default)(k,C),w=tt(M.nodes,x,C),y=tt(k.nodes,n,C),r=Q(M.nodes,A),T=r.nodeMap,m=r.nodeLabelMap,r=Q(k.nodes,A),j=r.nodeMap,N=r.nodeLabelMap,D=(J(M.edges,I,T),J(k.edges,I,j).edgeLabelMap),o=[],_=(null!=n&&n.forEach(function(t){o=o.concat(t)}),b=b||Math.max.apply(Math,(0,H.__spreadArray)((0,H.__spreadArray)([],o,!1),[2],!1)),$(M,x,A,t=t||b)),v=$(k,n,A,t);c=e,u=Math.min(100,e*(e-1)/2),r=_,p=x,l=Math.ceil(u/c),d={},g=0,r.forEach(function(t,e){for(var n=0,r=0,o=t.nodeIdxs,i=t.neighborNum-1;n<l;){for(var a=o[1+Math.floor(Math.random()*i)],s=0;(d["".concat(e,"-").concat(a)]||d["".concat(a,"-").concat(e)])&&(a=Math.floor(Math.random()*c),!(++s>2*c)););if(s<2*c&&(d["".concat(e,"-").concat(a)]={start:e,end:a,distance:p[e][a]},n++,++g>=u))return d;if(++r>2*c)break}n<l&&(l=(l+(l-n))/(c-e-1))});var E=rt(d,_,M),n={graphs:E,nodeLabelProp:A,edgeLabelProp:I,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:C},t=(0,K.default)(n).slice(0,10),e=t.length,i=[],r=(t.forEach(function(n,r){i[r]={},Object.keys(E).forEach(function(t){var e=E[t],e=ot(e,n,A,I);i[r][t]=e})}),function(s,t,e){for(var c=1/0,u=0,n=0;n<t;n++)!function(t){var i=s[t],e=Object.keys(i).sort(function(t,e){return i[t]-i[e]}),n=[],r=(e.forEach(function(t,e){n[e%10]||(n[e%10]={graphs:[],totalCount:0,aveCount:0}),n[e%10].graphs.push(t),n[e%10].totalCount+=i[t]}),0),a=[],o=(n.forEach(function(e){var t=e.totalCount/e.graphs.length,o=(a.push(e.aveCount=t),0),t=e.length;e.graphs.forEach(function(t,n){var r=i[t];e.graphs.forEach(function(t,e){n!==e&&(o+=Math.abs(r-i[t]))})}),r+=o/=t*(t-1)/2}),r/=n.length,0),e=(a.forEach(function(n,r){a.forEach(function(t,e){r!==e&&(o+=Math.abs(n-t))}),o/=a.length*(a.length-1)/2}),o-r);c<e&&(c=e,u=t)}(n);return{structure:e[u],structureCountMap:s[u]}}(i,e,t)),S=r.structure,O=r.structureCountMap,P=k.nodes[0],h=[],G=null==(n=k.nodes[0])?void 0:n[A],U=-1/0,W=(k.nodes.forEach(function(t){var e=t[A],n=m[e];(null==n?void 0:n.length)>U&&(U=n.length,h=n,G=e,P=t)}),{}),a={},s={},L={},R={},B={},z=(Object.keys(N).forEach(function(l,t){R[l]=[],C&&(B[l]=[]);var n=-1/0,e=N[l],r={},d=(e.forEach(function(t){var e=y["".concat(P.id,"-").concat(t.id)];e&&R[l].push(e),n<e&&(n=e),r["".concat(P.id,"-").concat(t.id)]={start:0,end:j[t.id].idx,distance:e},C&&(e=y["".concat(t.id,"-").concat(P.id)])&&B[l].push(e)}),R[l]=R[l].sort(function(t,e){return t-e}),C&&(B[l]=B[l].sort(function(t,e){return t-e})),a=rt(r,v,k,a),[]);if(Object.keys(r).forEach(function(t){var e;s[t]||(e=a[t],s[t]=ot(e,S,A,I)),d.push(s[t])}),d=d.sort(function(t,e){return e-t}),L["".concat(P.id,"-").concat(l)]=d,l!==G)for(var o=((null==h?void 0:h.length)||0)-1;0<=o;o--)!function(t){var n=h[t],e=_[T[n.id].idx],r=e.nodeLabelCountMap[l],o=N[l].length;if(!r||r.count<o)return h.splice(t,1);for(var i=!1,a=0;a<o;a++)if(r.dists[a]>R[l][a]){i=!0;break}if(i)return h.splice(t,1);for(var s={},c=(e.neighbors.forEach(function(t){var e=w["".concat(n.id,"-").concat(t.id)];s["".concat(n.id,"-").concat(t.id)]={start:T[n.id].idx,end:T[t.id].idx,distance:e}}),E=rt(s,_,M,E),[]),u=(Object.keys(s).forEach(function(t){var e;O[t]||(e=E[t],O[t]=ot(e,S,A,I)),c.push(O[t])}),c=c.sort(function(t,e){return e-t}),!1),a=0;a<o;a++)if(c[a]<d[a]){u=!0;break}u&&h.splice(t,1)}(o)}),[]),X=(null!=h&&h.forEach(function(t){for(var e,n,r,o,i,a,s,c,u=T[t.id].idx,l=nt(M.nodes,x[u],u,A,b).neighbors,u=!1,d=l.length-1;0<=d;d--){if(l.length+1<k.nodes.length)return;var h=l[d],f=h[A];if(N[f]&&N[f].length)if(R[f]&&R[f].length){var p="".concat(t.id,"-").concat(h.id),g=w[p],y=R[f].length-1;if(g>R[f][y])l.splice(d,1);else{if(C){var m="".concat(h.id,"-").concat(t.id),m=w[m],y=B[f].length-1;if(m>B[f][y]){l.splice(d,1);continue}}var v=O[p]||(m=M,y=h,p=T,g=g,e=_,n=S,r=A,o=I,i=O,a=E,c=s=void 0,c="".concat((v=t).id,"-").concat(y.id),i&&i[c]?i[c]:((i=a?a[c]:void 0)||((s={})[c]={start:p[v.id].idx,end:p[y.id].idx,distance:g},i=(a=rt(s,e,m,a))[c]),ot(i,n,r,o))),p="".concat(P.id,"-").concat(f);(v<L[p][L[p].length-1]||(y=et(W,f,j,N).minPatternNodeLabelDegree,T[h.id].degree<y))&&l.splice(d,1)}}else l.splice(d,1);else l.splice(d,1)}u||z.push({nodes:[t].concat(l)})}),(0,Z.default)(k,P.id,!1).length),F={};C?(Object.keys(X).forEach(function(t){var e=j[t].node[A];F[e]?F[e].push(X[t]):F[e]=[X[t]]}),Object.keys(F).forEach(function(t){F[t].sort(function(t,e){return t-e})})):F=R;for(var Y=function(t){var o=z[t],e=o.nodes[0],i={},s={},c=(o.nodes.forEach(function(t,e){s[t.id]={idx:e,node:t,degree:0,inDegree:0,outDegree:0};e=t[A];i[e]?i[e]++:i[e]=1}),[]),u={};M.edges.forEach(function(t){s[t.source]&&s[t.target]&&(c.push(t),u[t[I]]?u[t[I]]++:u[t[I]]=1,s[t.source].degree++,s[t.target].degree++,s[t.source].outDegree++,s[t.target].inDegree++)});for(var n=Object.keys(D).length,r=!1,a=0;a<n;a++){var l=Object.keys(D)[a];if(!u[l]||u[l]<D[l].length){r=!0;break}}if(r)return z.splice(t,1),"continue";var d=c.length;if(d<k.edges.length)return z.splice(t,1),"break";for(var h=!1,a=d-1;0<=a&&"break"!==function(t){var n,r,o,e=c[t],i=e[I],a=D[i];return a&&a.length&&(n=s[e.source].node[A],r=s[e.target].node[A],o=!1,a.forEach(function(t){var e=j[t.source].node,t=j[t.target].node;e[A]===n&&t[A]===r&&(o=!0),C||e[A]!==r||t[A]!==n||(o=!0)}),o)?void 0:(u[i]--,a&&u[i]<a.length?(h=!0,"break"):(c.splice(t,1),s[e.source].degree--,s[e.target].degree--,s[e.source].outDegree--,s[e.target].inDegree--,"continue"))}(a);a--);if(h)return z.splice(t,1),"continue";o.edges=c;var f=(0,Z.default)(o,o.nodes[0].id,!1).length;if(Object.keys(f).reverse().forEach(function(t){if(t!==o.nodes[0].id&&!h){var e,n;if(f[t]===1/0)return e=s[t].node[A],i[e]--,i[e]<N[e].length?void(h=!0):(n=o.nodes.indexOf(s[t].node),o.nodes.splice(n,1),void(s[t]=void 0));var r=T[t].node[A];F[r]&&F[r].length&&!(f[t]>F[r][F[r].length-1])||(e=s[t].node[A],i[e]--,i[e]<N[e].length?h=!0:(n=o.nodes.indexOf(s[t].node),o.nodes.splice(n,1),s[t]=void 0))}}),h)return z.splice(t,1),"continue";for(var p=!0,g=0;p&&!h;){if(p=!1,C?s[e.id].degree<j[P.id].degree||s[e.id].inDegree<j[P.id].inDegree||s[e.id].outDegree<j[P.id].outDegree:s[e.id].degree<j[P.id].degree){h=!0;break}if(i[e[A]]<N[e[A]].length){h=!0;break}for(var y=o.nodes.length-1;0<=y;y--){var m=o.nodes[y],v=s[m.id].degree,b=s[m.id].inDegree,x=s[m.id].outDegree,w=et(W,m[A],j,N),_=w.minPatternNodeLabelDegree;if(C?v<_||b<w.minPatternNodeLabelInDegree||x<w.minPatternNodeLabelOutDegree:v<_){if(i[m[A]]--,i[m[A]]<N[m[A]].length){h=!0;break}o.nodes.splice(y,1),p=!(s[m.id]=void 0)}}if(h||!p&&0!==g)break;for(var E=c.length-1;0<=E;E--){var S=c[E];if(!s[S.source]||!s[S.target]){c.splice(E,1);var O=S[I];if(u[O]--,s[S.source]&&(s[S.source].degree--,s[S.source].outDegree--),s[S.target]&&(s[S.target].degree--,s[S.target].inDegree--),D[O]&&u[O]<D[O].length){h=!0;break}p=!0}}g++}return h||o.nodes.length<k.nodes.length||c.length<k.edges.length?(z.splice(t,1),"continue"):void 0},f=z.length-1;0<=f&&"break"!==Y(f);f--);for(var V=z.length,f=0;f<=V-1;f++)!function(t){var r={};z[t].edges.forEach(function(t){t="".concat(t.source,"-").concat(t.target,"-").concat(t.label);r[t]?r[t]++:r[t]=1});for(var e=V-1;t<e;e--)!function(t){var e={},n=(z[t].edges.forEach(function(t){t="".concat(t.source,"-").concat(t.target,"-").concat(t.label);e[t]?e[t]++:e[t]=1}),!0);Object.keys(e).length!==Object.keys(r).length?n=!1:Object.keys(r).forEach(function(t){e[t]!==r[t]&&(n=!1)}),n&&z.splice(t,1)}(e);V=z.length}(f);return z}}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(67),w=n(278),_=(c.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},c.prototype.notEqualTo=function(t){return!this.equalTo(t)},c),s=(a.prototype.equalTo=function(t){var e=this.dfsEdgeList.length;if(e!==t.length)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},a.prototype.notEqualTo=function(t){return!this.equalTo(t)},a.prototype.pushBack=function(t,e,n,r,o){return this.dfsEdgeList.push(new _(t,e,n,r,o)),this.dfsEdgeList},a.prototype.toGraph=function(t,e){void 0===t&&(t=w.VACANT_GRAPH_ID);var i=new w.Graph(t,!0,e=void 0===e?!1:e);return this.dfsEdgeList.forEach(function(t){var e=t.fromNode,n=t.toNode,t=t.nodeEdgeNodeLabel,r=t.nodeLabel1,o=t.edgeLabel,t=t.nodeLabel2;r!==w.VACANT_NODE_LABEL&&i.addNode(e,r),t!==w.VACANT_NODE_LABEL&&i.addNode(n,t),r!==w.VACANT_NODE_LABEL&&t!==r&&i.addEdge(void 0,e,n,o)}),i},a.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length-1;0<=e;e--){var n=this.dfsEdgeList[e],r=n.fromNode,n=n.toNode;r<n&&(void 0===t||n===t)&&(this.rmpath.push(e),t=r)}return this.rmpath},a.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},a),E=(i.prototype.hasNode=function(t){return 1===this.nodesUsed[t.id]},i.prototype.hasEdge=function(t){return 1===this.edgesUsed[t.id]},i),p=(o.prototype.findForwardRootEdges=function(t,e){var n=this,r=[],o=t.nodeMap;return e.edges.forEach(function(t){(n.directed||e.label<=o[t.to].label)&&r.push(t)}),r},o.prototype.findBackwardEdge=function(t,e,n,r){if(this.directed||e!==n)for(var o=t.nodeMap,i=o[n.to].edges,a=i.length,s=0;s<a;s++){var c=i[s];if(!r.hasEdge(c)&&c.to===e.from)if(this.directed){if(o[e.from].label<o[n.to].label||o[e.from].label===o[n.to].label&&e.label<=c.label)return c}else if(e.label<c.label||e.label===c.label&&o[e.to].label<=o[n.to].label)return c}return null},o.prototype.findForwardPureEdges=function(t,e,n,r){for(var o=[],e=e.to,i=t.nodeMap[e].edges,a=i.length,s=0;s<a;s++){var c=i[s],u=t.nodeMap[c.to];n<=u.label&&!r.hasNode(u)&&o.push(c)}return o},o.prototype.findForwardRmpathEdges=function(t,e,n,r){for(var o=[],i=t.nodeMap,a=i[e.to].label,s=i[e.from].edges,c=s.length,u=0;u<c;u++){var l=s[u],d=i[l.to].label;e.to===l.to||d<n||r.hasNode(i[l.to])||(e.label<l.label||e.label===l.label&&a<=d)&&o.push(l)}return o},o.prototype.getSupport=function(t){var e={};return t.forEach(function(t){e[t.graphId]||(e[t.graphId]=!0)}),Object.keys(e).length},o.prototype.findMinLabel=function(r){var o=void 0;return Object.keys(r).forEach(function(t){var t=r[t],e=t.nodeLabel1,n=t.edgeLabel,t=t.nodeLabel2;(!o||e<o.nodeLabel1||e===o.nodeLabel1&&n<o.edgeLabel||e===o.nodeLabel1&&n===o.edgeLabel&&t<o.nodeLabel2)&&(o={nodeLabel1:e,edgeLabel:n,nodeLabel2:t})}),o},o.prototype.isMin=function(){var g,y,m,v,o,t,b=this,x=this.dfsCode;return this.verbose&&console.log("isMin checking",x),1===x.dfsEdgeList.length||(g=this.directed,y=x.toGraph(w.VACANT_GRAPH_ID,g),m=y.nodeMap,v=new s,o={},y.nodes.forEach(function(r){b.findForwardRootEdges(y,r).forEach(function(t){var e=m[t.to],n="".concat(r.label,"-").concat(t.label,"-").concat(e.label),e=(o[n]||(o[n]={projected:[],nodeLabel1:r.label,edgeLabel:t.label,nodeLabel2:e.label}),{graphId:y.id,edge:t,preNode:null});o[n].projected.push(e)})}),(t=this.findMinLabel(o))?(v.dfsEdgeList.push(new _(0,1,t.nodeLabel1,t.edgeLabel,t.nodeLabel2)),t="".concat(t.nodeLabel1,"-").concat(t.edgeLabel,"-").concat(t.nodeLabel2),function t(r){for(var o=v.buildRmpath(),i=v.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,e=v.dfsEdgeList[o[0]].toNode,a={},s=!1,c=0,n=g?-1:0,u=o.length-1;n<u&&"break"!==function(n){if(s)return"break";r.forEach(function(t){var e=new E(t),e=b.findBackwardEdge(y,e.edges[o[n]],e.edges[o[0]],e);e&&(a[e.label]||(a[e.label]={projected:[],edgeLabel:e.label}),a[e.label].projected.push({graphId:y.id,edge:a,preNode:t}),c=v.dfsEdgeList[o[n]].fromNode,s=!0)})}(u);u--);if(s)return d=b.findMinLabel(a),v.dfsEdgeList.push(new _(e,c,w.VACANT_NODE_LABEL,d.edgeLabel,w.VACANT_NODE_LABEL)),l=v.dfsEdgeList.length-1,b.dfsCode.dfsEdgeList[l]===v.dfsEdgeList[l]&&t(a[d.edgeLabel].projected);for(var l,d,h={},s=!1,f=0,p=(r.forEach(function(n){var t=new E(n),t=b.findForwardPureEdges(y,t.edges[o[0]],i,t);0<t.length&&(s=!0,f=e,t.forEach(function(t){var e="".concat(t.label,"-").concat(m[t.to].label);h[e]||(h[e]={projected:[],edgeLabel:t.label,nodeLabel2:m[t.to].label}),h[e].projected.push({graphId:y.id,edge:t,preNode:n})}))}),o.length),u=0;u<p&&"break"!==function(t){if(s)return"break";var e=o[t];r.forEach(function(n){var t=new E(n),t=b.findForwardRmpathEdges(y,t.edges[e],i,t);0<t.length&&(s=!0,f=v.dfsEdgeList[e].fromNode,t.forEach(function(t){var e="".concat(t.label,"-").concat(m[t.to].label);h[e]||(h[e]={projected:[],edgeLabel:t.label,nodeLabel2:m[t.to].label}),h[e].projected.push({graphId:y.id,edge:t,preNode:n})}))})}(u);u++);return!s||(l=b.findMinLabel(h),v.dfsEdgeList.push(new _(f,e+1,w.VACANT_NODE_LABEL,l.edgeLabel,l.nodeLabel2)),d=v.dfsEdgeList.length-1,x.dfsEdgeList[d]===v.dfsEdgeList[d]&&t(h["".concat(l.edgeLabel,"-").concat(l.nodeLabel2)].projected))}(o[t].projected)):void 0)},o.prototype.report=function(){var t;this.dfsCode.getNodeNum()<this.minNodeNum||(this.counter++,t=this.dfsCode.toGraph(this.counter,this.directed),this.frequentSubgraphs.push((0,r.clone)(t)))},o.prototype.subGraphMining=function(t){var s,c,u,l,d,h,f=this;this.getSupport(t)<this.minSupport||!this.isMin()||(this.report(),s=this.dfsCode.getNodeNum(),c=this.dfsCode.buildRmpath(),u=this.dfsCode.dfsEdgeList[c[0]].toNode,l=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,d={},h={},t.forEach(function(r){for(var t=f.graphs[r.graphId],o=t.nodeMap,e=new E(r),n=c.length-1;0<=n;n--){var i,a=f.findBackwardEdge(t,e.edges[c[n]],e.edges[c[0]],e);a&&(i="".concat(f.dfsCode.dfsEdgeList[c[n]].fromNode,"-").concat(a.label),h[i]||(h[i]={projected:[],toNodeId:f.dfsCode.dfsEdgeList[c[n]].fromNode,edgeLabel:a.label}),h[i].projected.push({graphId:r.graphId,edge:a,preNode:r}))}if(!(s>=f.maxNodeNum)){f.findForwardPureEdges(t,e.edges[c[0]],l,e).forEach(function(t){var e="".concat(u,"-").concat(t.label,"-").concat(o[t.to].label);d[e]||(d[e]={projected:[],fromNodeId:u,edgeLabel:t.label,nodeLabel2:o[t.to].label}),d[e].projected.push({graphId:r.graphId,edge:t,preNode:r})});for(n=0;n<c.length;n++)!function(n){f.findForwardRmpathEdges(t,e.edges[c[n]],l,e).forEach(function(t){var e="".concat(f.dfsCode.dfsEdgeList[c[n]].fromNode,"-").concat(t.label,"-").concat(o[t.to].label);d[e]||(d[e]={projected:[],fromNodeId:f.dfsCode.dfsEdgeList[c[n]].fromNode,edgeLabel:t.label,nodeLabel2:o[t.to].label}),d[e].projected.push({graphId:r.graphId,edge:t,preNode:r})})}(n)}}),Object.keys(h).forEach(function(t){var e=h[t],n=e.toNodeId;f.dfsCode.dfsEdgeList.push(new _(u,n,"-1",e.edgeLabel,"-1")),f.subGraphMining(h[t].projected),f.dfsCode.dfsEdgeList.pop()}),Object.keys(d).forEach(function(t){var e=d[t],n=e.fromNodeId;f.dfsCode.dfsEdgeList.push(new _(n,u+1,w.VACANT_NODE_LABEL,e.edgeLabel,e.nodeLabel2)),f.subGraphMining(d[t].projected),f.dfsCode.dfsEdgeList.pop()}))},o.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,u=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,o={},l={},i={};return Object.keys(e).forEach(function(s){var t=e[s],c=t.nodeMap;t.nodes.forEach(function(t,e){var n,a=t.label,r="".concat(s,"-").concat(a);i[r]||(n=o[a]||0,o[a]=++n),i[r]={graphKey:s,label:a},t.edges.forEach(function(t){var e,n=a,r=c[t.to].label,o=(!u&&r<n&&(o=r,r=n,n=o),t.label),t="".concat(s,"-").concat(n,"-").concat(o,"-").concat(r),i="".concat(n,"-").concat(o,"-").concat(r);l[i]||(e=l[i]||0,l[i]=++e),t,0})})}),Object.keys(o).forEach(function(t){var e;o[t]<n||((e={nodes:[],edges:[]}).nodes.push({id:"0",label:t}),r.push(e))}),r},o.prototype.run=function(){var e,a,n=this;this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),this.maxNodeNum<2||(e=this.graphs,this.directed,a={},Object.keys(e).forEach(function(o){var t=e[o],i=t.nodeMap;t.nodes.forEach(function(r){n.findForwardRootEdges(t,r).forEach(function(t){var e=i[t.to],n="".concat(r.label,"-").concat(t.label,"-").concat(e.label),e=(a[n]||(a[n]={projected:[],nodeLabel1:r.label,edgeLabel:t.label,nodeLabel2:e.label}),{graphId:o,edge:t,preNode:null});a[n].projected.push(e)})})}),Object.keys(a).forEach(function(t){var t=a[t],e=t.projected;n.dfsCode.dfsEdgeList.push(new _(0,1,t.nodeLabel1,t.edgeLabel,t.nodeLabel2)),n.subGraphMining(e),n.dfsCode.dfsEdgeList.pop()}))},o);function o(t){var e=t.graphs,n=t.minSupport,n=void 0===n?2:n,r=t.minNodeNum,r=void 0===r?1:r,o=t.maxNodeNum,o=void 0===o?4:o,i=t.top,i=void 0===i?10:i,a=t.directed,a=void 0!==a&&a,t=t.verbose,t=void 0!==t&&t;this.graphs=e,this.dfsCode=new s,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=i,this.directed=a,this.counter=0,this.maxNodeNum=o,this.minNodeNum=r,this.verbose=t,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}function i(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}function a(){this.rmpath=[],this.dfsEdgeList=[]}function c(t,e,n,r,o){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:n||w.VACANT_NODE_LABEL,edgeLabel:r||w.VACANT_EDGE_LABEL,nodeLabel2:o||w.VACANT_NODE_LABEL}}e.default=function(t){var n,i,a,s,c,r,o,e,u=t.graphs,l=t.directed,l=void 0!==l&&l,d=t.nodeLabelProp,d=void 0===d?"cluster":d,h=t.edgeLabelProp,h=void 0===h?"cluster":h,u=(n=u,i=l,a=d,s=h,c={},Object.keys(n).forEach(function(t,e){var t=n[t],r=new w.Graph(e,!0,i),o={};t.nodes.forEach(function(t,e){r.addNode(e,t[a]),o[t.id]=e}),t.edges.forEach(function(t,e){var n=o[t.source];r.addEdge(-1,n,o[t.target],t[s])}),r&&r.getNodeNum()&&(c[r.id]=r)}),c),f=t.minSupport,u=new p({graphs:u,minSupport:f,maxNodeNum:t.maxNodeNum,minNodeNum:t.minNodeNum,top:t.top,verbose:t.verbose,directed:l});return u.run(),f=u.frequentSubgraphs,r=d,o=h,e=[],f.forEach(function(t){var n={nodes:[],edges:[]};t.nodes.forEach(function(t){var e;n.nodes.push(((e={id:"".concat(t.id)})[r]=t.label,e))}),t.edges.forEach(function(t){var e;n.edges.push(((e={source:"".concat(t.from),target:"".concat(t.to)})[o]=t.label,e))}),e.push(n)}),e}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.VACANT_NODE_LABEL=e.VACANT_NODE_ID=e.VACANT_GRAPH_ID=e.VACANT_EDGE_LABEL=e.VACANT_EDGE_ID=e.Node=e.Graph=e.Edge=e.AUTO_EDGE_ID=void 0,e.VACANT_EDGE_ID=-1,e.VACANT_NODE_ID=-1,e.VACANT_EDGE_LABEL="-1",e.VACANT_NODE_LABEL="-1",e.VACANT_GRAPH_ID=-1,e.AUTO_EDGE_ID="-1";function i(t,e,n,r){void 0===e&&(e=-1),void 0===n&&(n=-1),void 0===r&&(r="-1"),this.id=t=void 0===t?-1:t,this.from=e,this.to=n,this.label=r}e.Edge=i,o.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t};var r=o;function o(t,e){void 0===e&&(e="-1"),this.id=t=void 0===t?-1:t,this.label=e,this.edges=[],this.edgeMap={}}function a(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.id=t=void 0===t?-1:t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}e.Node=r,a.prototype.getNodeNum=function(){return this.nodes.length},a.prototype.addNode=function(t,e){var n;this.nodeMap[t]||(n=new r(t,e),this.nodes.push(n),this.nodeMap[t]=n,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t))},a.prototype.addEdge=function(t,e,n,r){var o;!this.edgeIdAutoIncrease&&void 0!==t||(t=this.counter++),this.nodeMap[e]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[t]||(o=new i(t,e,n,r),this.edges.push(o),this.edgeMap[t]=o,this.nodeMap[e].addEdge(o),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(o),this.directed)||(o=new i(t,n,e,r),this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o))},e.Graph=a},function(t,e,n){var c=n(280),u=n(283),l=[].slice,d=["keyword","gray","hex"],h={},f=(Object.keys(u).forEach(function(t){h[l.call(u[t].labels).sort().join("")]=t}),{});function p(t,e){if(!(this instanceof p))return new p(t,e);if((e=e&&e in d?null:e)&&!(e in u))throw new Error("Unknown model: "+e);if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof p)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var n=c.get(t);if(null===n)throw new Error("Unable to parse color from string: "+t);this.model=n.model,r=u[this.model].channels,this.color=n.value.slice(0,r),this.valpha="number"==typeof n.value[r]?n.value[r]:1}else if(t.length){this.model=e||"rgb";var r=u[this.model].channels,n=l.call(t,0,r);this.color=g(n,r),this.valpha="number"==typeof t[r]?t[r]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;e=Object.keys(t),n=("alpha"in t&&(e.splice(e.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0),e.sort().join(""));if(!(n in h))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=h[n];for(var o=u[this.model].labels,i=[],a=0;a<o.length;a++)i.push(t[o[a]]);this.color=g(i)}if(f[this.model])for(r=u[this.model].channels,a=0;a<r;a++){var s=f[this.model][a];s&&(this.color[a]=s(this.color[a]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function r(n,r,o){return(n=Array.isArray(n)?n:[n]).forEach(function(t){(f[t]||(f[t]=[]))[r]=o}),n=n[0],function(t){var e;return arguments.length?(o&&(t=o(t)),(e=this[n]()).color[r]=t):(e=this[n]().color[r],o&&(e=o(e))),e}}function o(e){return function(t){return Math.max(0,Math.min(e,t))}}function g(t,e){for(var n=0;n<e;n++)"number"!=typeof t[n]&&(t[n]=0);return t}p.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in c.to?this:this.rgb(),t=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return c.to[e.model](t)},percentString:function(t){t=this.rgb().round("number"==typeof t?t:1),t=1===t.valpha?t.color:t.color.concat(this.valpha);return c.to.rgb.percent(t)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=u[this.model].channels,n=u[this.model].labels,r=0;r<e;r++)t[n[r]]=this.color[r];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new p(this.color.map((e=t,function(t){return Number(t.toFixed(e))})).concat(this.valpha),this.model);var e},alpha:function(t){return arguments.length?new p(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:r("rgb",0,o(255)),green:r("rgb",1,o(255)),blue:r("rgb",2,o(255)),hue:r(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:r("hsl",1,o(100)),lightness:r("hsl",2,o(100)),saturationv:r("hsv",1,o(100)),value:r("hsv",2,o(100)),chroma:r("hcg",1,o(100)),gray:r("hcg",2,o(100)),white:r("hwb",1,o(100)),wblack:r("hwb",2,o(100)),cyan:r("cmyk",0,o(100)),magenta:r("cmyk",1,o(100)),yellow:r("cmyk",2,o(100)),black:r("cmyk",3,o(100)),x:r("xyz",0,o(100)),y:r("xyz",1,o(100)),z:r("xyz",2,o(100)),l:r("lab",0,o(100)),a:r("lab",1),b:r("lab",2),keyword:function(t){return arguments.length?new p(t):u[this.model].keyword(this.color)},hex:function(t){return arguments.length?new p(t):c.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((.055+r)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),t=t.luminosity();return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)},level:function(t){t=this.contrast(t);return 7.1<=t?"AAA":4.5<=t?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,t=.3*t[0]+.59*t[1]+.11*t[2];return p.rgb(t,t,t)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),t=(t=(e.color[0]+t)%360)<0?360+t:t;return e.color[0]=t,e},mix:function(t,e){var n,r,o,i;if(t&&t.rgb)return n=t.rgb(),r=this.rgb(),i=1-(o=(1+((o=2*(e=void 0===e?.5:e)-1)*(i=n.alpha()-r.alpha())==-1?o:(o+i)/(1+o*i)))/2),p.rgb(o*n.red()+i*r.red(),o*n.green()+i*r.green(),o*n.blue()+i*r.blue(),n.alpha()*e+r.alpha()*(1-e));throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t)}},Object.keys(u).forEach(function(n){var r;-1===d.indexOf(n)&&(r=u[n].channels,p.prototype[n]=function(){var t,e;return this.model===n?new p(this):arguments.length?new p(arguments,n):(t="number"==typeof arguments[r]?r:this.valpha,new p((e=u[this.model][n].raw(this.color),(Array.isArray(e)?e:[e]).concat(t)),n))},p[n]=function(t){return new p(t="number"==typeof t?g(l.call(arguments),r):t,n)})}),t.exports=p},function(t,e,n){var r,a=n(186),o=n(281),s=Object.hasOwnProperty,i=Object.create(null);for(r in a)s.call(a,r)&&(i[a[r]]=r);var c=t.exports={to:{},get:{}};function u(t,e,n){return Math.min(Math.max(e,t),n)}function l(t){t=Math.round(t).toString(16).toUpperCase();return t.length<2?"0"+t:t}c.get=function(t){var e,n;switch(t.substring(0,3).toLowerCase()){case"hsl":e=c.get.hsl(t),n="hsl";break;case"hwb":e=c.get.hwb(t),n="hwb";break;default:e=c.get.rgb(t),n="rgb"}return e?{model:n,value:e}:null},c.get.rgb=function(t){if(!t)return null;var e,n,r,o=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=e[2],e=e[1],n=0;n<3;n++){var i=2*n;o[n]=parseInt(e.slice(i,2+i),16)}r&&(o[3]=parseInt(r,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(r=(e=e[1])[3],n=0;n<3;n++)o[n]=parseInt(e[n]+e[n],16);r&&(o[3]=parseInt(r+r,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)o[n]=parseInt(e[n+1],0);e[4]&&(o[3]=e[5]?.01*parseFloat(e[4]):parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(e=t.match(/^(\w+)$/))?"transparent"===e[1]?[0,0,0,0]:s.call(a,e[1])?((o=a[e[1]])[3]=1,o):null:null;for(n=0;n<3;n++)o[n]=Math.round(2.55*parseFloat(e[n+1]));e[4]&&(e[5]?o[3]=.01*parseFloat(e[4]):o[3]=parseFloat(e[4]))}for(n=0;n<3;n++)o[n]=u(o[n],0,255);return o[3]=u(o[3],0,1),o},c.get.hsl=function(t){var e;return(t=t&&t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(e=parseFloat(t[4]),[(parseFloat(t[1])%360+360)%360,u(parseFloat(t[2]),0,100),u(parseFloat(t[3]),0,100),u(isNaN(e)?1:e,0,1)]):null},c.get.hwb=function(t){var e;return(t=t&&t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(e=parseFloat(t[4]),[(parseFloat(t[1])%360+360)%360,u(parseFloat(t[2]),0,100),u(parseFloat(t[3]),0,100),u(isNaN(e)?1:e,0,1)]):null},c.to.hex=function(){var t=o(arguments);return"#"+l(t[0])+l(t[1])+l(t[2])+(t[3]<1?l(Math.round(255*t[3])):"")},c.to.rgb=function(){var t=o(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},c.to.rgb.percent=function(){var t=o(arguments),e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"},c.to.hsl=function(){var t=o(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},c.to.hwb=function(){var t=o(arguments),e="";return 4<=t.length&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},c.to.keyword=function(t){return i[t.slice(0,3)]}},function(t,e,n){var i=n(282),a=Array.prototype.concat,s=Array.prototype.slice,r=t.exports=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];i(o)?e=a.call(e,s.call(o)):e.push(o)}return e};r.wrap=function(t){return function(){return t(r(arguments))}}},function(t,e){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||0<=t.length&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},function(t,e,n){var r=n(187),o=n(284),c={};Object.keys(r).forEach(function(a){c[a]={},Object.defineProperty(c[a],"channels",{value:r[a].channels}),Object.defineProperty(c[a],"labels",{value:r[a].labels});var s=o(a);Object.keys(s).forEach(function(t){var e,o,n=s[t];function r(t){return null==t?t:(1<arguments.length&&(t=Array.prototype.slice.call(arguments)),e(t))}function i(t){if(null==t)return t;1<arguments.length&&(t=Array.prototype.slice.call(arguments));var e=o(t);if("object"==typeof e)for(var n=e.length,r=0;r<n;r++)e[r]=Math.round(e[r]);return e}c[a][t]=("conversion"in(o=n)&&(i.conversion=o.conversion),i),c[a][t].raw=("conversion"in(e=n)&&(r.conversion=e.conversion),r)})}),t.exports=c},function(t,e,n){var u=n(187);function s(t,e){for(var n=[e[t].parent,t],r=u[e[t].parent][t],o=e[t].parent;e[o].parent;)n.unshift(e[o].parent),r=function(e,n){return function(t){return n(e(t))}}(u[e[o].parent][o],r),o=e[o].parent;return r.conversion=n,r}t.exports=function(t){for(var e=function(t){var e=function(){for(var t={},e=Object.keys(u),n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var r=n.pop(),o=Object.keys(u[r]),i=o.length,a=0;a<i;a++){var s=o[a],c=e[s];-1===c.distance&&(c.distance=e[r].distance+1,c.parent=r,n.unshift(s))}return e}(t),n={},r=Object.keys(e),o=r.length,i=0;i<o;i++){var a=r[i];null!==e[a].parent&&(n[a]=s(a,e))}return n}},function(t,P,L){function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){var n,r,o,i,a,s,c,u,l,d,h,f,p,g,y;return e=e||{},(t=t||"")instanceof b?t:this instanceof b?(h={r:0,g:0,b:0},p=null,y=g=!(f=1),f=x(f="object"==v(n="string"==typeof(n=t)?function(t){t=t.replace(C,"").replace(A,"").toLowerCase();var e,n=!1;if(I[t])t=I[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=D.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=D.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=D.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=D.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=D.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=D.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=D.hex8.exec(t))?{r:_(e[1]),g:_(e[2]),b:_(e[3]),a:M(e[4]),format:n?"name":"hex8"}:(e=D.hex6.exec(t))?{r:_(e[1]),g:_(e[2]),b:_(e[3]),format:n?"name":"hex"}:(e=D.hex4.exec(t))?{r:_(e[1]+""+e[1]),g:_(e[2]+""+e[2]),b:_(e[3]+""+e[3]),a:M(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=D.hex3.exec(t))&&{r:_(e[1]+""+e[1]),g:_(e[2]+""+e[2]),b:_(e[3]+""+e[3]),format:n?"name":"hex"}}(n):n)&&(k(n.r)&&k(n.g)&&k(n.b)?(a=n.r,s=n.g,c=n.b,h={r:255*w(a,255),g:255*w(s,255),b:255*w(c,255)},g=!0,y="%"===String(n.r).substr(-1)?"prgb":"rgb"):k(n.h)&&k(n.s)&&k(n.v)?(p=S(n.s),a=S(n.v),s=p,c=a,a=6*w(n.h,360),s=w(s,100),c=w(c,100),u=Math.floor(a),h={r:255*[c,d=c*(1-(a-=u)*s),l=c*(1-s),l,a=c*(1-(1-a)*s),c][s=u%6],g:255*[a,c,c,d,l,l][s],b:255*[l,l,a,c,c,d][s]},g=!0,y="hsv"):k(n.h)&&k(n.s)&&k(n.l)&&(p=S(n.s),u=S(n.l),l=p,a=u,c=w(n.h,360),l=w(l,100),a=w(a,100),0===l?r=o=i=a:(r=m(l=2*a-(a=a<.5?a*(1+l):a+l-a*l),a,c+1/3),o=m(l,a,c),i=m(l,a,c-1/3)),h={r:255*r,g:255*o,b:255*i},g=!0,y="hsl"),n.hasOwnProperty("a"))?n.a:f),d={ok:g,format:n.format||y,r:Math.min(255,Math.max(h.r,0)),g:Math.min(255,Math.max(h.g,0)),b:Math.min(255,Math.max(h.b,0)),a:f},this._originalInput=t,this._r=d.r,this._g=d.g,this._b=d.b,this._a=d.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||d.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),void(this._ok=d.ok)):new b(t,e);function m(t,e,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}}function r(t,e,n){t=w(t,255),e=w(e,255),n=w(n,255);var r,o=Math.max(t,e,n),i=Math.min(t,e,n),a=(o+i)/2;if(o==i)r=c=0;else{var s=o-i,c=.5<a?s/(2-o-i):s/(o+i);switch(o){case t:r=(e-n)/s+(e<n?6:0);break;case e:r=(n-t)/s+2;break;case n:r=(t-e)/s+4}r/=6}return{h:r,s:c,l:a}}function o(t,e,n){t=w(t,255),e=w(e,255),n=w(n,255);var r,o=Math.max(t,e,n),i=Math.min(t,e,n),a=o,s=o-i,c=0===o?0:s/o;if(o==i)r=0;else{switch(o){case t:r=(e-n)/s+(e<n?6:0);break;case e:r=(n-t)/s+2;break;case n:r=(t-e)/s+4}r/=6}return{h:r,s:c,v:a}}function e(t,e,n,r){t=[E(Math.round(t).toString(16)),E(Math.round(e).toString(16)),E(Math.round(n).toString(16))];return r&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0):t.join("")}function i(t,e,n,r){return[E(O(r)),E(Math.round(t).toString(16)),E(Math.round(e).toString(16)),E(Math.round(n).toString(16))].join("")}function n(t,e){e=0===e?0:e||10;t=b(t).toHsl();return t.s-=e/100,t.s=m(t.s),b(t)}function a(t,e){e=0===e?0:e||10;t=b(t).toHsl();return t.s+=e/100,t.s=m(t.s),b(t)}function s(t){return b(t).desaturate(100)}function c(t,e){e=0===e?0:e||10;t=b(t).toHsl();return t.l+=e/100,t.l=m(t.l),b(t)}function u(t,e){e=0===e?0:e||10;t=b(t).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(-e/100*255))),t.g=Math.max(0,Math.min(255,t.g-Math.round(-e/100*255))),t.b=Math.max(0,Math.min(255,t.b-Math.round(-e/100*255))),b(t)}function l(t,e){e=0===e?0:e||10;t=b(t).toHsl();return t.l-=e/100,t.l=m(t.l),b(t)}function d(t,e){t=b(t).toHsl(),e=(t.h+e)%360;return t.h=e<0?360+e:e,b(t)}function h(t){t=b(t).toHsl();return t.h=(t.h+180)%360,b(t)}function f(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=b(t).toHsl(),r=[b(t)],o=360/e,i=1;i<e;i++)r.push(b({h:(n.h+i*o)%360,s:n.s,l:n.l}));return r}function p(t){var e=b(t).toHsl(),n=e.h;return[b(t),b({h:(n+72)%360,s:e.s,l:e.l}),b({h:(n+216)%360,s:e.s,l:e.l})]}function g(t,e,n){e=e||6,n=n||30;var r=b(t).toHsl(),o=360/n,i=[b(t)];for(r.h=(r.h-(o*e>>1)+720)%360;--e;)r.h=(r.h+o)%360,i.push(b(r));return i}function y(t,e){e=e||6;for(var t=b(t).toHsv(),n=t.h,r=t.s,o=t.v,i=[],a=1/e;e--;)i.push(b({h:n,s:r,v:o})),o=(o+a)%1;return i}function x(t){return t=parseFloat(t),t=isNaN(t)||t<0||1<t?1:t}function w(t,e){var n="string"==typeof(t="string"==typeof(n=t)&&-1!=n.indexOf(".")&&1===parseFloat(n)?"100%":t)&&-1!=t.indexOf("%");return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function m(t){return Math.min(1,Math.max(0,t))}function _(t){return parseInt(t,16)}function E(t){return 1==t.length?"0"+t:""+t}function S(t){return t=t<=1?100*t+"%":t}function O(t){return Math.round(255*parseFloat(t)).toString(16)}function M(t){return _(t)/255}function k(t){return D.CSS_UNIT.exec(t)}var C,A,I,T,j,N,D;t.exports=(C=/^\s+/,A=/\s+$/,b.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t=this.toRgb(),e=t.r/255,n=t.g/255,t=t.b/255;return.2126*(e<=.03928?e/12.92:Math.pow((.055+e)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((.055+n)/1.055,2.4))+.0722*(t<=.03928?t/12.92:Math.pow((.055+t)/1.055,2.4))},setAlpha:function(t){return this._a=x(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=o(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=o(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),t=Math.round(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+t+"%)":"hsva("+e+", "+n+"%, "+t+"%, "+this._roundA+")"},toHsl:function(){var t=r(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=r(this._r,this._g,this._b),e=Math.round(360*t.h),n=Math.round(100*t.s),t=Math.round(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+t+"%)":"hsla("+e+", "+n+"%, "+t+"%, "+this._roundA+")"},toHex:function(t){return e(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){var e=this._r,n=this._g,r=this._b,o=this._a;return e=[E(Math.round(e).toString(16)),E(Math.round(n).toString(16)),E(Math.round(r).toString(16)),E(O(o))],t&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)&&e[3].charAt(0)==e[3].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0)+e[3].charAt(0):e.join("")},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*w(this._r,255))+"%",g:Math.round(100*w(this._g,255))+"%",b:Math.round(100*w(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*w(this._r,255))+"%, "+Math.round(100*w(this._g,255))+"%, "+Math.round(100*w(this._b,255))+"%)":"rgba("+Math.round(100*w(this._r,255))+"%, "+Math.round(100*w(this._g,255))+"%, "+Math.round(100*w(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(T[e(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+i(this._r,this._g,this._b,this._a),n=e;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+e+",endColorstr="+(n=t?"#"+i((e=b(t))._r,e._g,e._b,e._a):n)+")"},toString:function(t){var e=!!t,n=(t=t||this._format,!1),r=this._a<1&&0<=this._a;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),(n="hsv"===t?this.toHsvString():n)||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return b(this.toString())},_applyModification:function(t,e){t=t.apply(null,[this].concat([].slice.call(e)));return this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification(c,arguments)},brighten:function(){return this._applyModification(u,arguments)},darken:function(){return this._applyModification(l,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(a,arguments)},greyscale:function(){return this._applyModification(s,arguments)},spin:function(){return this._applyModification(d,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(g,arguments)},complement:function(){return this._applyCombination(h,arguments)},monochromatic:function(){return this._applyCombination(y,arguments)},splitcomplement:function(){return this._applyCombination(p,arguments)},triad:function(){return this._applyCombination(f,[3])},tetrad:function(){return this._applyCombination(f,[4])}},b.fromRatio=function(t,e){if("object"==v(t)){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:S(t[n]));t=r}return b(t,e)},b.equals=function(t,e){return!(!t||!e)&&b(t).toRgbString()==b(e).toRgbString()},b.random=function(){return b.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},b.mix=function(t,e,n){n=0===n?0:n||50;t=b(t).toRgb(),e=b(e).toRgb(),n/=100;return b({r:(e.r-t.r)*n+t.r,g:(e.g-t.g)*n+t.g,b:(e.b-t.b)*n+t.b,a:(e.a-t.a)*n+t.a})},b.readability=function(t,e){t=b(t),e=b(e);return(Math.max(t.getLuminance(),e.getLuminance())+.05)/(Math.min(t.getLuminance(),e.getLuminance())+.05)},b.isReadable=function(t,e,n){var r=b.readability(t,e),o=!1,t=n,e=((t=n||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase();switch((t={level:e="AA"!==e&&"AAA"!==e?"AA":e,size:n="small"!==n&&"large"!==n?"small":n}).level+t.size){case"AAsmall":case"AAAlarge":o=4.5<=r;break;case"AAlarge":o=3<=r;break;case"AAAsmall":o=7<=r}return o},b.mostReadable=function(t,e,n){for(var r,o=null,i=0,a=(n=n||{}).includeFallbackColors,s=n.level,c=n.size,u=0;u<e.length;u++)(r=b.readability(t,e[u]))>i&&(i=r,o=b(e[u]));return b.isReadable(t,o,{level:s,size:c})||!a?o:(n.includeFallbackColors=!1,b.mostReadable(t,["#fff","#000"],n))},I=b.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},T=b.hexNames=function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}(I),j="[\\s|\\(]+("+(t="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",N="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",D={CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+j),rgba:new RegExp("rgba"+N),hsl:new RegExp("hsl"+j),hsla:new RegExp("hsla"+N),hsv:new RegExp("hsv"+j),hsva:new RegExp("hsva"+N),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/},b)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.camelize=e.isString=void 0,e.isString=function(t){return"string"==typeof t};var r,o,i=/-(\w)/g;e.camelize=(r=function(t){return t.replace(i,function(t,e){return e?e.toUpperCase():""})},o=Object.create(null),function(t){return o[t]||(o[t]=r(t))})},function(t,o,e){Object.defineProperty(o,"__esModule",{value:!0}),o.getFuncByUnknownType=o.getFunc=o.isFunction=void 0;var i=e(80),a=e(149);o.isFunction=function(t){return"function"==typeof t},o.getFunc=function(t,e,n){return n||((0,a.isNumber)(t)?function(){return t}:function(){return e})},o.getFuncByUnknownType=function(e,n,r){return void 0===r&&(r=!0),n||0===n?(0,o.isFunction)(n)?n:(0,a.isNumber)(n)?function(){return n}:(0,i.isArray)(n)?function(){var t;return r?(t=Math.max.apply(Math,n),isNaN(t)?e:t):n}:(0,i.isObject)(n)?function(){var t;return r?(t=Math.max(n.width,n.height),isNaN(t)?e:t):[n.width,n.height]}:function(){return e}:function(t){return t.size?(0,i.isArray)(t.size)?t.size[0]>t.size[1]?t.size[0]:t.size[1]:(0,i.isObject)(t.size)?t.size.width>t.size.height?t.size.width:t.size.height:t.size:e}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.forceNBody=void 0;var s=n(355);function c(t){var e=0,n=0,r=0;if(t.length){for(var o=0;o<4;o++)(i=t[o])&&i.weight&&(e+=i.weight,n+=i.x*i.weight,r+=i.y*i.weight);t.x=n/e,t.y=r/e,t.weight=e}else{var i=t;t.x=i.data.x,t.y=i.data.y,t.weight=i.data.weight}}e.forceNBody=function(r,o,t,e,i){var a=t/e,t=r.map(function(t,e){var t=o[t.id],n=t.data.layout.force.nodeStrength;return{x:t.x,y:t.y,size:t.size,index:e,vx:0,vy:0,weight:a*n}}),n=(0,s.quadtree)(t,function(t){return t.x},function(t){return t.y}).visitAfter(c);return t.forEach(function(t){var l;l=t,n.visit(function(t,e,n,r,o){return t=t,s=(i=l).x-t.x||.1,r=r-e,c=s*s+(e=i.y-t.y||.1)*e,u=Math.sqrt(c)*c,r*r*.81<c?(a=t.weight/u,i.vx+=s*a,i.vy+=e*a,!0):!t.length&&void(t.data!==i&&(a=t.data.weight/u,i.vx+=s*a,i.vy+=e*a));var i,a,s,c,u})}),t.map(function(t,e){var n=o[r[e].id].data.layout.force.mass,n=void 0===n?1:n;i[2*e]=t.vx/n,i[2*e+1]=t.vy/n}),i}},function(t,e,n){var r,o,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),c=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},m=(Object.defineProperty(e,"__esModule",{value:!0}),e.ForceLayout=void 0,c(n(158))),v=u(n(290)),l=n(80),c=n(83),b=n(129),u=(o=c.Base,i(d,o),d.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},d.prototype.init=function(t){this.nodes=t.nodes||[];t=t.edges||[];this.edges=t.map(function(e){var n={},r=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(e).forEach(function(t){-1<r.indexOf(t)||(n[t]=e[t])}),n}),this.ticking=!1},d.prototype.execute=function(t){var e,n,r,o,i=this,a=i.nodes,s=i.edges;if(!i.ticking){var c=i.forceSimulation,u=i.alphaMin,l=i.alphaDecay,d=i.alpha;if(c)t&&(i.clustering&&i.clusterForce&&(i.clusterForce.nodes(a),i.clusterForce.links(s)),c.nodes(a),s&&i.edgeForce?i.edgeForce.links(s):s&&!i.edgeForce&&(f=m.forceLink().id(function(t){return t.id}).links(s),i.edgeStrength&&f.strength(i.edgeStrength),i.linkDistance&&f.distance(i.linkDistance),i.edgeForce=f,c.force("link",f))),i.preventOverlap&&i.overlapProcess(c),c.alpha(d).restart(),this.ticking=!0;else try{var h,f,p=m.forceManyBody();if(i.nodeStrength&&p.strength(i.nodeStrength),c=m.forceSimulation().nodes(a),i.clustering&&((h=(0,v.default)()).centerX(i.center[0]).centerY(i.center[1]).template("force").strength(i.clusterFociStrength),s&&h.links(s),a&&h.nodes(a),h.forceLinkDistance(i.clusterEdgeDistance).forceLinkStrength(i.clusterEdgeStrength).forceCharge(i.clusterNodeStrength).forceNodeSize(i.clusterNodeSize),i.clusterForce=h,c.force("group",h)),c.force("center",m.forceCenter(i.center[0],i.center[1])).force("charge",p).alpha(d).alphaDecay(l).alphaMin(u),i.preventOverlap&&i.overlapProcess(c),s&&(f=m.forceLink().id(function(t){return t.id}).links(s),i.edgeStrength&&f.strength(i.edgeStrength),i.linkDistance&&f.distance(i.linkDistance),i.edgeForce=f,c.force("link",f)),!i.workerEnabled||"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||(i.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),i.workerEnabled){c.stop();n=(e=c).alphaMin(),r=e.alphaTarget(),o=e.alpha(),n=Math.log((n-r)/(o-r))/Math.log(1-e.alphaDecay());for(var g=Math.ceil(n),y=1;y<=g;y++)c.tick(),postMessage({nodes:a,currentTick:y,totalTicks:g,type:b.LAYOUT_MESSAGE.TICK},void 0);i.ticking=!1}else c.on("tick",function(){i.tick()}).on("end",function(){i.ticking=!1,i.onLayoutEnd&&i.onLayoutEnd()}),i.ticking=!0;i.forceSimulation=c,i.ticking=!0}catch(t){i.ticking=!1,console.warn(t)}}},d.prototype.overlapProcess=function(t){var e,n,r,o=this.nodeSize,i=this.nodeSpacing,a=this.collideStrength,s=(0,l.isNumber)(i)?function(){return i}:(0,l.isFunction)(i)?i:function(){return 0};n=o?(0,l.isFunction)(o)?function(t){return o(t)+s(t)}:(0,l.isArray)(o)?(e=(o[0]>o[1]?o[0]:o[1])/2,function(t){return e+s(t)}):(0,l.isNumber)(o)?(r=o/2,function(t){return r+s(t)}):function(){return 10}:function(t){return t.size?(0,l.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+s(t):(0,l.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)/2+s(t):t.size/2+s(t):10+s(t)},t.force("collisionForce",m.forceCollide(n).strength(a))},d.prototype.updateCfg=function(t){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Object.assign(this,t)},d.prototype.destroy=function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0},d);function d(t){var e=o.call(this)||this;return e.center=[0,0],e.nodeStrength=null,e.edgeStrength=null,e.preventOverlap=!1,e.clusterNodeStrength=null,e.clusterEdgeStrength=null,e.clusterEdgeDistance=null,e.clusterNodeSize=null,e.clusterFociStrength=null,e.linkDistance=50,e.alphaDecay=.028,e.alphaMin=.001,e.alpha=.3,e.collideStrength=1,e.workerEnabled=!1,e.tick=function(){},e.onLayoutEnd=function(){},e.ticking=void 0,t&&e.updateCfg(t),e}e.ForceLayout=u},function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},_=(Object.defineProperty(e,"__esModule",{value:!0}),i(n(158))),E=n(80);e.default=function(){function e(t){return function(){return t}}var u,l=function(t){return t.cluster},d=e(1),h=e(-1),f=e(100),p=e(.1),n=[0,0],g=[],y={},m=[],v=100,b=100,i={none:{x:0,y:0}},x=[],r="force",a=!0,s=.1;function c(t){if(!a)return c;u.tick(),w();for(var e=0,n=g.length,r=void 0,o=t*s;e<n;++e)(r=g[e]).vx+=(i[l(r)].x-r.x)*o,r.vy+=(i[l(r)].y-r.y)*o}function o(){if(g&&g.length){if(void 0===l(g[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");a=[],s=[],c={},t=[],o={},(e=g).forEach(function(t){t=l(t);o[t]||(o[t]={count:0,sumforceNodeSize:0})}),e.forEach(function(t){var e=l(t),t=d(t),n=o[e];n.count=n.count+1,n.sumforceNodeSize=n.sumforceNodeSize+Math.PI*(t*t)*1.3,o[e]=n}),i=o,n={},r=[],m.forEach(function(t){t=t,e=(0,E.getEdgeTerminal)(t,"source"),t=(0,E.getEdgeTerminal)(t,"target"),e=l(y[e]),t=l(y[t]);var t=e<=t?"".concat(e,"~").concat(t):"".concat(t,"~").concat(e),e=0;void 0!==n[t]&&(e=n[t]),n[t]=e+=1}),Object.entries(n).forEach(function(t){var e=t[0],t=t[1],n=e.split("~")[0],e=e.split("~")[1];void 0!==n&&void 0!==e&&r.push({source:n,target:e,count:t})}),t=r,Object.keys(i).forEach(function(t,e){var n=i[t];a.push({id:t,size:n.count,r:Math.sqrt(n.sumforceNodeSize/Math.PI)}),c[t]=e}),t.forEach(function(t){var e=(0,E.getEdgeTerminal)(t,"source"),n=(0,E.getEdgeTerminal)(t,"target"),e=c[e],n=c[n];void 0!==e&&void 0!==n&&s.push({source:e,target:n,count:t.count})});var n,r,o,i,a,s,c,t,e={nodes:a,links:s};u=_.forceSimulation(e.nodes).force("x",_.forceX(v).strength(.1)).force("y",_.forceY(b).strength(.1)).force("collide",_.forceCollide(function(t){return t.r}).iterations(4)).force("charge",_.forceManyBody().strength(h)).force("links",_.forceLink(e.nodes.length?e.links:[]).distance(f).strength(p)),x=u.nodes(),w()}}function w(){return i={none:{x:0,y:0}},x.forEach(function(t){i[t.id]={x:t.x-n[0],y:t.y-n[1]}}),i}return c.initialize=function(t){g=t,o()},c.template=function(t){return arguments.length?(r=t,o(),c):r},c.groupBy=function(e){return arguments.length?(l="string"==typeof e?function(t){return t[e]}:e,c):l},c.enableGrouping=function(t){return arguments.length?(a=t,c):a},c.strength=function(t){return arguments.length?(s=t,c):s},c.centerX=function(t){return arguments.length?(v=t,c):v},c.centerY=function(t){return arguments.length?(b=t,c):b},c.nodes=function(t){return arguments.length?(y={},(t||[]).forEach(function(t){y[t.id]=t}),g=t||[],c):g},c.links=function(t){return arguments.length?(m=t||[],o(),c):m},c.nodeSize=c.forceNodeSize=function(t){return arguments.length?(d="function"==typeof t?t:e(+t),o(),c):d},c.forceCharge=function(t){return arguments.length?(h="function"==typeof t?t:e(+t),o(),c):h},c.forceLinkDistance=function(t){return arguments.length?(f="function"==typeof t?t:e(+t),o(),c):f},c.forceLinkStrength=function(t){return arguments.length?(p="function"==typeof t?t:e(+t),o(),c):p},c.offset=function(t){return arguments.length?(n=t,c):n},c.getFocis=w,c}},function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=(Object.defineProperty(e,"__esModule",{value:!0}),r(n(292))),n=n(92);e.default={layout:r.default,util:{time:n.time,notime:n.notime}}},function(r,t,e){var a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=(Object.defineProperty(t,"__esModule",{value:!0}),n(e(293))),c=n(e(296)),u=n(e(297)),l=e(92),d=n(e(299)),h=n(e(300)),f=n(e(301)),p=n(e(302)),g=n(e(303)),y=n(e(312)),m=n(e(314)),v=e(105),b=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},w=["acyclicer","ranker","rankdir","align"],_=["width","height","layer","fixorder"],E={width:0,height:0},S=["minlen","weight","width","height","labeloffset"],O={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},M=["labelpos"],k=function(n){n.edges().forEach(function(t){var e=n.edge(t);e.width&&e.height&&(e=n.node(t.v),t={e:t,rank:(n.node(t.w).rank-e.rank)/2+e.rank},(0,l.addDummyNode)(n,"edge-proxy",t,"_ep"))})},C=function(n){var r=0;n.nodes().forEach(function(t){var e,t=n.node(t);t.borderTop&&(t.minRank=null==(e=n.node(t.borderTop))?void 0:e.rank,t.maxRank=null==(e=n.node(t.borderBottom))?void 0:e.rank,r=Math.max(r,t.maxRank||-1/0))}),n.graph().maxRank=r},A=function(n){n.nodes().forEach(function(t){var e=n.node(t);"edge-proxy"===e.dummy&&(n.edge(e.e).labelRank=e.rank,n.removeNode(t))})},I=function(n){function e(t){var e,n,r;t&&(e=t.x,n=t.y,r=t.width,t=t.height,isNaN(e)||isNaN(r)||(void 0===o&&(o=e-r/2),o=Math.min(o,e-r/2),a=Math.max(a,e+r/2)),isNaN(n)||isNaN(t)||(void 0===i&&(i=n-t/2),i=Math.min(i,n-t/2),s=Math.max(s,n+t/2)))}var o,i,a=0,s=0,t=n.graph(),r=t.marginx||0,c=t.marginy||0;n.nodes().forEach(function(t){e(n.node(t))}),n.edges().forEach(function(t){t=n.edge(t);null!=t&&t.hasOwnProperty("x")&&e(t)}),o-=r,i-=c,n.nodes().forEach(function(t){t=n.node(t);t&&(t.x-=o,t.y-=i)}),n.edges().forEach(function(t){var e,t=n.edge(t);null!=(e=t.points)&&e.forEach(function(t){t.x-=o,t.y-=i}),t.hasOwnProperty("x")&&(t.x-=o),t.hasOwnProperty("y")&&(t.y-=i)}),t.width=a-o+r,t.height=s-i+c},T=function(i){i.edges().forEach(function(t){var e,n=i.edge(t),r=i.node(t.v),t=i.node(t.w),o=n.points?(e=n.points[0],n.points[n.points.length-1]):(n.points=[],e=t,r);n.points.unshift((0,l.intersectRect)(r,e)),n.points.push((0,l.intersectRect)(t,o))})},j=function(n){n.edges().forEach(function(t){var e=n.edge(t);if(null!=e&&e.hasOwnProperty("x"))switch("l"!==e.labelpos&&"r"!==e.labelpos||(e.width-=e.labeloffset),e.labelpos){case"l":e.x-=e.width/2+e.labeloffset;break;case"r":e.x+=e.width/2+e.labeloffset}})},N=function(e){e.edges().forEach(function(t){var t=e.edge(t);t.reversed&&null!=(t=t.points)&&t.reverse()})},D=function(i){i.nodes().forEach(function(t){var e,n,r,o;null!=(e=i.children(t))&&e.length&&(e=i.node(t),t=i.node(e.borderTop),n=i.node(e.borderBottom),r=i.node(e.borderLeft[(null==(r=e.borderLeft)?void 0:r.length)-1]),o=i.node(e.borderRight[(null==(o=e.borderRight)?void 0:o.length)-1]),e.width=Math.abs((null==o?void 0:o.x)-(null==r?void 0:r.x))||10,e.height=Math.abs((null==n?void 0:n.y)-(null==t?void 0:t.y))||10,e.x=((null==r?void 0:r.x)||0)+e.width/2,e.y=((null==t?void 0:t.y)||0)+e.height/2)}),i.nodes().forEach(function(t){var e;"border"===(null==(e=i.node(t))?void 0:e.dummy)&&i.removeNode(t)})},P=function(n){n.edges().forEach(function(t){var e;t.v===t.w&&((e=n.node(t.v)).selfEdges||(e.selfEdges=[]),e.selfEdges.push({e:t,label:n.edge(t)}),n.removeEdgeObj(t))})},L=function(o){var t=(0,l.buildLayerMatrix)(o);null!=t&&t.forEach(function(t){var r=0;null!=t&&t.forEach(function(t,e){var n=o.node(t);n.order=e+r,null!=(t=n.selfEdges)&&t.forEach(function(t){(0,l.addDummyNode)(o,"selfedge",{width:t.label.width,height:t.label.height,rank:n.rank,order:e+ ++r,e:t.e,label:t.label},"_se")}),delete n.selfEdges})})},z=function(a){a.nodes().forEach(function(t){var e,n,r,o,i=a.node(t);"selfedge"===i.dummy&&(e=(o=a.node(i.e.v)).x+o.width/2,n=o.y,r=i.x-e,o=o.height/2,a.setEdgeObj(i.e,i.label),a.removeNode(t),i.label.points=[{x:e+2*r/3,y:n-o},{x:e+5*r/6,y:n-o},{y:n,x:e+r},{x:e+5*r/6,y:n+o},{x:e+2*r/3,y:n+o}],i.label.x=i.x,i.label.y=i.y)})},R=function(e,t){var n={};return null!=t&&t.forEach(function(t){void 0!==e[t]&&(n[t]=+e[t])}),n},B=function(e){void 0===e&&(e={});var n={};return Object.keys(e).forEach(function(t){n[t.toLowerCase()]=e[t]}),n};t.default=function(t,o){var r=o&&o.debugTiming?l.time:l.notime;r("layout",function(){o&&!o.keepNodeOrder&&o.prevGraph&&r("  inheritOrder",function(){var n,r;n=t,r=o.prevGraph,n.nodes().forEach(function(t){var e=n.node(t),t=r.node(t);void 0!==t?(e.fixorder=t._order,delete t._order):delete e.fixorder})});var i=r("  buildLayoutGraph",function(){return r=t,o=new v.Graph({multigraph:!0,compound:!0}),e=B(r.graph()),n={},null!=w&&w.forEach(function(t){void 0!==e[t]&&(n[t]=e[t])}),o.setGraph(Object.assign({},x,R(e,b),n)),r.nodes().forEach(function(t){var e=B(r.node(t)),e=a(a({},E),e),e=R(e,_);o.setNode(t,e),o.setParent(t,r.parent(t))}),r.edges().forEach(function(t){var e=B(r.edge(t)),n={};null!=M&&M.forEach(function(t){void 0!==e[t]&&(n[t]=e[t])}),o.setEdgeObj(t,Object.assign({},O,R(e,S),n))}),o;var r,o,e,n});o&&!1===o.edgeLabelSpace||r("  makeSpaceForEdgeLabels",function(){var n,r;(r=(n=i).graph()).ranksep||(r.ranksep=0),r.ranksep/=2,n.nodes().forEach(function(t){t=n.node(t);isNaN(t.layer)||t.layer||(t.layer=0)}),n.edges().forEach(function(t){var e,t=n.edge(t);t.minlen*=2,"c"!==(null==(e=t.labelpos)?void 0:e.toLowerCase())&&("TB"===r.rankdir||"BT"===r.rankdir?t.width+=t.labeloffset:t.height+=t.labeloffset)})});try{r("  runLayout",function(){var t,e,n;t=i,n=o,(e=r)("    removeSelfEdges",function(){P(t)}),e("    acyclic",function(){s.default.run(t)}),e("    nestingGraph.run",function(){h.default.run(t)}),e("    rank",function(){(0,u.default)((0,l.asNonCompoundGraph)(t))}),e("    injectEdgeLabelProxies",function(){k(t)}),e("    removeEmptyRanks",function(){(0,l.removeEmptyRanks)(t)}),e("    nestingGraph.cleanup",function(){h.default.cleanup(t)}),e("    normalizeRanks",function(){(0,l.normalizeRanks)(t)}),e("    assignRankMinMax",function(){C(t)}),e("    removeEdgeLabelProxies",function(){A(t)}),e("    normalize.run",function(){c.default.run(t)}),e("    parentDummyChains",function(){(0,d.default)(t)}),e("    addBorderSegments",function(){(0,f.default)(t)}),n&&n.keepNodeOrder&&e("    initDataOrder",function(){(0,m.default)(t,n.nodeOrder)}),e("    order",function(){(0,g.default)(t,null==n?void 0:n.keepNodeOrder)}),e("    insertSelfEdges",function(){L(t)}),e("    adjustCoordinateSystem",function(){p.default.adjust(t)}),e("    position",function(){(0,y.default)(t)}),e("    positionSelfEdges",function(){z(t)}),e("    removeBorderNodes",function(){D(t)}),e("    normalize.undo",function(){c.default.undo(t)}),e("    fixupEdgeLabelCoords",function(){j(t)}),e("    undoCoordinateSystem",function(){p.default.undo(t)}),e("    translateGraph",function(){I(t)}),e("    assignNodeIntersects",function(){T(t)}),e("    reversePoints",function(){N(t)}),e("    acyclic.undo",function(){s.default.undo(t)})})}catch(t){if("Not possible to find intersection inside of the rectangle"===t.message)return void console.error("The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\n",t);throw t}r("  updateInputGraph",function(){var r,o;o=i,(r=t).nodes().forEach(function(t){var e,n=r.node(t);n&&(e=o.node(t),n.x=e.x,n.y=e.y,n._order=e.order,n._rank=e.rank,null!=(t=o.children(t)))&&t.length&&(n.width=e.width,n.height=e.height)}),r.edges().forEach(function(t){var e=r.edge(t),t=o.edge(t);e.points=t?t.points:[],t&&t.hasOwnProperty("x")&&(e.x=t.x,e.y=t.y)}),r.graph().width=o.graph().width,r.graph().height=o.graph().height})})}},function(t,e,n){function r(n){function r(t){var e;a[t]||(i[t]=a[t]=!0,null!=(e=n.outEdges(t))&&e.forEach(function(t){i[t.w]?o.push(t):r(t.w)}),delete i[t])}var o=[],i={},a={};return n.nodes().forEach(r),o}var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=(Object.defineProperty(e,"__esModule",{value:!0}),o(n(294)));e.default={run:function(n){var e,t="greedy"===n.graph().acyclicer?(0,i.default)(n,(e=n,function(t){return(null==(t=e.edge(t))?void 0:t.weight)||1})):r(n);null!=t&&t.forEach(function(t){var e=n.edge(t);n.removeEdgeObj(t),e.forwardName=t.name,e.reversed=!0,n.setEdge(t.w,t.v,e,"rev-".concat(Math.random()))})},undo:function(r){r.edges().forEach(function(t){var e,n=r.edge(t);n.reversed&&(r.removeEdgeObj(t),e=n.forwardName,delete n.reversed,delete n.forwardName,r.setEdge(t.w,t.v,n,e))})}}},function(t,e,n){function r(){return 1}var o,i,a,s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},c=(Object.defineProperty(e,"__esModule",{value:!0}),c(n(295))),n=n(134),u=(a=c.default,s(p,a),p),l=(i=n.Graph,s(f,i),f),d=function(r,o,i,t,a){var e,s=[];return null!=(e=r.inEdges(t.v))&&e.forEach(function(t){var e=r.edge(t),n=r.node(t.v);a&&s.push({v:t.v,w:t.w,in:0,out:0}),void 0===n.out&&(n.out=0),n.out-=e,h(o,i,n)}),null!=(e=r.outEdges(t.v))&&e.forEach(function(t){var e=r.edge(t),t=t.w,t=r.node(t);void 0===t.in&&(t.in=0),t.in-=e,h(o,i,t)}),r.removeNode(t.v),a?s:void 0},h=function(t,e,n){(n.out?n.in?t[n.out-n.in+e]:t[t.length-1]:t[0]).enqueue(n)};function f(){return null!==i&&i.apply(this,arguments)||this}function p(){return null!==a&&a.apply(this,arguments)||this}e.default=function(e,t){return e.nodeCount()<=1?[]:null==(t=function(t,e,n){for(var r,o=[],i=e[e.length-1],a=e[0];t.nodeCount();){for(;r=a.dequeue();)d(t,e,n,r);for(;r=i.dequeue();)d(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;0<s;--s)if(r=e[s].dequeue()){o=o.concat(d(t,e,n,r,!0));break}}return o}((t=function(t,r){var o=new l,i=0,a=0;t.nodes().forEach(function(t){o.setNode(t,{v:t,in:0,out:0})}),t.edges().forEach(function(t){var e=o.edge(t)||0,n=(null==r?void 0:r(t))||1;o.setEdge(t.v,t.w,e+n),a=Math.max(a,o.node(t.v).out+=n),i=Math.max(i,o.node(t.w).in+=n)});for(var e=[],n=a+i+3,s=0;s<n;s++)e.push(new u);var c=i+1;return o.nodes().forEach(function(t){h(e,c,o.node(t))}),{buckets:e,zeroIdx:c,graph:o}}(e,t||r)).graph,t.buckets,t.zeroIdx).map(function(t){return e.outEdges(t.v,t.w)}))?void 0:t.flat()}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});function r(t,e){if("next"!==t&&"prev"!==t)return e}function o(t){t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev}function i(){var t={};(t.prev=t).next=t.prev,this.shortcut=t}i.prototype.dequeue=function(){var t=this.shortcut,e=t.prev;if(e&&e!==t)return o(e),e},i.prototype.enqueue=function(t){var e=this.shortcut;t.prev&&t.next&&o(t),t.next=e.next,e.next.prev=t,(e.next=t).prev=e},i.prototype.toString=function(){for(var t=[],e=this.shortcut,n=e.prev;n!==e;)t.push(JSON.stringify(n,r)),n=null==n?void 0:n.prev;return"[".concat(t.join(", "),"]")},e.default=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var f=n(92);e.default={run:function(e){e.graph().dummyChains=[],e.edges().forEach(function(t){return function(t,e){var n=e.v,r=t.node(n).rank,o=e.w,i=t.node(o).rank,a=e.name,s=t.edge(e),c=s.labelRank;if(i!==r+1){t.removeEdgeObj(e);var u,l,d=t.graph(),h=0;for(++r;r<i;++h,++r)s.points=[],u=(0,f.addDummyNode)(t,"edge",l={edgeLabel:s,width:0,height:0,edgeObj:e,rank:r},"_d"),r===c&&(l.width=s.width,l.height=s.height,l.dummy="edge-label",l.labelpos=s.labelpos),t.setEdge(n,u,{weight:s.weight},a),0===h&&(d.dummyChains||(d.dummyChains=[]),d.dummyChains.push(u)),n=u;t.setEdge(n,o,{weight:s.weight},a)}}(e,t)})},undo:function(i){var t;null!=(t=i.graph().dummyChains)&&t.forEach(function(t){var e,n=i.node(t),r=n.edgeLabel;n.edgeObj&&i.setEdgeObj(n.edgeObj,r);for(var o=t;n.dummy;)e=i.successors(o)[0],i.removeNode(o),r.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),n=i.node(o=e)})}}},function(t,e,n){function r(t){(0,i.longestPathWithLayer)(t),(0,a.feasibleTreeWithLayer)(t)}var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},i=(Object.defineProperty(e,"__esModule",{value:!0}),n(152)),a=n(199),s=o(n(298)),c=i.longestPath;e.default=function(t){switch(t.graph().ranker){case"network-simplex":(0,s.default)(t);break;case"tight-tree":r(t);break;case"longest-path":c(t);break;default:r(t)}}},function(t,i,e){Object.defineProperty(i,"__esModule",{value:!0}),i.exchangeEdges=i.enterEdge=i.leaveEdge=i.initLowLimValues=i.calcCutValue=i.initCutValues=void 0;var a=e(199),s=e(152),c=e(92),e=e(134),n=e.algorithm.preorder,r=e.algorithm.postorder,o=(i.initCutValues=function(e,n){var t=r(e,e.nodes());null!=(t=null==t?void 0:t.slice(0,(null==t?void 0:t.length)-1))&&t.forEach(function(t){o(e,n,t)})},function(t,e,n){var r=t.node(n).parent;t.edgeFromArgs(n,r).cutvalue=(0,i.calcCutValue)(t,e,n)}),u=(i.calcCutValue=function(r,o,i){var a=r.node(i).parent,s=!0,t=o.edgeFromArgs(i,a),c=0;return t||(s=!1,t=o.edgeFromArgs(a,i)),c=t.weight,null!=(t=o.nodeEdges(i))&&t.forEach(function(t){var e=t.v===i,n=e?t.w:t.v;n!==a&&(e=e===s,t=o.edge(t).weight,c+=e?t:-t,d(r,i,n))&&(t=r.edgeFromArgs(i,n).cutvalue,c+=e?-t:t)}),c},i.initLowLimValues=function(t,e){void 0===e&&(e=t.nodes()[0]),u(t,{},1,e)},function(e,n,t,r,o){var i,a=t,s=t,t=e.node(r);return n[r]=!0,null!=(i=e.neighbors(r))&&i.forEach(function(t){n[t]||(s=u(e,n,s,t,r))}),t.low=a,t.lim=s++,o?t.parent=o:delete t.parent,s}),l=(i.leaveEdge=function(e){return e.edges().find(function(t){return e.edge(t).cutvalue<0})},i.enterEdge=function(e,n,t){var r=t.v,o=t.w,t=(n.hasEdge(r,o)||(r=t.w,o=t.v),e.node(r)),r=e.node(o),i=t,a=!1,o=(t.lim>r.lim&&(i=r,a=!0),n.edges().filter(function(t){return a===h(e,e.node(t.v),i)&&a!==h(e,e.node(t.w),i)}));return(0,c.minBy)(o,function(t){return(0,s.slack)(n,t)})},i.exchangeEdges=function(t,e,n,r){var o=n.v;t.removeEdge(o,n.w),t.setEdge(r.v,r.w,{}),(0,i.initLowLimValues)(t),(0,i.initCutValues)(t,e),l(t,e)},function(o,i){var t=o.nodes().find(function(t){return!(null!=(t=i.node(t))&&t.parent)}),t=n(o,t);null!=(t=null==t?void 0:t.slice(1))&&t.forEach(function(t){var e=o.node(t).parent,n=i.edgeFromArgs(t,e),r=!1;n||(n=i.edgeFromArgs(e,t),r=!0),i.node(t).rank=i.node(e).rank+(r?n.minlen:-n.minlen)})}),d=function(t,e,n){return t.hasEdge(e,n)},h=function(t,e,n){return n.low<=e.lim&&e.lim<=n.lim};i.default=function(t){var e=(0,c.simplify)(t);(0,s.longestPath)(e);var n,r,o=(0,a.feasibleTree)(e);for((0,i.initLowLimValues)(o),(0,i.initCutValues)(o,e);n=(0,i.leaveEdge)(o);)r=(0,i.enterEdge)(o,e,n),(0,i.exchangeEdges)(o,e,n,r)}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(d){o={},i=0,null!=(t=(r=d).children())&&t.forEach(a);var r,t,o,i,h=o;function a(t){var e,n=i;null!=(e=r.children(t))&&e.forEach(a),o[t]={low:n,lim:i++}}null!=(t=d.graph().dummyChains)&&t.forEach(function(t){var e,n,r,o=t,i=d.node(o).edgeObj;if(i)for(var t=function(t,e,n,r){for(var o,i=[],a=[],s=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim),u=n;u=t.parent(u),i.push(u),u&&(e[u].low>s||c>e[u].lim););for(o=u,u=r;u&&u!==o;)a.push(u),u=t.parent(u);return{lca:o,path:i.concat(a.reverse())}}(d,h,i.v,i.w),a=t.path,s=t.lca,c=0,u=a[c],l=!0;o!==i.w;){if(r=d.node(o),l){for(;u!==s&&(null==(e=d.node(u))?void 0:e.maxRank)<r.rank;)u=a[++c];u===s&&(l=!1)}if(!l){for(;c<a.length-1&&(null==(n=d.node(a[c+1]))?void 0:n.minRank)<=r.rank;)c++;u=a[c]}d.setParent(o,u),o=d.successors(o)[0]}})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});function f(o,i,a,s,c,u,l){var d,h,t,e=o.children(l);null!=e&&e.length?(d=(0,p.addBorderNode)(o,"_bt"),h=(0,p.addBorderNode)(o,"_bb"),t=o.node(l),o.setParent(d,l),t.borderTop=d,o.setParent(h,l),t.borderBottom=h,null!=e&&e.forEach(function(t){f(o,i,a,s,c,u,t);var e=o.node(t),n=e.borderTop||t,t=e.borderBottom||t,e=e.borderTop?s:2*s,r=n!==t?1:c-u[l]+1;o.setEdge(d,n,{minlen:r,weight:e,nestingEdge:!0}),o.setEdge(t,h,{minlen:r,weight:e,nestingEdge:!0})}),o.parent(l)||o.setEdge(i,d,{weight:0,minlen:c+u[l]})):l!==i&&o.setEdge(i,l,{weight:0,minlen:a})}function u(r){function o(t,e){var n=r.children(t);null!=n&&n.forEach(function(t){return o(t,e+1)}),i[t]=e}var t,i={};return null!=(t=r.children())&&t.forEach(function(t){return o(t,1)}),i}var p=n(92);e.default={run:function(e){var n,r,o=(0,p.addDummyNode)(e,"root",{},"_root"),i=u(e),t=Math.max.apply(Math,Object.values(i)),a=(t=Math.abs(t)===1/0?1:t)-1,s=2*a+1,c=(e.graph().nestingRoot=o,e.edges().forEach(function(t){e.edge(t).minlen*=s}),r=0,(n=e).edges().forEach(function(t){r+=n.edge(t).weight}),r+1);null!=(t=e.children())&&t.forEach(function(t){f(e,o,s,c,a,i,t)}),e.graph().nodeRankFactor=s},cleanup:function(e){var t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(function(t){e.edge(t).nestingEdge&&e.removeEdgeObj(t)})}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});function s(t,e,n,r,o,i){var a=o[e][i-1],n=(0,c.addDummyNode)(t,"border",{rank:i,borderType:e,width:0,height:0},n);o[e][i]=n,t.setParent(n,r),a&&t.setEdge(a,n,{weight:1})}var c=n(92);e.default=function(i){function a(t){var e=i.children(t),n=i.node(t);if(null!=e&&e.length&&e.forEach(a),n.hasOwnProperty("minRank")){n.borderLeft=[],n.borderRight=[];for(var r=n.minRank,o=n.maxRank+1;r<o;r+=1)s(i,"borderLeft","_bl",t,n,r),s(i,"borderRight","_br",t,n,r)}}var t;null!=(t=i.children())&&t.forEach(a)}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});function o(e){e.nodes().forEach(function(t){r(e.node(t))}),e.edges().forEach(function(t){r(e.edge(t))})}function r(t){var e=t.width;t.width=t.height,t.height=e}function i(t){null!=t&&t.y&&(t.y=-t.y)}function a(t){var e=t.x;t.x=t.y,t.y=e}e.default={adjust:function(t){var e=null==(e=t.graph().rankdir)?void 0:e.toLowerCase();"lr"!==e&&"rl"!==e||o(t)},undo:function(t){var n,r,e=null==(e=t.graph().rankdir)?void 0:e.toLowerCase();"bt"!==e&&"rl"!==e||((r=t).nodes().forEach(function(t){i(r.node(t))}),r.edges().forEach(function(t){var e,t=r.edge(t);null!=(e=t.points)&&e.forEach(i),t.hasOwnProperty("y")&&i(t)})),"lr"!==e&&"rl"!==e||((n=t).nodes().forEach(function(t){a(n.node(t))}),n.edges().forEach(function(t){var e,t=n.edge(t);null!=(e=t.points)&&e.forEach(a),t.hasOwnProperty("x")&&a(t)}),o(t))}}},function(t,e,n){function f(e,t,n){return t.map(function(t){return(0,o.default)(e,t,n)})}function p(t,i,a,s){var c=new d.Graph;null!=t&&t.forEach(function(t){for(var e=t.graph().root,n=(0,l.default)(t,e,c,i,a,s),r=0;r<(null==(o=n.vs)?void 0:o.length);r++){var o=t.node(n.vs[r]);o&&(o.order=r)}(0,u.default)(t,c,n.vs)})}function g(n,t){null!=t&&t.forEach(function(t){null!=t&&t.forEach(function(t,e){n.node(t).order=e})})}var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},y=(Object.defineProperty(e,"__esModule",{value:!0}),r(n(304))),m=r(n(305)),o=r(n(306)),u=r(n(307)),l=r(n(308)),v=n(80),d=n(105),b=n(92);e.default=function(t,e){for(var n=(0,b.maxRank)(t),r=[],o=[],i=1;i<n+1;i++)r.push(i);for(i=n-1;-1<i;i--)o.push(i);var a=f(t,r,"inEdges"),s=f(t,o,"outEdges"),c=(0,y.default)(t);g(t,c);for(var u,l,d=Number.POSITIVE_INFINITY,h=i=0;h<4;++i,++h)p(i%2?a:s,2<=i%4,!1,e),c=(0,b.buildLayerMatrix)(t),(l=(0,m.default)(t,c))<d&&(u=(h=0,v.clone)(c),d=l);for(c=(0,y.default)(t),g(t,c),h=i=0;h<4;++i,++h)p(i%2?a:s,2<=i%4,!0,e),c=(0,b.buildLayerMatrix)(t),(l=(0,m.default)(t,c))<d&&(u=(h=0,v.clone)(c),d=l);g(t,u)}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var c=n(221);e.default=function(n){for(var r={},t=n.nodes().filter(function(t){return!(null!=(t=n.children(t))&&t.length)}),e=t.map(function(t){return n.node(t).rank}),o=(0,c.max)(e),i=[],a=0;a<o+1;a++)i.push([]);function s(t){var e;r.hasOwnProperty(t)||(r[t]=!0,e=n.node(t),isNaN(e.rank)||i[e.rank].push(t),null!=(e=n.successors(t))&&e.forEach(s))}e=t.sort(function(t,e){return n.node(t).rank-n.node(e).rank}),t=e.filter(function(t){return void 0!==n.node(t).fixorder}).sort(function(t,e){return n.node(t).fixorder-n.node(e).fixorder});return null!=t&&t.forEach(function(t){isNaN(n.node(t).rank)||i[n.node(t).rank].push(t),r[t]=!0}),null!=e&&e.forEach(s),i}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var c=n(92);e.default=function(t,e){for(var n=0,r=1;r<(null==e?void 0:e.length);r+=1)n+=function(e,t,n){for(var r=(0,c.zipObject)(n,n.map(function(t,e){return e})),t=t.map(function(t){t=null==(t=e.outEdges(t))?void 0:t.map(function(t){return{pos:r[t.w]||0,weight:e.edge(t).weight}});return null==t?void 0:t.sort(function(t,e){return t.pos-e.pos})}).flat().filter(function(t){return void 0!==t}),o=1;o<n.length;)o<<=1;var i=2*o-1,a=(--o,Array(i).fill(0,0,i)),s=0;return null!=t&&t.forEach(function(t){if(t){var e=t.pos+o;a[e]+=t.weight;for(var n=0;0<e;)e%2&&(n+=a[e+1]),a[e=e-1>>1]+=t.weight;s+=t.weight*n}}),s}(t,e[r-1],e[r]);return n}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(105);e.default=function(o,n,i){var a=function(t){for(var e;t.hasNode(e="_root".concat(Math.random())););return e}(o),s=new r.Graph({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(t){return o.node(t)});return o.nodes().forEach(function(r){var t=o.node(r),e=o.parent(r);(t.rank===n||t.minRank<=n&&n<=t.maxRank)&&(s.setNode(r),s.setParent(r,e||a),null!=(e=o[i](r))&&e.forEach(function(t){var e=t.v===r?t.w:t.v,n=s.edgeFromArgs(e,r),n=void 0!==n?n.weight:0;s.setEdge(e,r,{weight:o.edge(t).weight+n})}),t.hasOwnProperty("minRank"))&&s.setNode(r,{borderLeft:t.borderLeft[n],borderRight:t.borderRight[n]})}),s}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o,i,t){var a,s={};null!=t&&t.forEach(function(t){for(var e,n,r=o.parent(t);r;){if((e=o.parent(r))?(n=s[e],s[e]=r):(n=a,a=r),n&&n!==r)return void i.setEdge(n,r);r=e}})}},function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},l=(Object.defineProperty(e,"__esModule",{value:!0}),r(n(309))),d=r(n(310)),h=r(n(311)),f=function(n,t,r,o,e,i){var a=n.children(t),t=n.node(t),s=t?t.borderLeft:void 0,c=t?t.borderRight:void 0,u={},t=(s&&(a=null==a?void 0:a.filter(function(t){return t!==s&&t!==c})),(0,l.default)(n,a||[])),a=(null!=t&&t.forEach(function(t){var e;null!=(e=n.children(t.v))&&e.length&&(e=f(n,t.v,r,o,i),(u[t.v]=e).hasOwnProperty("barycenter"))&&g(t,e)}),(0,d.default)(t,r)),t=(p(a,u),null!=(t=a.filter(function(t){return 0<t.vs.length}))&&t.forEach(function(t){var e=n.node(t.vs[0]);e&&(t.fixorder=e.fixorder,t.order=e.order)}),(0,h.default)(a,o,e,i));return s&&(t.vs=[s,t.vs,c].flat(),null!=(a=n.predecessors(s)))&&a.length&&(a=n.node((null==(e=n.predecessors(s))?void 0:e[0])||""),e=n.node((null==(e=n.predecessors(c))?void 0:e[0])||""),t.hasOwnProperty("barycenter")||(t.barycenter=0,t.weight=0),t.barycenter=(t.barycenter*t.weight+a.order+e.order)/(t.weight+2),t.weight+=2),t},p=function(t,n){null!=t&&t.forEach(function(t){var e=null==(e=t.vs)?void 0:e.map(function(t){return n[t]?n[t].vs:t});t.vs=e.flat()})},g=function(t,e){void 0!==t.barycenter?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)};e.default=f},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(r,t){return t.map(function(t){var n,e=r.inEdges(t);return null!=e&&e.length?(n={sum:0,weight:0},null!=e&&e.forEach(function(t){var e=r.edge(t),t=r.node(t.v);n.sum+=e.weight*t.order,n.weight+=e.weight}),{v:t,barycenter:n.sum/n.weight,weight:n.weight}):{v:t}})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});function o(e){for(var t,n=[],r=function(){var i=e.pop();n.push(i),null!=(t=i.in.reverse())&&t.forEach(function(t){var e,n,r,o;(t=t).merged||(void 0===t.barycenter||void 0===i.barycenter||t.barycenter>=i.barycenter)&&(t=t,o=r=0,(e=i).weight&&(r+=e.barycenter*e.weight,o+=e.weight),t.weight&&(r+=t.barycenter*t.weight,o+=t.weight),e.vs=null==(n=t.vs)?void 0:n.concat(e.vs),e.barycenter=r/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0)}),null!=(t=i.out)&&t.forEach(function(t){(t=t).in.push(i),0==--t.indegree&&e.push(t)})};null!=e&&e.length;)r();var o=n.filter(function(t){return!t.merged}),i=["vs","i","barycenter","weight"];return o.map(function(e){var n={};return null!=i&&i.forEach(function(t){void 0!==e[t]&&(n[t]=e[t])}),n})}e.default=function(t,e){var r={},t=(null!=t&&t.forEach(function(t,e){r[t.v]={i:e,indegree:0,in:[],out:[],vs:[t.v]};e=r[t.v];void 0!==t.barycenter&&(e.barycenter=t.barycenter,e.weight=t.weight)}),null!=(t=e.edges())&&t.forEach(function(t){var e=r[t.v],n=r[t.w];void 0!==e&&void 0!==n&&(n.indegree++,e.out.push(r[t.w]))}),null==(t=(e=Object.values(r)).filter)?void 0:t.call(e,function(t){return!t.indegree}));return o(t)}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});function h(t,e,n){for(var r,o=n;e.length&&(r=e[e.length-1]).i<=o;)e.pop(),null!=t&&t.push(r.vs),o++;return o}var f=n(92);e.default=function(t,e,n,r){var o,i,t=(0,f.partition)(t,function(t){var e=t.hasOwnProperty("fixorder")&&!isNaN(t.fixorder);return r?!e&&t.hasOwnProperty("barycenter"):e||t.hasOwnProperty("barycenter")}),a=t.lhs,s=t.rhs.sort(function(t,e){return-t.i- -e.i}),c=[],u=0,l=0,d=0,t=(null!=a&&a.sort((o=!!e,i=!!n,function(t,e){if(void 0!==t.fixorder&&void 0!==e.fixorder)return t.fixorder-e.fixorder;if(t.barycenter<e.barycenter)return-1;if(e.barycenter<t.barycenter)return 1;if(i&&void 0!==t.order&&void 0!==e.order){if(t.order<e.order)return-1;if(e.order<t.order)return 1}return o?e.i-t.i:t.i-e.i})),d=h(c,s,d),null!=a&&a.forEach(function(t){var e;d+=null==(e=t.vs)?void 0:e.length,c.push(t.vs),u+=t.barycenter*t.weight,l+=t.weight,d=h(c,s,d)}),{vs:c.flat()});return l&&(t.barycenter=u/l,t.weight=l),t}},function(t,e,n){var d=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||((r=r||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},h=(Object.defineProperty(e,"__esModule",{value:!0}),n(92)),f=n(313);e.default=function(t){var r,o,i,a,e,s,c,u,n=(0,h.asNonCompoundGraph)(t),l=(r=n,t=(0,h.buildLayerMatrix)(r),o=r.graph().ranksep,i=0,null!=t&&t.forEach(function(t){var e=t.map(function(t){return r.node(t).height}),n=Math.max.apply(Math,d(d([],e,!1),[0],!1));null!=t&&t.forEach(function(t){r.node(t).y=i+n/2}),i+=n+o}),a=n,e=(0,h.buildLayerMatrix)(a),s=Object.assign((0,f.findType1Conflicts)(a,e),(0,f.findType2Conflicts)(a,e)),c={},u=[],["u","d"].forEach(function(r){u="u"===r?e:Object.values(e).reverse(),["l","r"].forEach(function(t){"r"===t&&(u=u.map(function(t){return Object.values(t).reverse()}));var e=("u"===r?a.predecessors:a.successors).bind(a),e=(0,f.verticalAlignment)(a,u,s,e),n=(0,f.horizontalCompaction)(a,u,e.root,e.align,"r"===t);"r"===t&&Object.keys(n).forEach(function(t){return n[t]=-n[t]}),c[r+t]=n})}),(t=(0,f.findSmallestWidthAlignment)(a,c))&&(0,f.alignCoordinates)(c,t),(0,f.balance)(c,a.graph().align));null!=(t=Object.keys(l))&&t.forEach(function(t){n.node(t).x=l[t]})}},function(t,h,e){var r,n,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=(Object.defineProperty(h,"__esModule",{value:!0}),h.width=h.sep=h.positionX=h.balance=h.alignCoordinates=h.findSmallestWidthAlignment=h.buildBlockGraph=h.horizontalCompaction=h.verticalAlignment=h.hasConflict=h.addConflict=h.findOtherInnerSegmentNode=h.findType2Conflicts=h.findType1Conflicts=void 0,e(134)),l=e(221),c=e(92),u=(n=i.Graph,o(a,n),a);function a(){return null!==n&&n.apply(this,arguments)||this}function d(a,s){var t=Object.values(s),c=(0,l.min)(t),u=(0,l.max)(t);["u","d"].forEach(function(i){["l","r"].forEach(function(t){var e,n,r=i+t,o=a[r];o!==s&&(n=Object.values(o),e="l"===t?c-(0,l.min)(n):u-(0,l.max)(n))&&(a[r]={},Object.keys(o).forEach(function(t){a[r][t]=o[t]+e}))})})}h.findType1Conflicts=function(u,t){var l={};return null!=t&&t.length&&t.reduce(function(t,r){var i=0,a=0,s=t.length,c=null==r?void 0:r[(null==r?void 0:r.length)-1];return null!=r&&r.forEach(function(t,e){var n=(0,h.findOtherInnerSegmentNode)(u,t),o=n?u.node(n).order:s;!n&&t!==c||(null!=(n=r.slice(a,e+1))&&n.forEach(function(r){var t;null!=(t=u.predecessors(r))&&t.forEach(function(t){var e=u.node(t),n=e.order;!(n<i||o<n)||e.dummy&&null!=(n=u.node(r))&&n.dummy||(0,h.addConflict)(l,t,r)})}),a=e+1,i=o)}),r}),l},h.findType2Conflicts=function(u,t){var c={};function l(t,e){var n=JSON.stringify(t.slice(1));e.get(n)||(function(t,e,n,r,o){for(var i,a,s=e;s<n;s++)a=t[s],null==(i=u.node(a))||!i.dummy||null!=(i=u.predecessors(a))&&i.forEach(function(t){var e=u.node(t);e.dummy&&(e.order<r||o<e.order)&&(0,h.addConflict)(c,t,a)})}.apply(void 0,t),e.set(n,!0))}return null!=t&&t.length&&t.reduce(function(r,o){var i,a=-1,s=0,c=new Map;return null!=o&&o.forEach(function(t,e){var n;"border"===(null==(n=u.node(t))?void 0:n.dummy)&&(n=u.predecessors(t)||[]).length&&(i=u.node(n[0]).order,l([o,s,e,a,i],c),s=e,a=i),l([o,s,o.length,i,r.length],c)}),o}),c},h.findOtherInnerSegmentNode=function(e,t){var n;return null==(n=e.node(t))||!n.dummy||null==(n=e.predecessors(t))?void 0:n.find(function(t){return e.node(t).dummy})},h.addConflict=function(t,e,n){var r,o=n,n=(n<e&&(r=e,e=n,o=r),t[e]);n||(t[e]=n={}),n[o]=!0},h.hasConflict=function(t,e,n){return!!t[n<e?n:e]},h.verticalAlignment=function(t,e,s,c){var u={},l={},d={};return null!=e&&e.forEach(function(t){null!=t&&t.forEach(function(t,e){d[l[u[t]=t]=t]=e})}),null!=e&&e.forEach(function(t){var a=-1;null!=t&&t.forEach(function(t){var e=c(t);if(e.length)for(var n=((e=e.sort(function(t,e){return d[t]-d[e]})).length-1)/2,r=Math.floor(n),o=Math.ceil(n);r<=o;++r){var i=e[r];l[t]===t&&a<d[i]&&!(0,h.hasConflict)(s,t,i)&&(l[i]=t,l[t]=u[t]=u[i],a=d[i])}})}),{root:u,align:l}},h.horizontalCompaction=function(r,t,e,n,o){function i(t,e){for(var n=s.nodes(),r=n.pop(),o={};r;)o[r]?t(r):(o[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}var a={},s=(0,h.buildBlockGraph)(r,t,e,o),c=o?"borderLeft":"borderRight";return i(function(t){a[t]=(s.inEdges(t)||[]).reduce(function(t,e){return Math.max(t,(a[e.v]||0)+s.edge(e))},0)},s.predecessors.bind(s)),i(function(t){var e=(s.outEdges(t)||[]).reduce(function(t,e){return Math.min(t,(a[e.w]||0)-s.edge(e))},Number.POSITIVE_INFINITY),n=r.node(t);e!==Number.POSITIVE_INFINITY&&n.borderType!==c&&(a[t]=Math.max(a[t],e))},s.successors.bind(s)),null!=(t=Object.values(n))&&t.forEach(function(t){a[t]=a[e[t]]}),a},h.buildBlockGraph=function(i,t,a,e){var s=new u,n=i.graph(),c=(0,h.sep)(n.nodesep,n.edgesep,e);return null!=t&&t.forEach(function(t){var o;null!=t&&t.forEach(function(t){var e,n,r=a[t];s.setNode(r),o&&(e=a[o],n=s.edgeFromArgs(e,r),s.setEdge(e,r,Math.max(c(i,t,o),n||0))),o=t})}),s},h.findSmallestWidthAlignment=function(i,t){return(0,c.minBy)(Object.values(t),function(n){var t,r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return null!=(t=Object.keys(n))&&t.forEach(function(t){var e=n[t],t=(0,h.width)(i,t)/2;r=Math.max(e+t,r),o=Math.min(e-t,o)}),r-o})},h.alignCoordinates=d,h.balance=function(n,r){var o={};return Object.keys(n.ul).forEach(function(e){var t;r?o[e]=n[r.toLowerCase()][e]:(t=Object.values(n).map(function(t){return t[e]}),o[e]=(t[0]+t[1])/2)}),o},h.positionX=function(o){var i,t=(0,c.buildLayerMatrix)(o),a=Object.assign((0,h.findType1Conflicts)(o,t),(0,h.findType2Conflicts)(o,t)),s={},e=(["u","d"].forEach(function(r){i="u"===r?t:Object.values(t).reverse(),["l","r"].forEach(function(t){"r"===t&&(i=i.map(function(t){return Object.values(t).reverse()}));var e=("u"===r?o.predecessors:o.successors).bind(o),e=(0,h.verticalAlignment)(o,i,a,e),n=(0,h.horizontalCompaction)(o,i,e.root,e.align,"r"===t);"r"===t&&Object.keys(n).forEach(function(t){n[t]=-n[t]}),s[r+t]=n})}),(0,h.findSmallestWidthAlignment)(o,s));return d(s,e),(0,h.balance)(s,o.graph().align)},h.sep=function(a,s,c){return function(t,e,n){var r,o=t.node(e),i=t.node(n),e=0;if(e+=o.width/2,o.hasOwnProperty("labelpos"))switch((o.labelpos||"").toLowerCase()){case"l":r=-o.width/2;break;case"r":r=o.width/2}if(r&&(e+=c?r:-r),r=0,e=(e=(e+=(o.dummy?s:a)/2)+(i.dummy?s:a)/2)+i.width/2,i.labelpos)switch((i.labelpos||"").toLowerCase()){case"l":r=i.width/2;break;case"r":r=-i.width/2}return r&&(e+=c?r:-r),r=0,e}},h.width=function(t,e){return t.node(e).width||0}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n,t){for(var e=n.nodes().filter(function(t){return!(null!=(t=n.children(t))&&t.length)}).map(function(t){return n.node(t).rank}),r=Math.max.apply(Math,e),o=[],i=0;i<r+1;i++)o[i]=[];null!=t&&t.forEach(function(t){var e=n.node(t);!e||null!=e&&e.dummy||isNaN(e.rank)||(e.fixorder=o[e.rank].length,o[e.rank].push(t))})}},function(t,hi,fi){fi.r(hi),function(t){fi.d(hi,"BRIDGE_GRAPH_NAME",function(){return R}),fi.d(hi,"GraphType",function(){return B}),fi.d(hi,"HierarchyNodeType",function(){return z}),fi.d(hi,"InclusionType",function(){return v}),fi.d(hi,"LAYOUT_CONFIG",function(){return s}),fi.d(hi,"NodeType",function(){return m}),fi.d(hi,"ROOT_NAME",function(){return d}),fi.d(hi,"buildGraph",function(){return si}),fi.d(hi,"flatGraph",function(){return ci}),fi.d(hi,"getEdges",function(){return ui}),fi.d(hi,"mergeConfig",function(){return L});let s={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function L(t={},e=s){var e=JSON.parse(JSON.stringify(e)),n=(null==(n=null==t?void 0:t.graph)?void 0:n.meta)||{},r=(null==(r=null==t?void 0:t.subScene)?void 0:r.meta)||{},o=(null==(o=null==t?void 0:t.nodeSize)?void 0:o.meta)||{},t=(null==(t=null==t?void 0:t.nodeSize)?void 0:t.node)||{},i=e.nodeSize.bridge;return{graph:{meta:Object.assign(e.graph.meta,n)},subScene:{meta:Object.assign(e.subScene.meta,r)},nodeSize:{meta:Object.assign(e.nodeSize.meta,o),node:Object.assign(e.nodeSize.node,t),bridge:i}}}let d="ROOT",R="BRIDGE_GRAPH";(e=m=m||{})[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE",(e=v=v||{})[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED",(e=B=B||{})[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE",(e=z=z||{})[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES";var m,v,B,z,e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function F(t,e){return t(e={exports:{}},e.exports),e.exports}function G(t,e){for(var n=t.length;n--;)if(U(t[n][0],e))return n;return-1}var U=function(t,e){return t===e||t!=t&&e!=e},W=Array.prototype.splice;function X(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}X.prototype.clear=function(){this.__data__=[],this.size=0},X.prototype.delete=function(t){var e=this.__data__,t=G(e,t);return!(t<0||(t==e.length-1?e.pop():W.call(e,t,1),--this.size,0))},X.prototype.get=function(t){var e=this.__data__,t=G(e,t);return t<0?void 0:e[t][1]},X.prototype.has=function(t){return-1<G(this.__data__,t)},X.prototype.set=function(t,e){var n=this.__data__,r=G(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function n(t,e){return t=null==t?void 0:t[e],!_(e=t)||J&&J in e||!(Q(e)?nt:et).test(r(e))?void 0:t}var Y=X,V="object"==typeof e&&e&&e.Object===Object&&e,t="object"==typeof self&&self&&self.Object===Object&&self,o=V||t||Function("return this")(),e=o.Symbol,t=Object.prototype,H=t.hasOwnProperty,q=t.toString,K=e?e.toStringTag:void 0,Z=Object.prototype.toString,$=e?e.toStringTag:void 0,w=function(t){{if(null==t)return void 0===t?"[object Undefined]":"[object Null]";if($&&$ in Object(t)){var e=t,n=H.call(e,K),r=e[K];try{var o=!(e[K]=void 0)}catch(e){}var i=q.call(e);return o&&(n?e[K]=r:delete e[K]),i}return Z.call(t)}},_=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Q=function(t){return!!_(t)&&("[object Function]"==(t=w(t))||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t)},t=o["__core-js_shared__"],J=(t=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",tt=Function.prototype.toString,r=function(t){if(null!=t){try{return tt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},et=/^\[object .+?Constructor\]$/,t=Object.prototype,i=Function.prototype.toString,t=t.hasOwnProperty,nt=RegExp("^"+i.call(t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=n(o,"Map"),ot=n(Object,"create"),it=Object.prototype.hasOwnProperty,at=Object.prototype.hasOwnProperty;function st(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}st.prototype.clear=function(){this.__data__=ot?ot(null):{},this.size=0},st.prototype.delete=function(t){t=this.has(t)&&delete this.__data__[t];return this.size-=t?1:0,t},st.prototype.get=function(t){var e,n=this.__data__;return ot?"__lodash_hash_undefined__"===(e=n[t])?void 0:e:it.call(n,t)?n[t]:void 0},st.prototype.has=function(t){var e=this.__data__;return ot?void 0!==e[t]:at.call(e,t)},st.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ot&&void 0===e?"__lodash_hash_undefined__":e,this};function ct(t,e){var n,t=t.__data__;return("string"==(n=typeof e)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?t["string"==typeof e?"string":"hash"]:t.map}var ut=st;function lt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}lt.prototype.clear=function(){this.size=0,this.__data__={hash:new ut,map:new(rt||Y),string:new ut}},lt.prototype.delete=function(t){t=ct(this,t).delete(t);return this.size-=t?1:0,t},lt.prototype.get=function(t){return ct(this,t).get(t)},lt.prototype.has=function(t){return ct(this,t).has(t)},lt.prototype.set=function(t,e){var n=ct(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var dt=lt;function ht(t){t=this.__data__=new Y(t);this.size=t.size}ht.prototype.clear=function(){this.__data__=new Y,this.size=0},ht.prototype.delete=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t},ht.prototype.get=function(t){return this.__data__.get(t)},ht.prototype.has=function(t){return this.__data__.has(t)},ht.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Y){var r=n.__data__;if(!rt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new dt(r)}return n.set(t,e),this.size=n.size,this};function ft(t,e,n,r){var o=!n;n=n||{};for(var i=-1,a=e.length;++i<a;){var s=e[i],c=r?r(n[s],t[s],s,n,t):void 0;void 0===c&&(c=t[s]),(o?Ot:kt)(n,s,c)}return n}function pt(t){return E(t)&&"[object Arguments]"==w(t)}function gt(){return!1}function yt(e){return function(t){return e(t)}}function mt(e,n){return function(t){return e(n(t))}}function vt(t,e){var n=-1,r=t.length;for(e=e||Array(r);++n<r;)e[n]=t[n];return e}function bt(){return[]}function xt(t){return Qt(t,M,$t)}function wt(t){return"function"!=typeof t.constructor||Bt(t)?{}:fe(Zt(t))}var _t=ht,Et=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},St=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Ot=function(t,e,n){"__proto__"==e&&St?St(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Mt=Object.prototype.hasOwnProperty,kt=function(t,e,n){var r=t[e];Mt.call(t,e)&&U(r,n)&&(void 0!==n||e in t)||Ot(t,e,n)},E=function(t){return null!=t&&"object"==typeof t},i=Object.prototype,Ct=i.hasOwnProperty,At=i.propertyIsEnumerable,It=pt(function(){return arguments}())?pt:function(t){return E(t)&&Ct.call(t,"callee")&&!At.call(t,"callee")},S=Array.isArray,O=F(function(t,e){var e=e&&!e.nodeType&&e,n=e&&t&&!t.nodeType&&t,n=n&&n.exports===e?o.Buffer:void 0,e=(n?n.isBuffer:void 0)||gt;t.exports=e}),Tt=/^(?:0|[1-9]\d*)$/,jt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Tt.test(t))&&-1<t&&t%1==0&&t<e},Nt=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},a={},t=(a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,F(function(t,e){var e=e&&!e.nodeType&&e,n=e&&t&&!t.nodeType&&t,r=n&&n.exports===e&&V.process,e=function(){try{return n&&n.require&&n.require("util").types||r&&r.binding&&r.binding("util")}catch(t){}}();t.exports=e})),i=t&&t.isTypedArray,Dt=i?yt(i):function(t){return E(t)&&Nt(t.length)&&!!a[w(t)]},Pt=Object.prototype.hasOwnProperty,Lt=function(t,e){var n,r=S(t),o=!r&&It(t),i=!r&&!o&&O(t),a=!r&&!o&&!i&&Dt(t),s=r||o||i||a,c=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=c.length;for(n in t)!e&&!Pt.call(t,n)||s&&("length"==n||i&&("offset"==n||"parent"==n)||a&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||jt(n,u))||c.push(n);return c},Rt=Object.prototype,Bt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Rt)},zt=mt(Object.keys,Object),Ft=Object.prototype.hasOwnProperty,Gt=function(t){if(!Bt(t))return zt(t);var e,n=[];for(e in Object(t))Ft.call(t,e)&&"constructor"!=e&&n.push(e);return n},c=function(t){return null!=t&&Nt(t.length)&&!Q(t)},y=function(t){return(c(t)?Lt:Gt)(t)},Ut=Object.prototype.hasOwnProperty,Wt=function(t){if(_(t)){var e,n=Bt(t),r=[];for(e in t)("constructor"!=e||!n&&Ut.call(t,e))&&r.push(e);return r}var o=[];if(null!=t)for(var i in Object(t))o.push(i);return o},M=function(t){return c(t)?Lt(t,!0):Wt(t)},Xt=F(function(t,e){var e=e&&!e.nodeType&&e,n=e&&t&&!t.nodeType&&t,n=n&&n.exports===e?o.Buffer:void 0,r=n?n.allocUnsafe:void 0;t.exports=function(t,e){return e?t.slice():(e=t.length,e=r?r(e):new t.constructor(e),t.copy(e),e)}}),Yt=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i},Vt=Object.prototype.propertyIsEnumerable,Ht=Object.getOwnPropertySymbols,qt=Ht?function(e){return null==e?[]:(e=Object(e),Yt(Ht(e),function(t){return Vt.call(e,t)}))}:bt,Kt=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t},Zt=mt(Object.getPrototypeOf,Object),$t=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Kt(e,qt(t)),t=Zt(t);return e}:bt,Qt=function(t,e,n){e=e(t);return S(t)?e:Kt(e,n(t))},Jt=function(t){return Qt(t,y,qt)},i=n(o,"DataView"),u=n(o,"Promise"),te=n(o,"Set"),l=n(o,"WeakMap"),ee=r(i),ne=r(rt),re=r(u),oe=r(te),ie=r(l),h=w,b=h=i&&"[object DataView]"!=h(new i(new ArrayBuffer(1)))||rt&&"[object Map]"!=h(new rt)||u&&"[object Promise]"!=h(u.resolve())||te&&"[object Set]"!=h(new te)||l&&"[object WeakMap]"!=h(new l)?function(t){var e=w(t),t="[object Object]"==e?t.constructor:void 0,t=t?r(t):"";if(t)switch(t){case ee:return"[object DataView]";case ne:return"[object Map]";case re:return"[object Promise]";case oe:return"[object Set]";case ie:return"[object WeakMap]"}return e}:h,ae=Object.prototype.hasOwnProperty,se=o.Uint8Array,ce=function(t){var e=new t.constructor(t.byteLength);return new se(e).set(new se(t)),e},ue=/\w*$/,i=e?e.prototype:void 0,le=i?i.valueOf:void 0,de=function(t,e){e=e?ce(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)},he=Object.create,fe=function(t){if(!_(t))return{};if(he)return he(t);ye.prototype=t;t=new ye;return ye.prototype=void 0,t},u=t&&t.isMap,pe=u?yt(u):function(t){return E(t)&&"[object Map]"==b(t)},l=t&&t.isSet,ge=l?yt(l):function(t){return E(t)&&"[object Set]"==b(t)},x={};function ye(){}x["[object Arguments]"]=x["[object Array]"]=x["[object ArrayBuffer]"]=x["[object DataView]"]=x["[object Boolean]"]=x["[object Date]"]=x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Map]"]=x["[object Number]"]=x["[object Object]"]=x["[object RegExp]"]=x["[object Set]"]=x["[object String]"]=x["[object Symbol]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x["[object Error]"]=x["[object Function]"]=x["[object WeakMap]"]=!1;function me(n,r,o,t,e,i){var a,s=1&r,c=2&r,u=4&r;if(void 0===(a=o?e?o(n,t,e,i):o(n):a)){if(!_(n))return n;var l,d,t=S(n);if(t){if(h=(f=n).length,d=new f.constructor(h),h&&"string"==typeof f[0]&&ae.call(f,"index")&&(d.index=f.index,d.input=f.input),a=d,!s)return vt(n,a)}else{var h=b(n),f="[object Function]"==h||"[object GeneratorFunction]"==h;if(O(n))return Xt(n,s);if("[object Object]"==h||"[object Arguments]"==h||f&&!e){if(a=c||f?{}:wt(n),!s)return c?(d=n,l=(l=a)&&ft(n,M(n),l),ft(d,$t(d),l)):(l=n,p=(p=a)&&ft(n,y(n),p),ft(l,qt(l),p))}else{if(!x[h])return e?n:{};a=function(t,e,n){var r,o,i=t.constructor;switch(e){case"[object ArrayBuffer]":return ce(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return r=t,o=n?ce(r.buffer):r.buffer,new r.constructor(o,r.byteOffset,r.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return de(t,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return(r=new(o=t).constructor(o.source,ue.exec(o))).lastIndex=o.lastIndex,r;case"[object Set]":return new i;case"[object Symbol]":return le?Object(le.call(t)):{}}}(n,h,s)}}var p=(i=i||new _t).get(n);if(p)return p;i.set(n,a),ge(n)?n.forEach(function(t){a.add(me(t,r,o,t,n,i))}):pe(n)&&n.forEach(function(t,e){a.set(e,me(t,r,o,e,n,i))});var g=t?void 0:(u?c?xt:Jt:c?M:y)(n);Et(g||n,function(t,e){g&&(t=n[e=t]),kt(a,e,me(t,r,o,e,n,i))})}return a}function ve(t){return function(){return t}}function be(t,e,n){for(var r=-1,o=Object(t),i=n(t),a=i.length;a--;){var s=i[++r];if(!1===e(o[s],s,o))break}return t}function xe(t){return"function"==typeof t?t:f}function we(t,e){return(S(t)?Et:Oe)(t,xe(e))}function _e(t,r){var o=[];return Oe(t,function(t,e,n){r(t,e,n)&&o.push(t)}),o}var Ee,Se=function(t,e){return t&&be(t,e,y)},Oe=(Ee=Se,function(t,e){if(null!=t){if(!c(t))return Ee(t,e);for(var n=t.length,r=-1,o=Object(t);++r<n&&!1!==e(o[r],r,o););}return t}),f=function(t){return t},h=we;function Me(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new dt;++e<n;)this.add(t[e])}Me.prototype.add=Me.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Me.prototype.has=function(t){return this.__data__.has(t)};var ke=Me,Ce=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Ae=function(t,e){return t.has(e)},Ie=function(t,e,n,r,o,i){var a=1&n,s=t.length,c=e.length;if(s!=c&&!(a&&s<c))return!1;var c=i.get(t),u=i.get(e);if(c&&u)return c==e&&u==t;var l=-1,d=!0,h=2&n?new ke:void 0;for(i.set(t,e),i.set(e,t);++l<s;){var f,p=t[l],g=e[l];if(void 0!==(f=r?a?r(g,p,l,e,t,i):r(p,g,l,t,e,i):f)){if(f)continue;d=!1;break}if(h){if(!Ce(e,function(t,e){if(!Ae(h,e)&&(p===t||o(p,t,n,r,i)))return h.push(e)})){d=!1;break}}else if(p!==g&&!o(p,g,n,r,i)){d=!1;break}}return i.delete(t),i.delete(e),d},Te=function(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r},je=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},i=e?e.prototype:void 0,Ne=i?i.valueOf:void 0,De=function(t,e,n,r,o,i,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new se(t),new se(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return U(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Te;case"[object Set]":s=s||je;if(t.size!=e.size&&!(1&r))return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);c=Ie(s(t),s(e),r,o,i,a);return a.delete(t),c;case"[object Symbol]":if(Ne)return Ne.call(t)==Ne.call(e)}return!1},Pe=Object.prototype.hasOwnProperty,Le=Object.prototype.hasOwnProperty,Re=function(t,e,n,r,o,i){var a=S(t),s=S(e),c=a?"[object Array]":b(t),s=s?"[object Array]":b(e),u="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),l="[object Object]"==(s="[object Arguments]"==s?"[object Object]":s),s=c==s;if(s&&O(t)){if(!O(e))return!1;u=!(a=!0)}if(s&&!u)return i=i||new _t,a||Dt(t)?Ie(t,e,n,r,o,i):De(t,e,c,n,r,o,i);if(!(1&n)){a=u&&Le.call(t,"__wrapped__"),c=l&&Le.call(e,"__wrapped__");if(a||c)return o(a?t.value():t,c?e.value():e,n,r,i=i||new _t)}return!!s&&function(t,e,n,r,o,i){var a=1&n,s=Jt(t),c=s.length;if(c!=Jt(e).length&&!a)return!1;for(var u=c;u--;){var l=s[u];if(!(a?l in e:Pe.call(e,l)))return!1}var d=i.get(t),h=i.get(e);if(d&&h)return d==e&&h==t;var f=!0;i.set(t,e),i.set(e,t);for(var p=a;++u<c;){var g,y=t[l=s[u]],m=e[l];if(!(void 0===(g=r?a?r(m,y,l,e,t,i):r(y,m,l,t,e,i):g)?y===m||o(y,m,n,r,i):g)){f=!1;break}p=p||"constructor"==l}return f&&!p&&(d=t.constructor)!=(h=e.constructor)&&"constructor"in t&&"constructor"in e&&!("function"==typeof d&&d instanceof d&&"function"==typeof h&&h instanceof h)&&(f=!1),i.delete(t),i.delete(e),f}(t,e,n,r,o,i=i||new _t)},Be=function t(e,n,r,o,i){return e===n||(null==e||null==n||!E(e)&&!E(n)?e!=e&&n!=n:Re(e,n,r,o,t,i))},ze=function(t){return t==t&&!_(t)},Fe=function(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in Object(t))}},Ge=function(t){var e=function(t){for(var e=y(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,ze(o)]}return e}(t);return 1==e.length&&e[0][2]?Fe(e[0][0],e[0][1]):function(l){return l===t||function(t,e,n){var r=e.length,o=r;if(null==l)return!o;for(t=Object(l);r--;){var i=e[r];if(i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++r<o;){var a=(i=e[r])[0],s=t[a],c=i[1];if(i[2]){if(void 0===s&&!(a in t))return!1}else{var u,a=new _t;if(!(void 0===u?Be(c,s,3,n,a):u))return!1}}return!0}(0,e)}},p=function(t){return"symbol"==typeof t||E(t)&&"[object Symbol]"==w(t)},Ue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,We=/^\w*$/,Xe=function(t,e){var n;return!S(t)&&(!("number"!=(n=typeof t)&&"symbol"!=n&&"boolean"!=n&&null!=t&&!p(t))||We.test(t)||!Ue.test(t)||null!=e&&t in Object(e))};function Ye(r,o){if("function"!=typeof r||null!=o&&"function"!=typeof o)throw new TypeError("Expected a function");function i(){var t=arguments,e=o?o.apply(this,t):t[0],n=i.cache;return n.has(e)?n.get(e):(t=r.apply(this,t),i.cache=n.set(e,t)||n,t)}return i.cache=new(Ye.Cache||dt),i}Ye.Cache=dt;function g(t){return"function"==typeof t?t:null==t?f:"object"==typeof t?S(t)?Mn(t[0],t[1]):Ge(t):Cn(t)}function Ve(t,e){return(S(t)?Yt:_e)(t,g(e))}function He(t,e){return null!=t&&An.call(t,e)}function qe(t,e){return null!=t&&Sn(t,e,He)}function Ke(t){return void 0===t}function Ze(t,e){return(S(t)?mn:Tn)(t,g(e))}function $e(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function Qe(t,r,o,i,e){return e(t,function(t,e,n){o=i?(i=!1,t):r(o,t,e,n)}),o}function Je(t,e,n){var r=S(t)?$e:Qe,o=arguments.length<3;return r(t,g(e),n,o,Oe)}function tn(t){return S(t)||It(t)||!!(Pn&&t&&t[Pn])}function en(t,e,n,r,o){var i=-1,a=t.length;for(n=n||tn,o=o||[];++i<a;){var s=t[i];0<e&&n(s)?1<e?en(s,e-1,n,r,o):Kt(o,s):r||(o[o.length]=s)}return o}function nn(i,a,s){return a=Rn(void 0===a?i.length-1:a,0),function(){for(var t=arguments,e=-1,n=Rn(t.length-a,0),r=Array(n);++e<n;)r[e]=t[a+e];for(var e=-1,o=Array(a+1);++e<a;)o[e]=t[e];return o[a]=s(r),Ln(i,this,o)}}function rn(t,e){return zn(nn(t,e,f),t+"")}function on(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function an(t){return t!=t}function sn(t,e){return!(null==t||!t.length)&&-1<function(t,e){if(e!=e)return on(t,an,0);for(var n=t,r=e,o=-1,i=n.length;++o<i;)if(n[o]===r)return o;return-1}(t,e)}function cn(t){return E(t)&&c(t)}function un(t){return null==t?[]:(t=y(e=t),mn(t,function(t){return e[t]}));var e}var ln,dn,hn,fn,pn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gn=/\\(\\)?/g,yn=(fn=(u=Ye(function(t){var o=[];return 46===t.charCodeAt(0)&&o.push(""),t.replace(pn,function(t,e,n,r){o.push(n?r.replace(gn,"$1"):e||t)}),o},function(t){return 500===fn.size&&fn.clear(),t})).cache,u),mn=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o},t=e?e.prototype:void 0,vn=t?t.toString:void 0,bn=function(t){return null==t?"":function t(e){var n;return"string"==typeof e?e:S(e)?mn(e,t)+"":p(e)?vn?vn.call(e):"":"0"==(n=e+"")&&1/e==-1/0?"-0":n}(t)},xn=function(t,e){return S(t)?t:Xe(t,e)?[t]:yn(bn(t))},wn=function(t){var e;return"string"==typeof t||p(t)?t:"0"==(e=t+"")&&1/t==-1/0?"-0":e},_n=function(t,e){for(var n=0,r=(e=xn(e,t)).length;null!=t&&n<r;)t=t[wn(e[n++])];return n&&n==r?t:void 0},En=function(t,e){return null!=t&&e in Object(t)},Sn=function(t,e,n){for(var r=-1,o=(e=xn(e,t)).length,i=!1;++r<o;){var a=wn(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&Nt(o)&&jt(a,o)&&(S(t)||It(t))},On=function(t,e){return null!=t&&Sn(t,e,En)},Mn=function(n,r){return Xe(n)&&ze(r)?Fe(wn(n),r):function(t){var e=void 0===(e=null==t?void 0:_n(t,n))?void 0:e;return void 0===e&&e===r?On(t,n):Be(r,e,3)}},kn=function(e){return function(t){return null==t?void 0:t[e]}},Cn=function(t){return Xe(t)?kn(wn(t)):(e=t,function(t){return _n(t,e)});var e},An=Object.prototype.hasOwnProperty,In=Object.prototype.hasOwnProperty,Tn=function(t,r){var o=-1,i=c(t)?Array(t.length):[];return Oe(t,function(t,e,n){i[++o]=r(t,e,n)}),i},jn=kn("length"),Nn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),l="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",u="[^\\ud800-\\udfff]",t="(?:\\ud83c[\\udde6-\\uddff]){2}",k="[\\ud800-\\udbff][\\udc00-\\udfff]",C="(?:"+l+"|"+i+")?",C="[\\ufe0e\\ufe0f]?"+C+"(?:\\u200d(?:"+[u,t,k].join("|")+")[\\ufe0e\\ufe0f]?"+C+")*",u="(?:"+[u+l+"?",l,t,k,"[\\ud800-\\udfff]"].join("|")+")",Dn=RegExp(i+"(?="+i+")|"+u+C,"g"),Pn=e?e.isConcatSpreadable:void 0,Ln=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Rn=Math.max,l=St?function(t,e){return St(t,"toString",{configurable:!0,enumerable:!1,value:ve(e),writable:!0})}:f,Bn=Date.now,zn=(ln=l,hn=dn=0,function(){var t=Bn(),e=16-(t-hn);if(hn=t,0<e){if(800<=++dn)return arguments[0]}else dn=0;return ln.apply(void 0,arguments)}),Fn=te&&1/je(new te([,-0]))[1]==1/0?function(t){return new te(t)}:function(){},t=rn(function(t){var e=en(t,1,cn,!0),n=-1,r=sn,o=e.length,i=!0,a=[],s=a;if(200<=o){t=Fn(e);if(t)return je(t);i=!1,r=Ae,s=new ke}else s=a;t:for(;++n<o;){var c=u=e[n],u=0!==u?u:0;if(i&&c==c){for(var l=s.length;l--;)if(s[l]===c)continue t;a.push(u)}else r(s,c,void 0)||(s!==a&&s.push(c),a.push(u))}return a});try{Mr={clone:function(t){return me(t,4)},constant:ve,each:h,filter:Ve,has:qe,isArray:S,isEmpty:function(t){if(null!=t){if(c(t)&&(S(t)||"string"==typeof t||"function"==typeof t.splice||O(t)||Dt(t)||It(t)))return!t.length;var e,n=b(t);if("[object Map]"==n||"[object Set]"==n)return!t.size;if(Bt(t))return!Gt(t).length;for(e in t)if(In.call(t,e))return!1}return!0},isFunction:Q,isUndefined:Ke,keys:y,map:Ze,reduce:Je,size:function(t){var e;return null==t?0:c(t)?"string"==typeof(e=t)||!S(e)&&E(e)&&"[object String]"==w(e)?(e=t,(Nn.test(e)?function(t){for(var e=Dn.lastIndex=0;Dn.test(t);)++e;return e}:jn)(e)):t.length:"[object Map]"==(e=b(t))||"[object Set]"==e?t.size:Gt(t).length},transform:function(t,r,o){var e,n=S(t),i=n||O(t)||Dt(t);return r=g(r),null==o&&(e=t&&t.constructor,o=i?n?new e:[]:_(t)&&Q(e)?fe(Zt(t)):{}),(i?Et:Se)(t,function(t,e,n){return r(o,t,e,n)}),o},union:t,values:un}}catch(s){}var A=Mr=Mr||window._,Gn=I;function I(t){this._isDirected=!A.has(t,"directed")||t.directed,this._isMultigraph=!!A.has(t,"multigraph")&&t.multigraph,this._isCompound=!!A.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=A.constant(void 0),this._defaultEdgeLabelFn=A.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Un(t,e){t[e]?t[e]++:t[e]=1}function Wn(t,e){--t[e]||delete t[e]}function Xn(t,e,n,r){e=""+e,n=""+n;return!t&&n<e&&(t=e,e=n,n=t),e+""+n+""+(A.isUndefined(r)?"\0":r)}function Yn(t,e){return Xn(t,e.v,e.w,e.name)}I.prototype._nodeCount=0,I.prototype._edgeCount=0,I.prototype.isDirected=function(){return this._isDirected},I.prototype.isMultigraph=function(){return this._isMultigraph},I.prototype.isCompound=function(){return this._isCompound},I.prototype.setGraph=function(t){return this._label=t,this},I.prototype.graph=function(){return this._label},I.prototype.setDefaultNodeLabel=function(t){return A.isFunction(t)||(t=A.constant(t)),this._defaultNodeLabelFn=t,this},I.prototype.nodeCount=function(){return this._nodeCount},I.prototype.nodes=function(){return A.keys(this._nodes)},I.prototype.sources=function(){var e=this;return A.filter(this.nodes(),function(t){return A.isEmpty(e._in[t])})},I.prototype.sinks=function(){var e=this;return A.filter(this.nodes(),function(t){return A.isEmpty(e._out[t])})},I.prototype.setNodes=function(t,e){var n=arguments,r=this;return A.each(t,function(t){1<n.length?r.setNode(t,e):r.setNode(t)}),this},I.prototype.setNode=function(t,e){return A.has(this._nodes,t)?1<arguments.length&&(this._nodes[t]=e):(this._nodes[t]=1<arguments.length?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount),this},I.prototype.node=function(t){return this._nodes[t]},I.prototype.hasNode=function(t){return A.has(this._nodes,t)},I.prototype.removeNode=function(t){var e,n=this;return A.has(this._nodes,t)&&(e=function(t){n.removeEdge(n._edgeObjs[t])},delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],A.each(this.children(t),function(t){n.setParent(t)}),delete this._children[t]),A.each(A.keys(this._in[t]),e),delete this._in[t],delete this._preds[t],A.each(A.keys(this._out[t]),e),delete this._out[t],delete this._sucs[t],--this._nodeCount),this},I.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(A.isUndefined(e))e="\0";else{for(var n=e+="";!A.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},I.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},I.prototype.parent=function(t){if(this._isCompound){t=this._parent[t];if("\0"!==t)return t}},I.prototype.children=function(t){var e;return A.isUndefined(t)&&(t="\0"),this._isCompound?(e=this._children[t])?A.keys(e):void 0:"\0"===t?this.nodes():this.hasNode(t)?[]:void 0},I.prototype.predecessors=function(t){t=this._preds[t];if(t)return A.keys(t)},I.prototype.successors=function(t){t=this._sucs[t];if(t)return A.keys(t)},I.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return A.union(e,this.successors(t))},I.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},I.prototype.filterNodes=function(n){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound}),o=(r.setGraph(this.graph()),this),i=(A.each(this._nodes,function(t,e){n(e)&&r.setNode(e,t)}),A.each(this._edgeObjs,function(t){r.hasNode(t.v)&&r.hasNode(t.w)&&r.setEdge(t,o.edge(t))}),{});return this._isCompound&&A.each(r.nodes(),function(t){r.setParent(t,function t(e){var n=o.parent(e);return void 0===n||r.hasNode(n)?i[e]=n:n in i?i[n]:t(n)}(t))}),r},I.prototype.setDefaultEdgeLabel=function(t){return A.isFunction(t)||(t=A.constant(t)),this._defaultEdgeLabelFn=t,this},I.prototype.edgeCount=function(){return this._edgeCount},I.prototype.edges=function(){return A.values(this._edgeObjs)},I.prototype.setPath=function(t,n){var r=this,o=arguments;return A.reduce(t,function(t,e){return 1<o.length?r.setEdge(t,e,n):r.setEdge(t,e),e}),this},I.prototype.setEdge=function(){var t,e=!1,n=arguments[0],n=("object"==typeof n&&null!==n&&"v"in n?(i=n.v,a=n.w,t=n.name,2===arguments.length&&(r=arguments[1],e=!0)):(i=n,a=arguments[1],t=arguments[3],2<arguments.length&&(r=arguments[2],e=!0)),i=""+i,a=""+a,A.isUndefined(t)||(t=""+t),Xn(this._isDirected,i,a,t));if(A.has(this._edgeLabels,n))e&&(this._edgeLabels[n]=r);else{if(!A.isUndefined(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(i),this.setNode(a),this._edgeLabels[n]=e?r:this._defaultEdgeLabelFn(i,a,t);e=this._isDirected,r=""+(r=i),o=""+(o=a),!e&&o<r&&(e=r,r=o,o=e),e={v:r,w:o},(o=t)&&(e.name=o);var r,o=e,i=o.v,a=o.w;Object.freeze(o),this._edgeObjs[n]=o,Un(this._preds[a],i),Un(this._sucs[i],a),this._in[a][n]=o,this._out[i][n]=o,this._edgeCount++}return this},I.prototype.edge=function(t,e,n){t=1===arguments.length?Yn(this._isDirected,t):Xn(this._isDirected,t,e,n);return this._edgeLabels[t]},I.prototype.hasEdge=function(t,e,n){t=1===arguments.length?Yn(this._isDirected,t):Xn(this._isDirected,t,e,n);return A.has(this._edgeLabels,t)},I.prototype.removeEdge=function(t,e,n){var n=1===arguments.length?Yn(this._isDirected,arguments[0]):Xn(this._isDirected,t,e,n),r=this._edgeObjs[n];return r&&(t=r.v,e=r.w,delete this._edgeLabels[n],delete this._edgeObjs[n],Wn(this._preds[e],t),Wn(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this},I.prototype.inEdges=function(t,e){var t=this._in[t];if(t)return t=A.values(t),e?A.filter(t,function(t){return t.v===e}):t},I.prototype.outEdges=function(t,e){var t=this._out[t];if(t)return t=A.values(t),e?A.filter(t,function(t){return t.w===e}):t},I.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))};k={Graph:Gn,version:"2.1.8"},i={write:function(t){var r,o,e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:(o=t,A.map(o.nodes(),function(t){var e=o.node(t),n=o.parent(t),t={v:t};return A.isUndefined(e)||(t.value=e),A.isUndefined(n)||(t.parent=n),t})),edges:(r=t,A.map(r.edges(),function(t){var e=r.edge(t),n={v:t.v,w:t.w};return A.isUndefined(t.name)||(n.name=t.name),A.isUndefined(e)||(n.value=e),n}))};return A.isUndefined(t.graph())||(e.value=A.clone(t.graph())),e},read:function(t){var e=new Gn(t.options).setGraph(t.value);return A.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),A.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}};var Vn=T;function T(){this._arr=[],this._keyIndices={}}T.prototype.size=function(){return this._arr.length},T.prototype.keys=function(){return this._arr.map(function(t){return t.key})},T.prototype.has=function(t){return A.has(this._keyIndices,t)},T.prototype.priority=function(t){t=this._keyIndices[t];if(void 0!==t)return this._arr[t].priority},T.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},T.prototype.add=function(t,e){var n,r,o=this._keyIndices;return t=String(t),!A.has(o,t)&&(r=(n=this._arr).length,o[t]=r,n.push({key:t,priority:e}),this._decrease(r),!0)},T.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},T.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},T.prototype._heapify=function(t){var e=this._arr,n=2*t,r=1+n,o=t;n<e.length&&(o=e[n].priority<e[o].priority?n:o,(o=r<e.length?e[r].priority<e[o].priority?r:o:o)!==t)&&(this._swap(t,o),this._heapify(o))},T.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},T.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,o=n[t],i=n[e];n[t]=i,n[e]=o,r[i.key]=t,r[o.key]=e};function Hn(e,t,n,r){var o=e,i=String(t),a=n||Kn,s=r||function(t){return e.outEdges(t)};function c(t){var e=t.v!==u?t.v:t.w,n=d[e],r=a(t),o=l.distance+r;if(r<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+r);o<n.distance&&(n.distance=o,n.predecessor=u,h.decrease(e,o))}var u,l,d={},h=new Vn;for(o.nodes().forEach(function(t){var e=t===i?0:Number.POSITIVE_INFINITY;d[t]={distance:e},h.add(t,e)});0<h.size()&&(u=h.removeMin(),(l=d[u]).distance!==Number.POSITIVE_INFINITY);)s(u).forEach(c);return d}function qn(i){var a=0,s=[],c={},u=[];return i.nodes().forEach(function(t){A.has(c,t)||function e(t){var n=c[t]={onStack:!0,lowlink:a,index:a++};if(s.push(t),i.successors(t).forEach(function(t){A.has(c,t)?c[t].onStack&&(n.lowlink=Math.min(n.lowlink,c[t].index)):(e(t),n.lowlink=Math.min(n.lowlink,c[t].lowlink))}),n.lowlink===n.index){for(var r,o=[];r=s.pop(),c[r].onStack=!1,o.push(r),t!==r;);u.push(o)}}(t)}),u}var Kn=A.constant(1),Zn=A.constant(1),$n=Qn;function Qn(n){var r={},o={},i=[];if(A.each(n.sinks(),function t(e){if(A.has(o,e))throw new Jn;A.has(r,e)||(o[e]=!0,r[e]=!0,A.each(n.predecessors(e),t),delete o[e],i.push(e))}),A.size(r)!==n.nodeCount())throw new Jn;return i}function Jn(){}(Qn.CycleException=Jn).prototype=new Error;function tr(e,t,n){A.isArray(t)||(t=[t]);var r=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],i={};return A.each(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(n,t,r,o,i,a){A.has(o,t)||(o[t]=!0,r||a.push(t),A.each(i(t),function(t){e(n,t,r,o,i,a)}),r&&a.push(t))}(e,t,"post"===n,i,r,o)}),o}u={Graph:k.Graph,json:i,alg:{components:function(e){var n,r={},o=[];function i(t){A.has(r,t)||(r[t]=!0,n.push(t),A.each(e.successors(t),i),A.each(e.predecessors(t),i))}return A.each(e.nodes(),function(t){n=[],i(t),n.length&&o.push(n)}),o},dijkstra:Hn,dijkstraAll:function(n,r,o){return A.transform(n.nodes(),function(t,e){t[e]=Hn(n,e,r,o)},{})},findCycles:function(e){return A.filter(qn(e),function(t){return 1<t.length||1===t.length&&e.hasEdge(t[0],t[0])})},floydWarshall:function(e,t,n){return r=t||Zn,o=n||function(t){return e.outEdges(t)},a={},(s=e.nodes()).forEach(function(n){a[n]={},a[n][n]={distance:0},s.forEach(function(t){n!==t&&(a[n][t]={distance:Number.POSITIVE_INFINITY})}),o(n).forEach(function(t){var e=t.v===n?t.w:t.v,t=r(t);a[n][e]={distance:t,predecessor:n}})}),s.forEach(function(o){var i=a[o];s.forEach(function(t){var r=a[t];s.forEach(function(t){var e=r[o],n=i[t],t=r[t],e=e.distance+n.distance;e<t.distance&&(t.distance=e,t.predecessor=n.predecessor)})})}),a;var r,o,a,s},isAcyclic:function(t){try{$n(t)}catch(t){if(t instanceof $n.CycleException)return!1;throw t}return!0},postorder:function(t,e){return tr(t,e,"post")},preorder:function(t,e){return tr(t,e,"pre")},prim:function(t,r){var o,e=new Gn,i={},a=new Vn;function n(t){var e=t.v===o?t.w:t.v,n=a.priority(e);void 0!==n&&(t=r(t))<n&&(i[e]=o,a.decrease(e,t))}if(0!==t.nodeCount()){A.each(t.nodes(),function(t){a.add(t,Number.POSITIVE_INFINITY),e.setNode(t)}),a.decrease(t.nodes()[0],0);for(var s=!1;0<a.size();){if(o=a.removeMin(),A.has(i,o))e.setEdge(o,i[o]);else{if(s)throw new Error("Input graph is not connected: "+t);s=!0}t.nodeEdges(o).forEach(n)}}return e},tarjan:qn,topsort:$n},version:k.version};try{fr=u}catch(s){}function er(t,e,n){var r;return!!_(n)&&!!("number"==(r=typeof e)?c(n)&&jt(e,n.length):"string"==r&&e in n)&&U(n[e],t)}function nr(t){return t?1/0===(t=function(t){if("number"==typeof t)return t;if(p(t))return NaN;if(_(t)&&(e="function"==typeof t.valueOf?t.valueOf():t,t=_(e)?e+"":e),"string"!=typeof t)return 0===t?t:+t;t=t.replace(mr,"");var e=br.test(t);return e||xr.test(t)?wr(t.slice(2),e?2:8):vr.test(t)?NaN:+t}(t))||-1/0===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function rr(t,e,n){var r,o,i,a,s=Object(t);return c(t)||(r=g(e),t=y(t),e=function(t){return r(s[t],t,s)}),e=e,n=n,-1<(n=(i=null==(o=t)?0:o.length)?((a=null!=n&&(n=nr(n),a=n%1,n==n)?a?n-a:n:0)<0&&(a=_r(i+a,0)),on(o,g(e),a)):-1)?s[r?t[n]:n]:void 0}function or(t){return null!=t&&t.length?en(t,1):[]}function ir(t,e,n){for(var r=-1,o=t.length;++r<o;){var i,a,s=t[r],c=e(s);null!=c&&(void 0===i?c==c&&!p(c):n(c,i))&&(i=c,a=s)}return a}function ar(t,e){return e<t}function sr(t,e,n){(void 0===n||U(t[e],n))&&(void 0!==n||e in t)||Ot(t,e,n)}function cr(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function ur(t,e){return t<e}function lr(t,e){for(var n=t,r=e,o=-1,i=r.length,a={};++o<i;){var s=r[o],c=_n(n,s);On(t,s)&&function(t,e,n,r){if(_(t))for(var o=-1,i=(e=xn(e,t)).length,a=i-1,s=t;null!=s&&++o<i;){var c,u=wn(e[o]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return;o!=a&&(c=s[u],void 0===(l=r?r(c,u,s):void 0))&&(l=_(c)?c:jt(e[o+1])?[]:{}),kt(s,u,l),s=s[u]}}(a,xn(s,n),c)}return a}function dr(t,e){if(t!==e){var n=void 0!==t,r=null===t,o=t==t,i=p(t),a=void 0!==e,s=null===e,c=e==e,u=p(e);if(!s&&!u&&!i&&e<t||i&&a&&c&&!s&&!u||r&&a&&c||!n&&c||!o)return 1;if(!r&&!i&&!u&&t<e||u&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!c)return-1}return 0}function hr(t,r,d){r=r.length?mn(r,function(e){return S(e)?function(t){return _n(t,1===e.length?e[0]:e)}:e}):[f];var o=-1,e=(r=mn(r,yt(g)),Tn(t,function(e,t,n){return{criteria:mn(r,function(t){return t(e)}),index:++o,value:e}})),n=e.length;for(e.sort(function(t,e){for(var n=t,r=e,o=d,i=-1,a=n.criteria,s=r.criteria,c=a.length,u=o.length;++i<c;){var l=dr(a[i],s[i]);if(l)return i>=u?l:l*("desc"==o[i]?-1:1)}return n.index-r.index});n--;)e[n]=e[n].value;return e}var fr,pr,C=fr=fr||window.graphlib,gr=Object.prototype,yr=gr.hasOwnProperty,e=rn(function(t,e){t=Object(t);var n=-1,r=e.length,o=2<r?e[2]:void 0;for(o&&er(e[0],e[1],o)&&(r=1);++n<r;)for(var i=e[n],a=M(i),s=-1,c=a.length;++s<c;){var u=a[s],l=t[u];(void 0===l||U(l,gr[u])&&!yr.call(t,u))&&(t[u]=i[u])}return t}),mr=/^\s+|\s+$/g,vr=/^[-+]0x[0-9a-f]+$/i,br=/^0b[01]+$/i,xr=/^0o[0-7]+$/i,wr=parseInt,_r=Math.max,Er=Function.prototype.toString,Sr=Object.prototype.hasOwnProperty,Or=Er.call(Object),l=(pr=function(t,e,n){!function g(y,m,v,b,x){y!==m&&be(m,function(t,e){var n,r,o,i,a,s,c,u,l,d,h,f,p;x=x||new _t,_(t)?(r=m,i=v,a=g,s=b,c=x,h=cr(n=y,o=e),f=cr(r,o),(p=c.get(f))?sr(n,o,p):((r=void 0===(p=s?s(h,f,o+"",n,r,c):void 0))&&(l=!(u=S(f))&&O(f),d=!u&&!l&&Dt(f),p=f,u||l||d?p=S(h)?h:cn(h)?vt(h):l?Xt(f,!(r=!1)):d?de(f,!(r=!1)):[]:function(t){if(E(t)&&"[object Object]"==w(t))return null===(t=Zt(t))||"function"==typeof(t=Sr.call(t,"constructor")&&t.constructor)&&t instanceof t&&Er.call(t)==Or}(f)||It(f)?It(p=h)?p=ft(h,M(h)):_(h)&&!Q(h)||(p=wt(f)):r=!1),r&&(c.set(f,p),a(p,f,i,s,c),c.delete(f)),sr(n,o,p))):(u=b?b(cr(y,e),t,e+"",y,m,x):void 0,sr(y,e,u=void 0===u?t:u))},M)}(t,e,n)},rn(function(t,e){var n=-1,r=e.length,o=1<r?e[r-1]:void 0,i=2<r?e[2]:void 0,o=3<pr.length&&"function"==typeof o?(r--,o):void 0;for(i&&er(e[0],e[1],i)&&(r=1),t=Object(t);++n<r;){var a=e[n];a&&pr(t,a,n)}return t})),Mr=zn(nn(t=function(t,e){return null==t?{}:lr(t,e)},void 0,or),t+""),kr=Math.ceil,Cr=Math.max,i=rn(function(t,e){var n;return null==t?[]:(1<(n=e.length)&&er(t,e[0],e[1])?e=[]:2<n&&er(e[0],e[1],e[2])&&(e=[e[0]]),hr(t,en(e,1),[]))}),Ar=0;try{Ir={cloneDeep:function(t){return me(t,5)},constant:ve,defaults:e,each:h,filter:Ve,find:rr,flatten:or,forEach:we,forIn:function(t,e){return null==t?t:be(t,xe(e),M)},has:qe,isUndefined:Ke,last:function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},map:Ze,mapValues:function(t,r){var o={};return r=g(r),Se(t,function(t,e,n){Ot(o,e,r(t,e,n))}),o},max:function(t){return t&&t.length?ir(t,f,ar):void 0},merge:l,min:function(t){return t&&t.length?ir(t,f,ur):void 0},minBy:function(t,e){return t&&t.length?ir(t,g(e),ur):void 0},now:function(){return o.Date.now()},pick:Mr,range:function(t,e,n){n&&"number"!=typeof n&&er(t,e,n)&&(e=n=void 0),t=nr(t),void 0===e?(e=t,t=0):e=nr(e);for(var r=t,o=e,i=n=void 0===n?t<e?1:-1:nr(n),a=-1,s=Cr(kr((o-r)/(i||1)),0),c=Array(s);s--;)c[++a]=r,r+=i;return c},reduce:Je,sortBy:i,uniqueId:function(t){var e=++Ar;return bn(t)+e},values:un,zipObject:function(t,e){for(var n=t||[],r=e||[],o=kt,i=-1,a=n.length,s=r.length,c={};++i<a;){var u=i<s?r[i]:void 0;o(c,n[i],u)}return c}}}catch(s){}var Ir,j=Ir=Ir||window._,Tr=jr;function jr(){var t={};t._next=t._prev=t,this._sentinel=t}function Nr(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function Dr(t,e){if("_next"!==t&&"_prev"!==t)return e}jr.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return Nr(e),e},jr.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&Nr(t),t._next=e._next,e._next._prev=t,(e._next=t)._prev=e},jr.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,Dr)),n=n._prev;return"["+t.join(", ")+"]"};var Pr=C.Graph,Lr=j.constant(1);function Rr(r,o,i,t,a){var s=a?[]:void 0;return j.forEach(r.inEdges(t.v),function(t){var e=r.edge(t),n=r.node(t.v);a&&s.push({v:t.v,w:t.w}),n.out-=e,Br(o,i,n)}),j.forEach(r.outEdges(t.v),function(t){var e=r.edge(t),t=t.w,t=r.node(t);t.in-=e,Br(o,i,t)}),r.removeNode(t.v),s}function Br(t,e,n){(n.out?n.in?t[n.out-n.in+e]:t[t.length-1]:t[0]).enqueue(n)}var zr=C.Graph,N={addDummyNode:Fr,simplify:function(r){var o=(new zr).setGraph(r.graph());return j.forEach(r.nodes(),function(t){o.setNode(t,r.node(t))}),j.forEach(r.edges(),function(t){var e=o.edge(t.v,t.w)||{weight:0,minlen:1},n=r.edge(t);o.setEdge(t.v,t.w,{weight:e.weight+n.weight,minlen:Math.max(e.minlen,n.minlen)})}),o},asNonCompoundGraph:function(e){var n=new zr({multigraph:e.isMultigraph()}).setGraph(e.graph());return j.forEach(e.nodes(),function(t){e.children(t).length||n.setNode(t,e.node(t))}),j.forEach(e.edges(),function(t){n.setEdge(t,e.edge(t))}),n},successorWeights:function(n){var t=j.map(n.nodes(),function(t){var e={};return j.forEach(n.outEdges(t),function(t){e[t.w]=(e[t.w]||0)+n.edge(t).weight}),e});return j.zipObject(n.nodes(),t)},predecessorWeights:function(n){var t=j.map(n.nodes(),function(t){var e={};return j.forEach(n.inEdges(t),function(t){e[t.v]=(e[t.v]||0)+n.edge(t).weight}),e});return j.zipObject(n.nodes(),t)},intersectRect:function(t,e){var n,r=t.x,o=t.y,i=e.x-r,e=e.y-o,a=t.width/2,t=t.height/2;if(i||e)return t=Math.abs(e)*a>Math.abs(i)*t?(n=(t=e<0?-t:t)*i/e,t):(n=a=i<0?-a:a)*e/i,{x:r+n,y:o+t};throw new Error("Not possible to find intersection inside of the rectangle")},buildLayerMatrix:function(r){var o=j.map(j.range(Gr(r)+1),function(){return[]});return j.forEach(r.nodes(),function(t){var e=r.node(t),n=e.rank;j.isUndefined(n)||(o[n][e.order]=t)}),o},normalizeRanks:function(e){var n=j.min(j.map(e.nodes(),function(t){return e.node(t).rank}));j.forEach(e.nodes(),function(t){t=e.node(t);j.has(t,"rank")&&(t.rank-=n)})},removeEmptyRanks:function(n){var r=j.min(j.map(n.nodes(),function(t){return n.node(t).rank})),o=[],i=(j.forEach(n.nodes(),function(t){var e=n.node(t).rank-r;o[e]||(o[e]=[]),o[e].push(t)}),0),a=n.graph().nodeRankFactor;j.forEach(o,function(t,e){j.isUndefined(t)&&e%a!=0?--i:i&&j.forEach(t,function(t){n.node(t).rank+=i})})},addBorderNode:function(t,e,n,r){var o={width:0,height:0};return 4<=arguments.length&&(o.rank=n,o.order=r),Fr(t,"border",o,e)},maxRank:Gr,partition:function(t,e){var n={lhs:[],rhs:[]};return j.forEach(t,function(t){(e(t)?n.lhs:n.rhs).push(t)}),n},time:function(t,e){var n=j.now();try{return e()}finally{console.log(t+" time: "+(j.now()-n)+"ms")}},notime:function(t,e){return e()}};function Fr(t,e,n,r){for(var o;o=j.uniqueId(r),t.hasNode(o););return n.dummy=e,t.setNode(o,n),o}function Gr(e){return j.max(j.map(e.nodes(),function(t){t=e.node(t).rank;if(!j.isUndefined(t))return t}))}function Ur(h){h.graph().dummyChains=[],j.forEach(h.edges(),function(t){var e,n,r,o=h,i=t,a=i.v,s=o.node(a).rank,t=i.w,c=o.node(t).rank,u=i.name,l=o.edge(i),d=l.labelRank;if(c!==s+1){for(o.removeEdge(i),r=0,++s;s<c;++r,++s)l.points=[],e=N.addDummyNode(o,"edge",n={width:0,height:0,edgeLabel:l,edgeObj:i,rank:s},"_d"),s===d&&(n.width=l.width,n.height=l.height,n.dummy="edge-label",n.labelpos=l.labelpos),o.setEdge(a,e,{weight:l.weight},u),0===r&&o.graph().dummyChains.push(e),a=e;o.setEdge(a,t,{weight:l.weight},u)}})}function Wr(r){var o={};j.forEach(r.sources(),function e(t){var n=r.node(t);if(j.has(o,t))return n.rank;o[t]=!0;t=j.min(j.map(r.outEdges(t),function(t){return e(t.w)-r.edge(t).minlen}));return t!==Number.POSITIVE_INFINITY&&null!=t||(t=0),n.rank=t})}function Xr(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}function Yr(t){var e,n=new Vr({directed:!1}),r=t.nodes()[0],o=t.nodeCount();for(n.setNode(r,{});function(o,i){return j.forEach(o.nodes(),function n(r){j.forEach(i.nodeEdges(r),function(t){var e=t.v,e=r===e?t.w:e;o.hasNode(e)||Hr(i,t)||(o.setNode(e,{}),o.setEdge(r,e,{}),n(e))})}),o.nodeCount()}(n,t)<o;)e=function(e,n){return j.minBy(n.edges(),function(t){if(e.hasNode(t.v)!==e.hasNode(t.w))return Hr(n,t)})}(n,t),e=n.hasNode(e.v)?Hr(t,e):-Hr(t,e),function(t,e,n){j.forEach(t.nodes(),function(t){e.node(t).rank+=n})}(n,t,e);return n}var Vr=C.Graph,Hr=Xr;var qr=Xr,Kr=Wr,Zr=C.alg.preorder,$r=C.alg.postorder,Qr=N.simplify,Jr=D;function D(t){t=Qr(t),Kr(t);var e,n=Yr(t);for(no(n),to(n,t);e=ro(n);)io(n,t,e,oo(n,t,e))}function to(o,i){var t=(t=$r(o,o.nodes())).slice(0,t.length-1);j.forEach(t,function(t){var e,n,r;n=i,t=t,r=(e=o).node(t).parent,e.edge(t,r).cutvalue=eo(e,n,t)})}function eo(r,o,i){var a=r.node(i).parent,s=!0,t=o.edge(i,a),c=0;return t||(s=!1,t=o.edge(a,i)),c=t.weight,j.forEach(o.nodeEdges(i),function(t){var e=t.v===i,n=e?t.w:t.v;n!==a&&(e=e===s,t=o.edge(t).weight,c+=e?t:-t,r.hasEdge(i,n))&&(t=r.edge(i,n).cutvalue,c+=e?-t:t)}),c}function no(t,e){arguments.length<2&&(e=t.nodes()[0]),function e(n,r,o,i,t){var a=o,s=n.node(i);return r[i]=!0,j.forEach(n.neighbors(i),function(t){j.has(r,t)||(o=e(n,r,o,t,i))}),s.low=a,s.lim=o++,t?s.parent=t:delete s.parent,o}(t,{},1,e)}function ro(e){return j.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function oo(e,n,t){var r=t.v,o=t.w,t=(n.hasEdge(r,o)||(r=t.w,o=t.v),e.node(r)),r=e.node(o),i=t,a=!1,o=(t.lim>r.lim&&(i=r,a=!0),j.filter(n.edges(),function(t){return a===ao(0,e.node(t.v),i)&&a!==ao(0,e.node(t.w),i)}));return j.minBy(o,function(t){return qr(n,t)})}function io(t,e,n,r){var o,i,a=n.v;t.removeEdge(a,n.w),t.setEdge(r.v,r.w,{}),no(t),to(t,e),o=t,i=e,a=j.find(o.nodes(),function(t){return!i.node(t).parent}),a=(a=Zr(o,a)).slice(1),j.forEach(a,function(t){var e=o.node(t).parent,n=i.edge(t,e),r=!1;n||(n=i.edge(e,t),r=!0),i.node(t).rank=i.node(e).rank+(r?n.minlen:-n.minlen)})}function ao(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}D.initLowLimValues=no,D.initCutValues=to,D.calcCutValue=eo,D.leaveEdge=ro,D.enterEdge=oo,D.exchangeEdges=io;var so=Wr,co=so;function uo(t){Jr(t)}function lo(e){var o,i,n,r=N.addDummyNode(e,"root",{},"_root"),a=(o=e,i={},j.forEach(o.children(),function(t){!function e(t,n){var r=o.children(t);r&&r.length&&j.forEach(r,function(t){e(t,n+1)}),i[t]=n}(t,1)}),i),s=j.max(j.values(a))-1,c=2*s+1,u=(e.graph().nestingRoot=r,j.forEach(e.edges(),function(t){e.edge(t).minlen*=c}),n=e,j.reduce(n.edges(),function(t,e){return t+n.edge(e).weight},0)+1);j.forEach(e.children(),function(t){!function o(i,a,s,c,u,l,d){var h,f,t,e=i.children(d);e.length?(h=N.addBorderNode(i,"_bt"),f=N.addBorderNode(i,"_bb"),t=i.node(d),i.setParent(h,d),t.borderTop=h,i.setParent(f,d),t.borderBottom=f,j.forEach(e,function(t){o(i,a,s,c,u,l,t);var e=i.node(t),n=e.borderTop||t,t=e.borderBottom||t,e=e.borderTop?c:2*c,r=n!==t?1:u-l[d]+1;i.setEdge(h,n,{weight:e,minlen:r,nestingEdge:!0}),i.setEdge(t,f,{weight:e,minlen:r,nestingEdge:!0})}),i.parent(d)||i.setEdge(a,h,{weight:0,minlen:u+l[d]})):d!==a&&i.setEdge(a,d,{weight:0,minlen:s})}(e,r,c,u,s,a,t)}),e.graph().nodeRankFactor=c}function ho(t,e,n,r,o,i){var a=o[e][i-1],n=N.addDummyNode(t,"border",{width:0,height:0,rank:i,borderType:e},n);o[e][i]=n,t.setParent(n,r),a&&t.setEdge(a,n,{weight:1})}function fo(e){j.forEach(e.nodes(),function(t){po(e.node(t))}),j.forEach(e.edges(),function(t){po(e.edge(t))})}function po(t){var e=t.width;t.width=t.height,t.height=e}function go(t){t.y=-t.y}function yo(t){var e=t.x;t.x=t.y,t.y=e}function mo(t,e){for(var n=0,r=1;r<e.length;++r)n+=function(e,t,n){for(var r=j.zipObject(n,j.map(n,function(t,e){return e})),t=j.flatten(j.map(t,function(t){return j.sortBy(j.map(e.outEdges(t),function(t){return{pos:r[t.w],weight:e.edge(t).weight}}),"pos")}),!0),o=1;o<n.length;)o<<=1;var i=2*o-1,a=(--o,j.map(new Array(i),function(){return 0})),s=0;return j.forEach(t.forEach(function(t){var e=t.pos+o;a[e]+=t.weight;for(var n=0;0<e;)e%2&&(n+=a[e+1]),a[e=e-1>>1]+=t.weight;s+=t.weight*n})),s}(t,e[r-1],e[r]);return n}function vo(t,e,n){for(var r;e.length&&(r=j.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}function bo(t){var r,o,e,i,n=N.maxRank(t),a=Eo(t,j.range(1,n+1),"inEdges"),s=Eo(t,j.range(n-1,-1,-1),"outEdges");r=t,o={},n=j.filter(r.nodes(),function(t){return!r.children(t).length}),e=j.max(j.map(n,function(t){return r.node(t).rank})),i=j.map(j.range(e+1),function(){return[]}),e=j.sortBy(n,function(t){return r.node(t).rank}),j.forEach(e,function t(e){var n;j.has(o,e)||(o[e]=!0,n=r.node(e),i[n.rank].push(e),j.forEach(r.successors(e),t))}),So(t,i);for(var c,u=Number.POSITIVE_INFINITY,l=0,d=0;d<4;++l,++d){(function(t,e){var r=new _o;j.forEach(t,function(n){var o,i,a,s,t=n.graph().root,t=xo(n,t,r,e);j.forEach(t.vs,function(t,e){n.node(t).order=e}),o=n,i=r,t=t.vs,s={},j.forEach(t,function(t){for(var e,n,r=o.parent(t);r;){if((e=o.parent(r))?(n=s[e],s[e]=r):(n=a,a=r),n&&n!==r)return void i.setEdge(n,r);r=e}})})})(l%2?a:s,2<=l%4);var h=N.buildLayerMatrix(t),f=mo(t,h);f<u&&(d=0,c=j.cloneDeep(h),u=f)}So(t,c)}var xo=function n(r,t,o,i){var a,e,s,c,u,l,d,h,f,p=r.children(t),t=r.node(t),g=t?t.borderLeft:void 0,y=t?t.borderRight:void 0,m={},v=(g&&(p=j.filter(p,function(t){return t!==g&&t!==y})),a=r,t=p,j.map(t,function(t){var e=a.inEdges(t);return e.length?{v:t,barycenter:(e=j.reduce(e,function(t,e){var n=a.edge(e),e=a.node(e.v);return{sum:t.sum+n.weight*e.order,weight:t.weight+n.weight}},{sum:0,weight:0})).sum/e.weight,weight:e.weight}:{v:t}})),p=(j.forEach(v,function(t){var e;r.children(t.v).length&&(e=n(r,t.v,o,i),m[t.v]=e,j.has(e,"barycenter"))&&(e=e,j.isUndefined((t=t).barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight))}),function(t){var r={},n=(j.forEach(v,function(t,e){e=r[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};j.isUndefined(t.barycenter)||(e.barycenter=t.barycenter,e.weight=t.weight)}),j.forEach(t.edges(),function(t){var e=r[t.v],n=r[t.w];j.isUndefined(e)||j.isUndefined(n)||(n.indegree++,e.out.push(r[t.w]))}),j.filter(r,function(t){return!t.indegree})),e=[];function o(o){return function(t){var e,n,r;t.merged||(j.isUndefined(t.barycenter)||j.isUndefined(o.barycenter)||t.barycenter>=o.barycenter)&&(t=t,r=n=0,(e=o).weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0)}}for(;n.length;){var i=n.pop();e.push(i),j.forEach(i.in.reverse(),o(i)),j.forEach(i.out,function(e){return function(t){t.in.push(e),0==--t.indegree&&n.push(t)}}(i))}return j.map(j.filter(e,function(t){return!t.merged}),function(t){return j.pick(t,["vs","i","barycenter","weight"])})}(o)),t=(e=m,j.forEach(p,function(t){t.vs=j.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)}),t=i,p=N.partition(p,function(t){return j.has(t,"barycenter")}),f=p.lhs,c=j.sortBy(p.rhs,function(t){return-t.i}),u=[],h=d=l=0,f.sort((s=!!t,function(t,e){return t.barycenter<e.barycenter?-1:e.barycenter<t.barycenter?1:s?e.i-t.i:t.i-e.i})),h=vo(u,c,h),j.forEach(f,function(t){h+=t.vs.length,u.push(t.vs),l+=t.barycenter*t.weight,d+=t.weight,h=vo(u,c,h)}),p={vs:j.flatten(u,!0)},d&&(p.barycenter=l/d,p.weight=d),p);return g&&(t.vs=j.flatten([g,t.vs,y],!0),r.predecessors(g).length)&&(f=r.node(r.predecessors(g)[0]),p=r.node(r.predecessors(y)[0]),j.has(t,"barycenter")||(t.barycenter=0,t.weight=0),t.barycenter=(t.barycenter*t.weight+f.order+p.order)/(t.weight+2),t.weight+=2),t},wo=C.Graph,_o=C.Graph;function Eo(e,t,r){return j.map(t,function(t){return n=t,i=r,a=function(t){for(var e;t.hasNode(e=j.uniqueId("_root")););return e}(o=e),s=new wo({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(t){return o.node(t)}),j.forEach(o.nodes(),function(r){var t=o.node(r),e=o.parent(r);(t.rank===n||t.minRank<=n&&n<=t.maxRank)&&(s.setNode(r),s.setParent(r,e||a),j.forEach(o[i](r),function(t){var e=t.v===r?t.w:t.v,n=s.edge(e,r),n=j.isUndefined(n)?0:n.weight;s.setEdge(e,r,{weight:o.edge(t).weight+n})}),j.has(t,"minRank"))&&s.setNode(r,{borderLeft:t.borderLeft[n],borderRight:t.borderRight[n]})}),s;var o,n,i,a,s})}function So(n,t){j.forEach(t,function(t){j.forEach(t,function(t,e){n.node(t).order=e})})}var Oo=C.Graph;function Mo(t,e,n){n<e&&(r=e,e=n,n=r);var r=t[e];r||(t[e]=r={}),r[n]=!0}function ko(O){var M,s,a,u,l,t=N.buildLayerMatrix(O),k=j.merge((u=O,l={},j.reduce(t,function(t,r){var i=0,a=0,s=t.length,c=j.last(r);return j.forEach(r,function(t,e){var n=function(e,t){if(e.node(t).dummy)return j.find(e.predecessors(t),function(t){return e.node(t).dummy})}(u,t),o=n?u.node(n).order:s;!n&&t!==c||(j.forEach(r.slice(a,e+1),function(r){j.forEach(u.predecessors(r),function(t){var e=u.node(t),n=e.order;!(n<i||o<n)||e.dummy&&u.node(r).dummy||Mo(l,t,r)})}),a=e+1,i=o)}),r}),l),(s=O,a={},j.reduce(t,function(n,r){var o,i=-1,a=0;return j.forEach(r,function(t,e){"border"===s.node(t).dummy&&(t=s.predecessors(t)).length&&(o=s.node(t[0]).order,c(r,a,e,i,o),a=e,i=o),c(r,a,r.length,o,n.length)}),r}),a)),C={};function c(e,t,n,r,o){var i;j.forEach(j.range(t,n),function(t){i=e[t],s.node(i).dummy&&j.forEach(s.predecessors(i),function(t){var e=s.node(t);e.dummy&&(e.order<r||o<e.order)&&Mo(a,t,i)})})}j.forEach(["u","d"],function(S){M="u"===S?t:j.values(t).reverse(),j.forEach(["l","r"],function(t){"r"===t&&(M=j.map(M,function(t){return j.values(t).reverse()}));var r,e,n,i,a,o,s,c,u,l,d,h,f,p,g,y,m,v,b,x,w=("u"===S?O.predecessors:O.successors).bind(O),w=(g=M,y=k,m=w,v={},b={},x={},j.forEach(g,function(t){j.forEach(t,function(t,e){x[b[v[t]=t]=t]=e})}),j.forEach(g,function(t){var u=-1;j.forEach(t,function(t){var e,n,r,o=m(t);if(o.length)for(var i=((o=j.sortBy(o,function(t){return x[t]})).length-1)/2,a=Math.floor(i),s=Math.ceil(i);a<=s;++a){var c=o[a];b[t]===t&&u<x[c]&&(r=void 0,(n=c)<(e=t)&&(r=e,e=n,n=r),!j.has(y[e],n))&&(b[c]=t,b[t]=v[t]=v[c],u=x[c])}})}),{root:v,align:b}),_=(r=O,g=M,n=w.align,h={},i=r,g=g,a=e=w.root,o=w="r"===t,l=new Oo,_=i.graph(),s=_.nodesep,c=_.edgesep,u=o,d=function(t,e,n){var r,o=t.node(e),i=t.node(n),e=0;if(e+=o.width/2,j.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":r=-o.width/2;break;case"r":r=o.width/2}if(r&&(e+=u?r:-r),r=0,e=(e=(e+=(o.dummy?c:s)/2)+(i.dummy?c:s)/2)+i.width/2,j.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":r=i.width/2;break;case"r":r=-i.width/2}return r&&(e+=u?r:-r),r=0,e},j.forEach(g,function(t){var o;j.forEach(t,function(t){var e,n,r=a[t];l.setNode(r),o&&(e=a[o],n=l.edge(e,r),l.setEdge(e,r,Math.max(d(i,t,o),n||0))),o=t})}),p=w?"borderLeft":"borderRight",E(function(t){h[t]=f.inEdges(t).reduce(function(t,e){return Math.max(t,h[e.v]+f.edge(e))},0)},(f=l).predecessors.bind(f)),E(function(t){var e=f.outEdges(t).reduce(function(t,e){return Math.min(t,h[e.w]-f.edge(e))},Number.POSITIVE_INFINITY),n=r.node(t);e!==Number.POSITIVE_INFINITY&&n.borderType!==p&&(h[t]=Math.max(h[t],e))},f.successors.bind(f)),j.forEach(n,function(t){h[t]=h[e[t]]}),h);function E(t,e){for(var n=f.nodes(),r=n.pop(),o={};r;)o[r]?t(r):(o[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}"r"===t&&(_=j.mapValues(_,function(t){return-t})),C[S+t]=_})}),o=O;var o,n,r,d,h,f,p,e=j.minBy(j.values(C),function(t){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return j.forIn(t,function(t,e){e=o.node(e).width/2;n=Math.max(t+e,n),r=Math.min(t-e,r)}),n-r});return d=C,h=e,e=j.values(h),f=j.min(e),p=j.max(e),j.forEach(["u","d"],function(i){j.forEach(["l","r"],function(t){var e,n,r=i+t,o=d[r];o!==h&&(n=j.values(o),e="l"===t?f-j.min(n):p-j.max(n))&&(d[r]=j.mapValues(o,function(t){return t+e}))})}),n=C,r=O.graph().align,j.mapValues(n.ul,function(t,e){return r?n[r.toLowerCase()][e]:((e=j.sortBy(j.map(n,e)))[1]+e[2])/2})}var Co=N.normalizeRanks,Ao=N.removeEmptyRanks,P=N,Io=C.Graph,To=["nodesep","edgesep","ranksep","marginx","marginy"],jo={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},No=["acyclicer","ranker","rankdir","align"],Do=["width","height"],Po={width:0,height:0},Lo=["minlen","weight","width","height","labeloffset"],Ro={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Bo=["labelpos"];function zo(t,e){return j.mapValues(j.pick(t,e),Number)}function Fo(t){var n={};return j.forEach(t,function(t,e){n[e.toLowerCase()]=t}),n}var Go=C.Graph,k={graphlib:C,layout:function(i,t){var n=t&&t.debugTiming?P.time:P.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return n=i,r=new Io({multigraph:!0,compound:!0}),t=Fo(n.graph()),r.setGraph(j.merge({},jo,zo(t,To),j.pick(t,No))),j.forEach(n.nodes(),function(t){var e=Fo(n.node(t));r.setNode(t,j.defaults(zo(e,Do),Po)),r.setParent(t,n.parent(t))}),j.forEach(n.edges(),function(t){var e=Fo(n.edge(t));r.setEdge(t,j.merge({},Ro,zo(e,Lo),j.pick(e,Bo)))}),r;var n,r,t});n("  runLayout",function(){var g,t;g=e,(t=n)("    makeSpaceForEdgeLabels",function(){var e,n;(n=(e=g).graph()).ranksep/=2,j.forEach(e.edges(),function(t){t=e.edge(t);t.minlen*=2,"c"!==t.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?t.width+=t.labeloffset:t.height+=t.labeloffset)})}),t("    removeSelfEdges",function(){var n;n=g,j.forEach(n.edges(),function(t){var e;t.v===t.w&&((e=n.node(t.v)).selfEdges||(e.selfEdges=[]),e.selfEdges.push({e:t,label:n.edge(t)}),n.removeEdge(t))})}),t("    acyclic",function(){var n,r,o,i,a,e,t,s,c,u,l,d,h,f,p;p="greedy"===(n=g).graph().acyclicer?(f=e=n,p=function(t){return f.edge(t).weight},e.nodeCount()<=1?[]:(t=e,s=p||Lr,c=new Pr,l=u=0,j.forEach(t.nodes(),function(t){c.setNode(t,{v:t,in:0,out:0})}),j.forEach(t.edges(),function(t){var e=c.edge(t.v,t.w)||0,n=s(t);c.setEdge(t.v,t.w,e+n),l=Math.max(l,c.node(t.v).out+=n),u=Math.max(u,c.node(t.w).in+=n)}),d=j.range(l+u+3).map(function(){return new Tr}),h=u+1,j.forEach(c.nodes(),function(t){Br(d,h,c.node(t))}),t=function(t,e,n){for(var r,o=[],i=e[e.length-1],a=e[0];t.nodeCount();){for(;r=a.dequeue();)Rr(t,e,n,r);for(;r=i.dequeue();)Rr(t,e,n,r);if(t.nodeCount())for(var s=e.length-2;0<s;--s)if(r=e[s].dequeue()){o=o.concat(Rr(t,e,n,r,!0));break}}return o}((p={graph:c,buckets:d,zeroIdx:h}).graph,p.buckets,p.zeroIdx),j.flatten(j.map(t,function(t){return e.outEdges(t.v,t.w)}),!0))):(r=n,o=[],i={},a={},j.forEach(r.nodes(),function e(t){j.has(a,t)||(a[t]=!0,i[t]=!0,j.forEach(r.outEdges(t),function(t){j.has(i,t.w)?o.push(t):e(t.w)}),delete i[t])}),o),j.forEach(p,function(t){var e=n.edge(t);n.removeEdge(t),e.forwardName=t.name,e.reversed=!0,n.setEdge(t.w,t.v,e,j.uniqueId("rev"))})}),t("    nestingGraph.run",function(){lo(g)}),t("    rank",function(){var t,e=P.asNonCompoundGraph(g);switch(e.graph().ranker){case"network-simplex":uo(e);break;case"tight-tree":so(t=e),Yr(t);break;case"longest-path":co(e);break;default:uo(e)}}),t("    injectEdgeLabelProxies",function(){var n;n=g,j.forEach(n.edges(),function(t){var e=n.edge(t);e.width&&e.height&&(e=n.node(t.v),e={rank:(n.node(t.w).rank-e.rank)/2+e.rank,e:t},P.addDummyNode(n,"edge-proxy",e,"_ep"))})}),t("    removeEmptyRanks",function(){Ao(g)}),t("    nestingGraph.cleanup",function(){var e,t;t=(e=g).graph(),e.removeNode(t.nestingRoot),delete t.nestingRoot,j.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}),t("    normalizeRanks",function(){Co(g)}),t("    assignRankMinMax",function(){var e,n;e=g,n=0,j.forEach(e.nodes(),function(t){t=e.node(t);t.borderTop&&(t.minRank=e.node(t.borderTop).rank,t.maxRank=e.node(t.borderBottom).rank,n=j.max(n,t.maxRank))}),e.graph().maxRank=n}),t("    removeEdgeLabelProxies",function(){var n;n=g,j.forEach(n.nodes(),function(t){var e=n.node(t);"edge-proxy"===e.dummy&&(n.edge(e.e).labelRank=e.rank,n.removeNode(t))})}),t("    normalize.run",function(){Ur(g)}),t("    parentDummyChains",function(){var u,r,o,i,l;r=u=g,o={},i=0,j.forEach(r.children(),function t(e){var n=i;j.forEach(r.children(e),t),o[e]={low:n,lim:i++}}),l=o,j.forEach(u.graph().dummyChains,function(t){for(var e,n=u.node(t).edgeObj,r=function(t,e,n,r){for(var o,i=[],a=[],s=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim),u=n;u=t.parent(u),i.push(u),u&&(e[u].low>s||c>e[u].lim););for(o=u,u=r;(u=t.parent(u))!==o;)a.push(u);return{path:i.concat(a.reverse()),lca:o}}(u,l,n.v,n.w),o=r.path,i=r.lca,a=0,s=o[a],c=!0;t!==n.w;){if(e=u.node(t),c){for(;(s=o[a])!==i&&u.node(s).maxRank<e.rank;)a++;s===i&&(c=!1)}if(!c){for(;a<o.length-1&&u.node(s=o[a+1]).minRank<=e.rank;)a++;s=o[a]}u.setParent(t,s),t=u.successors(t)[0]}})}),t("    addBorderSegments",function(){var a;a=g,j.forEach(a.children(),function t(e){var n=a.children(e),r=a.node(e);if(n.length&&j.forEach(n,t),j.has(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(var o=r.minRank,i=r.maxRank+1;o<i;++o)ho(a,"borderLeft","_bl",e,r,o),ho(a,"borderRight","_br",e,r,o)}})}),t("    order",function(){bo(g)}),t("    insertSelfEdges",function(){var o,t;o=g,t=P.buildLayerMatrix(o),j.forEach(t,function(t){var r=0;j.forEach(t,function(t,e){var n=o.node(t);n.order=e+r,j.forEach(n.selfEdges,function(t){P.addDummyNode(o,"selfedge",{width:t.label.width,height:t.label.height,rank:n.rank,order:e+ ++r,e:t.e,label:t.label},"_se")}),delete n.selfEdges})})}),t("    adjustCoordinateSystem",function(){var t,e;"lr"!==(e=(t=g).graph().rankdir.toLowerCase())&&"rl"!==e||fo(t)}),t("    position",function(){var n,r,t,o,i;n=g,r=n=N.asNonCompoundGraph(n),t=N.buildLayerMatrix(r),o=r.graph().ranksep,i=0,j.forEach(t,function(t){var e=j.max(j.map(t,function(t){return r.node(t).height}));j.forEach(t,function(t){r.node(t).y=i+e/2}),i+=e+o}),j.forEach(ko(n),function(t,e){n.node(e).x=t})}),t("    positionSelfEdges",function(){var a;a=g,j.forEach(a.nodes(),function(t){var e,n,r,o,i=a.node(t);"selfedge"===i.dummy&&(e=(o=a.node(i.e.v)).x+o.width/2,n=o.y,r=i.x-e,o=o.height/2,a.setEdge(i.e,i.label),a.removeNode(t),i.label.points=[{x:e+2*r/3,y:n-o},{x:e+5*r/6,y:n-o},{x:e+r,y:n},{x:e+5*r/6,y:n+o},{x:e+2*r/3,y:n+o}],i.label.x=i.x,i.label.y=i.y)})}),t("    removeBorderNodes",function(){var i;i=g,j.forEach(i.nodes(),function(t){var e,n,r,o;i.children(t).length&&(t=i.node(t),e=i.node(t.borderTop),n=i.node(t.borderBottom),r=i.node(j.last(t.borderLeft)),o=i.node(j.last(t.borderRight)),t.width=Math.abs(o.x-r.x),t.height=Math.abs(n.y-e.y),t.x=r.x+t.width/2,t.y=e.y+t.height/2)}),j.forEach(i.nodes(),function(t){"border"===i.node(t).dummy&&i.removeNode(t)})}),t("    normalize.undo",function(){var o;o=g,j.forEach(o.graph().dummyChains,function(t){var e,n=o.node(t),r=n.edgeLabel;for(o.setEdge(n.edgeObj,r);n.dummy;)e=o.successors(t)[0],o.removeNode(t),r.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),n=o.node(t=e)})}),t("    fixupEdgeLabelCoords",function(){var n;n=g,j.forEach(n.edges(),function(t){var e=n.edge(t);if(j.has(e,"x"))switch("l"!==e.labelpos&&"r"!==e.labelpos||(e.width-=e.labeloffset),e.labelpos){case"l":e.x-=e.width/2+e.labeloffset;break;case"r":e.x+=e.width/2+e.labeloffset}})}),t("    undoCoordinateSystem",function(){var t,e,n,r;"bt"!==(r=(t=g).graph().rankdir.toLowerCase())&&"rl"!==r||(n=t,j.forEach(n.nodes(),function(t){go(n.node(t))}),j.forEach(n.edges(),function(t){t=n.edge(t);j.forEach(t.points,go),j.has(t,"y")&&go(t)})),"lr"!==r&&"rl"!==r||(e=t,j.forEach(e.nodes(),function(t){yo(e.node(t))}),j.forEach(e.edges(),function(t){t=e.edge(t);j.forEach(t.points,yo),j.has(t,"x")&&yo(t)}),fo(t))}),t("    translateGraph",function(){function e(t){var e=t.x,n=t.y,r=t.width,t=t.height;o=Math.min(o,e-r/2),i=Math.max(i,e+r/2),a=Math.min(a,n-t/2),s=Math.max(s,n+t/2)}var n,o,i,a,s,t,r,c;n=g,o=Number.POSITIVE_INFINITY,i=0,a=Number.POSITIVE_INFINITY,s=0,t=n.graph(),r=t.marginx||0,c=t.marginy||0,j.forEach(n.nodes(),function(t){e(n.node(t))}),j.forEach(n.edges(),function(t){t=n.edge(t);j.has(t,"x")&&e(t)}),o-=r,a-=c,j.forEach(n.nodes(),function(t){t=n.node(t);t.x-=o,t.y-=a}),j.forEach(n.edges(),function(t){t=n.edge(t);j.forEach(t.points,function(t){t.x-=o,t.y-=a}),j.has(t,"x")&&(t.x-=o),j.has(t,"y")&&(t.y-=a)}),t.width=i-o+r,t.height=s-a+c}),t("    assignNodeIntersects",function(){var i;i=g,j.forEach(i.edges(),function(t){var e,n=i.edge(t),r=i.node(t.v),t=i.node(t.w),o=n.points?(e=n.points[0],n.points[n.points.length-1]):(n.points=[],e=t,r);n.points.unshift(P.intersectRect(r,e)),n.points.push(P.intersectRect(t,o))})}),t("    reversePoints",function(){var e;e=g,j.forEach(e.edges(),function(t){t=e.edge(t);t.reversed&&t.points.reverse()})}),t("    acyclic.undo",function(){var r;r=g,j.forEach(r.edges(),function(t){var e,n=r.edge(t);n.reversed&&(r.removeEdge(t),e=n.forwardName,delete n.reversed,delete n.forwardName,r.setEdge(t.w,t.v,n,e))})})}),n("  updateInputGraph",function(){var r,o;r=i,o=e,j.forEach(r.nodes(),function(t){var e=r.node(t),n=o.node(t);e&&(e.x=n.x,e.y=n.y,o.children(t).length)&&(e.width=n.width,e.height=n.height)}),j.forEach(r.edges(),function(t){var e=r.edge(t),t=o.edge(t);e.points=t.points,j.has(t,"x")&&(e.x=t.x,e.y=t.y)}),r.graph().width=o.graph().width,r.graph().height=o.graph().height})})},debug:{debugOrdering:function(e){var t=N.buildLayerMatrix(e),n=new Go({compound:!0,multigraph:!0}).setGraph({});return j.forEach(e.nodes(),function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)}),j.forEach(e.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),j.forEach(t,function(t,e){n.setNode("layer"+e,{rank:"same"}),j.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}},util:{time:N.time,notime:N.notime},version:"0.8.5"},Uo=k.graphlib,Wo=k.layout;class Xo{constructor(t){this.cardinality=1,this.include=v.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=m.NODE,this.name=t.name,this.attr=t.attr||{},this.inputs=t.inputs,this.path=t.path||[],this.width=t.width,this.height=t.height}}class Yo{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}class Vo{constructor(t,e={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=v.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=m.META,this.path=[],this.name=t,this.metaGraph=Zo(t,B.META,e)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(t=>this.metaGraph.node(t))}leaves(){let e,t=[],n=[this];for(;n.length;){var r=n.shift();r.isGroupNode?(e=r.metaGraph).nodes().forEach(t=>n.push(e.node(t))):t.push(r.name)}return t}}class Ho{constructor(t,e){this.v=t,this.w=e,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(t,e){this.baseEdgeList.push(t)}}function qo(t,e={}){return new Vo(t,e)}function Ko(t,e){return new Ho(t,e)}function Zo(t,e,n){var n=n||{},r=new Uo.Graph(n);return r.setGraph({name:t,rankdir:n.rankdir,type:e,align:n.align}),r}class $o{constructor(t={}){this.graphOptions=t,this.index={},this.graphOptions.compound=!0,this.root=qo(d,this.graphOptions),this.index[d]=this.root}getNodeMap(){return this.index}node(t){return this.index[t]}setNode(t,e){this.index[t]=e}getBridgeGraph(a){var t=this.index[a];if(!t)throw Error("Could not find node in hierarchy: "+a);if(!("metaGraph"in t))return null;var e=t;if(e.bridgeGraph)return e.bridgeGraph;let s=Zo(R,B.BRIDGE,this.graphOptions);return e.bridgeGraph=s,t.parentNode&&"metaGraph"in t.parentNode&&[(e=t.parentNode).metaGraph,this.getBridgeGraph(e.name)].forEach(t=>{t.edges().filter(t=>t.v===a||t.w===a).forEach(o=>{let i=o.w===a;t.edge(o).baseEdgeList.forEach(t=>{var[e,n]=i?[t.w,o.v]:[t.v,o.w],e=this.getChildName(a,e),e={v:i?n:e,w:i?e:n};let r=s.edge(e);r||((r=Ko(e.v,e.w)).inbound=i,s.setEdge(e.v,e.w,r)),r.addBaseEdge(t,this)})})}),s}getChildName(t,e){let n=this.index[e];for(;n;){if(n.parentNode&&n.parentNode.name===t)return n.name;n=n.parentNode}throw Error("Could not find immediate child for descendant: "+e)}getPredecessors(t){var e=this.index[t];if(e)return this.getOneWayEdges(e,!0);throw Error("Could not find node with name: "+t)}getSuccessors(t){var e=this.index[t];if(e)return this.getOneWayEdges(e,!1);throw Error("Could not find node with name: "+t)}getOneWayEdges(t,e){var n,r,o=[];return t.parentNode&&t.parentNode.isGroupNode&&(n=(r=t.parentNode).metaGraph,r=this.getBridgeGraph(r.name),Qo(n,t,e,o),Qo(r,t,e,o)),o}}function Qo(e,t,n,r){(n?e.inEdges(t.name):e.outEdges(t.name)).forEach(t=>{t=e.edge(t);r.push(t)})}class Jo{constructor(t){this.hierarchy=t,this.index={},this.hasSubHierarchy={},this.root=new ni(this.hierarchy.root,this.hierarchy.graphOptions),this.index[t.root.name]=this.root,this.buildSubHierarchy(t.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(y){if(!(y in this.hasSubHierarchy)){this.hasSubHierarchy[y]=!0;var e=this.index[y];if(e.node.type===m.META){let t=e,f=t.node.metaGraph,p=t.coreGraph,g=(f.nodes().forEach(t=>{var e=this.getOrCreateRenderNodeByName(t);p.setNode(t,e)}),f.edges().forEach(t=>{var e=f.edge(t),e=new ei(e);p.setEdge(t.v,t.w,e)}),t.node.parentNode);if(g){let l=this.getRenderNodeByName(g.name),d=(t,...e)=>e.concat([t?"IN":"OUT"]).join("~~"),h=this.hierarchy.getBridgeGraph(y);h.edges().forEach(t=>{let e=h.edge(t),n=!!f.node(t.w),[r,o]=n?[t.w,t.v]:[t.v,t.w],i=t=>{t=n?{v:t,w:y}:{v:y,w:t};return l.coreGraph.edge(t)},a=i(o);a=a||i(d(n,o,g.name));var s,c=d(n,y),u=d(n,o,y);if(!p.node(u)){let e=p.node(c);if(!e){let t={name:c,type:m.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:v.UNSPECIFIED,inbound:n,attr:{}};e=new ti(t),this.index[c]=e,p.setNode(c,e)}let t={name:u,type:m.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:v.UNSPECIFIED,inbound:n,attr:{}};s=new ti(t),this.index[u]=s,p.setNode(u,s),p.setParent(u,c),e.node.cardinality++}t=new ei(e);t.adjoiningMetaEdge=a,n?p.setEdge(u,r,t):p.setEdge(r,u,t)})}}}}getOrCreateRenderNodeByName(t){var e;return t?t in this.index?this.index[t]:(e=this.getNodeByName(t))?(this.index[t]=e.isGroupNode?new ni(e,this.hierarchy.graphOptions):new ti(e),this.index[t]):null:null}getRenderNodeByName(t){return this.index[t]}getNodeByName(t){return this.hierarchy.node(t)}}class ti{constructor(t){this.node=t,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=t.width||0,this.height=t.height||0,this.displayName=t.name,this.attr=t.attr}}class ei{constructor(t){this.metaEdge=t,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class ni extends ti{constructor(t,e){super(t);t=t.metaGraph.graph();e.compound=!0,this.coreGraph=Zo(t.name,B.CORE,e)}}function ri(e,n){if(e.node.isGroupNode){var r=e,a=n;let i=L(a);r.coreGraph.nodes().map(t=>r.coreGraph.node(t)).forEach(e=>{var{height:t,width:n}=e;switch(e.node.type){case m.NODE:Object.assign(e,i.nodeSize.node),e.height=t||i.nodeSize.node.height,e.width=n||i.nodeSize.node.width;break;case m.BRIDGE:Object.assign(e,i.nodeSize.bridge);break;case m.META:e.expanded?ri(e,a):(Object.assign(e,i.nodeSize.meta),e.height=i.nodeSize.meta.height,e.width=i.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+e.node.type)}if(!e.expanded){let t=e.attr;var[r,o=!1]=[e,a&&(0===e.node.type&&!(null==(r=null==(r=null==a?void 0:a.nodeSize)?void 0:r.meta)||!r.width)||1===e.node.type&&(!(null==(r=null==(r=null==a?void 0:a.nodeSize)?void 0:r.node)||!r.width)||!!t.width)||2===e.node.type&&!(null==(r=null==(r=null==a?void 0:a.nodeSize)?void 0:r.bridge)||!r.width))];if(r.coreBox.width=r.width,r.coreBox.height=r.height,!o){let t=(""+r.displayName).length;r.width=Math.max(r.coreBox.width,3*t)}}})}if(e.node.type===m.META){var o=(n=L(n)).subScene.meta,{nodeSep:n,rankSep:i,edgeSep:s,align:c}=(Object.assign(e,o),n.graph.meta),l={nodesep:n,ranksep:i,edgesep:s,align:c};Object.assign(e.coreBox,function(o){var{ranksep:t,nodesep:e,edgesep:n,align:r}=l;Object.assign(o.graph(),{ranksep:t,nodesep:e,edgesep:n,align:r});let i=[];if(o.nodes().forEach(t=>{o.node(t).node.type!==m.BRIDGE&&i.push(t)}),!i.length)return{width:0,height:0};Wo(o);let a=1/0,s=1/0,c=-1/0,u=-1/0;return i.forEach(t=>{var t=o.node(t),e=.5*t.width,n=t.x-e,e=t.x+e,n=(a=n<a?n:a,c=e>c?e:c,.5*t.height),e=t.y-n,t=t.y+n;s=e<s?e:s,u=t>u?t:u}),o.edges().forEach(e=>{var e=o.edge(e),n=o.node(e.metaEdge.v),r=o.node(e.metaEdge.w);if(3===e.points.length&&function(e){let n=oi(e[0],e[1]);for(let t=1;t<e.length-1;t++){var r=oi(e[t],e[t+1]);if(1<Math.abs(r-n))return;n=r}return 1}(e.points)){if(null!=n){let t=n.expanded?n.x:ii(n);e.points[0].x=t}if(null!=r){let t=r.expanded?r.x:ii(r);e.points[2].x=t}e.points=[e.points[0],e.points[1]]}var t=e.points[e.points.length-2],t=(null!=r&&(e.points[e.points.length-1]=ai(t,r)),e.points[1]);null!=n&&(e.points[0]=ai(t,n)),e.points.forEach(t=>{a=t.x<a?t.x:a,c=t.x>c?t.x:c,s=t.y<s?t.y:s,u=t.y>u?t.y:u})}),o.nodes().forEach(t=>{t=o.node(t);t.x-=a,t.y-=s}),o.edges().forEach(t=>{o.edge(t).points.forEach(t=>{t.x-=a,t.y-=s})}),{width:c-a,height:u-s}}(e.coreGraph));let t=0;0<e.coreGraph.nodeCount()&&t++,n=t<=1?0:t,e.coreBox.width+=n+n,e.coreBox.height=o.labelHeight+e.coreBox.height,e.width=e.coreBox.width+o.paddingLeft+o.paddingRight,e.height=e.paddingTop+e.coreBox.height+e.paddingBottom}}function oi(t,e){var n=e.x-t.x;return 180*Math.atan((e.y-t.y)/n)/Math.PI}function ii(t){return t.expanded?t.x:t.x-t.width/2+0+t.coreBox.width/2}function ai(t,e){var n=e.expanded?e.x:ii(e),r=e.y,o=t.x-n,t=t.y-r;let i,a,s=(e.expanded?e:e.coreBox).width,c=(e.expanded?e:e.coreBox).height;return a=Math.abs(t)*s/2>Math.abs(o)*c/2?(t<0&&(c=-c),i=0==t?0:c/2*o/t,c/2):(o<0&&(s=-s),i=s/2,0==o?0:s/2*t/o),{x:n+i,y:r+a}}function si(t,e,n){var r=t.nodes.filter((e,t,n)=>n.findIndex(t=>t.id===e.id)!==t).map(t=>t.id);if(r.length)throw new Error("Duplicated ids found: "+r.join(", "));var o,i,r=function(i){let a={nodes:[]},o=i.compound,s=Object.keys(o||{}),t=new Map,c=(e,n=[])=>{if(t.has(e))return t.get(e);for(let t=0;t<s.length;t++){var r=s[t];if(o&&-1!==o[r].indexOf(e))return n.unshift(r),c(r,n)}return 0===n.length&&t.set(e,n),n};return i.nodes.forEach(t=>{var e,n=t.id,r=[...c(n),n],o=(e=n,i.edges.filter(t=>t.w===e).map(t=>({name:t.v})));a.nodes.push({name:n,path:r,inputs:o,width:t.width,height:t.height,attr:Object.assign({},t)})}),a}(t),t=function(t,e){let a=(t,e)=>{for(var n of e.values())if(n.includes(t))return!0;return!1},s=(e,t=[])=>{if(0===Object.keys(e).length)return[...new Set(t)];var n,r,o=new Map(Object.keys(e).map(t=>[t,e[t]])),i={};for([n,r]of o)a(n,o)?i[n]=r:t=t.concat(n,r);return s(i,t)};return s(t).filter(t=>e.includes(t))}(t.compound||{},(null==e?void 0:e.expanded)||[]),a=(r=r,o={rankDirection:(null==(a=null==(a=null==n?void 0:n.graph)?void 0:a.meta)?void 0:a.rankDir)||(null==e?void 0:e.rankDirection)||s.graph.meta.rankDir,align:(null==(e=null==(a=null==n?void 0:n.graph)?void 0:a.meta)?void 0:e.align)||s.graph.meta.align},r=function(t){var a,e,{rankDirection:n,align:r}=o,n=new $o({rankdir:n,align:r});a=n,e=t,Object.keys(e.nodes).forEach(t=>{var r=e.nodes[t],o=r.path;let i=a.root;i.depth=Math.max(o.length,i.depth);for(let n=0;n<o.length&&(i.depth=Math.max(i.depth,o.length-n),i.cardinality+=r.cardinality,n!==o.length-1);n++){let t=o[n],e=a.node(t);e||((e=qo(t,a.graphOptions)).path=r.path.slice(0,n+1),e.parentNode=i,a.setNode(t,e),i.metaGraph.setNode(t,e)),i=e}a.setNode(r.name,r),(r.parentNode=i).metaGraph.setNode(r.name,r)});{var d=n,h=t;let s=d.getNodeMap(),c,u,l=(t,e)=>{let n=0;for(;t;)e[n++]=t.name,t=t.parentNode;return n-1};h.edges.forEach(t=>{c=[],u=[];let e=l(h.nodes[t.v],c),n=l(h.nodes[t.w],u);for(;c[e]===u[n];)if(e--,n--,e<0||n<0)throw Error("No difference found between ancestor paths.");var r=s[c[e+1]],o=c[e],i=u[n];let a=r.metaGraph.edge(o,i);a||(a=Ko(o,i),r.metaGraph.setEdge(o,i,a)),a.addBaseEdge(t,d)})}return n}(function(t){let o=new Yo;return t.nodes.map(t=>new Xo(t)).forEach(r=>{(o.nodes[r.name]=r).inputs.forEach(t=>{var e,n;e=o,n=r,(t=t).name!==n.name&&e.edges.push(Object.assign(Object.assign({},t.attr),{v:t.name,w:n.name}))})}),o}(r)),new Jo(r));return i=a,t.forEach(e=>{var t=i.getRenderInfoNodes().find(t=>t.displayName===e),t=t&&t.node&&t.node.name||"",n=i.getRenderNodeByName(t);if(!n)throw new Error("No nodes found: "+t);n.expanded=!0,i.buildSubHierarchy(t)}),ri(a.root,n),function e(n){let t=n.coreGraph.nodes().map(t=>n.coreGraph.node(t));return Object.assign(Object.assign({},li(n)),{expanded:n.expanded,nodes:n.expanded?(r=t,r.map(t=>(t.node.type===m.META?e:li)(t))):[],edges:n.expanded?di(n):[]});var r}(a.root)}function ci(t,e=!1){let n=JSON.parse(JSON.stringify(t)),o={nodes:[n],edges:[...n.edges]};return n.nodes.forEach(function t(e){0!==e.type&&1!==e.type||o.nodes.push(e),0===e.type&&(o.edges=o.edges.concat(e.edges)),Array.isArray(e.nodes)&&e.nodes.forEach(t)}),e&&o.nodes.forEach(n=>{var r=o.nodes.find(t=>t.id===n.parentNodeName);if(r){let t=r.x-r.width/2+r.paddingLeft,e=r.y-r.height/2+r.labelHeight+r.paddingTop;r.id!==d&&(n.x+=t,n.y+=e),0===n.type&&n.edges.forEach(t=>{t.points.forEach(t=>{t.x+=n.x-n.width/2+n.paddingLeft,t.y+=n.y-n.height/2+n.labelHeight+n.paddingTop})})}}),o}function ui(n,r,o,i){let t,e,a=[],s=(null==(t=o.find(t=>t.id===n))?void 0:t.path)||[],c=(null==(e=o.find(t=>t.id===r))?void 0:e.path)||[],u=[d,...s].slice(0,s.length).reverse(),l=[d,...c].slice(0,c.length);return u.forEach(e=>{var t=o.find(t=>t.id===e);a=a.concat(t.edges.filter(t=>t.baseEdgeList.some(t=>t.v===((null==i?void 0:i.v)||n)&&t.w===((null==i?void 0:i.w)||r))))}),l.filter(t=>!u.includes(t)).forEach(e=>{var t=o.find(t=>t.id===e);a=a.concat(t.edges.filter(t=>t.baseEdgeList.some(t=>t.v===((null==i?void 0:i.v)||n)&&t.w===((null==i?void 0:i.w)||r))))}),a}function li(t){return{id:t.node.name,name:t.node.name,type:t.node.type,cardinality:t.node.cardinality,attr:t.attr,parentNodeName:t.node.parentNode?t.node.parentNode.name:null,coreBox:Object.assign({},t.coreBox),x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius,labelHeight:t.labelHeight,labelOffset:t.labelOffset,outboxWidth:t.outboxWidth,paddingLeft:t.paddingLeft,paddingTop:t.paddingTop,paddingRight:t.paddingRight,paddingBottom:t.paddingBottom,path:t.node.path}}function di(c){return c.coreGraph.edges().map(t=>({renderInfoEdge:c.coreGraph.edge(t),edge:t})).filter(({renderInfoEdge:t})=>t.metaEdge).map(({edge:t,renderInfoEdge:e})=>{n=c,a=(r=e).points.map(t=>Object.assign({},t)),r.adjoiningMetaEdge&&(o=r.adjoiningMetaEdge.points,o=(r=r.metaEdge.inbound)?o[o.length-1]:o[0],r=a[r?0:a.length-1],s=n.x-n.width/2,s=o.x-s,o=o.y-(n.y-n.height/2),i=-(n.paddingTop+n.labelHeight),r.x=s+-n.paddingLeft,r.y=o+i);var n,r,o,i,a,s=a;return{adjoiningEdge:e.adjoiningMetaEdge?{w:e.adjoiningMetaEdge.metaEdge.w,v:e.adjoiningMetaEdge.metaEdge.v}:null,inbound:e.metaEdge.inbound,w:t.w,v:t.v,points:s,weight:e.weight,baseEdgeList:e.metaEdge.baseEdgeList,parentNodeName:c.node.name}})}}.call(this,fi(116))},function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}))(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},S=(Object.defineProperty(e,"__esModule",{value:!0}),e.RadialLayout=void 0,n(80)),a=n(83),O=i(n(317)),M=i(n(318));function p(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}s=a.Base,o(c,s),c.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},c.prototype.execute=function(){var n=this,r=n.nodes,t=n.edges||[];if(r&&0!==r.length){n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var o=n.center;if(1===r.length)return r[0].x=o[0],r[0].y=o[1],void(n.onLayoutEnd&&n.onLayoutEnd());var e=n.linkDistance,i=null;if((0,S.isString)(n.focusNode)){for(var a=!1,s=0;s<r.length;s++)r[s].id===n.focusNode&&(i=r[s],n.focusNode=i,a=!0,s=r.length);a||(i=null)}else i=n.focusNode;i||(i=r[0],n.focusNode=i);c=i.id,u=-1,r.forEach(function(t,e){t.id===c&&(u=e)});var c,u,l=u,d=(l<0&&(l=0),n.focusIndex=l,(0,S.getAdjMatrix)({nodes:r,edges:t},!1)),h=(0,S.floydWarshall)(d),f=n.maxToFocus(h,l),f=(n.handleInfinity(h,l,f+1),(n.distances=h)[l]),h=n.width||500,p=n.height||500,g=h-o[0]>o[0]?o[0]:h-o[0],y=p-o[1]>o[1]?o[1]:p-o[1],m=(g=0===g?h/2:g)<(y=0===y?p/2:y)?g:y,v=Math.max.apply(Math,f),b=[],g=(f.forEach(function(t,e){n.unitRadius||(n.unitRadius=m/v),b[e]=t*n.unitRadius}),n.radii=b,n.eIdealDisMatrix()),y=function(t){for(var e=t.length,n=t[0].length,r=[],o=0;o<e;o++){for(var i=[],a=0;a<n;a++)0!==t[o][a]?i.push(1/(t[o][a]*t[o][a])):i.push(0);r.push(i)}return r}(n.eIdealDistances=g),x=(n.weights=y,new O.default({linkDistance:e,distances:g}).layout());x.forEach(function(t){(0,S.isNaN)(t[0])&&(t[0]=Math.random()*e),(0,S.isNaN)(t[1])&&(t[1]=Math.random()*e)}),(n.positions=x).forEach(function(t,e){r[e].x=t[0]+o[0],r[e].y=t[1]+o[1]}),x.forEach(function(t){t[0]-=x[l][0],t[1]-=x[l][1]}),n.run();var w,_,f=n.preventOverlap,E=n.nodeSize,y=n.strictRadial;return f&&(w=n.nodeSpacing,_=(0,S.isNumber)(w)?function(){return w}:(0,S.isFunction)(w)?w:function(){return 0},g=E?(0,S.isArray)(E)?function(t){return(E[0]>E[1]?E[0]:E[1])+_(t)}:function(t){return E+_(t)}:function(t){return t.size?(0,S.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+_(t):(0,S.isObject)(t.size)?(t.size.width>t.size.height?t.size.width:t.size.height)+_(t):t.size+_(t):10+_(t)},f={nodes:r,nodeSizeFunc:g,adjMatrix:d,positions:x,radii:b,height:p,width:h,strictRadial:y,focusID:l,iterations:n.maxPreventOverlapIteration||200,k:x.length/4.5},x=new M.default(f).layout()),x.forEach(function(t,e){r[e].x=t[0]+o[0],r[e].y=t[1]+o[1]}),n.onLayoutEnd&&n.onLayoutEnd(),{nodes:r,edges:t}}n.onLayoutEnd&&n.onLayoutEnd()},c.prototype.run=function(){for(var t=this.maxIteration,e=this.positions||[],n=this.weights||[],r=this.eIdealDistances||[],o=this.radii||[],i=0;i<=t;i++)this.oneIteration(i/t,e,o,r,n)},c.prototype.oneIteration=function(n,r,u,l,d){var h=1-n,f=this.focusIndex;r.forEach(function(o,i){var a,t,s,c,e=p(o,[0,0]),e=0===e?0:1/e;i!==f&&(s=a=c=0,r.forEach(function(t,e){var n,r;i!==e&&(n=p(o,t),r=l[e][i],s+=d[i][e],c+=d[i][e]*(t[0]+r*(o[0]-t[0])*(n=0===n?0:1/n)),a+=d[i][e]*(t[1]+r*(o[1]-t[1])*n))}),t=0===u[i]?0:1/u[i],s=s*h+n*t*t,c=(c*=h)+n*t*o[0]*e,o[0]=c/s,a=(a*=h)+n*t*o[1]*e,o[1]=a/s)})},c.prototype.eIdealDisMatrix=function(){var t,i,a,s,e,c=this,u=c.nodes;return u?(i=c.linkDistance,a=c.radii||[],s=c.unitRadius||50,e=[],(t=c.distances)&&t.forEach(function(t,r){var o=[];t.forEach(function(t,e){var n;r===e?o.push(0):a[r]===a[e]?"data"===c.sortBy?o.push(t*(Math.abs(r-e)*c.sortStrength)/(a[r]/s)):c.sortBy?(n=u[r][c.sortBy]||0,e=u[e][c.sortBy]||0,(0,S.isString)(n)&&(n=n.charCodeAt(0)),(0,S.isString)(e)&&(e=e.charCodeAt(0)),o.push(t*(Math.abs(n-e)*c.sortStrength)/(a[r]/s))):o.push(t*i/(a[r]/s)):o.push(t*((i+s)/2))}),e.push(o)}),e):[]},c.prototype.handleInfinity=function(t,e,n){for(var r,o=t.length,i=0;i<o;i++)if(t[e][i]===1/0){t[e][i]=n,t[i][e]=n;for(var a=0;a<o;a++)t[i][a]!==1/0&&t[e][a]===1/0&&(t[e][a]=n+t[i][a],t[a][e]=n+t[i][a])}for(i=0;i<o;i++)if(i!==e)for(a=0;a<o;a++)t[i][a]===1/0&&(r=Math.abs(t[e][i]-t[e][a]),t[i][a]=r=0===r?1:r)},c.prototype.maxToFocus=function(t,e){for(var n=0,r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n},c.prototype.getType=function(){return"radial"};var s,i=c;function c(t){var e=s.call(this)||this;return e.maxIteration=1e3,e.focusNode=null,e.unitRadius=null,e.linkDistance=50,e.preventOverlap=!1,e.strictRadial=!0,e.maxPreventOverlapIteration=200,e.sortStrength=10,e.nodes=[],e.edges=[],e.updateCfg(t),e}e.RadialLayout=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var f=n(222);function r(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}r.prototype.layout=function(){var e=this.dimension,t=this.distances,n=this.linkDistance;try{var r=f.Matrix.mul(f.Matrix.pow(t,2),-.5),o=r.mean("row"),i=r.mean("column"),a=r.mean(),s=(r.add(a).subRowVector(o).subColumnVector(i),new f.SingularValueDecomposition(r)),c=f.Matrix.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map(function(t){return f.Matrix.mul([t],[c]).toJSON()[0].splice(0,e)})}catch(e){for(var u=[],l=0;l<t.length;l++){var d=Math.random()*n,h=Math.random()*n;u.push([d,h])}return u}},e.default=r},function(t,e,n){function r(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}Object.defineProperty(e,"__esModule",{value:!0}),r.prototype.layout=function(){var t=this.positions,n=[],e=this.iterations,r=this.width/10;this.maxDisplace=r,this.disp=n;for(var o=0;o<e;o++)t.forEach(function(t,e){n[e]={x:0,y:0}}),this.getRepulsion(),this.updatePositions();return t},r.prototype.getRepulsion=function(){var a=this,t=a.positions,s=a.nodes,c=a.disp,u=a.k,l=a.radii||[];t.forEach(function(o,i){c[i]={x:0,y:0},t.forEach(function(t,e){var n,r;i!==e&&l[i]===l[e]&&(r=o[0]-t[0],t=o[1]-t[1],0===(n=Math.sqrt(r*r+t*t))&&(n=1,t=r=.01*(e<i?1:-1)),n<a.nodeSizeFunc(s[i])/2+a.nodeSizeFunc(s[e])/2)&&(c[i].x+=r/n*(e=u*u/n),c[i].y+=t/n*e)})})},r.prototype.updatePositions=function(){var i=this.positions,a=this.disp,s=this.speed,c=this.strictRadial,u=this.focusID,l=this.maxDisplace||this.width/10,d=(c&&a.forEach(function(t,e){var n=i[e][0]-i[u][0],e=i[e][1]-i[u][1],r=Math.sqrt(n*n+e*e),e=e/r,n=-n/r,r=Math.sqrt(t.x*t.x+t.y*t.y),o=Math.acos((e*t.x+n*t.y)/r),o=(o>Math.PI/2&&(o-=Math.PI/2,e*=-1,n*=-1),Math.cos(o)*r);t.x=e*o,t.y=n*o}),this.radii);i.forEach(function(t,e){var n,r,o;e!==u&&0<(r=Math.sqrt(a[e].x*a[e].x+a[e].y*a[e].y))&&e!==u&&(o=Math.min(l*(s/800),r),t[0]+=a[e].x/r*o,t[1]+=a[e].y/r*o,c)&&(r=t[0]-i[u][0],o=t[1]-i[u][1],r=r/(n=Math.sqrt(r*r+o*o))*d[e],o=o/n*d[e],t[0]=i[u][0]+r,t[1]=i[u][1]+o)})},e.default=r},function(t,e,n){var r=n(132).default;t.exports=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(154),o=n(324),i=n(155),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e,n){var n=n(208),r="object"==typeof self&&self&&self.Object===Object&&self,n=n||r||Function("return this")();t.exports=n},function(t,e,n){var n=n(207),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),n=t[s];try{var r=!(t[s]=void 0)}catch(t){}var o=a.call(t);return r&&(e?t[s]=n:delete t[s]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(e){return function(t){return e(t)}}},function(t,i,a){!function(t){var e=a(208),n=i&&!i.nodeType&&i,r=n&&"object"==typeof t&&t&&!t.nodeType&&t,o=r&&r.exports===n&&e.process,n=function(){try{return r&&r.require&&r.require("util").types||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=n}.call(this,a(163)(t))},function(t,e,n){var r=n(154),o=n(155);t.exports=function(t){return"number"==typeof t||o(t)&&"[object Number]"==r(t)}},function(t,e){var n=Array.isArray;t.exports=n},function(k,t,e){var C=e(132).default;function n(){k.exports=function(){return a},k.exports.__esModule=!0,k.exports.default=k.exports;var c,a={},t=Object.prototype,u=t.hasOwnProperty,l=Object.defineProperty||function(t,e,n){t[e]=n.value},e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",o=e.toStringTag||"@@toStringTag";function i(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(c){i=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o,i,a,s,e=e&&e.prototype instanceof y?e:y,e=Object.create(e.prototype),r=new O(r||[]);return l(e,"_invoke",{value:(o=t,i=n,a=r,s=h,function(t,e){if(s===f)throw Error("Generator is already running");if(s===p){if("throw"===t)throw e;return{value:c,done:!0}}for(a.method=t,a.arg=e;;){var n=a.delegate;if(n){n=function t(e,n){var r=n.method,o=e.iterator[r];if(o===c)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=c,t(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;r=d(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=c),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}(n,a);if(n){if(n===g)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===h)throw s=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=f;n=d(o,i,a);if("normal"===n.type){if(s=a.done?p:"suspendedYield",n.arg===g)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(s=p,a.method="throw",a.arg=n.arg)}})}),e}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var h="suspendedStart",f="executing",p="completed",g={};function y(){}function m(){}function v(){}var e={},b=(i(e,r,function(){return this}),Object.getPrototypeOf),b=b&&b(b(M([]))),x=(b&&b!==t&&u.call(b,r)&&(e=b),v.prototype=y.prototype=Object.create(e));function w(t){["next","throw","return"].forEach(function(e){i(t,e,function(t){return this._invoke(e,t)})})}function _(a,s){var e;l(this,"_invoke",{value:function(n,r){function t(){return new s(function(t,e){!function e(t,n,r,o){var i,t=d(a[t],a,n);if("throw"!==t.type)return(n=(i=t.arg).value)&&"object"==C(n)&&u.call(n,"__await")?s.resolve(n.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):s.resolve(n).then(function(t){i.value=t,r(i)},function(t){return e("throw",t,r,o)});o(t.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}})}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function M(e){if(e||""===e){var n,t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return n=-1,(t=function t(){for(;++n<e.length;)if(u.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=c,t.done=!0,t}).next=t}throw new TypeError(C(e)+" is not iterable")}return l(x,"constructor",{value:m.prototype=v,configurable:!0}),l(v,"constructor",{value:m,configurable:!0}),m.displayName=i(v,o,"GeneratorFunction"),a.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,i(t,o,"GeneratorFunction")),t.prototype=Object.create(x),t},a.awrap=function(t){return{__await:t}},w(_.prototype),i(_.prototype,n,function(){return this}),a.AsyncIterator=_,a.async=function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new _(s(t,e,n,r),o);return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},w(x),i(x,o,"Generator"),i(x,r,function(){return this}),i(x,"toString",function(){return"[object Generator]"}),a.keys=function(t){var e,n=Object(t),r=[];for(e in n)r.push(e);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=M,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&u.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=c)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return i.type="throw",i.arg=n,r.next=t,e&&(r.method="next",r.arg=c),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=u.call(o,"catchLoc"),s=u.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc?null:o)?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n,r,o=this.tryEntries[e];if(o.tryLoc===t)return"throw"===(n=o.completion).type&&(r=n.arg,S(o)),r}throw Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=c),g}},a}k.exports=n,k.exports.__esModule=!0,k.exports.default=k.exports},function(t,e,a){function Ee(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t}function r(t){t=new Error("(regl) "+t);throw console.error(t),t}function p(t,e){t||r(e)}function o(t){return t?": "+t:""}function s(t,e){switch(e){case"number":return"number"==typeof t;case"object":return"object"==typeof t;case"string":return"string"==typeof t;case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"undefined":return void 0===t;case"symbol":return"symbol"==typeof t}}function l(t,e,n){e.indexOf(t)<0&&r("invalid value"+o(n)+". must be one of: "+e)}function c(t,e){for(t+="";t.length<e;)t=" "+t;return t}function h(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function f(t,e){this.number=t,this.line=e,this.errors=[]}function g(t,e,n){this.file=t,this.line=e,this.message=n}function d(){var t=new Error,t=(t.stack||t).toString(),e=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);return(e=e||/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t))?e[1]:"unknown"}function y(){var t=new Error,t=(t.stack||t).toString(),e=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);return(e=e||/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t))?e[1]:"unknown"}function m(t,e){var n,r=t.split("\n"),o=1,i=0,a={unknown:new h,0:new h};a.unknown.name=a[0].name=e||d(),a.unknown.lines.push(new f(0,""));for(var s=0;s<r.length;++s){var c=r[s],u=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(c);if(u)switch(u[1]){case"line":var l=/(\d+)(\s+\d+)?/.exec(u[2]);l&&(o=0|l[1],l[2])&&((i=0|l[2])in a||(a[i]=new h));break;case"define":l=/SHADER_NAME(_B64)?\s+(.*)$/.exec(u[2]);l&&(a[i].name=l[1]?(n=l[2],"undefined"!=typeof atob?atob(n):"base64:"+n):l[2])}a[i].lines.push(new f(o++,c))}return Object.keys(a).forEach(function(t){var e=a[t];e.lines.forEach(function(t){e.index[t.number]=t})}),a}function v(t){t._commandRef=d()}function b(t,e){var n=y();r(t+" in command "+(e||d())+("unknown"===n?"":" called from "+n))}function x(t,e,n,r){s(t,e)||b("invalid parameter type"+o(n)+". expected "+e+", got "+typeof t,r||d())}function w(t,e){return 32820===t||32819===t||33635===t?2:34042===t?4:n[t]*e}function _(t){return!(t&t-1||!t)}function E(t,e){this.id=N++,this.type=t,this.data=e}function S(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function O(t){return"["+function t(e){if(0===e.length)return[];var n=e.charAt(0),r=e.charAt(e.length-1);if(1<e.length&&n===r&&('"'===n||"'"===n))return['"'+S(e.substr(1,e.length-2))+'"'];r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(r)return t(e.substr(0,r.index)).concat(t(r[1])).concat(t(e.substr(r.index+r[0].length)));var o=e.split(".");if(1===o.length)return['"'+S(e)+'"'];for(var i=[],a=0;a<o.length;++a)i=i.concat(t(o[a]));return i}(t).join("][")+"]"}function Ne(t){return"string"==typeof t?t.split():(ke(Array.isArray(t),"invalid extension array"),t)}function De(t){return"string"==typeof t?(ke("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function Kt(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function M(t){var e,n=(65535<t)<<4;return(n|=e=(255<(t>>>=n))<<3)|(e=(15<(t>>>=e))<<2)|(e=(3<(t>>>=e))<<1)|t>>>e>>1}function k(){var n=Kt(8,function(){return[]});function r(t){var t=function(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}(t),e=n[M(t)>>2];return 0<e.length?e.pop():new ArrayBuffer(t)}function e(t){n[M(t.byteLength)>>2].push(t)}return{alloc:r,free:e,allocType:function(t,e){var n=null;switch(t){case 5120:n=new Int8Array(r(e),0,e);break;case 5121:n=new Uint8Array(r(e),0,e);break;case 5122:n=new Int16Array(r(2*e),0,e);break;case 5123:n=new Uint16Array(r(2*e),0,e);break;case 5124:n=new Int32Array(r(4*e),0,e);break;case 5125:n=new Uint32Array(r(4*e),0,e);break;case 5126:n=new Float32Array(r(4*e),0,e);break;default:return null}return n.length!==e?n.subarray(0,e):n},freeType:function(t){e(t.buffer)}}}function Se(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||Me(t.data))}function Oe(e){return Object.keys(e).map(function(t){return e[t]})}function C(t,e,n,r,o,i){for(var a=i,s=0;s<e;++s)for(var c=t[s],u=0;u<n;++u)for(var l=c[u],d=0;d<r;++d)o[a++]=l[d]}function Pe(t){return 0|D[Object.prototype.toString.call(t)]}function Le(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function Re(t,e,n,r,o,i,a){for(var s=0,c=0;c<n;++c)for(var u=0;u<r;++u)t[s++]=e[o*c+i*u+a]}function J(t){for(var e,n,r,o=Ae.allocType(5123,t.length),i=0;i<t.length;++i)isNaN(t[i])?o[i]=65535:t[i]===1/0?o[i]=31744:t[i]===-1/0?o[i]=64512:(P[0]=t[i],e=(n=L[0])>>>31<<15,r=n>>13&1023,o[i]=(n=(n<<1>>>24)-127)<-24?e:n<-14?e+(1024+r>>-14-n):15<n?31744+e:e+(15+n<<10)+r);return o}function Zt(t){return Array.isArray(t)||Me(t)}function tt(t){return!(t&t-1||!t)}function A(t){return"[object "+t+"]"}function et(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function nt(t){return!!Array.isArray(t)&&!(0===t.length||!Zt(t[0]))}function $(t){return Object.prototype.toString.call(t)}function rt(t){return $(t)===R}function ot(t){return $(t)===B}function it(t){var e;if(t)return e=$(t),0<=z.indexOf(e)||et(t)||nt(t)||Se(t)}function at(t){return 0|D[Object.prototype.toString.call(t)]}function st(t,e){return Ae.allocType(36193===t.type?5126:t.type,e)}function ct(t,e){36193===t.type?(t.data=J(e),Ae.freeType(e)):t.data=e}function ut(t,e,n,r,o,i){var a=void 0!==u[t]?u[t]:Q[t]*F[e];if(i&&(a*=6),o){for(var s=0,c=n;1<=c;)s+=a*c*c,c/=2;return s}return a*n*r}function Be(p,a,A,g,I,u,f){var s={"don't care":4352,"dont care":4352,nice:4354,fast:4353},c={repeat:10497,clamp:33071,mirror:33648},l={nearest:9728,linear:9729},d=Ee({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},l),h={none:0,browser:37444},y={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},m={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},v={},i=(a.ext_srgb&&(m.srgb=35904,m.srgba=35906),a.oes_texture_float&&(y.float32=y.float=5126),a.oes_texture_half_float&&(y.float16=y["half float"]=36193),a.webgl_depth_texture&&(Ee(m,{depth:6402,"depth stencil":34041}),Ee(y,{uint16:5123,uint32:5125,"depth stencil":34042})),a.webgl_compressed_texture_s3tc&&Ee(v,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),a.webgl_compressed_texture_atc&&Ee(v,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),a.webgl_compressed_texture_pvrtc&&Ee(v,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),a.webgl_compressed_texture_etc1&&(v["rgb etc1"]=36196),Array.prototype.slice.call(p.getParameter(34467))),t=(Object.keys(v).forEach(function(t){var e=v[t];0<=i.indexOf(e)&&(m[t]=e)}),Object.keys(m)),b=(A.textureFormats=t,[]),x=(Object.keys(m).forEach(function(t){var e=m[t];b[e]=t}),[]),w=(Object.keys(y).forEach(function(t){var e=y[t];x[e]=t}),[]),_=(Object.keys(l).forEach(function(t){w[l[t]]=t}),[]),E=(Object.keys(d).forEach(function(t){var e=d[t];_[e]=t}),[]),z=(Object.keys(c).forEach(function(t){E[c[t]]=t}),t.reduce(function(t,e){var n=m[e];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||a.ext_srgb&&(35904===n||35906===n)?t[n]=n:32855===n||0<=e.indexOf("rgba")?t[n]=6408:t[n]=6407,t},{}));function n(){this.internalformat=6408,this.format=6408,this.type=5121,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=37444,this.width=0,this.height=0,this.channels=0}function S(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function T(t,e){var n,r,o,i;"object"==typeof e&&e&&("premultiplyAlpha"in e&&(ke.type(e.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(ke.type(e.flipY,"boolean","invalid texture flip"),t.flipY=e.flipY),"alignment"in e&&(ke.oneOf(e.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=e.alignment),"colorSpace"in e&&(ke.parameter(e.colorSpace,h,"invalid colorSpace"),t.colorSpace=h[e.colorSpace]),"type"in e&&(r=e.type,ke(a.oes_texture_float||!("float"===r||"float32"===r),"you must enable the OES_texture_float extension in order to use floating point textures."),ke(a.oes_texture_half_float||!("half float"===r||"float16"===r),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ke(a.webgl_depth_texture||!("uint16"===r||"uint32"===r||"depth stencil"===r),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ke.parameter(r,y,"invalid texture type"),t.type=y[r]),r=t.width,o=t.height,i=t.channels,n=!1,"shape"in e?(ke(Array.isArray(e.shape)&&2<=e.shape.length,"shape must be an array"),r=e.shape[0],o=e.shape[1],3===e.shape.length&&(i=e.shape[2],ke(0<i&&i<=4,"invalid number of channels"),n=!0),ke(0<=r&&r<=A.maxTextureSize,"invalid width"),ke(0<=o&&o<=A.maxTextureSize,"invalid height")):("radius"in e&&(r=o=e.radius,ke(0<=r&&r<=A.maxTextureSize,"invalid radius")),"width"in e&&(r=e.width,ke(0<=r&&r<=A.maxTextureSize,"invalid width")),"height"in e&&(o=e.height,ke(0<=o&&o<=A.maxTextureSize,"invalid height")),"channels"in e&&(i=e.channels,ke(0<i&&i<=4,"invalid number of channels"),n=!0)),t.width=0|r,t.height=0|o,t.channels=0|i,r=!1,"format"in e&&(o=e.format,ke(a.webgl_depth_texture||!("depth"===o||"depth stencil"===o),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ke.parameter(o,m,"invalid texture format"),i=t.internalformat=m[o],t.format=z[i],o in y&&("type"in e||(t.type=y[o])),o in v&&(t.compressed=!0),r=!0),!n&&r?t.channels=Q[t.format]:n&&!r?t.channels!==ft[t.format]&&(t.format=t.internalformat=ft[t.channels]):r&&n&&ke(t.channels===Q[t.format],"number of channels inconsistent with specified format"))}function F(t){p.pixelStorei(37440,t.flipY),p.pixelStorei(37441,t.premultiplyAlpha),p.pixelStorei(37443,t.colorSpace),p.pixelStorei(3317,t.unpackAlignment)}function e(){n.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function O(t,e){var n=null;if(it(e)?n=e:e&&(ke.type(e,"object","invalid pixel data type"),T(t,e),"x"in e&&(t.xOffset=0|e.x),"y"in e&&(t.yOffset=0|e.y),it(e.data))&&(n=e.data),ke(!t.compressed||n instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),e.copy){ke(!n,"can not specify copy and data field for the same texture");var r=I.viewportWidth,o=I.viewportHeight;t.width=t.width||r-t.xOffset,t.height=t.height||o-t.yOffset,t.needsCopy=!0,ke(0<=t.xOffset&&t.xOffset<r&&0<=t.yOffset&&t.yOffset<o&&0<t.width&&t.width<=r&&0<t.height&&t.height<=o,"copy texture read out of bounds")}else if(n){if(Me(n))t.channels=t.channels||4,t.data=n,"type"in e||5121!==t.type||(t.type=at(n));else if(et(n)){t.channels=t.channels||4;{var i=t;var a=n;var s=a.length;switch(i.type){case 5121:case 5123:case 5125:case 5126:var c=Ae.allocType(i.type,s);c.set(a),i.data=c;break;case 36193:i.data=J(a);break;default:ke.raise("unsupported texture type, must specify a typed array")}}t.alignment=1,t.needsFree=!0}else if(Se(n)){r=n.data;Array.isArray(r)||5121!==t.type||(t.type=at(r));var o=n.shape,e=n.stride,u=3===o.length?(O=o[2],e[2]):(ke(2===o.length,"invalid ndarray pixel data, must be 2 or 3D"),O=1),l=o[0],o=o[1],d=e[0],e=e[1];t.alignment=1,t.width=l,t.height=o,t.channels=O,t.format=t.internalformat=ft[O],t.needsFree=!0;for(var l=t,h=r,f=d,p=e,g=u,y=n.offset,m=l.width,v=l.height,b=l.channels,x=st(l,m*v*b),w=0,_=0;_<v;++_)for(var E=0;E<m;++E)for(var S=0;S<b;++S)x[w++]=h[f*E+p*_+g*S+y];ct(l,x)}else if(rt(n)||ot(n)||$(n)===pt)rt(n)||ot(n)?t.element=n:t.element=n.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if($(n)===gt)t.element=n,t.width=n.width,t.height=n.height,t.channels=4;else if($(n)===yt)t.element=n,t.width=n.naturalWidth,t.height=n.naturalHeight,t.channels=4;else if($(n)===mt)t.element=n,t.width=n.videoWidth,t.height=n.videoHeight,t.channels=4;else if(nt(n)){for(var o=t.width||n[0].length,O=t.height||n.length,r=t.channels,r=Zt(n[0][0])?r||n[0][0].length:r||1,M=lt(n),k=1,C=0;C<M.length;++C)k*=M[C];d=st(t,k);dt(n,M,"",d),ct(t,d),t.alignment=1,t.width=o,t.height=O,t.channels=r,t.format=t.internalformat=ft[r],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;5126===t.type?ke(0<=A.extensions.indexOf("oes_texture_float"),"oes_texture_float extension not enabled"):36193===t.type&&ke(0<=A.extensions.indexOf("oes_texture_half_float"),"oes_texture_half_float extension not enabled")}function G(t,e,n,r,o){var i=t.element,a=t.data,s=t.internalformat,c=t.format,u=t.type,l=t.width,d=t.height;F(t),i?p.texSubImage2D(e,o,n,r,c,u,i):t.compressed?p.compressedTexSubImage2D(e,o,n,r,s,l,d,a):t.needsCopy?(g(),p.copyTexSubImage2D(e,o,n,r,t.xOffset,t.yOffset,l,d)):p.texSubImage2D(e,o,n,r,l,d,c,u,a)}var U=[];function M(){return U.pop()||new e}function k(t){t.needsFree&&Ae.freeType(t.data),e.call(t),U.push(t)}function W(){n.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function C(t,e,n){var r=t.images[0]=M();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function j(t,e){var n=null;if(it(e))S(n=t.images[0]=M(),t),O(n,e),t.mipmask=1;else if(T(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,o=0;o<r.length;++o)S(n=t.images[o]=M(),t),n.width>>=o,n.height>>=o,O(n,r[o]),t.mipmask|=1<<o;else S(n=t.images[0]=M(),t),O(n,e),t.mipmask=1;S(t,t.images[0]),!t.compressed||33776!==t.internalformat&&33777!==t.internalformat&&33778!==t.internalformat&&33779!==t.internalformat||ke(t.width%4==0&&t.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function X(t,e){for(var n,r,o,i,a,s,c,u,l,d,h=t.images,f=0;f<h.length;++f){if(!h[f])return;n=h[f],r=e,o=f,d=l=u=c=s=a=i=void 0,i=n.element,a=n.data,s=n.internalformat,c=n.format,u=n.type,l=n.width,d=n.height,F(n),i?p.texImage2D(r,o,c,c,u,i):n.compressed?p.compressedTexImage2D(r,o,s,l,d,0,a):n.needsCopy?(g(),p.copyTexImage2D(r,o,c,n.xOffset,n.yOffset,l,d,0)):p.texImage2D(r,o,c,l,d,0,c,u,a||null)}}var Y=[];function V(){var t=Y.pop()||new W;n.call(t);for(var e=t.mipmask=0;e<16;++e)t.images[e]=null;return t}function H(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&k(e[n]),e[n]=null;Y.push(t)}function N(){this.minFilter=9728,this.magFilter=9728,this.wrapS=33071,this.wrapT=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function q(t,e){"min"in e&&(r=e.min,ke.parameter(r,d),t.minFilter=d[r],0<=ht.indexOf(t.minFilter))&&!("faces"in e)&&(t.genMipmaps=!0),"mag"in e&&(r=e.mag,ke.parameter(r,l),t.magFilter=l[r]);var n,r=t.wrapS,o=t.wrapT;if("wrap"in e?"string"==typeof(n=e.wrap)?(ke.parameter(n,c),r=o=c[n]):Array.isArray(n)&&(ke.parameter(n[0],c),ke.parameter(n[1],c),r=c[n[0]],o=c[n[1]]):("wrapS"in e&&(n=e.wrapS,ke.parameter(n,c),r=c[n]),"wrapT"in e&&(n=e.wrapT,ke.parameter(n,c),o=c[n])),t.wrapS=r,t.wrapT=o,"anisotropic"in e&&(n=e.anisotropic,ke("number"==typeof n&&1<=n&&n<=A.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic),"mipmap"in e){var i=!1;switch(typeof e.mipmap){case"string":ke.parameter(e.mipmap,s,"invalid mipmap hint"),t.mipmapHint=s[e.mipmap],i=t.genMipmaps=!0;break;case"boolean":i=t.genMipmaps=e.mipmap;break;case"object":ke(Array.isArray(e.mipmap),"invalid mipmap type"),i=!(t.genMipmaps=!1);break;default:ke.raise("invalid mipmap type")}!i||"min"in e||(t.minFilter=9984)}}function D(t,e){p.texParameteri(e,10241,t.minFilter),p.texParameteri(e,10240,t.magFilter),p.texParameteri(e,10242,t.wrapS),p.texParameteri(e,10243,t.wrapT),a.ext_texture_filter_anisotropic&&p.texParameteri(e,34046,t.anisotropic),t.genMipmaps&&(p.hint(33170,t.mipmapHint),p.generateMipmap(e))}var K=0,P={},r=A.maxTextureUnits,o=Array(r).map(function(){return null});function L(t){n.call(this),this.mipmask=0,this.internalformat=6408,this.id=K++,this.refCount=1,this.target=t,this.texture=p.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new N,f.profile&&(this.stats={size:0})}function R(t){p.activeTexture(33984),p.bindTexture(t.target,t.texture)}function B(){var t=o[0];t?p.bindTexture(t.target,t.texture):p.bindTexture(3553,null)}function Z(t){var e=t.texture,n=(ke(e,"must not double destroy texture"),t.unit),r=t.target;0<=n&&(p.activeTexture(33984+n),p.bindTexture(r,null),o[n]=null),p.deleteTexture(e),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete P[t.id],u.textureCount--}return Ee(L.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(t<0){for(var e=0;e<r;++e){var n=o[e];if(n){if(0<n.bindCount)continue;n.unit=-1}o[e]=this,t=e;break}r<=t&&ke.raise("insufficient number of texture units"),f.profile&&u.maxTextureUnits<t+1&&(u.maxTextureUnits=t+1),this.unit=t,p.activeTexture(33984+t),p.bindTexture(this.target,this.texture)}return t},unbind:function(){--this.bindCount},decRef:function(){--this.refCount<=0&&Z(this)}}),f.profile&&(u.getTotalTextureSize=function(){var e=0;return Object.keys(P).forEach(function(t){e+=P[t].stats.size}),e}),{create2D:function(t,e){var s=new L(3553);function c(t,e){var n=s.texInfo,r=(N.call(n),V());return"number"==typeof t?C(r,0|t,"number"==typeof e?0|e:0|t):t?(ke.type(t,"object","invalid arguments to regl.texture"),q(n,t),j(r,t)):C(r,1,1),n.genMipmaps&&(r.mipmask=(r.width<<1)-1),s.mipmask=r.mipmask,S(s,r),ke.texture2D(n,r,A),s.internalformat=r.internalformat,c.width=r.width,c.height=r.height,R(s),X(r,3553),D(n,3553),B(),H(r),f.profile&&(s.stats.size=ut(s.internalformat,s.type,r.width,r.height,n.genMipmaps,!1)),c.format=b[s.internalformat],c.type=x[s.type],c.mag=w[n.magFilter],c.min=_[n.minFilter],c.wrapS=E[n.wrapS],c.wrapT=E[n.wrapT],c}return P[s.id]=s,u.textureCount++,c(t,e),c.subimage=function(t,e,n,r){ke(!!t,"must specify image data");var e=0|e,n=0|n,r=0|r,o=M();return S(o,s),o.width=0,o.height=0,O(o,t),o.width=o.width||(s.width>>r)-e,o.height=o.height||(s.height>>r)-n,ke(s.type===o.type&&s.format===o.format&&s.internalformat===o.internalformat,"incompatible format for texture.subimage"),ke(0<=e&&0<=n&&e+o.width<=s.width&&n+o.height<=s.height,"texture.subimage write out of bounds"),ke(s.mipmask&1<<r,"missing mipmap data"),ke(o.data||o.element||o.needsCopy,"missing image data"),R(s),G(o,3553,e,n,r),B(),k(o),c},c.resize=function(t,e){var n=0|t,r=0|e||n;if(n!==s.width||r!==s.height){c.width=s.width=n,c.height=s.height=r,R(s);for(var o=0;s.mipmask>>o;++o){var i=n>>o,a=r>>o;if(!i||!a)break;p.texImage2D(3553,o,s.format,i,a,0,s.format,s.type,null)}B(),f.profile&&(s.stats.size=ut(s.internalformat,s.type,n,r,!1,!1))}return c},c._reglType="texture2d",c._texture=s,f.profile&&(c.stats=s.stats),c.destroy=function(){s.decRef()},c},createCube:function(t,e,n,r,o,i){var l=new L(34067),d=(P[l.id]=l,u.cubeCount++,new Array(6));function h(t,e,n,r,o,i){var a=l.texInfo;for(N.call(a),u=0;u<6;++u)d[u]=V();if("number"!=typeof t&&t)if("object"==typeof t)if(e)j(d[0],t),j(d[1],e),j(d[2],n),j(d[3],r),j(d[4],o),j(d[5],i);else if(q(a,t),T(l,t),"faces"in t){var s=t.faces;for(ke(Array.isArray(s)&&6===s.length,"cube faces must be a length 6 array"),u=0;u<6;++u)ke("object"==typeof s[u]&&!!s[u],"invalid input for cube map face"),S(d[u],l),j(d[u],s[u])}else for(u=0;u<6;++u)j(d[u],t);else ke.raise("invalid arguments to cube map");else for(var c=0|t||1,u=0;u<6;++u)C(d[u],c,c);for(S(l,d[0]),A.npotTextureCube||ke(tt(l.width)&&tt(l.height),"your browser does not support non power or two texture dimensions"),a.genMipmaps?l.mipmask=(d[0].width<<1)-1:l.mipmask=d[0].mipmask,ke.textureCube(l,a,d,A),l.internalformat=d[0].internalformat,h.width=d[0].width,h.height=d[0].height,R(l),u=0;u<6;++u)X(d[u],34069+u);for(D(a,34067),B(),f.profile&&(l.stats.size=ut(l.internalformat,l.type,h.width,h.height,a.genMipmaps,!0)),h.format=b[l.internalformat],h.type=x[l.type],h.mag=w[a.magFilter],h.min=_[a.minFilter],h.wrapS=E[a.wrapS],h.wrapT=E[a.wrapT],u=0;u<6;++u)H(d[u]);return h}return h(t,e,n,r,o,i),h.subimage=function(t,e,n,r,o){ke(!!e,"must specify image data"),ke("number"==typeof t&&t===(0|t)&&0<=t&&t<6,"invalid face");var n=0|n,r=0|r,o=0|o,i=M();return S(i,l),i.width=0,i.height=0,O(i,e),i.width=i.width||(l.width>>o)-n,i.height=i.height||(l.height>>o)-r,ke(l.type===i.type&&l.format===i.format&&l.internalformat===i.internalformat,"incompatible format for texture.subimage"),ke(0<=n&&0<=r&&n+i.width<=l.width&&r+i.height<=l.height,"texture.subimage write out of bounds"),ke(l.mipmask&1<<o,"missing mipmap data"),ke(i.data||i.element||i.needsCopy,"missing image data"),R(l),G(i,34069+t,n,r,o),B(),k(i),h},h.resize=function(t){var e=0|t;if(e!==l.width){h.width=l.width=e,h.height=l.height=e,R(l);for(var n=0;n<6;++n)for(var r=0;l.mipmask>>r;++r)p.texImage2D(34069+n,r,l.format,e>>r,e>>r,0,l.format,l.type,null);return B(),f.profile&&(l.stats.size=ut(l.internalformat,l.type,h.width,h.height,!1,!0)),h}},h._reglType="textureCube",h._texture=l,f.profile&&(h.stats=l.stats),h.destroy=function(){l.decRef()},h},clear:function(){for(var t=0;t<r;++t)p.activeTexture(33984+t),p.bindTexture(3553,null),o[t]=null;Oe(P).forEach(Z),u.cubeCount=0,u.textureCount=0},getTexture:function(t){return null},restore:function(){for(var t=0;t<r;++t){var e=o[t];e&&(e.bindCount=0,e.unit=-1,o[t]=null)}Oe(P).forEach(function(t){t.texture=p.createTexture(),p.bindTexture(t.target,t.texture);for(var e=0;e<32;++e)if(0!=(t.mipmask&1<<e))if(3553===t.target)p.texImage2D(3553,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);else for(var n=0;n<6;++n)p.texImage2D(34069+n,e,t.internalformat,t.width>>e,t.height>>e,0,t.internalformat,t.type,null);D(t.texInfo,t.target)})}}}function ze(t,e,n){return i[t]*e*n}function Fe(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.offset=0,this.stride=0,this.divisor=0}function Ge(s,c,u,l,d,h,f){function r(t){null===c.next?(ke(d.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),e=5121):(ke(null!==c.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),e=c.next.colorAttachments[0].texture._texture.type,h.oes_texture_float?(ke(5121===e||5126===e,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),5126===e&&ke(f.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ke(5121===e,"Reading from a framebuffer is only allowed for the type 'uint8'"));var e,n=0,r=0,o=l.framebufferWidth,i=l.framebufferHeight,a=null,t=(Me(t)?a=t:t&&(ke.type(t,"object","invalid arguments to regl.read()"),n=0|t.x,r=0|t.y,ke(0<=n&&n<l.framebufferWidth,"invalid x offset for regl.read"),ke(0<=r&&r<l.framebufferHeight,"invalid y offset for regl.read"),o=0|(t.width||l.framebufferWidth-n),i=0|(t.height||l.framebufferHeight-r),a=t.data||null),a&&(5121===e?ke(a instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):5126===e&&ke(a instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ke(0<o&&o+n<=l.framebufferWidth,"invalid width for read pixels"),ke(0<i&&i+r<=l.framebufferHeight,"invalid height for read pixels"),u(),o*i*4);return a||(5121===e?a=new Uint8Array(t):5126===e&&(a=a||new Float32Array(t))),ke.isTypedArray(a,"data buffer for regl.read() must be a typedarray"),ke(a.byteLength>=t,"data buffer for regl.read() too small"),s.pixelStorei(3333,4),s.readPixels(n,r,o,i,6408,e,a),a}return function(t){return t&&"framebuffer"in t?(e=t,c.setFBO({framebuffer:e.framebuffer},function(){n=r(e)}),n):r(t);var e,n}}function I(t){return Array.prototype.slice.call(t)}function T(t){return I(t).join("")}function de(t){return Array.isArray(t)||Me(t)||Se(t)}function he(t){return t.sort(function(t,e){return"viewport"===t||"viewport"!==e&&t<e?-1:1})}function $t(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function Qt(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function Jt(t){return new $t(!1,!1,!1,t)}function te(t,e){var n,r=t.type;return 0===r?new $t(!0,1<=(n=t.data.length),2<=n,e):4===r?new $t((n=t.data).thisDep,n.contextDep,n.propDep,e):new $t(3===r,2===r,1===r,e)}function Ue(t,Ot,Mt,kt,Ct,At,r,It,i,Tt,jt,a,s,y,c){var Nt=Tt.Record,Dt={add:32774,subtract:32778,"reverse subtract":32779},Pt=(Mt.ext_blend_minmax&&(Dt.min=32775,Dt.max=32776),Mt.angle_instanced_arrays),u=Mt.webgl_draw_buffers,m={dirty:!0,profile:c.profile},o={},Lt=[],f={},v={};function Rt(t){return t.replace(".","_")}function e(t,e,n){var r=Rt(t);Lt.push(t),o[r]=m[r]=!!n,f[r]=e}function n(t,e,n){var r=Rt(t);Lt.push(t),Array.isArray(n)?(m[r]=n.slice(),o[r]=n.slice()):m[r]=o[r]=n,v[r]=e}e("dither",3024),e("blend.enable",3042),n("blend.color","blendColor",[0,0,0,0]),n("blend.equation","blendEquationSeparate",[32774,32774]),n("blend.func","blendFuncSeparate",[1,0,1,0]),e("depth.enable",2929,!0),n("depth.func","depthFunc",513),n("depth.range","depthRange",[0,1]),n("depth.mask","depthMask",!0),n("colorMask","colorMask",[!0,!0,!0,!0]),e("cull.enable",2884),n("cull.face","cullFace",1029),n("frontFace","frontFace",2305),n("lineWidth","lineWidth",1),e("polygonOffset.enable",32823),n("polygonOffset.offset","polygonOffset",[0,0]),e("sample.alpha",32926),e("sample.enable",32928),n("sample.coverage","sampleCoverage",[1,!1]),e("stencil.enable",2960),n("stencil.mask","stencilMask",-1),n("stencil.func","stencilFunc",[519,0,-1]),n("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),n("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),e("scissor.enable",3089),n("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),n("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var b={gl:t,context:s,strings:Ot,next:o,current:m,draw:a,elements:At,buffer:Ct,shader:jt,attributes:Tt.state,vao:Tt,uniforms:i,framebuffer:It,extensions:Mt,timer:y,isBufferArgs:de},x={primTypes:je,compareFuncs:ue,blendFuncs:ce,blendEquations:Dt,stencilOps:le,glTypes:Ie,orientationType:we},w=(ke.optional(function(){b.isArrayLike=Zt}),u&&(x.backBuffer=[1029],x.drawBuffer=Kt(kt.maxDrawbuffers,function(t){return 0===t?[0]:Kt(t,function(t){return 36064+t})})),0);function Bt(){r=0,o=[],i=[],n=u(),s={};var r,o,i,n,s,a={global:n,link:function(t){for(var e=0;e<i.length;++e)if(i[e]===t)return o[e];var n="g"+r++;return o.push(n),i.push(t),n},block:u,proc:function(t,e){var n=[];function r(){var t="a"+n.length;return n.push(t),t}e=e||0;for(var o=0;o<e;++o)r();var i=l(),a=i.toString;return s[t]=Ee(i,{arg:r,toString:function(){return T(["function(",n.join(),"){",a(),"}"])}})},scope:l,cond:function(){var e=T(arguments),t=l(),n=l(),r=t.toString,o=n.toString;return Ee(t,{then:function(){return t.apply(t,I(arguments)),this},else:function(){return n.apply(n,I(arguments)),this},toString:function(){var t=(t=o())&&"else{"+t+"}";return T(["if(",e,"){",r(),"}",t])}})},compile:function(){var e=['"use strict";',n,"return {"],t=(Object.keys(s).forEach(function(t){e.push('"',t,'":',s[t].toString(),",")}),e.push("}"),T(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n"));return Function.apply(null,o.concat(t)).apply(null,i)}},c=a.link,e=a.global;function u(){var e=[],n=[];return Ee(function(){e.push.apply(e,I(arguments))},{def:function(){var t="v"+r++;return n.push(t),0<arguments.length&&(e.push(t,"="),e.push.apply(e,I(arguments)),e.push(";")),t},toString:function(){return T([0<n.length?"var "+n.join(",")+";":"",T(e)])}})}function l(){var r=u(),n=u(),t=r.toString,e=n.toString;function o(t,e){n(t,e,"=",r.def(t,e),";")}return Ee(function(){r.apply(r,I(arguments))},{def:r.def,entry:r,exit:n,save:o,set:function(t,e,n){o(t,e),r(t,e,"=",n,";")},toString:function(){return t()+e()}})}a.id=w++,a.batchId="0";var d=c(b),h=a.shared={props:"a0"},f=(Object.keys(b).forEach(function(t){h[t]=e.def(d,".",t)}),ke.optional(function(){a.CHECK=c(ke),a.commandStr=ke.guessCommand(),a.command=c(a.commandStr),a.assert=function(t,e,n){t("if(!(",e,"))",this.CHECK,".commandRaise(",c(n),",",this.command,");")},x.invalidBlendCombinations=be}),a.next={}),p=a.current={},g=(Object.keys(v).forEach(function(t){Array.isArray(m[t])&&(f[t]=e.def(h.next,".",t),p[t]=e.def(h.current,".",t))}),a.constants={}),y=(Object.keys(x).forEach(function(t){g[t]=e.def(JSON.stringify(x[t]))}),a.invoke=function(t,e){switch(e.type){case 0:var n=["this",h.context,h.props,a.batchId];return t.def(c(e.data),".call(",n.slice(0,Math.max(e.data.length+1,4)),")");case 1:return t.def(h.props,e.data);case 2:return t.def(h.context,e.data);case 3:return t.def("this",e.data);case 4:return e.data.append(a,t),e.data.ref}},a.attribCache={},{});return a.scopeAttrib=function(t){var e,t=Ot.id(t);return t in y?y[t]:(e=(e=Tt.scope[t])||(Tt.scope[t]=new Nt),y[t]=c(e))},a}function zt(n,r,o){var i=n.shared.context,a=n.scope();Object.keys(o).forEach(function(t){r.save(i,"."+t);var e=o[t];a(i,".",t,"=",e.append(n,r),";")}),r(a)}function Ft(t,e,n,r){var o,i=t.shared,a=i.gl,s=i.framebuffer;u&&(o=e.def(i.extensions,".webgl_draw_buffers"));var i=t.constants,c=i.drawBuffer,i=i.backBuffer,n=n?n.append(t,e):e.def(s,".next");r||e("if(",n,"!==",s,".cur){"),e("if(",n,"){",a,".bindFramebuffer(",36160,",",n,".framebuffer);"),u&&e(o,".drawBuffersWEBGL(",c,"[",n,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",36160,",null);"),u&&e(o,".drawBuffersWEBGL(",i,");"),e("}",s,".cur=",n,";"),r||e("}")}function Gt(o,t,i){var e=o.shared,a=e.gl,s=o.current,c=o.next,u=e.current,l=e.next,d=o.cond(u,".dirty");Lt.forEach(function(t){var e,n,r,t=Rt(t);t in i.state||(t in c?(e=c[t],n=s[t],r=Kt(m[t].length,function(t){return d.def(e,"[",t,"]")}),d(o.cond(r.map(function(t,e){return t+"!=="+n+"["+e+"]"}).join("||")).then(a,".",v[t],"(",r,");",r.map(function(t,e){return n+"["+e+"]="+t}).join(";"),";"))):(e=d.def(l,".",t),r=o.cond(e,"!==",u,".",t),d(r),t in f?r(o.cond(e).then(a,".enable(",f[t],");").else(a,".disable(",f[t],");"),u,".",t,"=",e,";"):r(a,".",v[t],"(",e,");",u,".",t,"=",e,";")))}),0===Object.keys(i.state).length&&d(u,".dirty=false;"),t(d)}function Ut(i,a,s,c){var t=i.shared,u=i.current,l=t.current,d=t.gl;he(Object.keys(s)).forEach(function(t){var e,n,r,o=s[t];c&&!c(o)||(e=o.append(i,a),f[t]?(n=f[t],Qt(o)?a(d,e?".enable(":".disable(",n,");"):a(i.cond(e).then(d,".enable(",n,");").else(d,".disable(",n,");")),a(l,".",t,"=",e,";")):Zt(e)?(r=u[t],a(d,".",v[t],"(",e,");",e.map(function(t,e){return r+"["+e+"]="+t}).join(";"),";")):a(d,".",v[t],"(",e,");",l,".",t,"=",e,";"))})}function Wt(t,e){Pt&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function Xt(t,n,e,r,o){var i,a,s,c=t.shared,u=t.stats,l=c.current,d=c.timer,c=e.profile;function h(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function f(t){t(i=n.def(),"=",h(),";"),"string"==typeof o?t(u,".count+=",o,";"):t(u,".count++;"),y&&(r?t(a=n.def(),"=",d,".getNumPendingQueries();"):t(d,".beginQuery(",u,");"))}function p(t){t(u,".cpuTime+=",h(),"-",i,";"),y&&(r?t(d,".pushScopeStats(",a,",",d,".getNumPendingQueries(),",u,");"):t(d,".endQuery();"))}function g(t){var e=n.def(l,".profile");n(l,".profile=",t,";"),n.exit(l,".profile=",e,";")}if(c){if(Qt(c))return c.enable?(f(n),p(n.exit),g("true")):g("false");g(s=c.append(t,n))}else s=n.def(l,".profile");e=t.block(),f(e),n("if(",s,"){",e,"}"),c=t.block();p(c),n.exit("if(",s,"){",c,"}")}function d(g,y,m,t,v){var b=g.shared;t.forEach(function(t){var e,n,r,o,i,a,s,c,u,l=t.name,d=m.attributes[l];if(d){if(!v(d))return;e=d.append(g,y)}else{if(!v(G))return;var h=g.scopeAttrib(l);ke.optional(function(){g.assert(y,h+".state","missing attribute "+l)}),e={},Object.keys(new Nt).forEach(function(t){e[t]=y.def(h,".",t)})}function f(){y("if(!",a,".buffer){",o,".enableVertexAttribArray(",i,");}");var t=r.type,e=r.size?y.def(r.size,"||",n):n;y("if(",a,".type!==",t,"||",a,".size!==",e,"||",u.map(function(t){return a+"."+t+"!=="+r[t]}).join("||"),"){",o,".bindBuffer(",34962,",",s,".buffer);",o,".vertexAttribPointer(",[i,e,t,r.normalized,r.stride,r.offset],");",a,".type=",t,";",a,".size=",e,";",u.map(function(t){return a+"."+t+"="+r[t]+";"}).join(""),"}"),Pt&&(t=r.divisor,y("if(",a,".divisor!==",t,"){",g.instancing,".vertexAttribDivisorANGLE(",[i,t],");",a,".divisor=",t,";}"))}function p(){y("if(",a,".buffer){",o,".disableVertexAttribArray(",i,");",a,".buffer=null;","}if(",ee.map(function(t,e){return a+"."+t+"!=="+c[e]}).join("||"),"){",o,".vertexAttrib4f(",i,",",c,");",ee.map(function(t,e){return a+"."+t+"="+c[e]+";"}).join(""),"}")}d=g.link(t),n=function(){switch(t.info.type){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(),r=e,o=b.gl,i=y.def(d,".location"),a=y.def(b.attributes,"[",i,"]"),d=r.state,s=r.buffer,c=[r.x,r.y,r.z,r.w],u=["buffer","normalized","offset","stride"],1===d?f():2===d?p():(y("if(",d,"===",1,"){"),f(),y("}else{"),p(),y("}"))})}function h(o,i,t,e,n){for(var r,a=o.shared,s=a.gl,c=0;c<e.length;++c){var u,l=e[c],d=l.name,h=l.info.type,f=t.uniforms[d],p=o.link(l)+".location";if(f){if(!n(f))continue;if(Qt(f)){var g=f.value;if(ke.command(null!=g,'missing uniform "'+d+'"',o.commandStr),35678===h||35680===h){ke.command("function"==typeof g&&(35678===h&&("texture2d"===g._reglType||"framebuffer"===g._reglType)||35680===h&&("textureCube"===g._reglType||"framebufferCube"===g._reglType)),"invalid texture for uniform "+d,o.commandStr);l=o.link(g._texture||g.color[0]._texture);i(s,".uniform1i(",p,",",l+".bind());"),i.exit(l,".unbind();")}else if(35674===h||35675===h||35676===h){ke.optional(function(){ke.command(Zt(g),"invalid matrix for uniform "+d,o.commandStr),ke.command(35674===h&&4===g.length||35675===h&&9===g.length||35676===h&&16===g.length,"invalid length for matrix uniform "+d,o.commandStr)});var l=o.global.def("new Float32Array(["+Array.prototype.slice.call(g)+"])"),y=2;35675===h?y=3:35676===h&&(y=4),i(s,".uniformMatrix",y,"fv(",p,",false,",l,");")}else{switch(h){case 5126:ke.commandType(g,"number","uniform "+d,o.commandStr),r="1f";break;case 35664:ke.command(Zt(g)&&2===g.length,"uniform "+d,o.commandStr),r="2f";break;case 35665:ke.command(Zt(g)&&3===g.length,"uniform "+d,o.commandStr),r="3f";break;case 35666:ke.command(Zt(g)&&4===g.length,"uniform "+d,o.commandStr),r="4f";break;case 35670:ke.commandType(g,"boolean","uniform "+d,o.commandStr),r="1i";break;case 5124:ke.commandType(g,"number","uniform "+d,o.commandStr),r="1i";break;case 35671:case 35667:ke.command(Zt(g)&&2===g.length,"uniform "+d,o.commandStr),r="2i";break;case 35672:case 35668:ke.command(Zt(g)&&3===g.length,"uniform "+d,o.commandStr),r="3i";break;case 35673:case 35669:ke.command(Zt(g)&&4===g.length,"uniform "+d,o.commandStr),r="4i"}i(s,".uniform",r,"(",p,",",Zt(g)?Array.prototype.slice.call(g):g,");")}continue}u=f.append(o,i)}else{if(!n(G))continue;u=i.def(a.uniforms,"[",Ot.id(d),"]")}35678===h?i("if(",u,"&&",u,'._reglType==="framebuffer"){',u,"=",u,".color[0];","}"):35680===h&&i("if(",u,"&&",u,'._reglType==="framebufferCube"){',u,"=",u,".color[0];","}"),ke.optional(function(){function e(t,e){o.assert(i,t,'bad data or missing for uniform "'+d+'".  '+e)}function t(t){e("typeof "+u+'==="'+t+'"',"invalid type, expected "+t)}function n(t){e(a.isArrayLike+"("+u+")&&"+u+".length==="+t,"invalid vector, should have length "+t,o.commandStr)}function r(t){e("typeof "+u+'==="function"&&'+u+'._reglType==="texture'+(3553===t?"2d":"Cube")+'"',"invalid texture type",o.commandStr)}switch(h){case 5124:t("number");break;case 35667:n(2);break;case 35668:n(3);break;case 35669:n(4);break;case 5126:t("number");break;case 35664:n(2);break;case 35665:n(3);break;case 35666:n(4);break;case 35670:t("boolean");break;case 35671:n(2);break;case 35672:n(3);break;case 35673:case 35674:n(4);break;case 35675:n(9);break;case 35676:n(16);break;case 35678:r(3553);break;case 35680:r(34067)}});var m,v=1;switch(h){case 35678:case 35680:var b=i.def(u,"._texture");i(s,".uniform1i(",p,",",b,".bind());"),i.exit(b,".unbind();");continue;case 5124:case 35670:r="1i";break;case 35667:case 35671:r="2i",v=2;break;case 35668:case 35672:r="3i",v=3;break;case 35669:case 35673:r="4i",v=4;break;case 5126:r="1f";break;case 35664:r="2f",v=2;break;case 35665:r="3f",v=3;break;case 35666:r="4f",v=4;break;case 35674:r="Matrix2fv";break;case 35675:r="Matrix3fv";break;case 35676:r="Matrix4fv"}i(s,".uniform",r,"(",p,","),"M"===r.charAt(0)?(y=Math.pow(h-35674+2,2),m=o.global.def("new Float32Array(",y,")"),i("false,(Array.isArray(",u,")||",u," instanceof Float32Array)?",u,":(",Kt(y,function(t){return m+"["+t+"]="+u+"["+t+"]"}),",",m,")")):i(1<v?Kt(v,function(t){return u+"["+t+"]"}):u),i(");")}}function p(n,r,o,i){var t,e=n.shared,a=e.gl,s=e.draw,c=i.draw,u=(e=c.elements,t=r,(e=e?((e.contextDep&&i.contextDynamic||e.propDep)&&(t=o),e.append(n,t)):t.def(s,".",re))&&t("if("+e+")"+a+".bindBuffer(34963,"+e+".buffer.buffer);"),e);function l(t){var e=c[t];return e?e.contextDep&&i.contextDynamic||e.propDep?e.append(n,o):e.append(n,r):r.def(s,".",t)}var d,h,f,p,g,y=l(oe),m=l(ye),v=(g=r,(p=c.count)?((p.contextDep&&i.contextDynamic||p.propDep)&&(g=o),f=p.append(n,g),ke.optional(function(){p.MISSING&&n.assert(r,"false","missing vertex count"),p.DYNAMIC&&n.assert(g,f+">=0","missing vertex count")})):(f=g.def(s,".",ie),ke.optional(function(){n.assert(g,f+">=0","missing vertex count")})),f);if("number"==typeof v){if(0===v)return}else o("if(",v,"){"),o.exit("}");Pt&&(d=l(me),h=n.instancing);var b=u+".type",x=c.elements&&Qt(c.elements);function w(){function t(){o(h,".drawElementsInstancedANGLE(",[y,v,b,m+"<<(("+b+"-5121)>>1)",d],");")}function e(){o(h,".drawArraysInstancedANGLE(",[y,m,v,d],");")}u?x?t():(o("if(",u,"){"),t(),o("}else{"),e(),o("}")):e()}function _(){function t(){o(a+".drawElements("+[y,v,b,m+"<<(("+b+"-5121)>>1)"]+");")}function e(){o(a+".drawArrays("+[y,m,v]+");")}u?x?t():(o("if(",u,"){"),t(),o("}else{"),e(),o("}")):e()}Pt&&("number"!=typeof d||0<=d)?"string"==typeof d?(o("if(",d,">0){"),w(),o("}else if(",d,"<0){"),_(),o("}")):w():_()}function Yt(t,e,n,r,o){var i=Bt(),o=i.proc("body",o);return ke.optional(function(){i.commandStr=e.commandStr,i.command=i.link(e.commandStr)}),Pt&&(i.instancing=o.def(i.shared.extensions,".angle_instanced_arrays")),t(i,o,n,r),i.compile().body}function Ht(t,e,n,r){Wt(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),d(t,e,n,r.attributes,function(){return 1})),h(t,e,n,r.uniforms,function(){return 1}),p(t,e,e,n)}function g(t,e,n,r){function o(){return!0}t.batchId="a1",Wt(t,e),d(t,e,n,r.attributes,o),h(t,e,n,r.uniforms,o),p(t,e,e,n)}function Vt(e,t,n,r){Wt(e,t);var o=n.contextDep,i=t.def(),a=t.def(),s=(e.shared.props=a,e.batchId=i,e.scope()),c=e.scope();function u(t){return t.contextDep&&o||t.propDep}function l(t){return!u(t)}t(s.entry,"for(",i,"=0;",i,"<","a1",";++",i,"){",a,"=","a0","[",i,"];",c,"}",s.exit),n.needsContext&&zt(e,c,n.context),n.needsFramebuffer&&Ft(e,c,n.framebuffer),Ut(e,c,n.state,u),n.profile&&u(n.profile)&&Xt(e,c,n,!1,!0),r?(n.useVAO?n.drawVAO?u(n.drawVAO)?c(e.shared.vao,".setVAO(",n.drawVAO.append(e,c),");"):s(e.shared.vao,".setVAO(",n.drawVAO.append(e,s),");"):s(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(s(e.shared.vao,".setVAO(null);"),d(e,s,n,r.attributes,l),d(e,c,n,r.attributes,u)),h(e,s,n,r.uniforms,l),h(e,c,n,r.uniforms,u),p(e,s,c,n)):(t=e.global.def("{}"),a=n.shader.progVar.append(e,c),r=c.def(a,".id"),s=c.def(t,"[",r,"]"),c(e.shared.gl,".useProgram(",a,".program);","if(!",s,"){",s,"=",t,"[",r,"]=",e.link(function(t){return Yt(g,e,n,t,2)}),"(",a,");}",s,".call(this,a0[",i,"],",i,");"))}function qt(r,t,e){var o,i,a,s,c,u,l=t.static[e];l&&function(t){if("object"==typeof t&&!Zt(t))for(var e=Object.keys(t),n=0;n<e.length;++n)if(Ce.isDynamic(t[e[n]]))return 1}(l)&&(o=r.global,i=Object.keys(l),c=s=a=!1,u=r.global.def("{}"),i.forEach(function(t){var e=l[t];if(Ce.isDynamic(e)){var n=te(e="function"==typeof e?l[t]=Ce.unbox(e):e,null);a=a||n.thisDep,c=c||n.propDep,s=s||n.contextDep}else{switch(o(u,".",t,"="),typeof e){case"number":o(e);break;case"string":o('"',e,'"');break;case"object":Array.isArray(e)&&o("[",e.join(),"]");break;default:o(r.link(e))}o(";")}}),t.dynamic[e]=new Ce.DynamicVariable(4,{thisDep:a,contextDep:s,propDep:c,ref:u,append:function(n,r){i.forEach(function(t){var e=l[t];Ce.isDynamic(e)&&(e=n.invoke(r,e),r(u,".",t,"=",e,";"))})}}),delete t.static[e])}return{next:o,current:m,procs:function(){var a=Bt(),s=a.proc("poll"),c=a.proc("refresh"),u=a.block();s(u),c(u);var t,e=a.shared,l=e.gl,d=e.next,h=e.current;u(h,".dirty=false;"),Ft(a,s),Ft(a,c,null,!0),Pt&&(t=a.link(Pt)),Mt.oes_vertex_array_object&&c(a.link(Mt.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var n=0;n<kt.maxAttributes;++n){var r=c.def(e.attributes,"[",n,"]"),o=a.cond(r,".buffer");o.then(l,".enableVertexAttribArray(",n,");",l,".bindBuffer(",34962,",",r,".buffer.buffer);",l,".vertexAttribPointer(",n,",",r,".size,",r,".type,",r,".normalized,",r,".stride,",r,".offset);").else(l,".disableVertexAttribArray(",n,");",l,".vertexAttrib4f(",n,",",r,".x,",r,".y,",r,".z,",r,".w);",r,".buffer=null;"),c(o),Pt&&c(t,".vertexAttribDivisorANGLE(",n,",",r,".divisor);")}return c(a.shared.vao,".currentVAO=null;",a.shared.vao,".setVAO(",a.shared.vao,".targetVAO);"),Object.keys(f).forEach(function(t){var e=f[t],n=u.def(d,".",t),r=a.block();r("if(",n,"){",l,".enable(",e,")}else{",l,".disable(",e,")}",h,".",t,"=",n,";"),c(r),s("if(",n,"!==",h,".",t,"){",r,"}")}),Object.keys(v).forEach(function(t){var e,n,r=v[t],o=m[t],i=a.block();i(l,".",r,"("),Zt(o)?(r=o.length,e=a.global.def(d,".",t),n=a.global.def(h,".",t),i(Kt(r,function(t){return e+"["+t+"]"}),");",Kt(r,function(t){return n+"["+t+"]="+e+"["+t+"];"}).join("")),s("if(",Kt(r,function(t){return e+"["+t+"]!=="+n+"["+t+"]"}).join("||"),"){",i,"}")):(e=u.def(d,".",t),n=u.def(h,".",t),i(e,");",h,".",t,"=",e,";"),s("if(",e,"!==",n,"){",i,"}")),c(i)}),a.compile()}(),compile:function(L,R,t,e,n){var a,r,o,B,z,i,s,c,l,F,G,d,u,h,U,f,p,g,W,X,Y,V,H,q,y,m,K,Z,$,Q,v,J,tt,et,nt,rt,ot,it,b,at,st,ct,ut,lt,dt,ht,x,ft,pt,gt,w,yt,mt,vt,_,E,S,O,M,k,C,A,I,T,j,N,D,P=Bt(),n=(P.stats=P.link(n),Object.keys(R.static).forEach(function(t){qt(P,R,t)}),ve.forEach(function(t){qt(P,L,t)}),r=R,n=t,t=e,o=P,tt=(a=L).static,et=a.dynamic,ke.optional(function(){var e=[ne,pe,ge,re,oe,ye,ie,me,fe,"vao"].concat(Lt);function t(t){Object.keys(t).forEach(function(t){ke.command(0<=e.indexOf(t),'unknown parameter "'+t+'"',o.commandStr)})}t(tt),t(et)}),e=function(t){var e=a.static;if("string"==typeof e.frag&&"string"==typeof e.vert){if(0<Object.keys(t.dynamic).length)return null;var n=t.static,r=Object.keys(n);if(0<r.length&&"number"==typeof n[r[0]]){for(var o=[],i=0;i<r.length;++i)ke("number"==typeof n[r[i]],"must specify all vertex attribute locations when using vaos"),o.push([0|n[r[i]],r[i]]);return o}}return null}(r),A=a.static,N=a.dynamic,A=ne in A?(v=A[ne])?(v=It.getFramebuffer(v),ke.command(v,"invalid framebuffer object"),Jt(function(t,e){var n=t.link(v),t=t.shared,t=(e.set(t.framebuffer,".next",n),t.context);return e.set(t,"."+ae,n+".width"),e.set(t,"."+se,n+".height"),n})):Jt(function(t,e){t=t.shared,e.set(t.framebuffer,".next","null"),t=t.context;return e.set(t,"."+ae,t+".drawingBufferWidth"),e.set(t,"."+se,t+".drawingBufferHeight"),"null"}):ne in N?te(J=N[ne],function(t,e){var n=t.invoke(e,J),r=t.shared,o=r.framebuffer,i=e.def(o,".getFramebuffer(",n,")"),o=(ke.optional(function(){t.assert(e,"!"+n+"||"+i,"invalid framebuffer object")}),e.set(o,".next",i),r.context);return e.set(o,"."+ae,i+"?"+i+".width:"+o+".drawingBufferWidth"),e.set(o,"."+se,i+"?"+i+".height:"+o+".drawingBufferHeight"),i}):null,m=A,K=o,Z=a.static,$=a.dynamic,nt={viewport:N=(N=wt("viewport"))?new $t((Q=N).thisDep,N.contextDep,N.propDep,function(t,e){var n=Q.append(t,e),t=t.shared.context;return e.set(t,".viewportWidth",n[2]),e.set(t,".viewportHeight",n[3]),n}):N,scissor_box:wt("scissor.box")},u=o,f=a.static,p=a.dynamic,g=re in f?(de(h=f[re])?h=At.getElements(At.create(h,!0)):h&&(h=At.getElements(h),ke.command(h,"invalid elements",u.commandStr)),(y=Jt(function(t,e){var n;return h?(n=t.link(h),t.ELEMENTS=n):t.ELEMENTS=null})).value=h,y):re in p?te(U=p[re],function(t,e){var n=t.shared,r=n.isBufferArgs,n=n.elements,o=t.invoke(e,U),i=e.def("null"),r=e.def(r,"(",o,")"),a=t.cond(r).then(i,"=",n,".createStream(",o,");").else(i,"=",n,".getElements(",o,");");return ke.optional(function(){t.assert(a.else,"!"+o+"||"+i,"invalid elements")}),e.entry(a),e.exit(t.cond(r).then(n,".destroyStream(",i,");")),t.ELEMENTS=i}):null,y=xt(ye,!0),N={elements:g,primitive:oe in f?(H=f[oe],ke.commandParameter(H,je,"invalid primitve",u.commandStr),Jt(function(t,e){return je[H]})):oe in p?te(q=p[oe],function(t,e){var n=t.constants.primTypes,r=t.invoke(e,q);return ke.optional(function(){t.assert(e,r+" in "+n,"invalid primitive, must be one of "+Object.keys(je))}),e.def(n,"[",r,"]")}):g?Qt(g)?g.value?Jt(function(t,e){return e.def(t.ELEMENTS,".primType")}):Jt(function(){return 4}):new $t(g.thisDep,g.contextDep,g.propDep,function(t,e){t=t.ELEMENTS;return e.def(t,"?",t,".primType:",4)}):null,count:ie in f?(W=0|f[ie],ke.command("number"==typeof W&&0<=W,"invalid vertex count",u.commandStr),Jt(function(){return W})):ie in p?te(X=p[ie],function(t,e){var n=t.invoke(e,X);return ke.optional(function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")}),n}):g?Qt(g)?g?y?new $t(y.thisDep,y.contextDep,y.propDep,function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return ke.optional(function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")}),n}):Jt(function(t,e){return e.def(t.ELEMENTS,".vertCount")}):(Y=Jt(function(){return-1}),ke.optional(function(){Y.MISSING=!0}),Y):(V=new $t(g.thisDep||y.thisDep,g.contextDep||y.contextDep,g.propDep||y.propDep,function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")}),ke.optional(function(){V.DYNAMIC=!0}),V):null,instances:xt(me,!1),offset:y},l=o,F=a.static,G=a.dynamic,d={},Lt.forEach(function(u){var o=Rt(u);function t(t,n){var e,r;u in F?(e=t(F[u]),d[o]=Jt(function(){return e})):u in G&&(r=G[u],d[o]=te(r,function(t,e){return n(t,e,t.invoke(e,r))}))}switch(u){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return t(function(t){return ke.commandType(t,"boolean",u,l.commandStr),t},function(t,e,n){return ke.optional(function(){t.assert(e,"typeof "+n+'==="boolean"',"invalid flag "+u,t.commandStr)}),n});case"depth.func":return t(function(t){return ke.commandParameter(t,ue,"invalid "+u,l.commandStr),ue[t]},function(t,e,n){var r=t.constants.compareFuncs;return ke.optional(function(){t.assert(e,n+" in "+r,"invalid "+u+", must be one of "+Object.keys(ue))}),e.def(r,"[",n,"]")});case"depth.range":return t(function(t){return ke.command(Zt(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1]&&t[0]<=t[1],"depth range is 2d array",l.commandStr),t},function(t,e,n){return ke.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]});case"blend.func":return t(function(t){ke.commandType(t,"object","blend.func",l.commandStr);var e="srcRGB"in t?t.srcRGB:t.src,n="srcAlpha"in t?t.srcAlpha:t.src,r="dstRGB"in t?t.dstRGB:t.dst,t="dstAlpha"in t?t.dstAlpha:t.dst;return ke.commandParameter(e,ce,o+".srcRGB",l.commandStr),ke.commandParameter(n,ce,o+".srcAlpha",l.commandStr),ke.commandParameter(r,ce,o+".dstRGB",l.commandStr),ke.commandParameter(t,ce,o+".dstAlpha",l.commandStr),ke.command(-1===be.indexOf(e+", "+r),"unallowed blending combination (srcRGB, dstRGB) = ("+e+", "+r+")",l.commandStr),[ce[e],ce[r],ce[n],ce[t]]},function(r,o,i){var a=r.constants.blendFuncs;function t(t,e){var n=o.def('"',t,e,'" in ',i,"?",i,".",t,e,":",i,".",t);return ke.optional(function(){r.assert(o,n+" in "+a,"invalid "+u+"."+t+e+", must be one of "+Object.keys(ce))}),n}ke.optional(function(){r.assert(o,i+"&&typeof "+i+'==="object"',"invalid blend func, must be an object")});var e=t("src","RGB"),n=t("dst","RGB"),s=(ke.optional(function(){var t=r.constants.invalidBlendCombinations;r.assert(o,t+".indexOf("+e+'+", "+'+n+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}),o.def(a,"[",e,"]")),c=o.def(a,"[",t("src","Alpha"),"]");return[s,o.def(a,"[",n,"]"),c,o.def(a,"[",t("dst","Alpha"),"]")]});case"blend.equation":return t(function(t){return"string"==typeof t?(ke.commandParameter(t,Dt,"invalid "+u,l.commandStr),[Dt[t],Dt[t]]):"object"==typeof t?(ke.commandParameter(t.rgb,Dt,u+".rgb",l.commandStr),ke.commandParameter(t.alpha,Dt,u+".alpha",l.commandStr),[Dt[t.rgb],Dt[t.alpha]]):void ke.commandRaise("invalid blend.equation",l.commandStr)},function(r,t,e){var o=r.constants.blendEquations,n=t.def(),i=t.def(),a=r.cond("typeof ",e,'==="string"');return ke.optional(function(){function t(t,e,n){r.assert(t,n+" in "+o,"invalid "+e+", must be one of "+Object.keys(Dt))}t(a.then,u,e),r.assert(a.else,e+"&&typeof "+e+'==="object"',"invalid "+u),t(a.else,u+".rgb",e+".rgb"),t(a.else,u+".alpha",e+".alpha")}),a.then(n,"=",i,"=",o,"[",e,"];"),a.else(n,"=",o,"[",e,".rgb];",i,"=",o,"[",e,".alpha];"),t(a),[n,i]});case"blend.color":return t(function(e){return ke.command(Zt(e)&&4===e.length,"blend.color must be a 4d array",l.commandStr),Kt(4,function(t){return+e[t]})},function(t,e,n){return ke.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")}),Kt(4,function(t){return e.def("+",n,"[",t,"]")})});case"stencil.mask":return t(function(t){return ke.commandType(t,"number",o,l.commandStr),0|t},function(t,e,n){return ke.optional(function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")}),e.def(n,"|0")});case"stencil.func":return t(function(t){ke.commandType(t,"object",o,l.commandStr);var e=t.cmp||"keep",n=t.ref||0,t="mask"in t?t.mask:-1;return ke.commandParameter(e,ue,u+".cmp",l.commandStr),ke.commandType(n,"number",u+".ref",l.commandStr),ke.commandType(t,"number",u+".mask",l.commandStr),[ue[e],n,t]},function(e,n,r){var o=e.constants.compareFuncs;return ke.optional(function(){function t(){e.assert(n,Array.prototype.join.call(arguments,""),"invalid stencil.func")}t(r+"&&typeof ",r,'==="object"'),t('!("cmp" in ',r,")||(",r,".cmp in ",o,")")}),[n.def('"cmp" in ',r,"?",o,"[",r,".cmp]",":",7680),n.def(r,".ref|0"),n.def('"mask" in ',r,"?",r,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return t(function(t){ke.commandType(t,"object",o,l.commandStr);var e=t.fail||"keep",n=t.zfail||"keep",t=t.zpass||"keep";return ke.commandParameter(e,le,u+".fail",l.commandStr),ke.commandParameter(n,le,u+".zfail",l.commandStr),ke.commandParameter(t,le,u+".zpass",l.commandStr),["stencil.opBack"===u?1029:1028,le[e],le[n],le[t]]},function(e,n,r){var o=e.constants.stencilOps;function t(t){return ke.optional(function(){e.assert(n,'!("'+t+'" in '+r+")||("+r+"."+t+" in "+o+")","invalid "+u+"."+t+", must be one of "+Object.keys(le))}),n.def('"',t,'" in ',r,"?",o,"[",r,".",t,"]:",7680)}return ke.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+u)}),["stencil.opBack"===u?1029:1028,t("fail"),t("zfail"),t("zpass")]});case"polygonOffset.offset":return t(function(t){ke.commandType(t,"object",o,l.commandStr);var e=0|t.factor,t=0|t.units;return ke.commandType(e,"number",o+".factor",l.commandStr),ke.commandType(t,"number",o+".units",l.commandStr),[e,t]},function(t,e,n){return ke.optional(function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid "+u)}),[e.def(n,".factor|0"),e.def(n,".units|0")]});case"cull.face":return t(function(t){var e=0;return"front"===t?e=1028:"back"===t&&(e=1029),ke.command(!!e,o,l.commandStr),e},function(t,e,n){return ke.optional(function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")}),e.def(n,'==="front"?',1028,":",1029)});case"lineWidth":return t(function(t){return ke.command("number"==typeof t&&t>=kt.lineWidthDims[0]&&t<=kt.lineWidthDims[1],"invalid line width, must be a positive number between "+kt.lineWidthDims[0]+" and "+kt.lineWidthDims[1],l.commandStr),t},function(t,e,n){return ke.optional(function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+kt.lineWidthDims[0]+"&&"+n+"<="+kt.lineWidthDims[1],"invalid line width")}),n});case"frontFace":return t(function(t){return ke.commandParameter(t,we,o,l.commandStr),we[t]},function(t,e,n){return ke.optional(function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),e.def(n+'==="cw"?2304:2305')});case"colorMask":return t(function(t){return ke.command(Zt(t)&&4===t.length,"color.mask must be length 4 array",l.commandStr),t.map(function(t){return!!t})},function(t,e,n){return ke.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")}),Kt(4,function(t){return"!!"+n+"["+t+"]"})});case"sample.coverage":return t(function(t){ke.command("object"==typeof t&&t,o,l.commandStr);var e="value"in t?t.value:1,t=!!t.invert;return ke.command("number"==typeof e&&0<=e&&e<=1,"sample.coverage.value must be a number between 0 and 1",l.commandStr),[e,t]},function(t,e,n){return ke.optional(function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]})}}),rt=d,j=e,B=a.static,z=a.dynamic,i=bt(ge),s=bt(pe),c=null,j=Qt(i)&&Qt(s)?(c=jt.program(s.id,i.id,null,j),Jt(function(t,e){return t.link(c)})):new $t(i&&i.thisDep||s&&s.thisDep,i&&i.contextDep||s&&s.contextDep,i&&i.propDep||s&&s.propDep,function(t,e){var n=t.shared.shader,r=i?i.append(t,e):e.def(n,".",ge),o=n+".program("+(s?s.append(t,e):e.def(n,".",pe))+","+r;return ke.optional(function(){o+=","+t.command}),e.def(o+")")}),j={frag:i,vert:s,progVar:j,program:c},_t("viewport"),_t(Rt("scissor.box")),D=0<Object.keys(rt).length,(A={framebuffer:A,draw:N,shader:j,state:rt,dirty:D,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=(N=a.static,D=a.dynamic,fe in N?(dt=!!N[fe],(x=Jt(function(t,e){return dt})).enable=dt):fe in D&&(x=te(ht=D[fe],function(t,e){return t.invoke(e,ht)})),x),A.uniforms=(st=o,ct=n.static,ut=n.dynamic,lt={},Object.keys(ct).forEach(function(n){var t,e,r=ct[n];"number"==typeof r||"boolean"==typeof r?t=Jt(function(){return r}):"function"==typeof r?"texture2d"===(e=r._reglType)||"textureCube"===e?t=Jt(function(t){return t.link(r)}):"framebuffer"===e||"framebufferCube"===e?(ke.command(0<r.color.length,'missing color attachment for framebuffer sent to uniform "'+n+'"',st.commandStr),t=Jt(function(t){return t.link(r.color[0])})):ke.commandRaise('invalid data for uniform "'+n+'"',st.commandStr):Zt(r)?t=Jt(function(e){return e.global.def("[",Kt(r.length,function(t){return ke.command("number"==typeof r[t]||"boolean"==typeof r[t],"invalid uniform "+n,e.commandStr),r[t]}),"]")}):ke.commandRaise('invalid or missing data for uniform "'+n+'"',st.commandStr),t.value=r,lt[n]=t}),Object.keys(ut).forEach(function(t){var n=ut[t];lt[t]=te(n,function(t,e){return t.invoke(e,n)})}),lt),A.drawVAO=A.scopeVAO=(N=a.static,D=a.dynamic,"vao"in N?(null!==(b=N.vao)&&null===Tt.getVAO(b)&&(b=Tt.createVAO(b)),Jt(function(t){return t.link(Tt.getVAO(b))})):"vao"in D?te(at=D.vao,function(t,e){var n=t.invoke(e,at);return e.def(t.shared.vao+".getVAO("+n+")")}):null),!A.drawVAO&&j.program&&!e&&Mt.angle_instanced_arrays&&(ot=!0,x=j.program.attributes.map(function(t){t=r.static[t];return ot=ot&&!!t,t}),ot)&&0<x.length&&(it=Tt.getVAO(Tt.createVAO(x)),A.drawVAO=new $t(null,null,null,function(t,e){return t.link(it)}),A.useVAO=!0),e?A.useVAO=!0:A.attributes=(w=o,yt=r.static,mt=r.dynamic,vt={},Object.keys(yt).forEach(function(r){var t,n,e,o,i,a,s,c,u=yt[r],l=Ot.id(r),d=new Nt;de(u)?(d.state=1,d.buffer=Ct.getBuffer(Ct.create(u,34962,!1,!0)),d.type=0):(t=Ct.getBuffer(u))?(d.state=1,d.buffer=t,d.type=0):(ke.command("object"==typeof u&&u,"invalid data for attribute "+r,w.commandStr),"constant"in u?(n=u.constant,d.buffer="null",d.state=2,"number"==typeof n?d.x=n:(ke.command(Zt(n)&&0<n.length&&n.length<=4,"invalid constant for attribute "+r,w.commandStr),ee.forEach(function(t,e){e<n.length&&(d[t]=n[e])}))):(t=de(u.buffer)?Ct.getBuffer(Ct.create(u.buffer,34962,!1,!0)):Ct.getBuffer(u.buffer),ke.command(!!t,'missing buffer for attribute "'+r+'"',w.commandStr),e=0|u.offset,ke.command(0<=e,'invalid offset for attribute "'+r+'"',w.commandStr),o=0|u.stride,ke.command(0<=o&&o<256,'invalid stride for attribute "'+r+'", must be integer betweeen [0, 255]',w.commandStr),i=0|u.size,ke.command(!("size"in u)||0<i&&i<=4,'invalid size for attribute "'+r+'", must be 1,2,3,4',w.commandStr),a=!!u.normalized,s=0,"type"in u&&(ke.commandParameter(u.type,Ie,"invalid type for attribute "+r,w.commandStr),s=Ie[u.type]),c=0|u.divisor,"divisor"in u&&(ke.command(0==c||Pt,'cannot specify divisor for attribute "'+r+'", instancing not supported',w.commandStr),ke.command(0<=c,'invalid divisor for attribute "'+r+'"',w.commandStr)),ke.optional(function(){var e=w.commandStr,n=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(u).forEach(function(t){ke.command(0<=n.indexOf(t),'unknown parameter "'+t+'" for attribute pointer "'+r+'" (valid parameters are '+n+")",e)})}),d.buffer=t,d.state=1,d.size=i,d.normalized=a,d.type=s||t.dtype,d.offset=e,d.stride=o,d.divisor=c)),vt[r]=Jt(function(t,e){var n,r=t.attribCache;return l in r?r[l]:(n={isStream:!1},Object.keys(d).forEach(function(t){n[t]=d[t]}),d.buffer&&(n.buffer=t.link(d.buffer),n.type=n.type||n.buffer+".dtype"),r[l]=n)})}),Object.keys(mt).forEach(function(h){var f=mt[h];vt[h]=te(f,function(t,e){var n=t.invoke(e,f),r=t.shared,o=t.constants,i=r.isBufferArgs,a=r.buffer,s=(ke.optional(function(){t.assert(e,n+"&&(typeof "+n+'==="object"||typeof '+n+'==="function")&&('+i+"("+n+")||"+a+".getBuffer("+n+")||"+a+".getBuffer("+n+".buffer)||"+i+"("+n+'.buffer)||("constant" in '+n+"&&(typeof "+n+'.constant==="number"||'+r.isArrayLike+"("+n+".constant))))",'invalid dynamic attribute "'+h+'"')}),{isStream:e.def(!1)}),c=new Nt,u=(c.state=1,Object.keys(c).forEach(function(t){s[t]=e.def(""+c[t])}),s.buffer),l=s.type;function d(t){e(s[t],"=",n,".",t,"|0;")}return e("if(",i,"(",n,")){",s.isStream,"=true;",u,"=",a,".createStream(",34962,",",n,");",l,"=",u,".dtype;","}else{",u,"=",a,".getBuffer(",n,");","if(",u,"){",l,"=",u,".dtype;",'}else if("constant" in ',n,"){",s.state,"=",2,";","if(typeof "+n+'.constant === "number"){',s[ee[0]],"=",n,".constant;",ee.slice(1).map(function(t){return s[t]}).join("="),"=0;","}else{",ee.map(function(t,e){return s[t]+"="+n+".constant.length>"+e+"?"+n+".constant["+e+"]:0;"}).join(""),"}}else{","if(",i,"(",n,".buffer)){",u,"=",a,".createStream(",34962,",",n,".buffer);","}else{",u,"=",a,".getBuffer(",n,".buffer);","}",l,'="type" in ',n,"?",o.glTypes,"[",n,".type]:",u,".dtype;",s.normalized,"=!!",n,".normalized;"),d("size"),d("offset"),d("stride"),d("divisor"),e("}}"),e.exit("if(",s.isStream,"){",a,".destroyStream(",u,");","}"),s})}),vt),A.context=(ft=t.static,pt=t.dynamic,gt={},Object.keys(ft).forEach(function(t){var n=ft[t];gt[t]=Jt(function(t,e){return"number"==typeof n||"boolean"==typeof n?""+n:t.link(n)})}),Object.keys(pt).forEach(function(t){var n=pt[t];gt[t]=te(n,function(t,e){return t.invoke(e,n)})}),gt),A);function bt(o){var t,e,i;return o in B?(t=Ot.id(B[o]),ke.optional(function(){jt.shader(xe[o],t,ke.guessCommand())}),(e=Jt(function(){return t})).id=t,e):o in z?te(i=z[o],function(t,e){var n=t.invoke(e,i),r=e.def(t.shared.strings,".id(",n,")");return ke.optional(function(){e(t.shared.shader,".shader(",xe[o],",",r,",",t.command,");")}),r}):null}function xt(r,o){var n,i;return r in f?(n=0|f[r],ke.command(!o||0<=n,"invalid "+r,u.commandStr),Jt(function(t,e){return o&&(t.OFFSET=n),n})):r in p?te(i=p[r],function(t,e){var n=t.invoke(e,i);return o&&(t.OFFSET=n,ke.optional(function(){t.assert(e,n+">=0","invalid "+r)})),n}):o&&g?Jt(function(t,e){return t.OFFSET="0",0}):null}function wt(c){var o,i,a,s,u,l,t;return c in Z?(o=Z[c],ke.commandType(o,"object","invalid "+c,K.commandStr),t=!0,s=0|o.x,u=0|o.y,"width"in o?(i=0|o.width,ke.command(0<=i,"invalid "+c,K.commandStr)):t=!1,"height"in o?(a=0|o.height,ke.command(0<=a,"invalid "+c,K.commandStr)):t=!1,new $t(!t&&m&&m.thisDep,!t&&m&&m.contextDep,!t&&m&&m.propDep,function(t,e){var t=t.shared.context,n=i,r=("width"in o||(n=e.def(t,".",ae,"-",s)),a);return"height"in o||(r=e.def(t,".",se,"-",u)),[s,u,n,r]})):c in $?(t=te(l=$[c],function(t,e){var n=t.invoke(e,l),r=(ke.optional(function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid "+c)}),t.shared.context),o=e.def(n,".x|0"),i=e.def(n,".y|0"),a=e.def('"width" in ',n,"?",n,".width|0:","(",r,".",ae,"-",o,")"),s=e.def('"height" in ',n,"?",n,".height|0:","(",r,".",se,"-",i,")");return ke.optional(function(){t.assert(e,a+">=0&&"+s+">=0","invalid "+c)}),[o,i,a,s]}),m&&(t.thisDep=t.thisDep||m.thisDep,t.contextDep=t.contextDep||m.contextDep,t.propDep=t.propDep||m.propDep),t):m?new $t(m.thisDep,m.contextDep,m.propDep,function(t,e){t=t.shared.context;return[0,0,e.def(t,".",ae),e.def(t,".",se)]}):null}function _t(t){var e=nt[t];e&&(rt[t]=e)}return T=n,N=(I=P).proc("draw",1),Wt(I,N),zt(I,N,T.context),Ft(I,N,T.framebuffer),Gt(I,N,T),Ut(I,N,T.state),Xt(I,N,T,!1,!0),D=T.shader.progVar.append(I,N),N(I.shared.gl,".useProgram(",D,".program);"),T.shader.program?Ht(I,N,T,T.shader.program):(N(I.shared.vao,".setVAO(null);"),j=I.global.def("{}"),e=N.def(D,".id"),t=N.def(j,"[",e,"]"),N(I.cond(t).then(t,".call(this,a0);").else(t,"=",j,"[",e,"]=",I.link(function(t){return Yt(Ht,I,T,t,1)}),"(",D,");",t,".call(this,a0);"))),0<Object.keys(T.state).length&&N(I.shared.current,".dirty=true;"),M=n,k=(O=P).proc("scope",3),O.batchId="a2",A=(C=O.shared).current,zt(O,k,M.context),M.framebuffer&&M.framebuffer.append(O,k),he(Object.keys(M.state)).forEach(function(n){var t=M.state[n].append(O,k);Zt(t)?t.forEach(function(t,e){k.set(O.next[n],"["+e+"]",t)}):k.set(C.next,"."+n,t)}),Xt(O,k,M,!0,!0),[re,ye,ie,me,oe].forEach(function(t){var e=M.draw[t];e&&k.set(C.draw,"."+t,""+e.append(O,k))}),Object.keys(M.uniforms).forEach(function(t){k.set(C.uniforms,"["+Ot.id(t)+"]",M.uniforms[t].append(O,k))}),Object.keys(M.attributes).forEach(function(t){var e=M.attributes[t].append(O,k),n=O.scopeAttrib(t);Object.keys(new Nt).forEach(function(t){k.set(n,"."+t,e[t])})}),M.scopeVAO&&k.set(C.vao,".targetVAO",M.scopeVAO.append(O,k)),St(pe),St(ge),0<Object.keys(M.state).length&&(k(A,".dirty=true;"),k.exit(A,".dirty=true;")),k("a1(",O.shared.context,",a0,",O.batchId,");"),E=n,j=(_=P).proc("batch",2),_.batchId="0",Wt(_,j),e=!(S=!1),Object.keys(E.context).forEach(function(t){S=S||E.context[t].propDep}),S||(zt(_,j,E.context),e=!1),D=E.framebuffer,t=!1,D?(D.propDep?S=t=!0:D.contextDep&&S&&(t=!0),t||Ft(_,j,D)):Ft(_,j,null),E.state.viewport&&E.state.viewport.propDep&&(S=!0),Gt(_,j,E),Ut(_,j,E.state,function(t){return!Et(t)}),E.profile&&Et(E.profile)||Xt(_,j,E,!1,"a1"),E.contextDep=S,E.needsContext=e,E.needsFramebuffer=t,(D=E.shader.progVar).contextDep&&S||D.propDep?Vt(_,j,E,null):(e=D.append(_,j),j(_.shared.gl,".useProgram(",e,".program);"),E.shader.program?Vt(_,j,E,E.shader.program):(j(_.shared.vao,".setVAO(null);"),t=_.global.def("{}"),D=j.def(e,".id"),N=j.def(t,"[",D,"]"),j(_.cond(N).then(N,".call(this,a0,a1);").else(N,"=",t,"[",D,"]=",_.link(function(t){return Yt(Vt,_,E,t,2)}),"(",e,");",N,".call(this,a0,a1);")))),0<Object.keys(E.state).length&&j(_.shared.current,".dirty=true;"),P.compile();function Et(t){return t.contextDep&&S||t.propDep}function St(t){var e=M.shader[t];e&&k.set(C.shader,"."+t,e.append(O,k))}}}}function We(t,c){var u,l,d,h,f,p;return c.ext_disjoint_timer_query?(u=[],l=[],d=[],h=[],f=[],p=[],{beginQuery:function(t){var e=u.pop()||c.ext_disjoint_timer_query.createQueryEXT();c.ext_disjoint_timer_query.beginQueryEXT(35007,e),l.push(e),n(l.length-1,l.length,t)},endQuery:function(){c.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:n,update:function(){var t=l.length;if(0!==t){p.length=Math.max(p.length,t+1),f.length=Math.max(f.length,t+1);for(var e=p[f[0]=0]=0,n=0,r=0;r<l.length;++r){var o=l[r];c.ext_disjoint_timer_query.getQueryObjectEXT(o,34919)?(e+=c.ext_disjoint_timer_query.getQueryObjectEXT(o,34918),u.push(o)):l[n++]=o,f[r+1]=e,p[r+1]=n}for(l.length=n,r=n=0;r<h.length;++r){var i=h[r],a=i.startQueryIndex,s=i.endQueryIndex,a=(i.sum+=f[s]-f[a],p[a]),s=p[s];s===a?(i.stats.gpuTime+=i.sum/1e6,d.push(i)):(i.startQueryIndex=a,i.endQueryIndex=s,h[n++]=i)}h.length=n}},getNumPendingQueries:function(){return l.length},clear:function(){u.push.apply(u,l);for(var t=0;t<u.length;t++)c.ext_disjoint_timer_query.deleteQueryEXT(u[t]);u.length=l.length=0},restore:function(){u.length=l.length=0}}):null;function o(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}function n(t,e,n){var r=d.pop()||new o;r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,h.push(r)}}function Xe(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}var Me,j,n,ke,N,Ce,Ye,Ve,Ae,lt,dt,D,Ie,He,qe,Ke,Te,je,P,L,ht,ft,Q,R,B,pt,gt,yt,mt,z,F,u,i,Ze,$e,Qe,Je,tn,ee,fe,ne,pe,ge,re,oe,ie,ye,me,ae,se,ve,ce,be,ue,le,xe,we,G;t.exports=(Me=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},j=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],(n={})[5120]=n[5121]=1,n[5122]=n[5123]=n[36193]=n[33635]=n[32819]=n[32820]=2,n[5124]=n[5125]=n[5126]=n[34042]=4,ke=Ee(p,{optional:function(t){t()},raise:r,commandRaise:b,command:function(t,e,n){t||b(e,n||d())},parameter:function(t,e,n){t in e||r("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join())},commandParameter:function(t,e,n,r){t in e||b("unknown parameter ("+t+")"+o(n)+". possible values: "+Object.keys(e).join(),r||d())},constructor:function(t){Object.keys(t).forEach(function(t){j.indexOf(t)<0&&r('invalid regl constructor argument "'+t+'". must be one of '+j)})},type:function(t,e,n){s(t,e)||r("invalid parameter type"+o(n)+". expected "+e+", got "+typeof t)},commandType:x,isTypedArray:function(t,e){Me(t)||r("invalid parameter type"+o(e)+". must be a typed array")},nni:function(t,e){0<=t&&(0|t)===t||r("invalid parameter type, ("+t+")"+o(e)+". must be a nonnegative integer")},oneOf:l,shaderError:function(t,e,n,r,o){var a,i,s;t.getShaderParameter(e,t.COMPILE_STATUS)||(e=t.getShaderInfoLog(e),x(n,"string",(r=r===t.FRAGMENT_SHADER?"fragment":"vertex")+" shader source must be a string",o),a=m(n,o),s=[],e.split("\n").forEach(function(t){var e;t.length<5||((e=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t))?s.push(new g(0|e[1],0|e[2],e[3].trim())):0<t.length&&s.push(new g("unknown",0,t)))}),i=a,s.forEach(function(t){var e=i[t.file];if(e){var n=e.index[t.line];if(n)return n.errors.push(t),void(e.hasErrors=!0)}i.unknown.hasErrors=!0,i.unknown.lines[0].errors.push(t)}),Object.keys(a).forEach(function(t){var n,r,e=a[t];function i(t,e){n.push(t),r.push(e||"")}e.hasErrors&&(n=[""],r=[""],i("file number "+t+": "+e.name+"\n","color:red;text-decoration:underline;font-weight:bold"),e.lines.forEach(function(r){var o;0<r.errors.length?(i(c(r.number,4)+"|  ","background-color:yellow; font-weight:bold"),i(r.line+"\n","color:red; background-color:yellow; font-weight:bold"),o=0,r.errors.forEach(function(t){var e,t=t.message,n=/^\s*'(.*)'\s*:\s*(.*)$/.exec(t);o=n?(e=n[1],"assign"===(t=n[2],e)&&(e="="),Math.max(r.line.indexOf(e,o),0)):0,i(c("| ",6)),i(c("^^^",o+3)+"\n","font-weight:bold"),i(c("| ",6)),i(t+"\n","font-weight:bold")}),i(c("| ",6)+"\n")):(i(c(r.number,4)+"|  "),i(r.line+"\n","color:red"))}),"undefined"==typeof document||window.chrome?console.log(n.join("")):(r[0]=n.join("%c"),console.log.apply(console,r)))}),p.raise("Error compiling "+r+" shader, "+a[0].name))},linkError:function(t,e,n,r,o){t.getProgramParameter(e,t.LINK_STATUS)||(t=t.getProgramInfoLog(e),e=m(n,o),n='Error linking program with vertex shader, "'+m(r,o)[0].name+'", and fragment shader "'+e[0].name+'"',"undefined"!=typeof document?console.log("%c"+n+"\n%c"+t,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(n+"\n"+t),p.raise(n))},callSite:y,saveCommandRef:v,saveDrawInfo:function(t,e,n,r){function o(t){return t?r.id(t):0}function i(e,t){Object.keys(t).forEach(function(t){e[r.id(t)]=!0})}v(t),t._fragId=o(t.static.frag),t._vertId=o(t.static.vert);var a=t._uniformSet={},a=(i(a,e.static),i(a,e.dynamic),t._attributeSet={});i(a,n.static),i(a,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic},framebufferFormat:function(t,e,n){t.texture?l(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):l(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")},guessCommand:d,texture2D:function(t,e,n){for(var r,o,i,a=e.width,s=e.height,c=e.channels,u=(p(0<a&&a<=n.maxTextureSize&&0<s&&s<=n.maxTextureSize,"invalid texture shape"),33071===t.wrapS&&33071===t.wrapT||p(_(a)&&_(s),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==a&&1!==s&&p(9984!==t.minFilter&&9986!==t.minFilter&&9985!==t.minFilter&&9987!==t.minFilter,"min filter requires mipmap"):(p(_(a)&&_(s),"texture must be a square power of 2 to support mipmapping"),p(e.mipmask===(a<<1)-1,"missing or incomplete mipmap data")),5126===e.type&&(n.extensions.indexOf("oes_texture_float_linear")<0&&p(9728===t.minFilter&&9728===t.magFilter,"filter not supported, must enable oes_texture_float_linear"),p(!t.genMipmaps,"mipmap generation not supported with float textures")),e.images),l=0;l<16;++l)u[l]?(i=a>>l,r=s>>l,p(e.mipmask&1<<l,"missing mipmap data"),o=u[l],p(o.width===i&&o.height===r,"invalid shape for mip images"),p(o.format===e.format&&o.internalformat===e.internalformat&&o.type===e.type,"incompatible type for mip image"),o.compressed||o.data&&(i=Math.ceil(w(o.type,c)*i/o.unpackAlignment)*o.unpackAlignment,p(o.data.byteLength===i*r,"invalid data for image, buffer size is inconsistent with image format"))):t.genMipmaps||p(0==(e.mipmask&1<<l),"extra mipmap data");e.compressed&&p(!t.genMipmaps,"mipmap generation for compressed images not supported")},textureCube:function(t,e,n,r){var o=t.width,i=t.height,a=t.channels;p(0<o&&o<=r.maxTextureSize&&0<i&&i<=r.maxTextureSize,"invalid texture shape"),p(o===i,"cube map must be square"),p(33071===e.wrapS&&33071===e.wrapT,"wrap mode not supported by cube map");for(var s=0;s<n.length;++s){var c=n[s];p(c.width===o&&c.height===i,"inconsistent cube map face shape"),e.genMipmaps&&(p(!c.compressed,"can not generate mipmap for compressed textures"),p(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var u=c.images,l=0;l<16;++l){var d,h,f=u[l];f&&(d=o>>l,h=i>>l,p(c.mipmask&1<<l,"missing mipmap data"),p(f.width===d&&f.height===h,"invalid shape for mip images"),p(f.format===t.format&&f.internalformat===t.internalformat&&f.type===t.type,"incompatible type for mip image"),f.compressed||f.data&&p(f.data.byteLength===d*h*Math.max(w(f.type,a),f.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"))}}}}),N=0,Ce={DynamicVariable:E,define:function(t,e){return new E(t,O(e+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof E},unbox:function(t,e){return"function"==typeof t?new E(0,t):t},accessor:O},Ye={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},Ve="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},(Ae=k()).zero=k(),D={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ie={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},He={dynamic:35048,stream:35040,static:35044},qe=dt=function(t,e,n,r){var o=1;if(e.length)for(var i=0;i<e.length;++i)o*=e[i];else o=0;var a=r||Ae.allocType(n,o);switch(e.length){case 0:break;case 1:for(var s=t,c=e[0],u=a,l=0;l<c;++l)u[l]=s[l];break;case 2:for(var d=t,h=e[0],f=e[1],p=a,g=0,y=0;y<h;++y)for(var m=d[y],v=0;v<f;++v)p[g++]=m[v];break;case 3:C(t,e[0],e[1],e[2],a,0);break;default:!function t(e,n,r,o,i){for(var a=1,s=r+1;s<n.length;++s)a*=n[s];var c=n[r];if(n.length-r==4)for(var u=n[r+1],l=n[r+2],d=n[r+3],s=0;s<c;++s)C(e[s],u,l,d,o,i),i+=a;else for(s=0;s<c;++s)t(e[s],n,r+1,o,i),i+=a}(t,e,0,a,0)}return a},Ke=lt=function(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e},(Te=[])[5120]=1,Te[5122]=2,Te[5124]=4,Te[5121]=1,Te[5123]=2,Te[5125]=4,je={points:0,point:0,lines:1,line:1,triangles:Te[5126]=4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},P=new Float32Array(1),L=new Uint32Array(P.buffer),ht=[9984,9986,9985,9987],ft=[0,6409,6410,6407,6408],(Q={})[6409]=Q[6406]=Q[6402]=1,Q[34041]=Q[6410]=2,Q[6407]=Q[35904]=3,Q[6408]=Q[35906]=4,R=A("HTMLCanvasElement"),B=A("OffscreenCanvas"),pt=A("CanvasRenderingContext2D"),gt=A("ImageBitmap"),yt=A("HTMLImageElement"),mt=A("HTMLVideoElement"),z=Object.keys(D).concat([R,B,pt,gt,yt,mt]),(F=[])[5121]=1,F[5126]=4,F[36193]=2,F[5123]=2,F[5125]=4,(u=[])[32854]=2,u[32855]=2,u[36194]=2,u[34041]=4,u[33776]=.5,u[33777]=.5,u[33778]=1,u[33779]=1,u[35986]=.5,u[35987]=1,u[34798]=1,u[35840]=.5,u[35841]=.25,u[35842]=.5,u[35843]=.25,u[36196]=.5,(i=[])[32854]=2,i[32855]=2,i[36194]=2,i[33189]=2,i[36168]=1,i[34041]=4,i[35907]=4,i[34836]=16,i[34842]=8,i[34843]=6,Ze=[6407,6408],($e=[])[6408]=4,$e[6407]=3,(Qe=[])[5121]=1,Qe[5126]=4,Qe[36193]=2,Je=[32854,32855,36194,35907,34842,34843,34836],(tn={})[36053]="complete",tn[36054]="incomplete attachment",tn[36057]="incomplete dimensions",tn[36055]="incomplete, missing attachment",tn[36061]="unsupported",ee="xyzw".split(""),fe="profile",pe="vert",ge="frag",re="elements",oe="primitive",ie="count",ye="offset",me="instances",ae=(ne="framebuffer")+"Width",se=ne+"Height",ve=["blend.func","blend.equation","stencil.func","stencil.opFront","stencil.opBack","sample.coverage","viewport","scissor.box","polygonOffset.offset"],ce={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},be=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ue={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},G=new $t(!(we={cw:2304,ccw:2305}),!(xe={frag:35632,vert:35633}),!(le={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386}),function(){}),function(t){t=(t=t)||{},x={},C=[],c=[],p="undefined"==typeof window?1:window.devicePixelRatio,m=!1,b=function(t){t&&ke.raise(t)},v=function(){},"string"==typeof t?(ke("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),e=document.querySelector(t),ke(e,"invalid query string for element")):"object"==typeof t?"string"==typeof t.nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect?e=t:"function"==typeof t.drawArrays||"function"==typeof t.drawElements?O=(w=t).canvas:(ke.constructor(t),"gl"in t?w=t.gl:"canvas"in t?O=De(t.canvas):"container"in t&&(k=De(t.container)),"attributes"in t&&(x=t.attributes,ke.type(x,"object","invalid context attributes")),"extensions"in t&&(C=Ne(t.extensions)),"optionalExtensions"in t&&(c=Ne(t.optionalExtensions)),"onDone"in t&&(ke.type(t.onDone,"function","invalid or missing onDone callback"),b=t.onDone),"profile"in t&&(m=!!t.profile),"pixelRatio"in t&&(p=+t.pixelRatio,ke(0<p,"invalid pixel ratio"))):ke.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?O=e:k=e),w||(O||(ke("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments"),r=k||document.body,B=p,o=document.createElement("canvas"),Ee(o.style,{border:0,margin:0,padding:0,top:0,left:0}),r.appendChild(o),r===document.body&&(o.style.position="absolute",Ee(r.style,{margin:0,padding:0})),r!==document.body&&"function"==typeof ResizeObserver?(z=new ResizeObserver(function(){setTimeout(G)})).observe(r):window.addEventListener("resize",G,!1),G(),O=(t={canvas:o,onDestroy:function(){z?z.disconnect():window.removeEventListener("resize",G),r.removeChild(o)}}).canvas,v=t.onDestroy),void 0===x.premultipliedAlpha&&(x.premultipliedAlpha=!0),L=O,R=x,w=F("webgl")||F("experimental-webgl")||F("webgl-experimental"));var L,R,r,B,z,o,e=w?{gl:w,canvas:O,container:k,extensions:C,optionalExtensions:c,pixelRatio:p,profile:m,onDone:b,onDestroy:v}:(v(),b("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null);function F(t){try{return L.getContext(t,R)}catch(t){return null}}function G(){var t,e=window.innerWidth,n=window.innerHeight;r!==document.body&&(e=(t=r.getBoundingClientRect()).right-t.left,n=t.bottom-t.top),o.width=B*e,o.height=B*n,Ee(o.style,{width:e+"px",height:n+"px"})}if(!e)return null;var i=e.gl,t=i.getContextAttributes(),U=i.isContextLost(),W=function(n,t){var r={};function e(t){ke.type(t,"string","extension name must be string");var e,t=t.toLowerCase();try{e=r[t]=n.getExtension(t)}catch(t){}return!!e}for(var o=0;o<t.extensions.length;++o){var i=t.extensions[o];if(!e(i))return t.onDestroy(),t.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(e),{extensions:r,restore:function(){Object.keys(r).forEach(function(t){if(r[t]&&!e(t))throw new Error("(regl): error restoring extension "+t)})}}}(i,e);if(!W)return null;X={"":0},Y=[""];var X,Y,a,_,V,H,q,K,E,Z,S,$,Q,J,u,tt,et,l,d,nt,rt,n,g,y,ot,it,at,st,ct,s,ut,lt,dt,ht,ft,pt,gt,yt,mt,h,vt,bt,xt,f,wt,c,_t,p,m,v,b,Et,x={id:function(t){var e;return X[t]||(e=X[t]=Y.length,Y.push(t),e)},str:function(t){return Y[t]}},w={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},O=W.extensions,M=We(0,O),St=Ve(),k=i.drawingBufferWidth,C=i.drawingBufferHeight,A={tick:0,time:0,viewportWidth:k,viewportHeight:C,framebufferWidth:k,framebufferHeight:C,drawingBufferWidth:k,drawingBufferHeight:C,pixelRatio:e.pixelRatio},I=(c=i,p=1,(_t=O).ext_texture_filter_anisotropic&&(p=c.getParameter(34047)),v=m=1,_t.webgl_draw_buffers&&(m=c.getParameter(34852),v=c.getParameter(36063)),(b=!!_t.oes_texture_float)&&(P=c.createTexture(),c.bindTexture(3553,P),c.texImage2D(3553,0,6408,1,1,0,6408,5126,null),Et=c.createFramebuffer(),c.bindFramebuffer(36160,Et),c.framebufferTexture2D(36160,36064,3553,P,0),c.bindTexture(3553,null),36053!==c.checkFramebufferStatus(36160)?b=!1:(c.viewport(0,0,1,1),c.clearColor(1,0,0,1),c.clear(16384),N=Ae.allocType(5126,4),c.readPixels(0,0,1,1,6408,5126,N),b=!c.getError()&&(c.deleteFramebuffer(Et),c.deleteTexture(P),1===N[0]),Ae.freeType(N))),Et=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(P=c.createTexture(),N=Ae.allocType(5121,36),c.activeTexture(33984),c.bindTexture(34067,P),c.texImage2D(34069,0,6408,3,3,0,6408,5121,N),Ae.freeType(N),c.bindTexture(34067,null),c.deleteTexture(P),Et=!c.getError()),{colorBits:[c.getParameter(3410),c.getParameter(3411),c.getParameter(3412),c.getParameter(3413)],depthBits:c.getParameter(3414),stencilBits:c.getParameter(3415),subpixelBits:c.getParameter(3408),extensions:Object.keys(_t).filter(function(t){return!!_t[t]}),maxAnisotropic:p,maxDrawbuffers:m,maxColorAttachments:v,pointSizeDims:c.getParameter(33901),lineWidthDims:c.getParameter(33902),maxViewportDims:c.getParameter(3386),maxCombinedTextureUnits:c.getParameter(35661),maxCubeMapSize:c.getParameter(34076),maxRenderbufferSize:c.getParameter(34024),maxTextureUnits:c.getParameter(34930),maxTextureSize:c.getParameter(3379),maxAttributes:c.getParameter(34921),maxVertexUniforms:c.getParameter(36347),maxVertexTextureUnits:c.getParameter(35660),maxVaryingVectors:c.getParameter(36348),maxFragmentUniforms:c.getParameter(36349),glsl:c.getParameter(35724),renderer:c.getParameter(7937),vendor:c.getParameter(7936),version:c.getParameter(7938),readFloat:b,npotTextureCube:Et}),Ot=(h=i,vt=w,bt=e,xt=0,f={},ae.prototype.bind=function(){h.bindBuffer(this.type,this.buffer)},ae.prototype.destroy=function(){ue(this)},wt=[],bt.profile&&(vt.getTotalBufferSize=function(){var e=0;return Object.keys(f).forEach(function(t){e+=f[t].stats.size}),e}),{create:function(t,e,n,a){vt.bufferCount++;var c=new ae(e);function u(t){var e=35044,n=null,r=0,o=0,i=1;return Array.isArray(t)||Me(t)||Se(t)||t instanceof ArrayBuffer?n=t:"number"==typeof t?r=0|t:t&&(ke.type(t,"object","buffer arguments must be an object, a number or an array"),"data"in t&&(ke(null===n||Array.isArray(n)||Me(n)||Se(n),"invalid data for buffer"),n=t.data),"usage"in t&&(ke.parameter(t.usage,He,"invalid buffer usage"),e=He[t.usage]),"type"in t&&(ke.parameter(t.type,Ie,"invalid buffer type"),o=Ie[t.type]),"dimension"in t&&(ke.type(t.dimension,"number","invalid dimension"),i=0|t.dimension),"length"in t)&&(ke.nni(r,"buffer length must be a nonnegative integer"),r=0|t.length),c.bind(),n?ce(c,n,e,o,i,a):(r&&h.bufferData(c.type,r,e),c.dtype=o||5121,c.usage=e,c.dimension=i,c.byteLength=r),bt.profile&&(c.stats.size=c.byteLength*Te[c.dtype]),u}function l(t,e){ke(e+t.byteLength<=c.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+t.byteLength+" starting from offset "+e+" to a buffer of size "+c.byteLength),h.bufferSubData(c.type,e,t)}return f[c.id]=c,n||u(t),u._reglType="buffer",u._buffer=c,u.subdata=function(t,e){var n,r,o,i,a,s,e=0|(e||0);return c.bind(),Me(t)||t instanceof ArrayBuffer?l(t,e):Array.isArray(t)?0<t.length&&("number"==typeof t[0]?(Le(s=Ae.allocType(c.dtype,t.length),t),l(s,e),Ae.freeType(s)):Array.isArray(t[0])||Me(t[0])?(a=Ke(t),l(s=qe(t,a,c.dtype),e),Ae.freeType(s)):ke.raise("invalid buffer data")):Se(t)?(a=t.shape,s=t.stride,i=o=r=n=0,1===a.length?(n=a[0],r=1,o=s[0],i=0):2===a.length?(n=a[0],r=a[1],o=s[0],i=s[1]):ke.raise("invalid shape"),a=Array.isArray(t.data)?c.dtype:Pe(t.data),Re(s=Ae.allocType(a,n*r),t.data,n,r,o,i,t.offset),l(s,e),Ae.freeType(s)):ke.raise("invalid data for buffer subdata"),u},bt.profile&&(u.stats=c.stats),u.destroy=function(){ue(c)},u},createStream:function(t,e){var n=wt.pop();return(n=n||new ae(t)).bind(),ce(n,e,35040,0,1,!1),n},destroyStream:function(t){wt.push(t)},clear:function(){Oe(f).forEach(ue),wt.forEach(ue)},getBuffer:function(t){return t&&t._buffer instanceof ae?t._buffer:null},restore:function(){Oe(f).forEach(function(t){t.buffer=h.createBuffer(),h.bindBuffer(t.type,t.buffer),h.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:ce}),Mt=function(i,u,e,l){for(var d=I.maxAttributes,o=new Array(d),t=0;t<d;++t)o[t]=new Fe;var n=0,r={},a={Record:Fe,scope:{},state:o,currentVAO:null,targetVAO:null,restore:s()?function(){s()&&Oe(r).forEach(function(t){t.refresh()})}:function(){},createVAO:function(t){var s=new h;function c(t){ke(Array.isArray(t),"arguments to vertex array constructor must be an array"),ke(t.length<d,"too many attributes"),ke(0<t.length,"must specify at least one attribute");for(var e=0;e<s.buffers.length;++e)s.buffers[e].destroy();s.buffers.length=0;var n=s.attributes;n.length=t.length;for(var r=0;r<t.length;++r){var o,i=t[r],a=n[r]=new Fe;Array.isArray(i)||Me(i)||Se(i)?(o=l.create(i,34962,!1,!0),a.buffer=l.getBuffer(o),a.size=0|a.buffer.dimension,a.normalized=!1,a.type=a.buffer.dtype,a.offset=0,a.stride=0,a.divisor=0,a.state=1,s.buffers.push(o)):l.getBuffer(i)?(a.buffer=l.getBuffer(i),a.size=0|a.buffer.dimension,a.normalized=!1,a.type=a.buffer.dtype,a.offset=0,a.stride=0,a.divisor=0,a.state=1):l.getBuffer(i.buffer)?(a.buffer=l.getBuffer(i.buffer),a.size=0|(+i.size||a.buffer.dimension),a.normalized=!!i.normalized||!1,"type"in i?(ke.parameter(i.type,Ie,"invalid buffer type"),a.type=Ie[i.type]):a.type=a.buffer.dtype,a.offset=0|(i.offset||0),a.stride=0|(i.stride||0),a.divisor=0|(i.divisor||0),a.state=1,ke(1<=a.size&&a.size<=4,"size must be between 1 and 4"),ke(0<=a.offset,"invalid offset"),ke(0<=a.stride&&a.stride<=255,"stride must be between 0 and 255"),ke(0<=a.divisor,"divisor must be positive"),ke(!a.divisor||!!u.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in i?(ke(0<r,"first attribute must not be a constant"),a.x=+i.x||0,a.y=+i.y||0,a.z=+i.z||0,a.w=+i.w||0,a.state=2):ke(!1,"invalid attribute spec for location "+r)}return s.refresh(),c}return e.vaoCount+=1,c.destroy=function(){s.destroy()},c._vao=s,c._reglType="vao",c(t)},getVAO:function(t){return"function"==typeof t&&t._vao?t._vao:null},destroyBuffer:function(t){for(var e=0;e<o.length;++e){var n=o[e];n.buffer===t&&(i.disableVertexAttribArray(e),n.buffer=null)}},setVAO:s()?function(t){var e;t!==a.currentVAO&&(e=s(),t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),a.currentVAO=t)}:function(t){if(t!==a.currentVAO){if(t)t.bindAttrs();else for(var e=c(),n=0;n<o.length;++n){var r=o[n];r.buffer?(i.enableVertexAttribArray(n),i.vertexAttribPointer(n,r.size,r.type,r.normalized,r.stride,r.offfset),e&&e.vertexAttribDivisorANGLE(n,r.divisor)):(i.disableVertexAttribArray(n),i.vertexAttrib4f(n,r.x,r.y,r.z,r.w))}a.currentVAO=t}},clear:s()?function(){Oe(r).forEach(function(t){t.destroy()})}:function(){}};function s(){return u.oes_vertex_array_object}function c(){return u.angle_instanced_arrays}function h(){this.id=++n,this.attributes=[];var t=s();this.vao=t?t.createVertexArrayOES():null,(r[this.id]=this).buffers=[]}return h.prototype.bindAttrs=function(){for(var t=c(),e=this.attributes,n=0;n<e.length;++n){var r=e[n];r.buffer?(i.enableVertexAttribArray(n),i.bindBuffer(34962,r.buffer.buffer),i.vertexAttribPointer(n,r.size,r.type,r.normalized,r.stride,r.offset),t&&t.vertexAttribDivisorANGLE(n,r.divisor)):(i.disableVertexAttribArray(n),i.vertexAttrib4f(n,r.x,r.y,r.z,r.w))}for(var o=e.length;o<d;++o)i.disableVertexAttribArray(o)},h.prototype.refresh=function(){var t=s();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),a.currentVAO=this)},h.prototype.destroy=function(){var t;this.vao&&(t=s(),this===a.currentVAO&&(a.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null),r[this.id]&&(delete r[this.id],--e.vaoCount)},a}(i,O,w,Ot),kt=(lt=i,ht=Ot,ft=w,pt={},gt=0,yt={uint8:5121,uint16:5123},(dt=O).oes_element_index_uint&&(yt.uint32=5125),re.prototype.bind=function(){this.buffer.bind()},mt=[],{create:function(t,e){var s=ht.create(null,34963,!0),c=new re(s._buffer);function u(t){var e,n,r,o,i,a;return t?"number"==typeof t?(s(t),c.primType=4,c.vertCount=0|t,c.type=5121):(e=null,n=35044,o=r=-1,a=i=0,Array.isArray(t)||Me(t)||Se(t)?e=t:(ke.type(t,"object","invalid arguments for elements"),"data"in t&&(e=t.data,ke(Array.isArray(e)||Me(e)||Se(e),"invalid data for element buffer")),"usage"in t&&(ke.parameter(t.usage,He,"invalid element buffer usage"),n=He[t.usage]),"primitive"in t&&(ke.parameter(t.primitive,je,"invalid element buffer primitive"),r=je[t.primitive]),"count"in t&&(ke("number"==typeof t.count&&0<=t.count,"invalid vertex count for elements"),o=0|t.count),"type"in t&&(ke.parameter(t.type,yt,"invalid buffer type"),a=yt[t.type]),"length"in t?i=0|t.length:(i=o,5123===a||5122===a?i*=2:5125!==a&&5124!==a||(i*=4))),oe(c,e,n,r,o,i,a)):(s(),c.primType=4,c.vertCount=0,c.type=5121),u}return ft.elementsCount++,u(t),u._reglType="elements",u._elements=c,u.subdata=function(t,e){return s.subdata(t,e),u},u.destroy=function(){ie(c)},u},createStream:function(t){var e=mt.pop();return oe(e=e||new re(ht.create(null,34963,!0,!1)._buffer),t,35040,-1,-1,0,0),e},destroyStream:function(t){mt.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof re?t._elements:null},clear:function(){Oe(pt).forEach(ie)}}),Ct=(g=i,y=x,ot=w,at={},st={},ct={},s=[],ut=0,(it=e).profile&&(ot.getMaxUniformsCount=function(){var e=0;return s.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},ot.getMaxAttributesCount=function(){var e=0;return s.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=g.deleteShader.bind(g);Oe(at).forEach(t),at={},Oe(st).forEach(t),st={},s.forEach(function(t){g.deleteProgram(t.program)}),s.length=0,ct={},ot.shaderCount=0},program:function(t,e,n,r){ke.command(0<=t,"missing vertex shader",n),ke.command(0<=e,"missing fragment shader",n);var o=ct[e],i=(o=o||(ct[e]={}))[t];return i&&!r?i:(e=new ee(e,t),ot.shaderCount++,ne(e,n,r),i||(o[t]=e),s.push(e),e)},restore:function(){at={},st={};for(var t=0;t<s.length;++t)ne(s[t],null,s[t].attributes.map(function(t){return[t.location,t.name]}))},shader:te,frag:-1,vert:-1}),At=Be(i,O,I,function(){j.procs.poll()},A,w,e),It=(u=i,tt=I,et=w,l=e,d={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041},(C=O).ext_srgb&&(d.srgba=35907),C.ext_color_buffer_half_float&&(d.rgba16f=34842,d.rgb16f=34843),C.webgl_color_buffer_float&&(d.rgba32f=34836),nt=[],Object.keys(d).forEach(function(t){nt[d[t]]=t}),rt=0,n={},Zt.prototype.decRef=function(){--this.refCount<=0&&$t(this)},l.profile&&(et.getTotalRenderbufferSize=function(){var e=0;return Object.keys(n).forEach(function(t){e+=n[t].stats.size}),e}),{create:function(t,e){var s=new Zt(u.createRenderbuffer());function c(t,e){var n,r,o=0,i=0,a=32854;if("object"==typeof t&&t?("shape"in(n=t)?(r=n.shape,ke(Array.isArray(r)&&2<=r.length,"invalid renderbuffer shape"),o=0|r[0],i=0|r[1]):("radius"in n&&(o=i=0|n.radius),"width"in n&&(o=0|n.width),"height"in n&&(i=0|n.height)),"format"in n&&(ke.parameter(n.format,d,"invalid renderbuffer format"),a=d[n.format])):"number"==typeof t?(o=0|t,i="number"==typeof e?0|e:o):t?ke.raise("invalid arguments to renderbuffer constructor"):o=i=1,ke(0<o&&0<i&&o<=tt.maxRenderbufferSize&&i<=tt.maxRenderbufferSize,"invalid renderbuffer size"),o!==s.width||i!==s.height||a!==s.format)return c.width=s.width=o,c.height=s.height=i,s.format=a,u.bindRenderbuffer(36161,s.renderbuffer),u.renderbufferStorage(36161,a,o,i),ke(0===u.getError(),"invalid render buffer format"),l.profile&&(s.stats.size=ze(s.format,s.width,s.height)),c.format=nt[s.format],c}return n[s.id]=s,et.renderbufferCount++,c(t,e),c.resize=function(t,e){t|=0,e=0|e||t;return t===s.width&&e===s.height||(ke(0<t&&0<e&&t<=tt.maxRenderbufferSize&&e<=tt.maxRenderbufferSize,"invalid renderbuffer size"),c.width=s.width=t,c.height=s.height=e,u.bindRenderbuffer(36161,s.renderbuffer),u.renderbufferStorage(36161,s.format,t,e),ke(0===u.getError(),"invalid render buffer format"),l.profile&&(s.stats.size=ze(s.format,s.width,s.height))),c},c._reglType="renderbuffer",c._renderbuffer=s,l.profile&&(c.stats=s.stats),c.destroy=function(){s.decRef()},c},clear:function(){Oe(n).forEach($t)},restore:function(){Oe(n).forEach(function(t){t.renderbuffer=u.createRenderbuffer(),u.bindRenderbuffer(36161,t.renderbuffer),u.renderbufferStorage(36161,t.format,t.width,t.height)}),u.bindRenderbuffer(36161,null)}}),T=(a=i,V=I,H=At,q=It,K=w,E={cur:null,next:null,dirty:!1,setFBO:null},Z=["rgba"],S=["rgba4","rgb565","rgb5 a1"],(_=O).ext_srgb&&S.push("srgba"),_.ext_color_buffer_half_float&&S.push("rgba16f","rgb16f"),_.webgl_color_buffer_float&&S.push("rgba32f"),$=["uint8"],_.oes_texture_half_float&&$.push("half float","float16"),_.oes_texture_float&&$.push("float","float32"),Q=0,J={},Ee(E,{getFramebuffer:function(t){if("function"==typeof t&&"framebuffer"===t._reglType){t=t._framebuffer;if(t instanceof Yt)return t}return null},create:Kt,createCube:function(t){var f=Array(6);function p(t){ke(f.indexOf(E.next)<0,"can not update framebuffer which is currently in use");var e,n={color:null},r=0,o=null,i="rgba",a="uint8",s=1;if("number"==typeof t?r=0|t:t?(ke.type(t,"object","invalid arguments for framebuffer"),"shape"in(t=t)?(e=t.shape,ke(Array.isArray(e)&&2<=e.length,"invalid shape for framebuffer"),ke(e[0]===e[1],"cube framebuffer must be square"),r=e[0]):("radius"in t&&(r=0|t.radius),"width"in t?(r=0|t.width,"height"in t&&ke(t.height===r,"must be square")):"height"in t&&(r=0|t.height)),("color"in t||"colors"in t)&&(o=t.color||t.colors,Array.isArray(o))&&ke(1===o.length||_.webgl_draw_buffers,"multiple render targets not supported"),o||("colorCount"in t&&(s=0|t.colorCount,ke(0<s,"invalid color buffer count")),"colorType"in t&&(ke.oneOf(t.colorType,$,"invalid color type"),a=t.colorType),"colorFormat"in t&&(i=t.colorFormat,ke.oneOf(t.colorFormat,Z,"invalid color format for texture"))),"depth"in t&&(n.depth=t.depth),"stencil"in t&&(n.stencil=t.stencil),"depthStencil"in t&&(n.depthStencil=t.depthStencil)):r=1,o)if(Array.isArray(o))for(c=[],l=0;l<o.length;++l)c[l]=o[l];else c=[o];else for(var c=Array(s),u={radius:r,format:i,type:a},l=0;l<s;++l)c[l]=H.createCube(u);for(n.color=Array(c.length),l=0;l<c.length;++l){var d=c[l];ke("function"==typeof d&&"textureCube"===d._reglType,"invalid cube map"),r=r||d.width,ke(d.width===r&&d.height===r,"invalid cube map shape"),n.color[l]={target:34069,data:c[l]}}for(l=0;l<6;++l){for(var h=0;h<c.length;++h)n.color[h].target=34069+l;0<l&&(n.depth=f[0].depth,n.stencil=f[0].stencil,n.depthStencil=f[0].depthStencil),f[l]?f[l](n):f[l]=Kt(n)}return Ee(p,{width:r,height:r,color:c})}return p(t),Ee(p,{faces:f,resize:function(t){var e=0|t;if(ke(0<e&&e<=V.maxCubeMapSize,"invalid radius for cube fbo"),e!==p.width){for(var n=p.color,r=0;r<n.length;++r)n[r].resize(e);for(r=0;r<6;++r)f[r].resize(e);p.width=p.height=e}return p},_reglType:"framebufferCube",destroy:function(){f.forEach(function(t){t.destroy()})}})},clear:function(){Oe(J).forEach(Ht)},restore:function(){E.cur=null,E.next=null,E.dirty=!0,Oe(J).forEach(function(t){t.framebuffer=a.createFramebuffer(),qt(t)})}})),j=Ue(i,x,O,I,Ot,kt,0,T,{},Mt,Ct,{elements:null,primitive:4,count:-1,offset:0,instances:-1},A,M,e),N=Ge(i,T,j.procs.poll,A,t,O,I),Tt=j.next,jt=i.canvas,D=[],Nt=[],Dt=[],Pt=[e.onDestroy],Lt=null;function Rt(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var t=0,r=0;e?(t=e.width,r=e.height):n&&(t=n.width,r=n.height),this.width=t,this.height=r}function Bt(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer)&&t.renderbuffer._renderbuffer.decRef()}function zt(t,e,n){var r,o,i;t&&(t.texture?(r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height),ke(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1):(i=t.renderbuffer._renderbuffer,ke(i.width===e&&i.height===n,"inconsistent width/height for renderbuffer"),i.refCount+=1))}function Ft(t,e){e&&(e.texture?a.framebufferTexture2D(36160,t,e.target,e.texture._texture.texture,0):a.framebufferRenderbuffer(36160,t,36161,e.renderbuffer._renderbuffer.renderbuffer))}function Gt(t){var e=3553,n=null,r=null,o=t,t=("object"==typeof t&&(o=t.data,"target"in t)&&(e=0|t.target),ke.type(o,"function","invalid attachment data"),o._reglType);return"texture2d"===t?(n=o,ke(3553===e)):"textureCube"===t?(n=o,ke(34069<=e&&e<34075,"invalid cube map target")):"renderbuffer"===t?(r=o,e=36161):ke.raise("invalid regl object for attachment"),new Rt(e,n,r)}function Ut(t,e,n,r,o){return n?((n=H.create2D({width:t,height:e,format:r,type:o}))._texture.refCount=0,new Rt(3553,n,null)):((o=q.create({width:t,height:e,format:r}))._renderbuffer.refCount=0,new Rt(36161,null,o))}function Wt(t){return t&&(t.texture||t.renderbuffer)}function Xt(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}function Yt(){this.id=Q++,(J[this.id]=this).framebuffer=a.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Vt(t){t.colorAttachments.forEach(Bt),Bt(t.depthAttachment),Bt(t.stencilAttachment),Bt(t.depthStencilAttachment)}function Ht(t){var e=t.framebuffer;ke(e,"must not double destroy framebuffer"),a.deleteFramebuffer(e),t.framebuffer=null,K.framebufferCount--,delete J[t.id]}function qt(t){a.bindFramebuffer(36160,t.framebuffer);for(var e=t.colorAttachments,n=0;n<e.length;++n)Ft(36064+n,e[n]);for(n=e.length;n<V.maxColorAttachments;++n)a.framebufferTexture2D(36160,36064+n,3553,null,0);a.framebufferTexture2D(36160,33306,3553,null,0),a.framebufferTexture2D(36160,36096,3553,null,0),a.framebufferTexture2D(36160,36128,3553,null,0),Ft(36096,t.depthAttachment),Ft(36128,t.stencilAttachment),Ft(33306,t.depthStencilAttachment);t=a.checkFramebufferStatus(36160);a.isContextLost()||36053===t||ke.raise("framebuffer configuration not supported, status = "+tn[t]),a.bindFramebuffer(36160,E.next?E.next.framebuffer:null),E.cur=E.next,a.getError()}function Kt(t,e){var x=new Yt;function w(t,e){ke(E.next!==x,"can not update framebuffer which is currently in use");var n=0,r=0,o=!0,i=!0,a=null,s=!0,c="rgba",u="uint8",l=1,d=null,h=null,f=null,p=!1,g=("number"==typeof t?(n=0|t,r=0|e||n):t?(ke.type(t,"object","invalid arguments for framebuffer"),"shape"in(e=t)?(t=e.shape,ke(Array.isArray(t)&&2<=t.length,"invalid shape for framebuffer"),n=t[0],r=t[1]):("radius"in e&&(n=r=e.radius),"width"in e&&(n=e.width),"height"in e&&(r=e.height)),("color"in e||"colors"in e)&&(a=e.color||e.colors,Array.isArray(a))&&ke(1===a.length||_.webgl_draw_buffers,"multiple render targets not supported"),a||("colorCount"in e&&(l=0|e.colorCount,ke(0<l,"invalid color buffer count")),"colorTexture"in e&&(s=!!e.colorTexture,c="rgba4"),"colorType"in e&&(u=e.colorType,s?(ke(_.oes_texture_float||!("float"===u||"float32"===u),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ke(_.oes_texture_half_float||!("half float"===u||"float16"===u),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===u||"float16"===u?(ke(_.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),c="rgba16f"):"float"!==u&&"float32"!==u||(ke(_.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),c="rgba32f"),ke.oneOf(u,$,"invalid color type")),"colorFormat"in e&&(c=e.colorFormat,0<=Z.indexOf(c)?s=!0:0<=S.indexOf(c)?s=!1:s?ke.oneOf(e.colorFormat,Z,"invalid color format for texture"):ke.oneOf(e.colorFormat,S,"invalid color format for renderbuffer"))),("depthTexture"in e||"depthStencilTexture"in e)&&(p=!(!e.depthTexture&&!e.depthStencilTexture),ke(!p||_.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in e&&("boolean"==typeof e.depth?o=e.depth:(d=e.depth,i=!1)),"stencil"in e&&("boolean"==typeof e.stencil?i=e.stencil:(h=e.stencil,o=!1)),"depthStencil"in e&&("boolean"==typeof e.depthStencil?o=i=e.depthStencil:(f=e.depthStencil,i=o=!1))):n=r=1,null),t=null,e=null,y=null;if(Array.isArray(a))g=a.map(Gt);else if(a)g=[Gt(a)];else for(g=new Array(l),b=0;b<l;++b)g[b]=Ut(n,r,s,c,u);ke(_.webgl_draw_buffers||g.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ke(g.length<=V.maxColorAttachments,"too many color attachments, not supported"),n=n||g[0].width,r=r||g[0].height,d?t=Gt(d):o&&!i&&(t=Ut(n,r,p,"depth","uint32")),h?e=Gt(h):i&&!o&&(e=Ut(n,r,!1,"stencil","uint8")),f?y=Gt(f):!d&&!h&&i&&o&&(y=Ut(n,r,p,"depth stencil","depth stencil")),ke(!!d+!!h+!!f<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");for(var m,v=null,b=0;b<g.length;++b)zt(g[b],n,r),ke(!g[b]||g[b].texture&&0<=Ze.indexOf(g[b].texture._texture.format)||g[b].renderbuffer&&0<=Je.indexOf(g[b].renderbuffer._renderbuffer.format),"framebuffer color attachment "+b+" is invalid"),g[b]&&g[b].texture&&(m=$e[g[b].texture._texture.format]*Qe[g[b].texture._texture.type],null===v?v=m:ke(v===m,"all color attachments much have the same number of bits per pixel."));return zt(t,n,r),ke(!t||t.texture&&6402===t.texture._texture.format||t.renderbuffer&&33189===t.renderbuffer._renderbuffer.format,"invalid depth attachment for framebuffer object"),zt(e,n,r),ke(!e||e.renderbuffer&&36168===e.renderbuffer._renderbuffer.format,"invalid stencil attachment for framebuffer object"),zt(y,n,r),ke(!y||y.texture&&34041===y.texture._texture.format||y.renderbuffer&&34041===y.renderbuffer._renderbuffer.format,"invalid depth-stencil attachment for framebuffer object"),Vt(x),x.width=n,x.height=r,x.colorAttachments=g,x.depthAttachment=t,x.stencilAttachment=e,x.depthStencilAttachment=y,w.color=g.map(Wt),w.depth=Wt(t),w.stencil=Wt(e),w.depthStencil=Wt(y),w.width=x.width,w.height=x.height,qt(x),w}return K.framebufferCount++,w(t,e),Ee(w,{resize:function(t,e){ke(E.next!==x,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n!==x.width||r!==x.height){for(var o=x.colorAttachments,i=0;i<o.length;++i)Xt(o[i],n,r);Xt(x.depthAttachment,n,r),Xt(x.stencilAttachment,n,r),Xt(x.depthStencilAttachment,n,r),x.width=w.width=n,x.height=w.height=r,qt(x)}return w},_reglType:"framebuffer",_framebuffer:x,destroy:function(){Ht(x),Vt(x)},use:function(t){E.setFBO({framebuffer:w},t)}})}function Zt(t){this.id=rt++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.width=0,this.height=0,l.profile&&(this.stats={size:0})}function $t(t){var e=t.renderbuffer;ke(e,"must not double destroy renderbuffer"),u.bindRenderbuffer(36161,null),u.deleteRenderbuffer(e),t.renderbuffer=null,t.refCount=0,delete n[t.id],et.renderbufferCount--}function Qt(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function Jt(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return t[n].location=e.location;t.push(e)}function te(t,e,n){var r,o=35632===t?at:st,i=o[e];return i||(r=y.str(e),i=g.createShader(t),g.shaderSource(i,r),g.compileShader(i),ke.shaderError(g,i,r,t,n),o[e]=i),i}function ee(t,e){this.id=ut++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],it.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ne(t,e,n){var r,o=te(35632,t.fragId),i=te(35633,t.vertId),a=t.program=g.createProgram();if(g.attachShader(a,o),g.attachShader(a,i),n)for(l=0;l<n.length;++l){var s=n[l];g.bindAttribLocation(a,s[0],s[1])}g.linkProgram(a),ke.linkError(g,a,y.str(t.fragId),y.str(t.vertId),e);for(var c=g.getProgramParameter(a,35718),u=(it.profile&&(t.stats.uniformsCount=c),t.uniforms),l=0;l<c;++l)if(r=g.getActiveUniform(a,l))if(1<r.size)for(var d=0;d<r.size;++d){var h=r.name.replace("[0]","["+d+"]");Jt(u,new Qt(h,y.id(h),g.getUniformLocation(a,h),r))}else Jt(u,new Qt(r.name,y.id(r.name),g.getUniformLocation(a,r.name),r));var f=g.getProgramParameter(a,35721),p=(it.profile&&(t.stats.attributesCount=f),t.attributes);for(l=0;l<f;++l)(r=g.getActiveAttrib(a,l))&&Jt(p,new Qt(r.name,y.id(r.name),g.getAttribLocation(a,r.name),r))}function re(t){this.id=gt++,(pt[this.id]=this).buffer=t,this.primType=4,this.vertCount=0,this.type=0}function oe(t,e,n,r,o,i,a){var s;if(t.buffer.bind(),e?((c=a)||Me(e)&&(!Se(e)||Me(e.data))||(c=dt.oes_element_index_uint?5125:5123),ht._initBuffer(t.buffer,e,n,c,3)):(lt.bufferData(34963,i,n),t.buffer.dtype=s||5121,t.buffer.usage=n,t.buffer.dimension=3,t.buffer.byteLength=i),!(s=a)){switch(t.buffer.dtype){case 5121:case 5120:s=5121;break;case 5123:case 5122:s=5123;break;case 5125:case 5124:s=5125;break;default:ke.raise("unsupported type for element array")}t.buffer.dtype=s}t.type=s,ke(5125!==s||!!dt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var e=o,c=(e<0&&(e=t.buffer.byteLength,5123===s?e>>=1:5125===s&&(e>>=2)),t.vertCount=e,r);r<0&&(c=4,1===(n=t.buffer.dimension)&&(c=0),2===n&&(c=1),3===n)&&(c=4),t.primType=c}function ie(t){ft.elementsCount--,ke(null!==t.buffer,"must not double destroy elements"),delete pt[t.id],t.buffer.destroy(),t.buffer=null}function ae(t){this.id=xt++,this.buffer=h.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,bt.profile&&(this.stats={size:0})}function se(t,e,n){t.byteLength=e.byteLength,h.bufferData(t.type,e,n)}function ce(t,e,n,r,o,i){var a,s,c,u,l,d;if(t.usage=n,Array.isArray(e)){if(t.dtype=r||5126,0<e.length)if(Array.isArray(e[0])){for(var h=Ke(e),f=1,p=1;p<h.length;++p)f*=h[p];t.dimension=f,se(t,a=qe(e,h,t.dtype),n),i?t.persistentData=a:Ae.freeType(a)}else"number"==typeof e[0]?(t.dimension=o,Le(d=Ae.allocType(t.dtype,e.length),e),se(t,d,n),i?t.persistentData=d:Ae.freeType(d)):Me(e[0])?(t.dimension=e[0].length,t.dtype=r||Pe(e[0])||5126,se(t,a=qe(e,[e.length,e[0].length],t.dtype),n),i?t.persistentData=a:Ae.freeType(a)):ke.raise("invalid buffer data")}else Me(e)?(t.dtype=r||Pe(e),t.dimension=o,se(t,e,n),i&&(t.persistentData=new Uint8Array(new Uint8Array(e.buffer)))):Se(e)?(h=e.shape,d=e.stride,a=e.offset,l=u=c=s=0,1===h.length?(s=h[0],c=1,u=d[0],l=0):2===h.length?(s=h[0],c=h[1],u=d[0],l=d[1]):ke.raise("invalid shape"),t.dtype=r||Pe(e.data)||5126,t.dimension=c,Re(d=Ae.allocType(t.dtype,s*c),e.data,s,c,u,l,a),se(t,d,n),i?t.persistentData=d:Ae.freeType(d)):e instanceof ArrayBuffer?(t.dtype=5121,t.dimension=o,se(t,e,n),i&&(t.persistentData=new Uint8Array(new Uint8Array(e)))):ke.raise("invalid buffer data")}function ue(t){vt.bufferCount--,Mt.destroyBuffer(t);var e=t.buffer;ke(e,"buffer must not be deleted already"),h.deleteBuffer(e),t.buffer=null,delete f[t.id]}function le(){if(0===D.length)M&&M.update(),Lt=null;else{Lt=Ye.next(le),xe();for(var t=D.length-1;0<=t;--t){var e=D[t];e&&e(A,null,0)}i.flush(),M&&M.update()}}function de(){!Lt&&0<D.length&&(Lt=Ye.next(le))}function he(){Lt&&(Ye.cancel(le),Lt=null)}function fe(t){t.preventDefault(),U=!0,he(),Nt.forEach(function(t){t()})}function pe(t){i.getError(),U=!1,W.restore(),Ct.restore(),Ot.restore(),At.restore(),It.restore(),T.restore(),Mt.restore(),M&&M.restore(),j.procs.refresh(),de(),Dt.forEach(function(t){t()})}function ge(t){function e(n){var r={},o={};return Object.keys(n).forEach(function(t){var e=n[t];Ce.isDynamic(e)?o[t]=Ce.unbox(e,t):r[t]=e}),{dynamic:o,static:r}}ke(!!t,"invalid args to regl({...})"),ke.type(t,"object","invalid args to regl({...})");var r,n=e(t.context||{}),o=e(t.uniforms||{}),i=e(t.attributes||{}),t=e((delete(r=Ee({},t=t)).uniforms,delete r.attributes,delete r.context,delete r.vao,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),d("blend"),d("depth"),d("cull"),d("stencil"),d("polygonOffset"),d("scissor"),d("sample"),"vao"in t&&(r.vao=t.vao),r)),a={gpuTime:0,cpuTime:0,count:0},t=j.compile(t,i,o,n,a),s=t.draw,c=t.batch,u=t.scope,l=[];function d(e){var n;e in r&&(n=r[e],delete r[e],Object.keys(n).forEach(function(t){r[e+"."+t]=n[t]}))}return Ee(function(t,e){var n;if(U&&ke.raise("context lost"),"function"==typeof t)return u.call(this,null,t,0);if("function"!=typeof e)return"number"!=typeof t?Array.isArray(t)?t.length?c.call(this,t,t.length):void 0:s.call(this,t):0<t?c.call(this,function(t){for(;l.length<t;)l.push(null);return l}(0|t),0|t):void 0;if("number"==typeof t)for(n=0;n<t;++n)u.call(this,null,e,n);else{if(!Array.isArray(t))return u.call(this,t,e,0);for(n=0;n<t.length;++n)u.call(this,t[n],e,n)}},{stats:a})}jt&&(jt.addEventListener("webglcontextlost",fe,!1),jt.addEventListener("webglcontextrestored",pe,!1));var ye=T.setFBO=ge({framebuffer:Ce.define.call(null,1,"framebuffer")});function me(t,e){var n=0,r=(j.procs.poll(),e.color);r&&(i.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in e&&(i.clearDepth(+e.depth),n|=256),"stencil"in e&&(i.clearStencil(0|e.stencil),n|=1024),ke(!!n,"called regl.clear with no buffer specified"),i.clear(n)}function ve(e){return ke.type(e,"function","regl.frame() callback must be a function"),D.push(e),de(),{cancel:function(){var t=Xe(D,e);ke(0<=t,"cannot cancel a frame twice"),D[t]=function t(){var e=Xe(D,t);D[e]=D[D.length-1],--D.length,D.length<=0&&he()}}}}function be(){var t=Tt.viewport,e=Tt.scissor_box;t[0]=t[1]=e[0]=e[1]=0,A.viewportWidth=A.framebufferWidth=A.drawingBufferWidth=t[2]=e[2]=i.drawingBufferWidth,A.viewportHeight=A.framebufferHeight=A.drawingBufferHeight=t[3]=e[3]=i.drawingBufferHeight}function xe(){A.tick+=1,A.time=_e(),be(),j.procs.poll()}function we(){be(),j.procs.refresh(),M&&M.update()}function _e(){return(Ve()-St)/1e3}we();var P=Ee(ge,{clear:function(t){if(ke("object"==typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;e<6;++e)ye(Ee({framebuffer:t.framebuffer.faces[e]},t),me);else ye(t,me);else me(0,t)},prop:Ce.define.bind(null,1),context:Ce.define.bind(null,2),this:Ce.define.bind(null,3),draw:ge({}),buffer:function(t){return Ot.create(t,34962,!1,!1)},elements:function(t){return kt.create(t,!1)},texture:At.create2D,cube:At.createCube,renderbuffer:It.create,framebuffer:T.create,framebufferCube:T.createCube,vao:Mt.createVAO,attributes:t,frame:ve,on:function(t,e){var n;switch(ke.type(e,"function","listener callback must be a function"),t){case"frame":return ve(e);case"lost":n=Nt;break;case"restore":n=Dt;break;case"destroy":n=Pt;break;default:ke.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}},limits:I,hasExtension:function(t){return 0<=I.extensions.indexOf(t.toLowerCase())},read:N,destroy:function(){D.length=0,he(),jt&&(jt.removeEventListener("webglcontextlost",fe),jt.removeEventListener("webglcontextrestored",pe)),Ct.clear(),T.clear(),It.clear(),At.clear(),kt.clear(),Ot.clear(),Mt.clear(),M&&M.clear(),Pt.forEach(function(t){t()})},_gl:i,_refresh:we,poll:function(){xe(),M&&M.update()},now:_e,stats:w});return e.onDone(null,P),P})},function(t,e,n){var r=n(332),o=n(333),i=n(334),a=n(335);t.exports=function(t){return r(t)||o(t)||i(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(209);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(209);t.exports=function(t,e){var n;if(t)return"string"==typeof t?r(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var r=n(154),o=n(337),i=n(155),n=Function.prototype,a=Object.prototype,s=n.toString,c=a.hasOwnProperty,u=s.call(Object);t.exports=function(t){return!(!i(t)||"[object Object]"!=r(t))&&(null===(t=o(t))||"function"==typeof(t=c.call(t,"constructor")&&t.constructor)&&t instanceof t&&s.call(t)==u)}},function(t,e,n){n=n(338)(Object.getPrototypeOf,Object);t.exports=n},function(t,e){t.exports=function(e,n){return function(t){return e(n(t))}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.clusterBundle=e.clusterCode=e.fruchtermanBundle=e.fruchtermanCode=void 0,e.fruchtermanCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass Fruchterman {\n  @in @out\n  u_Data: vec4[];\n  @in\n  u_K: float;\n  @in\n  u_K2: float;\n  \n  @in\n  u_Center: vec2;\n  @in\n  u_Gravity: float;\n  @in\n  u_ClusterGravity: float;\n  @in\n  u_Speed: float;\n  @in\n  u_MaxDisplace: float;\n  @in\n  u_Clustering: float;\n  @in\n  u_AttributeArray: vec4[];\n  @in\n  u_ClusterCenters: vec4[];\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const xDist = currentNode[0] - nextNode[0];\n        const yDist = currentNode[1] - nextNode[1];\n        const dist = (xDist * xDist + yDist * yDist) + 0.01;\n        let param = this.u_K2 / dist;\n        \n        if (dist > 0.0) {\n          dx += param * xDist;\n          dy += param * yDist;\n          if (xDist == 0 && yDist == 0) {\n            const sign = i < j ? 1 : -1;\n            dx += param * sign;\n            dy += param * sign;\n          }\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // \n    let dx = 0, dy = 0;\n    const vx = currentNode[0] - this.u_Center[0];\n    const vy = currentNode[1] - this.u_Center[1];\n    const gf = 0.01 * this.u_K * this.u_Gravity;\n    dx = gf * vx;\n    dy = gf * vy;\n    if (this.u_Clustering == 1) {\n      const clusterIdx = int(nodeAttributes[0]);\n      const center = this.u_ClusterCenters[clusterIdx];\n      const cvx = currentNode[0] - center[0];\n      const cvy = currentNode[1] - center[1];\n      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;\n      const parma = this.u_K * this.u_ClusterGravity / dist;\n      dx += parma * cvx;\n      dy += parma * cvy;\n    }\n    return [dx, dy];\n  }\n  calcAttractive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    const arr_offset = int(floor(currentNode[2] + 0.5));\n    const length = int(floor(currentNode[3] + 0.5));\n    const node_buffer: vec4;\n    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + p;\n      // when arr_idx % 4 == 0 update currentNodedx_buffer\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)];\n      }\n      const float_j = buf_offset == 0 ? node_buffer[0] :\n                      buf_offset == 1 ? node_buffer[1] :\n                      buf_offset == 2 ? node_buffer[2] :\n                                        node_buffer[3];\n      const nextNode = this.u_Data[int(float_j)];\n      const xDist = currentNode[0] - nextNode[0];\n      const yDist = currentNode[1] - nextNode[1];\n      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;\n      let attractiveF = dist / this.u_K;\n    \n      if (dist > 0.0) {\n        dx -= xDist * attractiveF;\n        dy -= yDist * attractiveF;\n        if (xDist == 0 && yDist == 0) {\n          const sign = i < int(float_j) ? 1 : -1;\n          dx -= sign * attractiveF;\n          dy -= sign * attractiveF;\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    let dx = 0, dy = 0;\n    if (i >= VERTEX_COUNT) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // [gravity, fx, fy, 0]\n    const nodeAttributes = this.u_AttributeArray[i];\n\n    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {\n      // the node is fixed\n      this.u_Data[i] = [\n        nodeAttributes[1],\n        nodeAttributes[2],\n        currentNode[2],\n        currentNode[3]\n      ];\n      return;\n    }\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    dx += repulsive[0];\n    dy += repulsive[1];\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode);\n    dx += attractive[0];\n    dy += attractive[1];\n    // gravity\n    const gravity = this.calcGravity(currentNode, nodeAttributes);\n    dx -= gravity[0];\n    dy -= gravity[1];\n    // speed\n    dx *= this.u_Speed;\n    dy *= this.u_Speed;\n\n    // move\n    const distLength = sqrt(dx * dx + dy * dy);\n    if (distLength > 0.0) {\n      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);\n      this.u_Data[i] = [\n        currentNode[0] + dx / distLength * limitedDist,\n        currentNode[1] + dy / distLength * limitedDist,\n        currentNode[2],\n        currentNode[3]\n      ];\n    }\n  }\n}\n",e.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',e.clusterCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst VERTEX_COUNT;\nconst CLUSTER_COUNT;\n@numthreads(1, 1, 1)\nclass CalcCenter {\n  @in\n  u_Data: vec4[];\n  @in\n  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]\n  @in @out\n  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const center = this.u_ClusterCenters[i];\n    let sumx = 0;\n    let sumy = 0;\n    let count = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      const attributes = this.u_NodeAttributes[j];\n      const clusterIdx = int(attributes[0]);\n      const vertex = this.u_Data[j];\n      if (clusterIdx == i) {\n        sumx += vertex.x;\n        sumy += vertex.y;\n        count += 1;\n      }\n    }\n    this.u_ClusterCenters[i] = [\n      sumx / count,\n      sumy / count,\n      count,\n      i\n    ];\n  }\n}\n",e.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.aveMovementBundle=e.aveMovementCode=e.gForceBundle=e.gForceCode=void 0,e.gForceCode="\nimport { globalInvocationID } from 'g-webgpu';\n\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\nconst SHIFT_20 = 1048576;\n\n@numthreads(1, 1, 1)\nclass GGForce {\n  @in @out\n  u_Data: vec4[];\n\n  @in\n  u_damping: float;\n  \n  @in\n  u_maxSpeed: float;\n\n  @in\n  u_minMovement: float;\n\n  @in\n  u_AveMovement: vec4[];\n\n  @in\n  u_coulombDisScale: float;\n\n  @in\n  u_factor: float;\n\n  @in\n  u_NodeAttributeArray1: vec4[];\n\n  @in\n  u_NodeAttributeArray2: vec4[];\n\n  @in\n  u_interval: float;\n\n  unpack_float(packedValue: float): ivec2 {\n    const packedIntValue = int(packedValue);\n    const v0 = packedIntValue / SHIFT_20;\n    return [v0, packedIntValue - v0 * SHIFT_20];\n  }\n\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let ax = 0, ay = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const vx = currentNode[0] - nextNode[0];\n        const vy = currentNode[1] - nextNode[1];\n        const dist = sqrt(vx * vx + vy * vy) + 0.01;\n        const n_dist = (dist + 0.1) * this.u_coulombDisScale;\n        const direx = vx / dist;\n        const direy = vy / dist;\n        const attributesi = this.u_NodeAttributeArray1[i];\n        const attributesj = this.u_NodeAttributeArray1[j];\n        const massi = attributesi[0];\n        const nodeStrengthi = attributesi[2];\n        const nodeStrengthj = attributesj[2];\n        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;\n        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);\n        const param = nodeStrength * this.u_factor / (n_dist * n_dist);\n        ax += direx * param;\n        ay += direy * param;\n      }\n    }\n    return [ax, ay];\n  }\n\n  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {\n    // note: attributes2 = [centerX, centerY, gravity, 0]\n\n    const vx = currentNode[0] - attributes2[0];\n    const vy = currentNode[1] - attributes2[1];\n    \n    const ax = vx * attributes2[2];\n    const ay = vy * attributes2[2];\n    \n    return [ax, ay];\n  }\n\n  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {\n    // note: attributes1 = [mass, degree, nodeSterngth, 0]\n\n    const mass = attributes1[0];\n    let ax = 0, ay = 0;\n    // const arr_offset = int(floor(currentNode[2] + 0.5));\n    // const length = int(floor(currentNode[3] + 0.5));\n\n    const compressed = this.unpack_float(currentNode[2]);\n    const length = compressed[0];\n    const arr_offset = compressed[1];\n\n    const node_buffer: vec4;\n    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + 4 * p; // i  p \n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)]; // = / 4\n      }\n\n      let float_j: float = node_buffer[0];\n\n      const nextNode = this.u_Data[int(float_j)];\n      const vx = nextNode[0] - currentNode[0];\n      const vy = nextNode[1] - currentNode[1];\n      const dist = sqrt(vx * vx + vy * vy) + 0.01;\n      const direx = vx / dist;\n      const direy = vy / dist;\n      const edgeLength = node_buffer[1];\n      const edgeStrength = node_buffer[2];\n      const diff: float = edgeLength - dist;//edgeLength\n      // const param = diff * this.u_stiffness / mass; //\n      const param = diff * edgeStrength / mass; // \n      ax -= direx * param;\n      ay -= direy * param;\n    }\n    return [ax, ay];\n  }\n\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    const movement = u_AveMovement[0];\n    let ax = 0, ay = 0;\n\n    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // \n    // [mass, degree, nodeStrength, fx]\n    const nodeAttributes1 = this.u_NodeAttributeArray1[i];\n    // [centerX, centerY, centerGravity, fy]\n    const nodeAttributes2 = this.u_NodeAttributeArray2[i];\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    ax += repulsive[0];\n    ay += repulsive[1];\n\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);\n    ax += attractive[0];\n    ay += attractive[1];\n\n    // gravity\n    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);\n    ax -= gravity[0];\n    ay -= gravity[1];\n\n    // speed\n    const param = this.u_interval * this.u_damping;\n    let vx = ax * param;\n    let vy = ay * param;\n    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;\n    if (vlength > this.u_maxSpeed) {\n      const param2 = this.u_maxSpeed / vlength;\n      vx = param2 * vx;\n      vy = param2 * vy;\n    }\n\n    // move\n    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {\n      this.u_Data[i] = [\n        nodeAttributes1[3],\n        nodeAttributes2[3],\n        currentNode[2],\n        0\n      ];\n    } else {\n      const distx = vx * this.u_interval;\n      const disty = vy * this.u_interval;\n      const distLength = sqrt(distx * distx + disty * disty);\n      this.u_Data[i] = [\n        currentNode[0] + distx,\n        currentNode[1] + disty,\n        currentNode[2],\n        distLength\n      ];\n    }\n    \n    // the avarage move distance\n    // need to share memory\n    \n  }\n}\n",e.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',e.aveMovementCode="\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass CalcAveMovement {\n  @in\n  u_Data: vec4[];\n  @in\n  u_iter: float;\n  @in @out\n  u_AveMovement: vec4[];\n  @main\n  compute() {\n    let movement = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      const vertex = this.u_Data[j];\n      movement += vertex[3];\n    }\n    movement = movement / float(VERTEX_COUNT);\n    this.u_AveMovement[0] = [movement, 0, 0, 0];\n  }\n}\n",e.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},function(t,e,n){function r(t){this.id=t.id||0,this.rx=t.rx,this.ry=t.ry,this.fx=0,this.fy=0,this.mass=t.mass,this.degree=t.degree,this.g=t.g||0}Object.defineProperty(e,"__esModule",{value:!0}),r.prototype.distanceTo=function(t){var e=this.rx-t.rx,t=this.ry-t.ry;return Math.hypot(e,t)},r.prototype.setPos=function(t,e){this.rx=t,this.ry=e},r.prototype.resetForce=function(){this.fx=0,this.fy=0},r.prototype.addForce=function(t){var e=t.rx-this.rx,n=t.ry-this.ry,r=Math.hypot(e,n),t=this.g*(this.degree+1)*(t.degree+1)/(r=r<1e-4?1e-4:r);this.fx+=t*e/r,this.fy+=t*n/r},r.prototype.in=function(t){return t.contains(this.rx,this.ry)},r.prototype.add=function(t){var e=this.mass+t.mass;return new r({rx:(this.rx*this.mass+t.rx*t.mass)/e,ry:(this.ry*this.mass+t.ry*t.mass)/e,mass:e,degree:this.degree+t.degree})},e.default=r},function(t,e,n){function r(t){this.xmid=t.xmid,this.ymid=t.ymid,this.length=t.length,this.massCenter=t.massCenter||[0,0],this.mass=t.mass||1}Object.defineProperty(e,"__esModule",{value:!0}),r.prototype.getLength=function(){return this.length},r.prototype.contains=function(t,e){var n=this.length/2;return t<=this.xmid+n&&t>=this.xmid-n&&e<=this.ymid+n&&e>=this.ymid-n},r.prototype.NW=function(){return new r({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},r.prototype.NE=function(){return new r({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},r.prototype.SW=function(){return new r({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},r.prototype.SE=function(){return new r({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},e.default=r},function(t,e,n){function r(t){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=t&&(this.quad=t)}Object.defineProperty(e,"__esModule",{value:!0}),r.prototype.insert=function(t){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new r(this.quad.NW()),this.NE=new r(this.quad.NE()),this.SW=new r(this.quad.SW()),this.SE=new r(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t)):this.body=t},r.prototype._putBody=function(t){this.quad&&(t.in(this.quad.NW())&&this.NW?this.NW.insert(t):t.in(this.quad.NE())&&this.NE?this.NE.insert(t):t.in(this.quad.SW())&&this.SW?this.SW.insert(t):t.in(this.quad.SE())&&this.SE&&this.SE.insert(t))},r.prototype._isExternal=function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE},r.prototype.updateForce=function(t){null!=this.body&&t!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(t)<this.theta?t.addForce(this.body):(this.NW&&this.NW.updateForce(t),this.NE&&this.NE.updateForce(t),this.SW&&this.SW.updateForce(t),this.SE&&this.SE.updateForce(t)))},e.default=r},function(t,e,n){var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){t[r=void 0===r?n:r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},f=(Object.defineProperty(e,"__esModule",{value:!0}),a(n(158))),p=s(n(345)),g=s(n(347)),y=n(151);e.default=function(t,s){var r,o,n,c,e,u=t.nodes,l=t.edges,d=s.width,h=s.height;return null!=u&&u.length?(r=[],u.forEach(function(e){var t;1<l.filter(function(t){return t.source===e.id||t.target===e.id}).length&&(delete(t=i({},e)).size,r.push(t))}),o=[],l.forEach(function(e){var t=r.find(function(t){return t.id===e.source}),n=r.find(function(t){return t.id===e.target});t&&n&&o.push(e)}),n=new y.DagreLayout({type:"dagre",ranksep:s.nodeMinGap,nodesep:s.nodeMinGap}).layout({nodes:r,edges:o}).nodes,u.forEach(function(e){var t=(n||[]).find(function(t){return t.id===e.id});e.x=(null==t?void 0:t.x)||d/2,e.y=(null==t?void 0:t.y)||h/2}),c=JSON.parse(JSON.stringify(u)),t=JSON.parse(JSON.stringify(l)),e=f.forceSimulation().nodes(c).force("link",f.forceLink(t).id(function(t){return t.id}).distance(function(e){return o.find(function(t){return t.source===e.source&&t.target===e.target})?30:20})).force("charge",f.forceManyBody()).force("center",f.forceCenter(d/2,h/2)).force("x",f.forceX(d/2)).force("y",f.forceY(h/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),new Promise(function(a){e.on("end",function(){u.forEach(function(e){var t=c.find(function(t){return t.id===e.id});t&&(e.x=t.x,e.y=t.y)});var e=Math.min.apply(Math,u.map(function(t){return t.x})),t=Math.max.apply(Math,u.map(function(t){return t.x})),n=Math.min.apply(Math,u.map(function(t){return t.y})),r=Math.max.apply(Math,u.map(function(t){return t.y})),o=d/(t-e),i=h/(r-n);u.forEach(function(t){void 0!==t.x&&o<1&&(t.x=(t.x-e)*o),void 0!==t.y&&i<1&&(t.y=(t.y-n)*i)}),u.forEach(function(t){t.sizeTemp=t.size,t.size=[10,10]}),(0,g.default)(u,l),u.forEach(function(t){t.size=t.sizeTemp||[],delete t.sizeTemp}),(0,p.default)({nodes:u,edges:l},s),a()})})):Promise.resolve()}},function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},y=(Object.defineProperty(e,"__esModule",{value:!0}),r(n(346)));e.default=function(n,t){if(!n.nodes||0===n.nodes.length)return n;var e=t.width,r=t.height,o=t.nodeMinGap,i=1e4,a=1e4,s=(n.nodes.forEach(function(t){var e=t.size[0]||50,t=t.size[1]||50;i=Math.min(e,i),a=Math.min(t,a)}),new y.default);s.init(e,r,{CELL_H:a,CELL_W:i}),n.nodes.forEach(function(t){var e=s.occupyNearest(t);e&&(e.node={id:t.id,size:t.size},t.x=e.x,t.y=e.y,t.dx=e.dx,t.dy=e.dy)});for(var c=0;c<n.nodes.length;c++){var u=n.nodes[c],l=s.findGridByNodeId(u.id);if(!l)throw new Error("can not find node cell");var d=l.column,h=l.row;if(u.size[0]+o>i){for(var f=g=Math.ceil((u.size[0]+o)/i)-1,p=0;p<g&&(-1<s.additionColumn.indexOf(d+p+1)&&!s.cells[d+p+1][h].node);p++)f--;s.insertColumn(d,f)}if(u.size[1]+o>a){for(var g,f=g=Math.ceil((u.size[1]+o)/a)-1,p=0;p<g&&(-1<s.additionRow.indexOf(h+p+1)&&!s.cells[d][h+p+1].node);p++)f--;s.insertRow(h,f)}}for(c=0;c<s.columnNum;c++)for(p=0;p<s.rowNum;p++)!function(t){var e=s.cells[c][t];e.node&&(t=n.nodes.find(function(t){return t.id===(null==(t=null==e?void 0:e.node)?void 0:t.id)}))&&(t.x=e.x+t.size[0]/2,t.y=e.y+t.size[1]/2)}(p)}},function(t,e,n){var o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}Object.defineProperty(e,"__esModule",{value:!0}),s.prototype.init=function(t,e,n){this.cells=[],this.CELL_W=n.CELL_W||s.DEFAULT_CELL_W,this.CELL_H=n.CELL_H||s.DEFAULT_CELL_H,this.columnNum=Math.ceil(t/this.CELL_W),this.rowNum=Math.ceil(e/this.CELL_H),s.MIN_DIST=Math.pow(t,2)+Math.pow(e,2);for(var r=0;r<this.columnNum;r++){for(var o=[],i=0;i<this.rowNum;i++){var a={dx:r,dy:i,x:r*this.CELL_W,y:i*this.CELL_H,occupied:!1};o.push(a)}this.cells.push(o)}},s.prototype.findGridByNodeId=function(t){for(var e,n=0;n<this.columnNum;n++)for(var r=0;r<this.rowNum;r++)if(this.cells[n][r].node&&(null==(e=null==(e=this.cells[n][r])?void 0:e.node)?void 0:e.id)===t)return{column:n,row:r};return null},s.prototype.sqdist=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},s.prototype.occupyNearest=function(t){for(var e,n=s.MIN_DIST,r=null,o=0;o<this.columnNum;o++)for(var i=0;i<this.rowNum;i++)!this.cells[o][i].occupied&&(e=this.sqdist(t,this.cells[o][i]))<n&&(n=e,r=this.cells[o][i]);return r&&(r.occupied=!0),r},s.prototype.insertColumn=function(t,e){if(!(e<=0)){for(var n=0;n<e;n++){this.cells[n+this.columnNum]=[];for(var r=0;r<this.rowNum;r++)this.cells[n+this.columnNum][r]={dx:n,dy:r,x:n*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null}}for(n=this.columnNum-1;t<n;n--)for(r=0;r<this.rowNum;r++)this.cells[n+e][r]=o(o({},this.cells[n][r]),{x:(n+e)*this.CELL_W,y:r*this.CELL_H}),this.cells[n][r]={x:n*this.CELL_W,y:r*this.CELL_H,occupied:!0,node:null};for(r=0;r<this.additionColumn.length;r++)this.additionColumn[r]>=t&&(this.additionColumn[r]+=e);for(n=0;n<e;n++)this.additionColumn.push(t+n+1);this.columnNum+=e}},s.prototype.insertRow=function(t,e){if(!(e<=0)){for(var n=0;n<e;n++)for(var r=0;r<this.columnNum;r++)this.cells[r][n+this.rowNum]={dx:r,dy:n,x:r*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(r=0;r<this.columnNum;r++)for(n=this.rowNum-1;t<n;n--)this.cells[r][n+e]=o(o({},this.cells[r][n]),{dx:r,dy:n+e,x:r*this.CELL_W,y:(n+e)*this.CELL_H}),this.cells[r][n]={dx:r,dy:n,x:r*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(n=0;n<this.additionRow.length;n++)this.additionRow[n]>=t&&(this.additionRow[n]+=e);for(r=0;r<e;r++)this.additionRow.push(t+r+1);this.rowNum+=e}},s.prototype.getNodes=function(){for(var t=[],e=0;e<this.columnNum;e++)for(var n=0;n<this.rowNum;n++)this.cells[e][n].node&&t.push(this.cells[e][n]);return t},s.MIN_DIST=50,s.DEFAULT_CELL_W=80,s.DEFAULT_CELL_H=80,e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var v=1.5707963267948966,b=new Map,d=.8;function i(t,e){var n,r,o=(b.get(t.id)||[]).find(function(t){return t.source===e.id||t.target===e.id}),i=t.size[0]*t.size[1],a=e.size[0]*e.size[1],s=a<i?e:t,a=a<i?t:e,i=s.x-s.size[0]/2,t=s.y-s.size[1]/2,c=s.x+s.size[0]/2,u=s.y+s.size[1]/2,l=a.x-a.size[0]/2,d=a.y-a.size[1]/2,h=a.x+a.size[0]/2,f=a.y+a.size[1]/2,p=s.y,g=a.y,y=0,m=0;return l<=c&&i<=h&&d<=u&&t<=f?(y=10/(m=0===(m=Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(g-p,2)))?1e-7:m)*100+((c<h?c:h)-(l<i?i:l))*((u<f?u:f)-(d<t?t:d)),y*=1e7):(g=s.x-s.size[0]/2,p=s.y-s.size[1]/2,c=s.x+s.size[0]/2,h=s.y+s.size[1]/2,i=a.x-a.size[0]/2,l=a.y-a.size[1]/2,u=a.x+a.size[0]/2,f=a.y+a.size[1]/2,t=a.x-s.x,d=Math.atan2(t,a.y-s.y),r=n=s=a=0,v<d?(s=p-f,a=i-c,n=parseFloat((s?s/Math.cos(d):a).toFixed(2)),r=parseFloat((a?a/Math.sin(d):s).toFixed(2))):n=r=0<d&&d<=v?(s=l-h)>(a=i-c)?parseFloat((s?s/Math.cos(d):a).toFixed(2)):parseFloat((a?a/Math.sin(d):s).toFixed(2)):d<-v?(s=p-f)>(a=-(u-g))?parseFloat((s?s/Math.cos(d):a).toFixed(2)):parseFloat((a?a/Math.sin(d):s).toFixed(2)):(s=l-h)>(a=Math.abs(t)>(c-g)/2?g-u:t)?parseFloat((s?s/Math.cos(d):a).toFixed(2)):parseFloat((a&&0!==d?a/Math.sin(d):s).toFixed(2)),parseFloat(d.toFixed(2)),i=!1,p={distance:Math.abs(n<r?n:r),isHoriz:i},(m=p.distance)<=10?y+=0!==m?o?10+1e7/m:10+1e8/m:1e7:(y+=m,o&&(y+=m*m))),y}function h(t){for(var e=0,n=0;n<t.length;n++){var r=t[n];(r.x<0||r.y<0||1200<r.x||800<r.y)&&(e+=1e12);for(var o=n+1;o<t.length;o++)e+=i(r,t[o])}return e}function s(t,e){for(var n,r,o=!1,i=[10,-10,0,0],a=[0,0,10,-10],s=0;s<t.length;++s)for(var c=t[s],u=f(c,t),l=0;l<i.length;l++)!function(e,t,n,r){var o=new Map,n=(n.forEach(function(t,e){o.set(t.id,t)}),r.filter(function(t){return t.source===e.id||t.target===e.id})||[]),i=[];n.forEach(function(t){t=t.source===e.id?t.target:t.source,t=o.get(t);t&&i.push(t)});for(var a=!0,s=0;s<i.length;s++){var c=i[s],u=180*Math.atan((e.y-c.y)/(c.x-e.y)),l=180*Math.atan((t.y-c.y)/(c.x-t.y)),d=70<u&&u<110,h=70<l&&l<110;if((u<30||150<u)&&!(l<30||150<l)||u*l<0){a=!1;break}if(d&&!h||u*l<0){a=!1;break}if((c.x-e.x)*(c.x-t.x)<0){a=!1;break}if((c.y-e.y)*(c.y-t.y)<0){a=!1;break}}return a}(c,{x:c.x+i[l],y:c.y+a[l]},t,e)||(c.x+=i[l],c.y+=a[l],n=f(c,t),r=Math.random(),n<u||r<d&&.1<r?(u=n,o=!0):(c.x-=i[l],c.y-=a[l]));return.1<d&&(d*=.5),o?h(t):0}function f(t,e){var n=0;(t.x<0||t.y<0||1200<t.x+t.size[0]+20||800<t.y+t.size[1]+20)&&(n+=1e12);for(var r=0;r<e.length;++r)t.id!==e[r].id&&(n+=i(t,e[r]));return n}e.default=function(t,n){if(0!==t.length){t.forEach(function(e){var t=n.filter(function(t){return t.source===e.id||t.target===e.id});b.set(e,t)}),t.sort(function(t,e){return(null==(t=b.get(t.id))?void 0:t.length)-(null==(t=b.get(e.id))?void 0:t.length)});for(var e=h(t),r=20,o=0,i=0;0<r&&!(50<=++i);){var a=s(t,n),a=(o=0!==a?a:o)-e,e=o;0==a?--r:r=20}t.forEach(function(t){t.x=t.x-t.size[0]/2,t.y=t.y-t.size[1]/2})}return{nodes:t,edges:n}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Layouts=e.Layout=void 0;var r=n(189),o=n(193),i=n(194),a=n(196),s=n(195),c=n(197),u=n(198),l=n(151),d=n(201),h=n(202),f=n(203),p=n(204),g=n(205),y=n(211),m=n(212),v=n(213),b=n(214),x=n(215),w=n(200),_=n(80);function E(t){var e=(0,r.getLayoutByName)(t.type);this.layoutInstance=new e(t)}E.prototype.layout=function(t){return this.layoutInstance.layout(t)},E.prototype.updateCfg=function(t){this.layoutInstance.updateCfg(t)},E.prototype.init=function(t){this.correctLayers(t.nodes),this.layoutInstance.init(t)},E.prototype.correctLayers=function(t){var e,n,r;null!=t&&t.length&&(e=1/0,n=[],t.forEach(function(t){(0,_.isString)(t.layer)&&(t.layer=parseInt(t.layer,10)),void 0===t.layer||isNaN(t.layer)||(n.push(t),t.layer<e&&(e=t.layer))}),e<=0)&&(r=Math.abs(e)+1,n.forEach(function(t){return t.layer+=r}))},E.prototype.execute=function(){this.layoutInstance.execute()},E.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},E.prototype.destroy=function(){return this.layoutInstance.destroy()},e.Layout=E,e.Layouts={force:c.ForceLayout,fruchterman:p.FruchtermanLayout,forceAtlas2:b.ForceAtlas2Layout,gForce:s.GForceLayout,force2:a.Force2Layout,dagre:l.DagreLayout,dagreCompound:w.DagreCompoundLayout,circular:u.CircularLayout,radial:d.RadialLayout,concentric:h.ConcentricLayout,grid:o.GridLayout,mds:f.MDSLayout,comboForce:m.ComboForceLayout,comboCombined:v.ComboCombinedLayout,random:i.RandomLayout,"gForce-gpu":y.GForceGPULayout,"fruchterman-gpu":g.FruchtermanGPULayout,er:x.ERLayout}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){n.d(e,"a",function(){return r});var r=function(t,e){var n=e[0],r=e[1],o=0,i=0;switch(t=void 0===t?"right":t){case"top":o=n/2,i=0;break;case"right":o=n,i=r/2;break;case"bottom":o=n/2,i=r;break;case"left":o=0,i=r/2}return{x:o,y:i}}},function(t,e,n){n.d(e,"a",function(){return r});var r=function(e){return e&&"object"==typeof e?(Array.isArray(e)?n=e.map(function(t){return r(t)}):e instanceof HTMLElement?n=e:(n={},Object.keys(e).forEach(function(t){return n[t]=r(e[t])})),n):e;var n}},function(t,e,n){function r(t){t&&this.setData(t)}r.prototype.getData=function(){return this.data},r.prototype.setData=function(t){this.data=t},e.a=r},function(t,e,n){n.d(e,"a",function(){return r});var a=n(354),s=n(219),c=new Map,r=function(t,e,n,r,o){void 0===e&&(e={}),"string"==typeof r&&(o=r,r=void 0);var i=document.createElement("div");return Object.keys(e).forEach(function(t){i[t]=e[t]}),r&&Object(s.a)(i,r),"tooltip"===n&&(i.setAttribute("data-uuid",o),c.has(o)?i=c.get(o):c.set(o,i),i.className="g2-tooltip"),Object(a.a)(t,i),i}},function(t,e,n){n.d(e,"a",function(){return u});var i,e=n(35),r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=r({},e),n=o.version,a=o.render;try{18<=Number((n||"").split(".")[0])&&(i=o.createRoot)}catch(t){}function s(t){var e=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&"object"==typeof e&&(e.usingClientEntryPoint=t)}var c="__rc_react_root__";function u(t,e){var n,r,o;i?(n=t,r=e,s(!0),o=r[c]||i(r),s(!1),o.render(n),r[c]=o):a(t,e)}},function(t,e,n){function d(t,e,n,r){if(!isNaN(e)&&!isNaN(n)){var o,i,a,s,c,u,l,d,h,f=t._root,p={data:r},g=t._x0,y=t._y0,m=t._x1,v=t._y1;if(f){for(;f.length;)if((u=e>=(i=(g+m)/2))?g=i:m=i,(l=n>=(a=(y+v)/2))?y=a:v=a,!(f=(o=f)[d=l<<1|u]))return o[d]=p,t;if(s=+t._x.call(null,f.data),c=+t._y.call(null,f.data),e===s&&n===c)p.next=f,o?o[d]=p:t._root=p;else{for(;o=o?o[d]=new Array(4):t._root=new Array(4),(u=e>=(i=(g+m)/2))?g=i:m=i,(l=n>=(a=(y+v)/2))?y=a:v=a,(d=l<<1|u)==(h=(a<=c)<<1|i<=s););o[h]=f,o[d]=p}}else t._root=p}return t}n.r(e),n.d(e,"quadtree",function(){return i});function m(t,e,n,r,o){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=o}function r(t){return t[0]}function o(t){return t[1]}function i(t,e,n){e=new a(null==e?r:e,null==n?o:n,NaN,NaN,NaN,NaN);return null==t?e:e.addAll(t)}function a(t,e,n,r,o,i){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=o,this._y1=i,this._root=void 0}function s(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}n=i.prototype=a.prototype;n.copy=function(){var t,e,n=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(r)if(r.length)for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var o=0;o<4;++o)(e=r.source[o])&&(e.length?t.push({source:e,target:r.target[o]=new Array(4)}):r.target[o]=s(e));else n._root=s(r);return n},n.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return d(this.cover(e,n),e,n,t)},n.addAll=function(t){for(var e,n,r=t.length,o=new Array(r),i=new Array(r),a=1/0,s=1/0,c=-1/0,u=-1/0,l=0;l<r;++l)isNaN(e=+this._x.call(null,n=t[l]))||isNaN(n=+this._y.call(null,n))||((o[l]=e)<a&&(a=e),c<e&&(c=e),(i[l]=n)<s&&(s=n),u<n&&(u=n));if(!(c<a||u<s))for(this.cover(a,s).cover(c,u),l=0;l<r;++l)d(this,o[l],i[l],t[l]);return this},n.cover=function(t,e){if(!isNaN(t=+t)&&!isNaN(e=+e)){var n=this._x0,r=this._y0,o=this._x1,i=this._y1;if(isNaN(n))o=(n=Math.floor(t))+1,i=(r=Math.floor(e))+1;else{for(var a,s,c=o-n||1,u=this._root;t<n||o<=t||e<r||i<=e;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=u,u=a,c*=2,s){case 0:o=n+c,i=r+c;break;case 1:n=o-c,i=r+c;break;case 2:o=n+c,r=i-c;break;case 3:n=o-c,r=i-c}this._root&&this._root.length&&(this._root=u)}this._x0=n,this._y0=r,this._x1=o,this._y1=i}return this},n.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},n.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(t,e,n){var r,o,i,a,s,c,u,l,d=this._x0,h=this._y0,f=this._x1,p=this._y1,g=[],y=this._root;for(y&&g.push(new m(y,d,h,f,p)),null==n?n=1/0:(d=t-n,h=e-n,f=t+n,p=e+n,n*=n);r=g.pop();)!(y=r.node)||(s=r.x0)>f||(c=r.y0)>p||(a=r.x1)<d||(o=r.y1)<h||(y.length?(g.push(new m(y[3],i=(s+a)/2,u=(c+o)/2,a,o),new m(y[2],s,u,i,o),new m(y[1],i,c,a,u),new m(y[0],s,c,i,u)),(o=(u<=e)<<1|i<=t)&&(r=g[g.length-1],g[g.length-1]=g[g.length-1-o],g[g.length-1-o]=r)):(c=(a=t-+this._x.call(null,y.data))*a+(s=e-+this._y.call(null,y.data))*s)<n&&(d=t-(u=Math.sqrt(n=c)),h=e-u,f=t+u,p=e+u,l=y.data));return l},n.remove=function(t){if(!isNaN(i=+this._x.call(null,t))&&!isNaN(a=+this._y.call(null,t))){var e,n,r,o,i,a,s,c,u,l,d,h=this._root,f=this._x0,p=this._y0,g=this._x1,y=this._y1;if(h){if(h.length)for(;;){if((c=i>=(s=(f+g)/2))?f=s:g=s,(u=a>=(s=(p+y)/2))?p=s:y=s,!(h=(e=h)[l=u<<1|c]))return this;if(!h.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,d=l)}for(;h.data!==t;)if(!(h=(r=h).next))return this;(o=h.next)&&delete h.next,r?o?r.next=o:delete r.next:e?(o?e[l]=o:delete e[l],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(n?n[d]=h:this._root=h)):this._root=o}}return this},n.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},n.root=function(){return this._root},n.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},n.visit=function(t){var e,n,r,o,i,a,s,c=[],u=this._root;for(u&&c.push(new m(u,this._x0,this._y0,this._x1,this._y1));i=c.pop();)!t(u=i.node,n=i.x0,r=i.y0,o=i.x1,i=i.y1)&&u.length&&(a=(n+o)/2,s=(r+i)/2,(e=u[3])&&c.push(new m(e,a,s,o,i)),(e=u[2])&&c.push(new m(e,n,s,a,i)),(e=u[1])&&c.push(new m(e,a,r,o,s)),e=u[0])&&c.push(new m(e,n,r,a,s));return this},n.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new m(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o,i,a,s,c,u,l,d=e.node;d.length&&(u=((i=e.x0)+(s=e.x1))/2,l=((a=e.y0)+(c=e.y1))/2,(o=d[0])&&n.push(new m(o,i,a,u,l)),(o=d[1])&&n.push(new m(o,u,a,s,l)),(o=d[2])&&n.push(new m(o,i,l,u,c)),o=d[3])&&n.push(new m(o,u,l,s,c)),r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},n.x=function(t){return arguments.length?(this._x=t,this):this._x},n.y=function(t){return arguments.length?(this._y=t,this):this._y}},,,,,,,,,,,,,,,,,,,,,,function(t,e,n){n.d(e,"a",function(){return i});var r=n(104),o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=function(t,e){if(t&&("object"!=typeof t||!1!==(null==t?void 0:t.show)))return t=(e="function"==typeof t?t(e):t).type,o({path:r.a.Arrow[void 0===t?"vee":t](t=void 0===(t=e.size)?10:t,t,t=void 0===(t=e.d)?0:t),fill:"#ccc",d:t},e)}},function(t,e,n){n.d(e,"a",function(){return r});var r=function(t){if("number"==typeof t)return[t,t,t,t];var e=[];switch(t.length){case 1:e=[t[0],t[0],t[0],t[0]];break;case 2:e=[t[0],t[1],t[0],t[1]];break;case 3:e=[t[0],t[1],t[2],t[1]];break;case 4:e=t}return e}},function(t,e,n){n.d(e,"a",function(){return r});var r=function(t,e,n,r){return"function"==typeof t?t(e,n,r)||{}:t||{}}},function(t,e,n){n.d(e,"a",function(){return r});var s=n(104),c=n(84),u=n(350),l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},r=function(t,e,n,r){var o=t.show,i=t.position,a=t.collapsed,t=t.style;o&&e.addShape("marker",{attrs:l(l(l({},Object(u.a)(i,n)),{r:6,cursor:"pointer",symbol:a?s.a.Marker.expand:s.a.Marker.collapse,stroke:c.a.stroke,lineWidth:1,fill:"#fff"}),t),defaultCollapsed:!1,name:r?"collapse-icon-".concat(i):"collapse-icon",position:i})}},function(t,e,n){n.d(e,"a",function(){return s});var r=n(67),o=n(84),i=n(353),a=n(219),s=function(t,e){var n="".concat(o.l,"-antd-loading");e?(t=Object(r.isFunction)(e)?e(t):e,document.body.appendChild(Object(i.a)(t,{className:n},"fetchloading"))):((e=document.createElement("div")).className=n,Object(a.a)(e,{position:"fixed",left:"0",top:"0",width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0, 0.25)",color:"#fff",fontSize:"16px",zIndex:999}),(t=document.createElement("span")).innerText="loading...",e.appendChild(t),document.body.appendChild(e))}},function(t,e,n){n.d(e,"a",function(){return o});var r=n(84),o=function(){var t=document.getElementsByClassName("".concat(r.l,"-antd-loading"));Array.from(t).forEach(function(t){document.body.removeChild(t)})}},function(t,e,n){n.d(e,"a",function(){return i});var e=n(2),r=n.n(e),o=n(180),i=function(t){t=t.loadingTemplate;return r.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:"#fff"}},t||r.a.createElement(o.a,{viewBox:"0 0 400 180",width:200,height:90,speed:1},r.a.createElement("rect",{x:"20",y:"5",rx:"0",ry:"0",width:"1",height:"170"}),r.a.createElement("rect",{x:"20",y:"175",rx:"0",ry:"0",width:"360",height:"1"}),r.a.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"35",height:"100"}),r.a.createElement("rect",{x:"80",y:"125",rx:"0",ry:"0",width:"35",height:"50"}),r.a.createElement("rect",{x:"120",y:"105",rx:"0",ry:"0",width:"35",height:"70"}),r.a.createElement("rect",{x:"160",y:"35",rx:"0",ry:"0",width:"35",height:"140"}),r.a.createElement("rect",{x:"200",y:"55",rx:"0",ry:"0",width:"35",height:"120"}),r.a.createElement("rect",{x:"240",y:"15",rx:"0",ry:"0",width:"35",height:"160"}),r.a.createElement("rect",{x:"280",y:"135",rx:"0",ry:"0",width:"35",height:"40"}),r.a.createElement("rect",{x:"320",y:"85",rx:"0",ry:"0",width:"35",height:"90"})))}},,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r=n(2),a=n.n(r),s=n(156),c=n(159),u=n(161),l=n(383),r=n(84),d={nodeCfg:{type:"circle",size:30,anchorPoints:r.b,linkCenter:!0,nodeStateStyles:r.i,style:r.h},edgeCfg:{type:"line",edgeStateStyles:r.i},behaviors:["zoom-canvas","drag-canvas"],layout:{type:"dendrogram",direction:"LR",nodeSep:20,rankSep:100,radial:!0},animate:!0,markerPosition:"right",autoFit:!0,fitCenter:!0,style:{position:"relative",height:"inherit",backgroundColor:"#fff"}};e.a=function(t){var t=Object(u.a)(t,d).uProps,e=t.className,n=t.style,r=t.loading,o=t.loadingTemplate,i=t.errorTemplate,t=function(t,e){var n={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}(t,["className","style","loading","loadingTemplate","errorTemplate"]),t=Object(c.a)("TreeGraph",t,{name:"RadialTreeGraph"}).container;return a.a.createElement(s.a,{errorTemplate:i},r&&a.a.createElement(l.a,{loadingTemplate:o}),a.a.createElement("div",{className:e,style:n,ref:t}))}},function(i,t,e){function z(t,e){var n=void 0===(n=(t=null!=t?t:{}).size)?[]:n,t=void 0===(t=t.position)?"left":t,r=(n=Object(W.a)(n))[0],o=n[1],i=e[0],a=e[1],s=0,c=0,u=0,l=0;switch(t){case"top":c=s=0,u=null!=r?r:i,l=null!=o?o:G.j;break;case"left":c=s=0,u=null!=r?r:G.j,l=null!=o?o:a;break;case"right":s=i-(Object(U.isNumber)(r)?r:G.j),c=0,u=null!=r?r:G.j,l=null!=o?o:a;break;case"bottom":s=0,c=a-(Object(U.isNumber)(o)?o:G.j),u=null!=r?r:i,l=null!=o?o:G.j}return{x:s,y:c,width:u,height:l}}function F(t,e){(e=(e=void 0===e?"":e).split("-")).shift();var n=t;return e.forEach(function(t){n=n&&n.children[Number(t)]}),null!=n&&n.children?n.children.map(function(t){return o(o({},t),{children:[]})}):[]}function w(e){var o={};return Object.keys(e).forEach(function(t){var n,r=e[t];Object(U.isObject)(r)?(n={},Object.keys(r).forEach(function(t){var e=r[t];"img"===t&&!Object(U.isString)(e)||(n[t]=Object(U.clone)(e))}),o[t]=n):o[t]=Object(U.clone)(r)}),o}function g(t){var e,n,r=t.edgeCfg,o=t.startPoint,i=t.endPoint,a=o.x,o=o.y,s=i.x,c=(i=i.y)-o,u=0<Math.abs(c);return o=Math.abs(c)<=5?(e={x:a+20,y:i},[["M",a,o],["L",s,i]]):(n=15<(u=u?Math.min(500/Math.abs(c),20):0)?0:16,[["M",a,o],["L",(u={x:a+u,y:i+(c<0?n:-n)}).x,u.y],["Q",(c={x:(u.x-a)*(i-o)/(u.y-o)+a,y:i}).x,c.y,(e={x:u.x+n,y:i}).x,e.y],["L",s,i]]),a=r.startArrow,c=r.endArrow,{startArrow:Object(h.a)(a,t),endArrow:Object(h.a)(c,t),path:o,line2StartPoint:e,endY:i}}function y(t){var e,n;return t instanceof Object?(e=t.text,n=t.subText):e=t,{text:e,subText:n}}function n(r,o){var i,a,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},u={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function t(n){return function(t){var e=[n,t];if(i)throw new TypeError("Generator is already executing.");for(;c=u&&e[u=0]?0:c;)try{if(i=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,a=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!((s=0<(s=c.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))c.label=e[1];else if(6===e[0]&&c.label<s[1])c.label=s[1],s=e;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(e)}}e=o.call(r,c)}catch(t){e=[6,t],a=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}}function a(t){function e(g){var t,a,s,c;c=function(){var i,a,s,c,u,l,d,h,f,p;return n(this,function(t){switch(t.label){case 0:return i=g.item,a=i.getModel(),null!=(p=g.target.get("name"))&&p.startsWith("collapse-icon")?(p=i.getModel(),s=p.collapsed,c=p.g_currentPath,u=void 0===(u=p.children)?[]:u,l=p.g_parentId,d=p.g_level,h=p.id,f=m&&!u.length&&F(y.get("eventData").getData(),c),!v||null!=u&&u.length||null!=f&&f.length?[3,2]:(Object(_.a)(a,b),[4,v(i.getModel())])):[3,3];case 1:(p=t.sent())&&(p=p.map(function(t,e){var n;return S(((n={})["".concat(G.l,"_level")]=d+1,n["".concat(G.l,"_parentId")]="".concat(l,"-").concat(h),n["".concat(G.l,"_currentPath")]="".concat(c,"-").concat(e),n),t)}),e=p,n=c,r=y.get("eventData").getData(),(n=n.split("-")).shift(),o=r,n.forEach(function(t){o=o.children[Number(t)]}),o.children=e),f=p,Object(E.a)(),t.label=2;case 2:0<(null==f?void 0:f.length)?(a.children=f,y.updateChild(a,a.id),y.updateItem(i,{collapsed:!1}),y.refreshItem(i),y.emit(x.a,g,{type:"fetch",collapsed:!0})):(y.updateItem(i,{collapsed:!s}),y.layout(),y.emit(x.a,g,{type:"collapse",collapsed:!!s})),t.label=3;case 3:return[2]}var e,n,r,o})},new(s=(s=a=t=void 0)||Promise)(function(n,e){function r(t){try{i(c.next(t))}catch(t){e(t)}}function o(t){try{i(c.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((c=c.apply(t,a||[])).next())})}var y=t.graph,m=t.level,v=t.getChildren,b=t.fetchLoading;y.on("node:click",function(t){e(t)}),y.on("node:touchstart",function(t){e(t)})}var r=e(2),s=e.n(r),G=e(84),c=e(156),u=e(159),l=e(161),d=e(383),r=e(104),U=e(67),h=e(377),W=e(217),X=e(378),Y=e(379),o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},V=e(380),H=e(218),q=function(){return(q=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},x=e(220),_=e(381),E=e(382),S=function(){return(S=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},K={fill:"#fff",fontSize:12},Z={fill:"#40a9ff",radius:[2,2,0,0]},$={width:12,height:12},O=["startArrow","endArrow"],M={edge:{lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},node:{lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0}},f=(r.a.registerNode("indicator-card",{draw:function(d,h){var t,f,p,n,e,r,i,a,s,c,o=(d=void 0===d?{}:d).value,o=void 0===o?{}:o,u=d.nodeCfg,l=d.markerCfg,g=d._draggable,y=u.title,m=u.items,v=u.label,v=void 0===v?{}:v,b=u.style,x=u.padding,x=void 0===x?0:x,w=u.badge,_=u.percent,E=u.autoWidth,S=u.customContent,L=function(){if(!w)return[0,0,0,0];var t=w.size,t=void 0===t?[]:t,e=w.position,e=void 0===e?"left":e,t=Object(W.a)(t),n=t[0],r=t[1],o=[];switch(e){case"top":o.push(null!=r?r:G.j,0,0,0);break;case"right":o.push(0,null!=n?n:G.j,0,0);break;case"bottom":o.push(0,0,null!=r?r:G.j,0);break;case"left":o.push(0,0,0,null!=n?n:G.j)}return o}(),O=v.style,M=Object(X.a)(x).map(function(t,e){return t+L[e]}),u=null!=y?y:{},v=u.style,x=u.containerStyle,y=u.autoEllipsis,u=void 0===y||y,y=null!=m?m:{},k=y.style,m=y.containerStyle,C=y.layout,A=y.itemSpacing,R=void 0===A?4:A,B=y.sort,A=y.padding,y=void 0===A?[6,0,0]:A,I=Object(X.a)(y),A=o.title,T=o.items,y=o.percent,o=(null==d?void 0:d.size)||[100,30],j=0,N=(o="number"==typeof o?[o,o]:o)[0],D=N-M[1]-M[3],b=Object(Y.a)(b,d,h),P=h.addShape("rect",{attrs:q(q({x:0,y:0,width:o[0],height:o[1]},G.a),b),name:"main-box",draggable:g}),u=(A&&(r=h.addShape("rect",{attrs:q(q({x:0,y:0,width:o[0],height:0},Z),Object(Y.a)(x,d,h)),name:"title-rect",draggable:g}),b=q(q({},K),Object(Y.a)(v,d,h)),v=((x=h.addShape("text",{attrs:q({x:M[3],y:M[0],textBaseline:"top",text:u&&!E?function(t,e,n){void 0===n&&(n=120);var r=e.fontSize,r=void 0===r?12:r,o=e.fontWeight,o=void 0===o?"normal":o,e=e.fontFamily,e=void 0===e?"Arial, sans-serif":e,i=document.querySelector("canvas").getContext("2d"),a=(i.font="".concat(r,"px ").concat(o," ").concat(e),t),s=!1;if(i.fillText(a,0,0),1===t.length)return t;for(var c,u=t.length-1;0<u;u--){if(i.measureText(a).width<=n)return s?(c=a.substring(a.length-1,a.length),a.substring(0,a.length-(/[\u4e00-\u9fa5]/.test(c)?1:2))+"..."):a;s=!0,a=a.substring(0,a.length-1)}}(A,b,D):A},b),name:"title",draggable:g}))?x.getBBox():{height:o[1]/2}).height,null!=r&&r.attr("height",v+M[0]+M[2]),j+=r.getBBox().height),T&&(r||(j+=M[0]),t=h.addShape("rect",{attrs:q({x:M[3],y:j,width:D,height:0},Object(Y.a)(m,d,h)),name:"item-box",draggable:g}),j+=I[0],f=D-I[1]-I[3],p=Array.isArray(T),n=function(t,e){void 0===e&&(e=0);var n,o,i,a,s,c,u,l,r=[];S?r.push(null!=(n=S(t,h,{startX:M[3]+I[3],startY:j,width:f}))?n:0):r.push.apply(r,(o=t,i=f,a=M[3]+I[3],void 0===(s=e)&&(s=0),c=[],u=0,(l=B?Object.keys(o):["text","value","icon"]).forEach(function(t,e){var n=t.startsWith("icon"),r=(B||"flex"===C?r=e*i/l.length:"follow"===C?r=u:(r="text"===t?0:i/2,r+=n?u:0),h.addShape(n?"image":"text",{attrs:q(q({textBaseline:"top",x:a+r,y:j,text:o[t],img:o[t]},n?$:G.c),n?Object(U.omit)(Object(Y.a)(k||O,d,h,t),["fill"]):Object(Y.a)(k||O,d,h,t)),name:"".concat(t,"-").concat(s,"-").concat(e),draggable:g}));"value"!==t&&"follow"!==C||(u=(u+=r.getBBox().width)+("follow"===C?R:0)),c.push(r.getBBox().height)}),c)),j+=Math.max.apply(Math,r),p&&e!==T.length-1&&(j+=G.e)},Array.isArray(T)?T.forEach(function(t,e){n(t,e)}):n(T)),(null==r?void 0:r.getBBox().height)||0),A=(null!=t&&t.attr("height",Math.max(j-u+I[2],o[1])),(null==t?void 0:t.getBBox().height)||0),b=T?(u||M[0])+A+M[2]:u+A,x=(null!=P&&P.attr("height",b),N);return E&&(m=Math.max.apply(null,null==(v=null==h?void 0:h.getChildren())?void 0:v.map(function(t){return t.getBBox().maxX||0})),x=Math.max(N,m+M[1]),null!=r&&r.attr("width",x),null!=P&&P.attr("width",x),null!=t)&&t.attr("width",m-M[1]),w&&(e=z(w,[o[0],b]),h.addShape("rect",{attrs:q(q({fill:"#40a9ff"},e),Object(Y.a)(w.style,d,h)),name:"status-rect",draggable:g})),_&&0<y&&(D=_.size,u=_.position,E=void 0===(A=_.style)?{fill:"#40a9ff"}:A,N=void 0===(v=_.backgroundStyle)?{fill:"rgba(0,0,0,.1)",radius:[0,0,2,2]}:v,e=z({position:void 0===u?"bottom":u,size:[x,void 0===D?4:D]},[x,b]),h.addShape("rect",{attrs:q(q({},e),Object(Y.a)(N,d,h)),name:"percent-rect-background",draggable:g}),h.addShape("rect",{attrs:q(q(q({fill:"#40a9ff"},e),{width:Math.min(1,y)*e.width}),Object(Y.a)(E,d,h)),name:"percent-rect",draggable:g})),l&&(r=Object(H.a)(d._graphId),i=(null!=(m=null==(t=null==h?void 0:h.get("item"))?void 0:t.getModel())?m:{}).collapsed,o=P.getBBox(),a=o.width,s=o.height,c=[],(c="function"==typeof l?(A=l(q(q({},d),{children:F(null==r?void 0:r.get("eventData").getData(),d.g_currentPath)}),h))instanceof Array?A:[A]:l instanceof Array?l:[l]).forEach(function(t){var e,n=t.show,r=t.position,r=void 0===r?"right":r,o=t.collapsed,t=t.style,o=null!=o?o:Object(U.isBoolean)(i)?i:d._graphId.startsWith("FlowAnalysisGraph")?!(null!=(e=d["".concat(G.l,"_children")])&&e.length):!(null!=(e=d.children)&&e.length);Object(V.a)({show:n,position:r,collapsed:o,style:t},h,[a,s],1<c.length),P.attr("defaultCollapsed",o)})),P},update:void 0,setState:function(t,e,n){var r,a=n.get("keyShape");if(a&&!a.destroyed){var s=n.getType(),t=Object(U.isBoolean)(e)?t:"".concat(t,":").concat(e),t=n.getStateStyle(t);if(t){var c=Object.assign({},t),u=n.getContainer(),l={x:1,y:1,cx:1,cy:1};if(e)for(i in c)!function(e){var t,n=c[e];Object(U.isPlainObject)(n)&&!O.includes(e)?(t=u.find(function(t){return t.get("name")===e}))&&t.attr(n):a.attr(((t={})[e]=n,t))}(i);else{var o,i,d,h=w(n.getCurrentStatesStyle()),t=n.getModel(),f=Object(U.mix)({},t.style,w(n.getOriginStyle())),p=a.get("name"),g=a.attr(),y={},m=(Object.keys(g).forEach(function(t){var e;"img"!==t&&(e=g[t],y[t]=e&&"object"==typeof e?Object(U.clone)(e):e)}),{});for(o in c)!function(r){var o,i,t=c[r];Object(U.isPlainObject)(t)&&!O.includes(r)?(o=u.find(function(t){return t.get("name")===r}))&&(i=Object(U.clone)(o.attr()),Object(U.each)(t,function(t,e){var n;r===p&&y[e]&&!l[e]?(delete y[e],n=f[r][e]||M[s][e],a.attr(e,n)):!i[e]&&0!==i[e]||(delete i[e],n=f[r][e]||M[s][e],o.attr(e,n))}),m[r]=i):y[r]&&!l[r]&&(delete y[r],t=f[r]||(f[p]?f[p][r]:void 0)||M[s][r],a.attr(r,t))}(o);for(i in p?m[p]=y:Object(U.mix)(m,y),h)l[i]||(d=h[i],Object(U.isPlainObject)(d)&&!O.includes(i))||(p?(Object(U.mix)(f[p],((r={})[i]=d,r)),delete f[i]):Object(U.mix)(f,((r={})[i]=d,r)),delete h[i]);var v,b={},x=(Object(U.deepMix)(b,f,m,h),!1);for(v in b)!function(e){var t,n=b[e];Object(U.isPlainObject)(n)&&!O.includes(e)?(t=u.find(function(t){return t.get("name")===e}))&&(e===p&&(x=!0),"collapse-icon"!==e)&&t.attr(n):x||(t=n||M[s][e],a.attr(((n={})[e]=t,n)))}(v)}}}}},"single-node"),r.a.registerEdge("labels-line",{draw:function(t,r){function e(t,e,n){r.addShape("text",{attrs:q({text:t,x:d.x},n),name:"line-text-".concat(e)})}var n,o,i=(t=void 0===t?{}:t).edgeCfg,a=y(t.value),s=a.text,a=a.subText,c=i.style,i=i.label,u=g(t),l=u.startArrow,d=u.line2StartPoint,h=u.endY,i=null!=i?i:{},f=i.style,i=i.margin,i=void 0===i?4:i,l=r.addShape("path",{attrs:q({path:u.path,stroke:"#ccc",startArrow:l,endArrow:u.endArrow},"function"==typeof c?c(t,r):c),name:"path-shape"});return s&&(n=q(q({},G.d),Object(Y.a)(f,t,r,"text")),o=a?Number(("".concat(n.fontSize)||"12").replace(/px/g,""))/2:0,e(s,"text",q({y:h-o-i/2},n))),a&&(n=q(q({},G.d),Object(Y.a)(f,t,r,"subText")),o=Number(("".concat(n.fontSize)||"12").replace(/px/g,""))/2,e(s,"subText",q({y:h+o+i/2},n))),l},update:function(o,t){function i(e){return c.get("children").find(function(t){return t.get("name")===e})}var e=o.edgeCfg,n=y(o.value),a=n.text,s=n.subText,c=t.getContainer(),n=g(o),t=n.startArrow,r=n.endArrow,u=n.path,l=n.line2StartPoint,d=n.endY,n=e.style,e=e.label,e=null!=e?e:{},h=e.style,e=e.margin,f=void 0===e?4:e,e=i("path-shape"),p=(null!=e&&e.attr(q({path:u,stroke:"#ccc",startArrow:t,endArrow:r},"function"==typeof n?n(o,c):n)),!!i("line-text-subText"));["text","subText"].forEach(function(t){var e=i("line-text-".concat(t)),n=q(q({},G.d),Object(Y.a)(h,o,c,t)),r=p?Number(("".concat(n.fontSize)||"12").replace(/px/g,""))/2:0;null!=e&&e.attr(q({x:l.x,y:"text"===t?d-r-f/2:d+r+f/2,text:"text"===t?a:s},n))})}},"single-edge"),{nodeCfg:{type:"indicator-card",size:G.g,style:G.h,anchorPoints:G.b,padding:6,layout:"bundled",nodeStateStyles:G.i,label:{style:function(t,e,n){return n?{icon:{width:10,height:10},value:{fill:"#000"},text:{fill:"#aaa"}}[n]:{}}}},edgeCfg:{type:"cubic-horizontal",endArrow:{type:"vee"},edgeStateStyles:G.i},behaviors:["zoom-canvas","drag-canvas"],layout:{type:"compactBox",direction:"LR",getId:function(t){return t.id},getHeight:function(){return 60},getWidth:function(){return 16},getVGap:function(){return 16},getHGap:function(){return 100}},animate:!0,autoFit:!0,fitCenter:!0,style:{position:"relative",height:"inherit",backgroundColor:"#fff"},level:100});t.a=function(t){var t=Object(l.a)(t,f).uProps,e=t.className,n=t.style,r=t.loading,o=t.loadingTemplate,i=t.errorTemplate,t=function(t,e){var n={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}(t,["className","style","loading","loadingTemplate","errorTemplate"]),t=Object(u.a)("TreeGraph",t,{name:"DecompositionTreeGraph",bindEvents:a}).container;return s.a.createElement(c.a,{errorTemplate:i},r&&s.a.createElement(d.a,{loadingTemplate:o}),s.a.createElement("div",{className:e,style:n,ref:t}))}},function(t,e,n){function f(t){var e=t.edgeCfg,n=t.endPoint,r=(o=t.startPoint).x,o=o.y,i=n.x,a=(n=n.y)-o,s=15<(u=0!=a?Math.min(500/Math.abs(a),20):0)?0:16,c={x:((u={x:r+u,y:n+(a<0?s:-s)}).x-r)*(n-o)/(u.y-o)+r,y:n},u=[["M",r,o],["L",u.x,u.y],["Q",c.x,c.y,(s={x:u.x+s,y:n}).x,s.y],["L",i,n]];return Math.abs(a)<=5&&(u=[["M",r,o],["L",i,n]]),c=e.startArrow,a=e.endArrow,{startArrow:Object(g.a)(c,t),endArrow:Object(g.a)(a,t),path:u,line2StartPoint:s,endY:n}}function p(t){var e,n;return t instanceof Object?(e=t.text,n=t.subText):e=t,{text:e,subText:n}}function d(t,a,s,c){return new(s=s||Promise)(function(n,e){function r(t){try{i(c.next(t))}catch(t){e(t)}}function o(t){try{i(c.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,o)}i((c=c.apply(t,a||[])).next())})}function M(r,o){var i,a,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},u={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function t(n){return function(t){var e=[n,t];if(i)throw new TypeError("Generator is already executing.");for(;c=u&&e[u=0]?0:c;)try{if(i=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,a=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!((s=0<(s=c.trys).length&&s[s.length-1])||6!==e[0]&&2!==e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))c.label=e[1];else if(6===e[0]&&c.label<s[1])c.label=s[1],s=e;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(e)}}e=o.call(r,c)}catch(t){e=[6,t],a=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}}function a(t){function w(t,e){e&&_.set("eventData",new o.a(e)),_.changeData(t),_.get("fitCenter")&&_.fitCenter()}function e(l){d(void 0,void 0,void 0,function(){var n,r,o,i,a,s,c,u;return M(this,function(t){var e,v,b,x;return o=_.get("eventData").getData(),null!=(c=l.target.get("name"))&&c.startsWith("collapse-icon")&&(c=l.item,u=c.getModel(),n=u.id,e=r=u.collapsed,{}.toString.call(e)!=="[object ".concat("Boolean","]")&&(r=null==(u=c._cfg.group.getChildren().find(function(t){return"main-box"===t.get("name")}))?void 0:u.attr("defaultCollapsed")),u=(c=null!=o?o:{}).edges,o=void 0===u?[]:u,c.nodes,i=[],a=[],v=l,b=n,x=r,d(void 0,void 0,void 0,function(){var r,s,c,u,l,d,h,f,p,g,y,m;return M(this,function(t){switch(t.label){case 0:return m=null==(m=null==_?void 0:_.cfg)?void 0:m.markerCfg,s=_.get("eventData").getData(),r=(s=null!=s?s:{}).edges,r=void 0===r?[]:r,s=s.nodes,c=v.item,u=c.getModel(),m="function"==typeof m?m(c.getModel(),c.get("group")):m,e=b,n=r,void 0===(o=null!=(m=null==m?void 0:m.expandDirection)?m:"right")&&(o="right"),i=[],(a=function(r){n.forEach(function(t){var e=t.source,n=t.target;switch(o){case"left":n!==r||i.includes(e)||(i.push(e),a(e));break;case"right":e!==r||i.includes(n)||(i.push(n),a(n))}})})(e),l=i=i.filter(function(t){return t!==e}),x?[3,1]:(_.findAll("node",function(t){return l.includes(t.get("id"))}).forEach(function(t){return _.hideItem(t)}),s.forEach(function(t){var e=t.collapsedLevel,e=void 0===e?0:e;l.includes(t.id)&&(t.collapsedLevel=e+1)}),[3,4]);case 1:return m=_.get("data"),d=m.nodes,h=m.edges,l.length?(_.findById(l[0])?(l.forEach(function(t){var e,t=_.findById(t);t&&(!(e=t.getModel().collapsedLevel)||e<2)&&_.showItem(t)}),s.forEach(function(t){var e=t.collapsedLevel,e=void 0===e?0:e;l.includes(t.id)&&(t.collapsedLevel=e-1)})):(f=void 0,E&&(l=(f=s.filter(function(t){return l.includes(t.id)&&t["".concat(k.l,"_level")]===u["".concat(k.l,"_level")]+1})).map(function(t){return t.id})),f={nodes:d.map(function(t){return t.id===b&&(t["".concat(k.l,"_children")]=l),t}).concat(f),edges:h.concat(r.filter(function(t){return t.source===b}))},w(f)),[3,4]):[3,2];case 2:return S?(Object(A.a)(c.getModel(),O),[4,S(c.getModel())]):[3,4];case 3:return f=t.sent(),p=f.nodes,g=f.edges,_.updateItem(c,{collapsed:!1}),_.refreshItem(c),Object(I.a)(),w((y=function(t,e){return{nodes:t.map(function(t){return t.id===b&&(t["".concat(k.l,"_children")]=p.map(function(t){return t.id})),t}).concat(p),edges:e.concat(null!=g&&g.length?g:p.map(function(t){return{source:b,target:t.id}}))}})(d,h),y(s,r)),_.emit(C.a,v,{type:"fetch",collapsed:!0}),[2];case 4:return[2]}var e,n,o,i,a})}),s=o.find(function(t){return t.source===n}).target,o.forEach(function(t){var e=t.source;t.target===s&&a.push(e)}),Array.from(new Set(a)).forEach(function(e){i.push(_.find("node",function(t){return t.get("id")===e}))}),i.forEach(function(t){_.updateItem(t,{collapsed:!r}),_.refreshItem(t)}),_.emit(C.a,l,{type:"collapse",collapsed:!!r})),[2]})})}var _=t.graph,E=t.level,S=t.asyncData,O=t.fetchLoading;_.on("node:click",function(t){e(t)})}var r=n(2),s=n.n(r),c=n(156),u=n(159),l=n(161),h=n(383),k=n(84),r=n(104),g=n(377),y=n(378),m=n(217),v=n(379),b=n(380),x=function(){return(x=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},C=n(220),o=n(352),A=n(381),I=n(382),w=(r.a.registerNode("fund-card",{draw:function(t,e){var n,r,o,i=(t=void 0===t?{}:t).value,i=void 0===i?{}:i,a=t.nodeCfg,s=t.markerCfg,c=a.label,u=a.style,l=a.padding,l=void 0===l?0:l,a=a.customContent,c=(void 0===c?{}:c).style,l=Object(y.a)(l),d=Object(m.a)(t.size),h=0,f=d[0]-l[1]-l[3],p=d[1]-l[0]-l[2],u=Object(v.a)(u,t,e),u=e.addShape("rect",{attrs:x({x:0,y:0,width:d[0],height:d[1],radius:d[1]/2,fill:"#fff",stroke:"#40a9ff"},u),name:"main-box",draggable:!0});return i&&(h+=l[0],i=i,o=[],a?o.push(null!=(n=a(i,e,{startX:l[3],startY:h,width:f}))?n:0):o.push.apply(o,(n=f,a=l[3],f=i.text,(i=i.icon)&&(r=e.addShape("image",{attrs:x({x:a,y:h,img:i,width:p,height:p},Object(v.a)(c,t,e,"icon")),name:"fund-icon"})),[null!=(a=null==(i=null==e?void 0:e.addShape("text",{attrs:x(x({textBaseline:"middle",textAlign:r?"start":"center",x:a+(r?(null==r?void 0:r.getBBox().width)+k.e:n/2),y:l[0]+p/2,text:f},k.c),Object(v.a)(c,t,e,"text")),name:"fund-text"}))?void 0:i.getBBox().height)?a:0,null!=(n=null==r?void 0:r.getBBox().height)?n:0])),h+=Math.max.apply(Math,o)),null!=u&&u.attr("height",Math.max(d[1],h+l[2])),s&&(c=(null!=(f=null==(p=null==e?void 0:e.get("item"))?void 0:p.getModel())?f:{}).collapsed,a=(i=u.getBBox()).width,r=i.height,d=(o="function"==typeof s?s(t,e):s).show,l=void 0===(h=o.position)?"right":h,p=o.collapsed,f=o.style,Object(b.a)({show:d,position:l,collapsed:null!=c?c:p,style:f},e,[a,r]),u.attr("defaultCollapsed",p)),u},update:void 0},"single-node"),r.a.registerEdge("fund-line",{draw:function(n,r){function t(t,e){r.addShape("text",{attrs:x(x({text:t,x:u.x,y:"text"===e?l-4:l+16},k.c),Object(v.a)(d,n,r,e)),name:"line-text-".concat(e)})}var e=(n=void 0===n?{}:n).edgeCfg,o=p(n.value),i=o.text,o=o.subText,a=e.style,e=e.label,s=f(n),c=s.startArrow,u=s.line2StartPoint,l=s.endY,d=(null!=e?e:{}).style,e=r.addShape("path",{attrs:x({path:s.path,stroke:"#ccc",startArrow:c,endArrow:s.endArrow},"function"==typeof a?a(n,r):a),name:"path-shape"});return i&&t(i,"text"),o&&t(o,"subText"),e},update:function(n,t){function r(e){return s.get("children").find(function(t){return t.get("name")===e})}var e=n.edgeCfg,o=p(n.value),i=o.text,a=o.subText,s=t.getContainer(),o=f(n),t=o.startArrow,c=o.endArrow,u=o.path,l=o.line2StartPoint,d=o.endY,o=e.style,e=e.label,h=(null!=e?e:{}).style,e=r("path-shape");null!=e&&e.attr(x({path:u,stroke:"#ccc",startArrow:t,endArrow:c},"function"==typeof o?o(n,s):o)),["text","subText"].forEach(function(t){var e=r("line-text-".concat(t));null!=e&&e.attr(x(x({x:l.x,y:"text"===t?d-4:d+16,text:"text"===t?i:a},k.c),Object(v.a)(h,n,s,t)))})}},"single-edge"),{nodeCfg:{type:"fund-card",size:k.g,style:k.h,anchorPoints:k.b,nodeStateStyles:k.i,padding:6},edgeCfg:{type:"fund-line",edgeStateStyles:k.i,style:{stroke:"#40a9ff"},endArrow:{fill:"#40a9ff"}},behaviors:["zoom-canvas","drag-canvas"],layout:{type:"dagre",rankdir:"LR",nodesep:30,ranksep:50},animate:!0,autoFit:!0,fitCenter:!0,style:{position:"relative",height:"inherit",backgroundColor:"#fff"}});e.a=function(t){var t=Object(l.a)(t,w).uProps,e=t.className,n=t.style,r=t.loading,o=t.loadingTemplate,i=t.errorTemplate,t=function(t,e){var n={};for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}(t,["className","style","loading","loadingTemplate","errorTemplate"]),t=Object(u.a)("Graph",t,{name:"FundFlowGraph",bindEvents:a}).container;return s.a.createElement(c.a,{errorTemplate:i},r&&s.a.createElement(h.a,{loadingTemplate:o}),s.a.createElement("div",{className:e,style:n,ref:t}))}}])]);