(window.webpackJsonpfeffery_utils_components=window.webpackJsonpfeffery_utils_components||[]).push([[32],{523:function(e,t,n){n.r(t);var V=n(1),W=n.n(V),r=n(910),G=n.n(r),F=(n(911),n(63)),K=n(25),Z=n(550),J=n(495),r=n(235);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function X(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?a(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],(n=function(){var e=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return String(e);n=n.call(e,t);if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(n,"string");return"symbol"==i(e)?e:e+""}())in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,d=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw o}}return l}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?o(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e){var j=e.id,t=e.className,R=e.style,P=e.key,q=e.debounceWait,n=e.undoDelay,r=e.height,o=e.minHeight,i=e.width,a=e.placeholder,l=e.lang,s=e.tab,d=e.typewriterMode,c=e.cdn,p=e.mode,u=e.debuggerMode,m=e.value,f=e.theme,h=e.icon,v=e.toolbar,g=e.toolbarConfig,b=e.counter,y=e.cache,w=e.preview,k=e.image,E=e.link,x=e.hint,_=e.upload,S=e.resize,L=e.classes,T=e.fullscreen,C=e.outline,M=(e.htmlValue,e.selectedValue,e.wordCount,e.resizeHeight,e.setProps);e.loading_state;var A=(e=Y(Object(V.useState)(),2))[0],H=e[1],B=(e=Y(Object(V.useState)("initial"),2))[0],N=e[1],z=Object(Z.a)(function(e){M({value:e,htmlValue:A.getHTML()})},{debounceWait:q,manual:!0}).run,O=Object(V.useMemo)(function(){return j||Object(J.a)()},[]),D=Object(V.useMemo)(function(){return X(X({},b),{},{after:function(e){M({wordCount:e})}})},[b]),I=Object(V.useMemo)(function(){return X(X({},S),{},{after:function(e){M({resizeHeight:e})}})},[S]),U=Object(V.useMemo)(function(){return Object.entries({debugger:u,counter:D,resize:I,undoDelay:n,height:r,minHeight:o,width:i,placeholder:a,lang:l,tab:s,typewriterMode:d,cdn:c,mode:p,value:m,theme:f,icon:h,toolbar:v,toolbarConfig:g,cache:y,preview:w,image:k,link:E,hint:x,upload:_,classes:L,fullscreen:T,outline:C}).reduce(function(e,t){var t=Y(t,2),n=t[0],t=t[1];return Object(K.isUndefined)(t)||(e[n]=t),e},{})},[n,r,o,i,a,l,s,d,c,p,u,m,f,h,v,g,D,y,w,k,E,x,_,I,L,T,C]);return Object(V.useEffect)(function(){return A&&"initial"===B&&A.setValue(Object(K.isUndefined)(m)?"":m),function(){N("initial")}},[A,m]),Object(V.useEffect)(function(){var e=new G.a(O,X(X({},U),{},{after:function(){H(e)},input:function(e){N("event"),z(e)},select:function(e){M({selectedValue:e})}}));return function(){null!=A&&A.destroy(),H(void 0)}},[]),W.a.createElement("div",{id:O,className:Object(K.isString)(t)?t:t?Object(F.a)(t):void 0,key:P,style:R})}(t.default=l).defaultProps=r.b,l.propTypes=r.c},910:function(e,t,n){e.exports=(()=>{var b={471:e=>{function L(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}L.Diff=function(e,t){return[e,t]},L.prototype.diff_main=function(e,t,n,r){var o,i,a,r=r=void 0===r?this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout:r;if(null==e||null==t)throw new Error("Null input. (diff_main)");return e==t?e?[new L.Diff(0,e)]:[]:(n=n=void 0===n||n,a=this.diff_commonPrefix(e,t),o=e.substring(0,a),e=e.substring(a),t=t.substring(a),a=this.diff_commonSuffix(e,t),i=e.substring(e.length-a),e=e.substring(0,e.length-a),t=t.substring(0,t.length-a),a=this.diff_compute_(e,t,n,r),o&&a.unshift(new L.Diff(0,o)),i&&a.push(new L.Diff(0,i)),this.diff_cleanupMerge(a),a)},L.prototype.diff_compute_=function(e,t,n,r){var o,i,a,l,s;return e?t?(l=e.length>t.length?e:t,o=e.length>t.length?t:e,-1!=(a=l.indexOf(o))?(l=[new L.Diff(1,l.substring(0,a)),new L.Diff(0,o),new L.Diff(1,l.substring(a+o.length))],e.length>t.length&&(l[0][0]=l[2][0]=-1),l):1==o.length?[new L.Diff(-1,e),new L.Diff(1,t)]:(a=this.diff_halfMatch_(e,t))?(l=a[0],o=a[1],s=a[2],i=a[3],a=a[4],l=this.diff_main(l,s,n,r),s=this.diff_main(o,i,n,r),l.concat([new L.Diff(0,a)],s)):n&&100<e.length&&100<t.length?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)):[new L.Diff(-1,e)]:[new L.Diff(1,t)]},L.prototype.diff_lineMode_=function(e,t,n){var r=this.diff_linesToChars_(e,t),r=(e=r.chars1,t=r.chars2,r.lineArray),o=this.diff_main(e,t,!1,n);this.diff_charsToLines_(o,r),this.diff_cleanupSemantic(o),o.push(new L.Diff(0,""));for(var i=0,a=0,l=0,s="",d="";i<o.length;){switch(o[i][0]){case 1:l++,d+=o[i][1];break;case-1:a++,s+=o[i][1];break;case 0:if(1<=a&&1<=l){o.splice(i-a-l,a+l);for(var i=i-a-l,c=this.diff_main(s,d,!1,n),p=c.length-1;0<=p;p--)o.splice(i,0,c[p]);i+=c.length}a=l=0,d=s=""}i++}return o.pop(),o},L.prototype.diff_bisect_=function(e,t,n){for(var r=e.length,o=t.length,i=Math.ceil((r+o)/2),a=i,l=2*i,s=new Array(l),d=new Array(l),c=0;c<l;c++)s[c]=-1,d[c]=-1;s[a+1]=0;for(var p=r-o,u=p%2!=(d[a+1]=0),m=0,f=0,h=0,v=0,g=0;g<i&&!((new Date).getTime()>n);g++){for(var b=-g+m;b<=g-f;b+=2){for(var y=a+b,w=(x=b==-g||b!=g&&s[y-1]<s[y+1]?s[y+1]:s[y-1]+1)-b;x<r&&w<o&&e.charAt(x)==t.charAt(w);)x++,w++;if(r<(s[y]=x))f+=2;else if(o<w)m+=2;else if(u&&0<=(_=a+p-b)&&_<l&&-1!=d[_]&&x>=(E=r-d[_]))return this.diff_bisectSplit_(e,t,x,w,n)}for(var k=-g+h;k<=g-v;k+=2){for(var E,x,_=a+k,S=(E=k==-g||k!=g&&d[_-1]<d[_+1]?d[_+1]:d[_-1]+1)-k;E<r&&S<o&&e.charAt(r-E-1)==t.charAt(o-S-1);)E++,S++;if(r<(d[_]=E))v+=2;else if(o<S)h+=2;else if(!u)if(0<=(y=a+p-k)&&y<l&&-1!=s[y]&&(w=a+(x=s[y])-y,x>=(E=r-E)))return this.diff_bisectSplit_(e,t,x,w,n)}}return[new L.Diff(-1,e),new L.Diff(1,t)]},L.prototype.diff_bisectSplit_=function(e,t,n,r,o){var i=e.substring(0,n),a=t.substring(0,r),e=e.substring(n),n=t.substring(r),t=this.diff_main(i,a,!1,o),r=this.diff_main(e,n,!1,o);return t.concat(r)},L.prototype.diff_linesToChars_=function(e,t){var a=[],l={};function n(e){for(var t="",n=0,r=-1,o=a.length;r<e.length-1;){-1==(r=e.indexOf("\n",n))&&(r=e.length-1);var i=e.substring(n,r+1);(l.hasOwnProperty?l.hasOwnProperty(i):void 0!==l[i])?t+=String.fromCharCode(l[i]):(o==s&&(i=e.substring(n),r=e.length),t+=String.fromCharCode(o),l[i]=o,a[o++]=i),n=r+1}return t}a[0]="";var s=4e4,e=n(e),s=65535;return{chars1:e,chars2:n(t),lineArray:a}},L.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],o=[],i=0;i<r.length;i++)o[i]=t[r.charCodeAt(i)];e[n][1]=o.join("")}},L.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(i,o)==t.substring(i,o)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},L.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),o=r,i=0;n<o;)e.substring(e.length-o,e.length-i)==t.substring(t.length-o,t.length-i)?i=n=o:r=o,o=Math.floor((r-n)/2+n);return o},L.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(0==n||0==r)return 0;r<n?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var o=Math.min(n,r);if(e==t)return o;for(var i=0,a=1;;){var l=e.substring(o-a),l=t.indexOf(l);if(-1==l)return i;a+=l,0!=l&&e.substring(o-a)!=t.substring(0,a)||(i=a,a++)}},L.prototype.diff_halfMatch_=function(e,t){var u,n,r,o,i,a,l,s;return!(this.Diff_Timeout<=0)&&(n=e.length>t.length?e:t,s=e.length>t.length?t:e,!(n.length<4||2*s.length<n.length))&&(u=this,l=d(n,s,Math.ceil(n.length/4)),s=d(n,s,Math.ceil(n.length/2)),l||s)?(n=!s||l&&l[4].length>s[4].length?l:s,e.length>t.length?(r=n[0],o=n[1],i=n[2],a=n[3]):(i=n[0],a=n[1],r=n[2],o=n[3]),[r,o,i,a,n[4]]):null;function d(e,t,n){for(var r,o,i,a,l=e.substring(n,n+Math.floor(e.length/4)),s=-1,d="";-1!=(s=t.indexOf(l,s+1));){var c=u.diff_commonPrefix(e.substring(n),t.substring(s)),p=u.diff_commonSuffix(e.substring(0,n),t.substring(0,s));d.length<p+c&&(d=t.substring(s-p,s)+t.substring(s,s+c),r=e.substring(0,n-p),o=e.substring(n+c),i=t.substring(0,s-p),a=t.substring(s+c))}return 2*d.length>=e.length?[r,o,i,a,d]:null}},L.prototype.diff_cleanupSemantic=function(e){for(var t,n,r,o,i=!1,a=[],l=0,s=null,d=0,c=0,p=0,u=0,m=0;d<e.length;)0==e[d][0]?(c=u,p=m,m=u=0,s=e[a[l++]=d][1]):(1==e[d][0]?u+=e[d][1].length:m+=e[d][1].length,s&&s.length<=Math.max(c,p)&&s.length<=Math.max(u,m)&&(e.splice(a[l-1],0,new L.Diff(-1,s)),e[a[l-1]+1][0]=1,l--,d=0<--l?a[l-1]:-1,m=u=p=c=0,i=!(s=null))),d++;for(i&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),d=1;d<e.length;)-1==e[d-1][0]&&1==e[d][0]&&(t=e[d-1][1],n=e[d][1],r=this.diff_commonOverlap_(t,n),(o=this.diff_commonOverlap_(n,t))<=r?(r>=t.length/2||r>=n.length/2)&&(e.splice(d,0,new L.Diff(0,n.substring(0,r))),e[d-1][1]=t.substring(0,t.length-r),e[d+1][1]=n.substring(r),d++):(o>=t.length/2||o>=n.length/2)&&(e.splice(d,0,new L.Diff(0,t.substring(0,o))),e[d-1][0]=1,e[d-1][1]=n.substring(0,n.length-o),e[d+1][0]=-1,e[d+1][1]=t.substring(o),d++),d++),d++},L.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){var n,r,o,i,a,l;return e&&t?(a=e.charAt(e.length-1),l=t.charAt(0),n=a.match(L.nonAlphaNumericRegex_),r=l.match(L.nonAlphaNumericRegex_),o=n&&a.match(L.whitespaceRegex_),i=r&&l.match(L.whitespaceRegex_),a=o&&a.match(L.linebreakRegex_),l=i&&l.match(L.linebreakRegex_),e=a&&e.match(L.blanklineEndRegex_),t=l&&t.match(L.blanklineStartRegex_),e||t?5:a||l?4:n&&!o&&i?3:o||i?2:n||r?1:0):6}for(var n=1;n<e.length-1;){if(0==e[n-1][0]&&0==e[n+1][0]){var r,o=e[n-1][1],i=e[n][1],a=e[n+1][1],l=this.diff_commonSuffix(o,i);l&&(r=i.substring(i.length-l),o=o.substring(0,o.length-l),i=r+i.substring(0,i.length-l),a=r+a);for(var s=o,d=i,c=a,p=t(o,i)+t(i,a);i.charAt(0)===a.charAt(0);){o+=i.charAt(0),i=i.substring(1)+a.charAt(0),a=a.substring(1);var u=t(o,i)+t(i,a);p<=u&&(p=u,s=o,d=i,c=a)}e[n-1][1]!=s&&(s?e[n-1][1]=s:(e.splice(n-1,1),n--),e[n][1]=d,c?e[n+1][1]=c:(e.splice(n+1,1),n--))}n++}},L.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,L.whitespaceRegex_=/\s/,L.linebreakRegex_=/[\r\n]/,L.blanklineEndRegex_=/\n\r?\n$/,L.blanklineStartRegex_=/^\r?\n\r?\n/,L.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],r=0,o=null,i=0,a=!1,l=!1,s=!1,d=!1;i<e.length;)0==e[i][0]?(o=e[i][1].length<this.Diff_EditCost&&(s||d)?(a=s,l=d,e[n[r++]=i][1]):(r=0,null),s=d=!1):(-1==e[i][0]?d=!0:s=!0,o&&(a&&l&&s&&d||o.length<this.Diff_EditCost/2&&a+l+s+d==3)&&(e.splice(n[r-1],0,new L.Diff(-1,o)),e[n[r-1]+1][0]=1,r--,a&&l?(s=d=!0,r=0):(i=0<--r?n[r-1]:-1,s=d=!1),t=!(o=null))),i++;t&&this.diff_cleanupMerge(e)},L.prototype.diff_cleanupMerge=function(e){e.push(new L.Diff(0,""));for(var t,n=0,r=0,o=0,i="",a="";n<e.length;)switch(e[n][0]){case 1:o++,a+=e[n][1],n++;break;case-1:r++,i+=e[n][1],n++;break;case 0:1<r+o?(0!==r&&0!==o&&(0!==(t=this.diff_commonPrefix(a,i))&&(0<n-r-o&&0==e[n-r-o-1][0]?e[n-r-o-1][1]+=a.substring(0,t):(e.splice(0,0,new L.Diff(0,a.substring(0,t))),n++),a=a.substring(t),i=i.substring(t)),0!==(t=this.diff_commonSuffix(a,i)))&&(e[n][1]=a.substring(a.length-t)+e[n][1],a=a.substring(0,a.length-t),i=i.substring(0,i.length-t)),n-=r+o,e.splice(n,r+o),i.length&&(e.splice(n,0,new L.Diff(-1,i)),n++),a.length&&(e.splice(n,0,new L.Diff(1,a)),n++),n++):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,r=o=0,a=i=""}""===e[e.length-1][1]&&e.pop();for(var l=!1,n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),l=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),l=!0)),n++;l&&this.diff_cleanupMerge(e)},L.prototype.diff_xIndex=function(e,t){for(var n=0,r=0,o=0,i=0,a=0;a<e.length&&(1!==e[a][0]&&(n+=e[a][1].length),-1!==e[a][0]&&(r+=e[a][1].length),!(t<n));a++)o=n,i=r;return e.length!=a&&-1===e[a][0]?i:i+(t-o)},L.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,r=/</g,o=/>/g,i=/\n/g,a=0;a<e.length;a++){var l=e[a][0],s=e[a][1].replace(n,"&amp;").replace(r,"&lt;").replace(o,"&gt;").replace(i,"&para;<br>");switch(l){case 1:t[a]='<ins style="background:#e6ffe6;">'+s+"</ins>";break;case-1:t[a]='<del style="background:#ffe6e6;">'+s+"</del>";break;case 0:t[a]="<span>"+s+"</span>"}}return t.join("")},L.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},L.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)-1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},L.prototype.diff_levenshtein=function(e){for(var t=0,n=0,r=0,o=0;o<e.length;o++){var i=e[o][0],a=e[o][1];switch(i){case 1:n+=a.length;break;case-1:r+=a.length;break;case 0:t+=Math.max(n,r),r=n=0}}return t+Math.max(n,r)},L.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case 1:t[n]="+"+encodeURI(e[n][1]);break;case-1:t[n]="-"+e[n][1].length;break;case 0:t[n]="="+e[n][1].length}return t.join("\t").replace(/%20/g," ")},L.prototype.diff_fromDelta=function(e,t){for(var n=[],r=0,o=0,i=t.split(/\t/g),a=0;a<i.length;a++){var l=i[a].substring(1);switch(i[a].charAt(0)){case"+":try{n[r++]=new L.Diff(1,decodeURI(l))}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var s=parseInt(l,10);if(isNaN(s)||s<0)throw new Error("Invalid number in diff_fromDelta: "+l);s=e.substring(o,o+=s);"="==i[a].charAt(0)?n[r++]=new L.Diff(0,s):n[r++]=new L.Diff(-1,s);break;default:if(i[a])throw new Error("Invalid diff operation in diff_fromDelta: "+i[a])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return n},L.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},L.prototype.match_bitap_=function(e,n,r){if(n.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var t=this.match_alphabet_(n),o=this;function i(e,t){e/=n.length,t=Math.abs(r-t);return o.Match_Distance?e+t/o.Match_Distance:t?1:e}var a=this.Match_Threshold;-1!=(p=e.indexOf(n,r))&&(a=Math.min(i(0,p),a),-1!=(p=e.lastIndexOf(n,r+n.length)))&&(a=Math.min(i(0,p),a));for(var l,s,d,c=1<<n.length-1,p=-1,u=n.length+e.length,m=0;m<n.length;m++){for(l=0,s=u;l<s;)i(m,r+s)<=a?l=s:u=s,s=Math.floor((u-l)/2+l);var u=s,f=Math.max(1,r-s+1),h=Math.min(r+s,e.length)+n.length,v=Array(h+2);v[h+1]=(1<<m)-1;for(var g=h;f<=g;g--){var b=t[e.charAt(g-1)];if(v[g]=0===m?(v[g+1]<<1|1)&b:(v[g+1]<<1|1)&b|(d[g+1]|d[g])<<1|1|d[g+1],v[g]&c){b=i(m,g-1);if(b<=a){if(a=b,!((p=g-1)>r))break;f=Math.max(1,2*r-p)}}}if(i(m+1,r)>a)break;d=v}return p},L.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},L.prototype.patch_addContext_=function(e,t){if(0!=t.length){if(null===e.start2)throw Error("patch not initialized");for(var n=t.substring(e.start2,e.start2+e.length1),r=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var o=t.substring(e.start2-r,e.start2),i=(o&&e.diffs.unshift(new L.Diff(0,o)),t.substring(e.start2+e.length1,e.start2+e.length1+r));i&&e.diffs.push(new L.Diff(0,i)),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+i.length,e.length2+=o.length+i.length}},L.prototype.patch_make=function(e,t,n){var r,o;if("string"==typeof e&&"string"==typeof t&&void 0===n)2<(o=this.diff_main(r=e,t,!0)).length&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&"object"==typeof e&&void 0===t&&void 0===n)r=this.diff_text1(o=e);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===n)r=e,o=t;else{if("string"!=typeof e||"string"!=typeof t||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");r=e,o=n}if(0===o.length)return[];for(var i=[],a=new L.patch_obj,l=0,s=0,d=0,c=r,p=r,u=0;u<o.length;u++){var m=o[u][0],f=o[u][1];switch(l||0===m||(a.start1=s,a.start2=d),m){case 1:a.diffs[l++]=o[u],a.length2+=f.length,p=p.substring(0,d)+f+p.substring(d);break;case-1:a.length1+=f.length,a.diffs[l++]=o[u],p=p.substring(0,d)+p.substring(d+f.length);break;case 0:f.length<=2*this.Patch_Margin&&l&&o.length!=u+1?(a.diffs[l++]=o[u],a.length1+=f.length,a.length2+=f.length):f.length>=2*this.Patch_Margin&&l&&(this.patch_addContext_(a,c),i.push(a),a=new L.patch_obj,l=0,c=p,s=d)}1!==m&&(s+=f.length),-1!==m&&(d+=f.length)}return l&&(this.patch_addContext_(a,c),i.push(a)),i},L.prototype.patch_deepCopy=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],o=new L.patch_obj;o.diffs=[];for(var i=0;i<r.diffs.length;i++)o.diffs[i]=new L.Diff(r.diffs[i][0],r.diffs[i][1]);o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,t[n]=o}return t},L.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var r=0,o=[],i=0;i<e.length;i++){var a,l=e[i].start2+r,s=this.diff_text1(e[i].diffs),d=-1;if(s.length>this.Match_MaxBits?-1!=(a=this.match_main(t,s.substring(0,this.Match_MaxBits),l))&&(-1==(d=this.match_main(t,s.substring(s.length-this.Match_MaxBits),l+s.length-this.Match_MaxBits))||d<=a)&&(a=-1):a=this.match_main(t,s,l),-1==a)o[i]=!1,r-=e[i].length2-e[i].length1;else if(o[i]=!0,r=a-l,s==(l=-1==d?t.substring(a,a+s.length):t.substring(a,d+this.Match_MaxBits)))t=t.substring(0,a)+this.diff_text2(e[i].diffs)+t.substring(a+s.length);else{var c=this.diff_main(s,l,!1);if(s.length>this.Match_MaxBits&&this.diff_levenshtein(c)/s.length>this.Patch_DeleteThreshold)o[i]=!1;else{this.diff_cleanupSemanticLossless(c);for(var p,u=0,m=0;m<e[i].diffs.length;m++){var f=e[i].diffs[m];0!==f[0]&&(p=this.diff_xIndex(c,u)),1===f[0]?t=t.substring(0,a+p)+f[1]+t.substring(a+p):-1===f[0]&&(t=t.substring(0,a+p)+t.substring(a+this.diff_xIndex(c,u+f[1].length))),-1!==f[0]&&(u+=f[1].length)}}}}return[t=t.substring(n.length,t.length-n.length),o]},L.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",r=1;r<=t;r++)n+=String.fromCharCode(r);for(r=0;r<e.length;r++)e[r].start1+=t,e[r].start2+=t;var o,i=e[0],a=i.diffs;return 0==a.length||0!=a[0][0]?(a.unshift(new L.Diff(0,n)),i.start1-=t,i.start2-=t,i.length1+=t,i.length2+=t):t>a[0][1].length&&(o=t-a[0][1].length,a[0][1]=n.substring(a[0][1].length)+a[0][1],i.start1-=o,i.start2-=o,i.length1+=o,i.length2+=o),0==(a=(i=e[e.length-1]).diffs).length||0!=a[a.length-1][0]?(a.push(new L.Diff(0,n)),i.length1+=t,i.length2+=t):t>a[a.length-1][1].length&&(o=t-a[a.length-1][1].length,a[a.length-1][1]+=n.substring(0,o),i.length1+=o,i.length2+=o),n},L.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=t)){var r=e[n];e.splice(n--,1);for(var o=r.start1,i=r.start2,a="";0!==r.diffs.length;){var l=new L.patch_obj,s=!0;for(l.start1=o-a.length,l.start2=i-a.length,""!==a&&(l.length1=l.length2=a.length,l.diffs.push(new L.Diff(0,a)));0!==r.diffs.length&&l.length1<t-this.Patch_Margin;){var d=r.diffs[0][0],c=r.diffs[0][1];1===d?(l.length2+=c.length,i+=c.length,l.diffs.push(r.diffs.shift()),s=!1):-1===d&&1==l.diffs.length&&0==l.diffs[0][0]&&c.length>2*t?(l.length1+=c.length,o+=c.length,s=!1,l.diffs.push(new L.Diff(d,c)),r.diffs.shift()):(c=c.substring(0,t-l.length1-this.Patch_Margin),l.length1+=c.length,o+=c.length,0===d?(l.length2+=c.length,i+=c.length):s=!1,l.diffs.push(new L.Diff(d,c)),c==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(c.length))}var a=(a=this.diff_text2(l.diffs)).substring(a.length-this.Patch_Margin),p=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==p&&(l.length1+=p.length,l.length2+=p.length,0!==l.diffs.length&&0===l.diffs[l.diffs.length-1][0]?l.diffs[l.diffs.length-1][1]+=p:l.diffs.push(new L.Diff(0,p))),s||e.splice(++n,0,l)}}},L.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},L.prototype.patch_fromText=function(e){var t=[];if(e)for(var n=e.split("\n"),r=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<n.length;){var i=n[r].match(o);if(!i)throw new Error("Invalid patch string: "+n[r]);var a=new L.patch_obj;for(t.push(a),a.start1=parseInt(i[1],10),""===i[2]?(a.start1--,a.length1=1):"0"==i[2]?a.length1=0:(a.start1--,a.length1=parseInt(i[2],10)),a.start2=parseInt(i[3],10),""===i[4]?(a.start2--,a.length2=1):"0"==i[4]?a.length2=0:(a.start2--,a.length2=parseInt(i[4],10)),r++;r<n.length;){var l=n[r].charAt(0);try{var s=decodeURI(n[r].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+s)}if("-"==l)a.diffs.push(new L.Diff(-1,s));else if("+"==l)a.diffs.push(new L.Diff(1,s));else if(" "==l)a.diffs.push(new L.Diff(0,s));else{if("@"==l)break;if(""!==l)throw new Error('Invalid patch mode "'+l+'" in: '+s)}r++}}return t},(L.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:e="+";break;case-1:e="-";break;case 0:e=" "}t[n+1]=e+encodeURI(this.diffs[n][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=L,e.exports.diff_match_patch=L,e.exports.DIFF_DELETE=-1,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},872:(e,t,n)=>{n.d(t,{default:()=>c});function r(p,u,m){return l=function(){var t,r,o,i,a,l,s,d,c,e;return i=this,a=function(e){switch(e.label){case 0:return t=H(m),[4,N(u,t)];case 1:if(r=e.sent(),t.transform&&(r=t.transform(r)),p.innerHTML=r,p.classList.add("vditor-reset"),t.i18n)return[3,5];if(["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(t.lang))return[3,2];throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");case 2:return o="vditorI18nScript"+t.lang,document.querySelectorAll('head script[id^="vditorI18nScript"]').forEach(function(e){e.id!==o&&document.head.removeChild(e)}),[4,(0,C.G)(t.cdn+"/dist/js/i18n/"+t.lang+".js",o)];case 3:e.sent(),e.label=4;case 4:return[3,6];case 5:window.VditorI18n=t.i18n,e.label=6;case 6:return t.icon?[4,(0,C.G)(t.cdn+"/dist/js/icons/"+t.icon+".js","vditorIconScript")]:[3,8];case 7:e.sent(),e.label=8;case 8:return(0,T.Z)(t.theme.current,t.theme.path),1===t.anchor&&p.classList.add("vditor-reset--anchor"),(0,v.O)(p,t.hljs),(0,y.s)(t.hljs,p,t.cdn),(0,k.H)(p,{cdn:t.cdn,math:t.math}),(0,x.i)(p,t.cdn,t.mode),(0,_.K)(p,t.cdn,t.mode),(0,g.P)(p,t.cdn),(0,b.v)(p,t.cdn),(0,h.p)(p,t.cdn,t.mode),(0,S.P)(p,t.cdn,t.mode),(0,L.B)(p,t.cdn),(0,f.Q)(p,t.cdn),t.render.media.enable&&(0,E.Y)(p),t.speech.enable&&A(p),0!==t.anchor&&(n=t.anchor,document.querySelectorAll(".vditor-anchor").forEach(function(t){1===n&&t.classList.add("vditor-anchor--left"),t.onclick=function(){var e=t.getAttribute("href").substr(1),e=document.getElementById("vditorAnchor-"+e).offsetTop;document.querySelector("html").scrollTop=e}}),window.onhashchange=function(){var e=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));e&&(document.querySelector("html").scrollTop=e.offsetTop)}),t.after&&t.after(),t.lazyLoadImage&&w(p),p.addEventListener("click",function(e){var e=(0,M.lG)(e.target,"SPAN");e&&(0,M.fb)(e,"vditor-toc")&&(e=p.querySelector("#"+e.getAttribute("data-target-id")))&&window.scrollTo(window.scrollX,e.offsetTop)}),[2]}var n},c={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]},e={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function n(n){return function(e){var t=[n,e];if(l)throw new TypeError("Generator is already executing.");for(;c;)try{if(l=1,s&&(d=2&t[0]?s.return:t[0]?s.throw||((d=s.return)&&d.call(s),0):s.next)&&!(d=d.call(s,t[1])).done)return d;switch(s=0,(t=d?[2&t[0],d.value]:t)[0]){case 0:case 1:d=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,s=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!((d=0<(d=c.trys).length&&d[d.length-1])||6!==t[0]&&2!==t[0])){c=0;continue}if(3===t[0]&&(!d||t[1]>d[0]&&t[1]<d[3]))c.label=t[1];else if(6===t[0]&&c.label<d[1])c.label=d[1],d=t;else{if(!(d&&c.label<d[2])){d[2]&&c.ops.pop(),c.trys.pop();continue}c.label=d[2],c.ops.push(t)}}t=a.call(i,c)}catch(e){t=[6,e],s=0}finally{l=d=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},new(a=(a=void 0)||Promise)(function(n,t){function r(e){try{i(l.next(e))}catch(e){t(e)}}function o(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((l=l.apply(void 0,[])).next())});var a,l}var f=n(478),t=n(156),h=n(314),v=n(730),g=n(66),b=n(218),y=n(702),w=function(e){void 0===e&&(e=document);function t(e){var t=document.createElement("img");t.src=e.getAttribute("data-src"),t.addEventListener("load",function(){e.getAttribute("style")||e.getAttribute("class")||e.getAttribute("width")||e.getAttribute("height")||t.naturalHeight>t.naturalWidth&&t.naturalWidth/t.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&t.naturalHeight>window.innerHeight-40&&(e.style.height=window.innerHeight-40+"px"),e.src=t.src}),e.removeAttribute("data-src")}if(!("IntersectionObserver"in window))return e.querySelectorAll("img").forEach(function(e){e.getAttribute("data-src")&&t(e)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),e.querySelectorAll("img").forEach(function(e){window.vditorImageIntersectionObserver.observe(e)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(e){e.forEach(function(e){(void 0===e.isIntersecting?0!==e.intersectionRatio:e.isIntersecting)&&e.target.getAttribute("data-src")&&t(e.target)})}),e.querySelectorAll("img").forEach(function(e){window.vditorImageIntersectionObserver.observe(e)}))},k=n(466),E=n(554),x=n(40),_=n(563),S=n(749),o=n(818),L=n(408),i=n(54),T=n(227),C=n(526),M=n(827),a=n(640),l=n(895),d=n(393),A=function(r,o){var i,a,l,e,s;void 0===o&&(o="zh_CN"),"undefined"!=typeof speechSynthesis&&"undefined"!=typeof SpeechSynthesisUtterance&&(e=function(){var t,n;return speechSynthesis.getVoices().forEach(function(e){e.lang===o.replace("_","-")&&(t=e),e.default&&(n=e)}),t=t||n},i='<svg><use xlink:href="#vditor-icon-play"></use></svg>',a='<svg><use xlink:href="#vditor-icon-pause"></use></svg>',document.getElementById("vditorIconScript")||(i='<svg viewBox="0 0 32 32"><path d="M3.436 0l25.128 16-25.128 16v-32z"></path></svg>',a='<svg viewBox="0 0 32 32"><path d="M20.617 0h9.128v32h-9.128v-32zM2.255 32v-32h9.128v32h-9.128z"></path></svg>'),(l=document.querySelector(".vditor-speech"))||((l=document.createElement("button")).className="vditor-speech",r.insertAdjacentElement("beforeend",l),void 0!==speechSynthesis.onvoiceschanged&&(speechSynthesis.onvoiceschanged=e)),e=e(),(s=new SpeechSynthesisUtterance).voice=e,s.onend=s.onerror=function(){l.style.display="none",speechSynthesis.cancel(),l.classList.remove("vditor-speech--current"),l.innerHTML=i},r.addEventListener(void 0!==window.ontouchstart?"touchend":"click",function(e){var t,n=e.target;n.classList.contains("vditor-speech")||n.parentElement.classList.contains("vditor-speech")?(l.classList.contains("vditor-speech--current")?speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),l.innerHTML=a):(speechSynthesis.pause(),l.innerHTML=i)):(s.text=l.getAttribute("data-text"),speechSynthesis.speak(s),l.classList.add("vditor-speech--current"),l.innerHTML=a),(0,d.Hc)(window.vditorSpeechRange),r.focus()):(l.style.display="none",speechSynthesis.cancel(),l.classList.remove("vditor-speech--current"),l.innerHTML=i,0!==getSelection().rangeCount&&(t=(n=getSelection().getRangeAt(0)).toString().trim())&&(window.vditorSpeechRange=n.cloneRange(),n=n.getBoundingClientRect(),l.innerHTML=i,l.style.display="block",l.style.top=n.top+n.height+document.querySelector("html").scrollTop-20+"px",void 0!==window.ontouchstart?l.style.left=e.changedTouches[e.changedTouches.length-1].pageX+2+"px":l.style.left=e.clientX+2+"px",l.setAttribute("data-text",t)))}))},H=function(e){var t,n={anchor:0,cdn:i.g.CDN,customEmoji:{},emojiPath:i.g.CDN+"/dist/images/emoji",hljs:i.g.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:i.g.MARKDOWN_OPTIONS,math:i.g.MATH_OPTIONS,mode:"light",speech:{enable:!1},render:{media:{enable:!0}},theme:i.g.THEME_OPTIONS};return e.cdn&&(null!=(t=e.theme)&&t.path||(n.theme.path=e.cdn+"/dist/css/content-theme"),e.emojiPath||(n.emojiPath=e.cdn+"/dist/images/emoji")),(0,a.T)(n,e)},N=function(t,n){var r=H(n);return(0,C.G)(r.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then(function(){var e=(0,l.X)({autoSpace:r.markdown.autoSpace,gfmAutoLink:r.markdown.gfmAutoLink,codeBlockPreview:r.markdown.codeBlockPreview,emojiSite:r.emojiPath,emojis:r.customEmoji,fixTermTypo:r.markdown.fixTermTypo,footnotes:r.markdown.footnotes,headingAnchor:0!==r.anchor,inlineMathDigit:r.math.inlineDigit,lazyLoadImage:r.lazyLoadImage,linkBase:r.markdown.linkBase,linkPrefix:r.markdown.linkPrefix,listStyle:r.markdown.listStyle,mark:r.markdown.mark,mathBlockPreview:r.markdown.mathBlockPreview,paragraphBeginningSpace:r.markdown.paragraphBeginningSpace,sanitize:r.markdown.sanitize,toc:r.markdown.toc});return null!=n&&n.renderers&&e.SetJSRenderers({renderers:{Md2HTML:n.renderers}}),e.SetHeadingID(!0),e.Md2HTML(t)})},s=n(863),n=n(312);p.adapterRender=t,p.previewImage=s.E,p.codeRender=v.O,p.graphvizRender=b.v,p.highlightRender=y.s,p.mathRender=k.H,p.mermaidRender=x.i,p.markmapRender=_.K,p.flowchartRender=g.P,p.chartRender=h.p,p.abcRender=f.Q,p.mindmapRender=S.P,p.plantumlRender=L.B,p.outlineRender=o.k,p.mediaRender=E.Y,p.speechRender=A,p.lazyLoadImageRender=w,p.md2html=N,p.preview=r,p.setCodeTheme=n.Y,p.setContentTheme=T.Z;let c=p;function p(){}},54:(e,t,n)=>{n.d(t,{H:()=>r,g:()=>o});var r="3.10.4",o=(i.ZWSP="​",i.DROP_EDITOR="application/editor",i.MOBILE_WIDTH=520,i.CLASS_MENU_DISABLED="vditor-menu--disabled",i.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],i.CODE_THEME=["abap","algol","algol_nu","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode","ant-design"],i.CODE_LANGUAGES=["mermaid","echarts","mindmap","plantuml","abc","graphviz","flowchart","apache","js","ts","html","markmap","properties","apache","bash","c","csharp","cpp","css","coffeescript","diff","go","xml","http","json","java","javascript","kotlin","less","lua","makefile","markdown","nginx","objectivec","php","php-template","perl","plaintext","python","python-repl","r","ruby","rust","scss","sql","shell","swift","ini","typescript","vbnet","yaml","ada","clojure","dart","erb","fortran","gradle","haskell","julia","julia-repl","lisp","matlab","pgsql","powershell","sql_more","stata","cmake","mathematica","solidity","yul"],i.CDN="https://unpkg.com/vditor@3.10.4",i.MARKDOWN_OPTIONS={autoSpace:!1,gfmAutoLink:!0,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},i.HLJS_OPTIONS={enable:!0,lineNumber:!1,defaultLang:"",style:"github"},i.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},i.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:i.CDN+"/dist/css/content-theme"},i);function i(){}},478:(e,t,n)=>{n.d(t,{Q:()=>a});var r=n(54),o=n(526),i=n(156),a=function(e,t){void 0===e&&(e=document),void 0===t&&(t=r.g.CDN);var n=i.abcRenderAdapter.getElements(e);0<n.length&&(0,o.G)(t+"/dist/js/abcjs/abcjs_basic.min.js","vditorAbcjsScript").then(function(){n.forEach(function(e){e.parentElement.classList.contains("vditor-wysiwyg__pre")||e.parentElement.classList.contains("vditor-ir__marker--pre")||"true"!==e.getAttribute("data-processed")&&(ABCJS.renderAbc(e,i.abcRenderAdapter.getCode(e).trim()),e.style.overflowX="auto",e.setAttribute("data-processed","true"))})})}},156:(e,t,n)=>{n.r(t),n.d(t,{abcRenderAdapter:()=>s,chartRenderAdapter:()=>l,flowchartRenderAdapter:()=>c,graphvizRenderAdapter:()=>d,markmapRenderAdapter:()=>i,mathRenderAdapter:()=>r,mermaidRenderAdapter:()=>o,mindmapRenderAdapter:()=>a,plantumlRenderAdapter:()=>p});var r={getCode:function(e){return e.textContent},getElements:function(e){return e.querySelectorAll(".language-math")}},o={getCode:function(e){return e.textContent},getElements:function(e){return e.querySelectorAll(".language-mermaid")}},i={getCode:function(e){return e.textContent},getElements:function(e){return e.querySelectorAll(".language-markmap")}},a={getCode:function(e){return e.getAttribute("data-code")},getElements:function(e){return e.querySelectorAll(".language-mindmap")}},l={getCode:function(e){return e.innerText},getElements:function(e){return e.querySelectorAll(".language-echarts")}},s={getCode:function(e){return e.textContent},getElements:function(e){return e.querySelectorAll(".language-abc")}},d={getCode:function(e){return e.textContent},getElements:function(e){return e.querySelectorAll(".language-graphviz")}},c={getCode:function(e){return e.textContent},getElements:function(e){return e.querySelectorAll(".language-flowchart")}},p={getCode:function(e){return e.textContent},getElements:function(e){return e.querySelectorAll(".language-plantuml")}}},314:(e,t,n)=>{n.d(t,{p:()=>r});var o=n(54),i=n(526),a=n(156),r=function(e,t,r){void 0===e&&(e=document),void 0===t&&(t=o.g.CDN);var n=a.chartRenderAdapter.getElements(e);0<n.length&&(0,i.G)(t+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){n.forEach(function(e){if(!e.parentElement.classList.contains("vditor-wysiwyg__pre")&&!e.parentElement.classList.contains("vditor-ir__marker--pre")){var t,n=a.chartRenderAdapter.getCode(e).trim();if(n)try{"true"!==e.getAttribute("data-processed")&&(t=JSON.parse(n),echarts.init(e,"dark"===r?"dark":void 0).setOption(t),e.setAttribute("data-processed","true"))}catch(n){e.className="vditor-reset--error",e.innerHTML="echarts render error: <br>"+n}}})})}},730:(e,t,n)=>{n.d(t,{O:()=>r});var a=n(51),l=n(54),r=function(n,i){Array.from(n.querySelectorAll("pre > code")).filter(function(e,t){return!(e.parentElement.classList.contains("vditor-wysiwyg__pre")||e.parentElement.classList.contains("vditor-ir__marker--pre")||e.classList.contains("language-mermaid")||e.classList.contains("language-flowchart")||e.classList.contains("language-echarts")||e.classList.contains("language-mindmap")||e.classList.contains("language-plantuml")||e.classList.contains("language-markmap")||e.classList.contains("language-abc")||e.classList.contains("language-graphviz")||e.classList.contains("language-math")||-1<e.style.maxHeight.indexOf("px")||n.classList.contains("vditor-preview")&&5<t)}).forEach(function(e){var t=e.innerText,n=(e.classList.contains("highlight-chroma")?((n=e.cloneNode(!0)).querySelectorAll(".highlight-ln").forEach(function(e){e.remove()}),t=n.innerText):t.endsWith("\n")&&(t=t.substr(0,t.length-1)),'<svg><use xlink:href="#vditor-icon-copy"></use></svg>'),r=(document.getElementById("vditorIconScript")||(n='<svg viewBox="0 0 32 32"><path d="M22.545-0h-17.455c-1.6 0-2.909 1.309-2.909 2.909v20.364h2.909v-20.364h17.455v-2.909zM26.909 5.818h-16c-1.6 0-2.909 1.309-2.909 2.909v20.364c0 1.6 1.309 2.909 2.909 2.909h16c1.6 0 2.909-1.309 2.909-2.909v-20.364c0-1.6-1.309-2.909-2.909-2.909zM26.909 29.091h-16v-20.364h16v20.364z"></path></svg>'),document.createElement("div")),o=(r.className="vditor-copy",r.innerHTML='<span aria-label="'+((null==(o=window.VditorI18n)?void 0:o.copy)||"复制")+"\"\nonmouseover=\"this.setAttribute('aria-label', '"+((null==(o=window.VditorI18n)?void 0:o.copy)||"复制")+"')\"\nclass=\"vditor-tooltipped vditor-tooltipped__w\"\nonclick=\"this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '"+((null==(o=window.VditorI18n)?void 0:o.copied)||"已复制")+"');this.previousElementSibling.blur()\">"+n+"</span>",document.createElement("textarea"));o.value=(0,a.X)(t),r.insertAdjacentElement("afterbegin",o),i&&i.renderMenu&&i.renderMenu(e,r),e.before(r),e.style.maxHeight=window.outerHeight-40+"px",e.insertAdjacentHTML("afterend",'<span style="position: absolute">'+l.g.ZWSP+"</span>")})}},66:(e,t,n)=>{n.d(t,{P:()=>a});var r=n(54),o=n(526),i=n(156),a=function(e,t){void 0===t&&(t=r.g.CDN);var n=i.flowchartRenderAdapter.getElements(e);0!==n.length&&(0,o.G)(t+"/dist/js/flowchart.js/flowchart.min.js","vditorFlowchartScript").then(function(){n.forEach(function(e){var t;"true"!==e.getAttribute("data-processed")&&(t=flowchart.parse(i.flowchartRenderAdapter.getCode(e)),e.innerHTML="",t.drawSVG(e),e.setAttribute("data-processed","true"))})})}},218:(e,t,n)=>{n.d(t,{v:()=>a});var r=n(54),o=n(526),i=n(156),a=function(e,t){void 0===t&&(t=r.g.CDN);var n=i.graphvizRenderAdapter.getElements(e);0!==n.length&&(0,o.G)(t+"/dist/js/graphviz/viz.js","vditorGraphVizScript").then(function(){n.forEach(function(t){var e=i.graphvizRenderAdapter.getCode(t);if(!t.parentElement.classList.contains("vditor-wysiwyg__pre")&&!t.parentElement.classList.contains("vditor-ir__marker--pre")&&"true"!==t.getAttribute("data-processed")&&""!==e.trim()){try{var n=new Blob(["importScripts('"+document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js")+"');"],{type:"application/javascript"}),r=(window.URL||window.webkitURL).createObjectURL(n),o=new Worker(r);new Viz({worker:o}).renderSVGElement(e).then(function(e){t.innerHTML=e.outerHTML}).catch(function(e){t.innerHTML="graphviz render error: <br>"+e,t.className="vditor-reset--error"})}catch(t){console.error("graphviz error",t)}t.setAttribute("data-processed","true")}})})}},702:(e,t,n)=>{n.d(t,{s:()=>r});var a=n(54),l=n(526),s=n(578),r=function(i,e,t){void 0===e&&(e=document),void 0===t&&(t=a.g.CDN);var n=i.style,r=(a.g.CODE_THEME.includes(n)||(n="github"),document.getElementById("vditorHljsStyle")),o=t+"/dist/js/highlight.js/styles/"+n+".css";r&&r.getAttribute("href")!==o&&r.remove(),(0,s.c)(t+"/dist/js/highlight.js/styles/"+n+".css","vditorHljsStyle"),!1!==i.enable&&0!==e.querySelectorAll("pre > code").length&&(0,l.G)(t+"/dist/js/highlight.js/highlight.pack.js","vditorHljsScript").then(function(){(0,l.G)(t+"/dist/js/highlight.js/solidity.min.js","vditorHljsSolidityScript").then(function(){(0,l.G)(t+"/dist/js/highlight.js/yul.min.js","vditorHljsYulScript").then(function(){e.querySelectorAll("pre > code").forEach(function(e){var n,r,o,t;e.parentElement.classList.contains("vditor-ir__marker--pre")||e.parentElement.classList.contains("vditor-wysiwyg__pre")||e.classList.contains("language-mermaid")||e.classList.contains("language-flowchart")||e.classList.contains("language-echarts")||e.classList.contains("language-mindmap")||e.classList.contains("language-plantuml")||e.classList.contains("language-abc")||e.classList.contains("language-graphviz")||e.classList.contains("language-math")||(""!==i.defaultLang&&-1===e.className.indexOf("language-")&&e.classList.add("language-"+i.defaultLang),hljs.highlightElement(e),!i.lineNumber)||(e.classList.add("vditor-linenumber"),(n=e.querySelector(".vditor-linenumber__temp"))||((n=document.createElement("div")).className="vditor-linenumber__temp",e.insertAdjacentElement("beforeend",n)),t=getComputedStyle(e).whiteSpace,r="pre-wrap"!==t&&"pre-line"!==t?!1:!0,o="",(t=e.textContent.split(/\r\n|\r|\n/g)).pop(),t.map(function(e){var t="";r&&(n.textContent=e||"\n",t=' style="height:'+n.getBoundingClientRect().height+'px"'),o+="<span"+t+"></span>"}),n.style.display="none",o='<span class="vditor-linenumber__rows">'+o+"</span>",e.insertAdjacentHTML("beforeend",o))})})})})}},563:(e,t,n)=>{n.d(t,{K:()=>r});var o=n(54),i=n(526),a=n(156),l={},s=function(e,t){var n=window.markmap,r=n.Transformer,o=n.Markmap,i=n.deriveOptions,n=(n.globalCSS,new r),r=(e.innerHTML='<svg style="width:100%"></svg>',e.firstChild),e=o.create(r,null),n=(r=(o=n).transform(t),(n=Object.keys(r.features).filter(function(e){return!l[e]})).forEach(function(e){l[e]=!0}),o=o.getAssets(n),n=o.styles,o=o.scripts,t=window.markmap,n&&t.loadCSS(n),o&&t.loadJS(o),r),t=n.root,o=n.frontmatter,r=i(null==o?void 0:o.markmap);e.setData(t,r),e.fit()},r=function(e,t,n){void 0===t&&(t=o.g.CDN);var r=a.markmapRenderAdapter.getElements(e);0!==r.length&&(0,i.G)(t+"/dist/js/markmap/markmap.min.js","vditorMermaidScript").then(function(){r.forEach(function(e){var t,n=a.markmapRenderAdapter.getCode(e);"true"!==e.getAttribute("data-processed")&&""!==n.trim()&&((t=document.createElement("div")).className="language-markmap",e.parentNode.appendChild(t),s(t,n),"CODE"==e.parentNode.childNodes[0].nodeName)&&e.parentNode.removeChild(e.parentNode.childNodes[0])})})}},466:(e,t,n)=>{n.d(t,{H:()=>a});var r=n(54),o=n(526),i=n(578),s=n(51),d=n(156),a=function(e,n){var a,l=d.mathRenderAdapter.getElements(e);0!==l.length&&(e={cdn:r.g.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}},n&&n.math&&(n.math=Object.assign({},e.math,n.math)),"KaTeX"===(n=Object.assign({},e,n)).math.engine?((0,i.c)(n.cdn+"/dist/js/katex/katex.min.css?v=0.16.9","vditorKatexStyle"),(0,o.G)(n.cdn+"/dist/js/katex/katex.min.js?v=0.16.9","vditorKatexScript").then(function(){(0,o.G)(n.cdn+"/dist/js/katex/mhchem.min.js?v=0.16.9","vditorKatexChemScript").then(function(){l.forEach(function(t){if(!t.parentElement.classList.contains("vditor-wysiwyg__pre")&&!t.parentElement.classList.contains("vditor-ir__marker--pre")&&!t.getAttribute("data-math")){var e=(0,s.X)(d.mathRenderAdapter.getCode(t));t.setAttribute("data-math",e);try{t.innerHTML=katex.renderToString(e,{displayMode:"DIV"===t.tagName,output:"html",macros:n.math.macros})}catch(e){t.innerHTML=e.message,t.className="language-math vditor-reset--error"}t.addEventListener("copy",function(e){e.stopPropagation(),e.preventDefault();var t=e.currentTarget.closest(".language-math");e.clipboardData.setData("text/html",t.innerHTML),e.clipboardData.setData("text/plain",t.getAttribute("data-math"))})}})})})):"MathJax"===n.math.engine&&(window.MathJax||(window.MathJax={loader:{paths:{mathjax:n.cdn+"/dist/js/mathjax"}},startup:{typeset:!1},tex:{macros:n.math.macros}},Object.assign(window.MathJax,n.math.mathJaxOptions)),(0,o.J)(n.cdn+"/dist/js/mathjax/tex-svg-full.js","protyleMathJaxScript"),a=function(t,n){var r=(0,s.X)(t.textContent).trim(),e=window.MathJax.getMetricsFor(t);e.display="DIV"===t.tagName,window.MathJax.tex2svgPromise(r,e).then(function(e){t.innerHTML="",t.setAttribute("data-math",r),t.append(e),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();e=e.querySelector('[data-mml-node="merror"]');e&&""!==e.textContent.trim()&&(t.innerHTML=e.textContent.trim(),t.className="vditor-reset--error"),n&&n()})},window.MathJax.startup.promise.then(function(){for(var t,n,r,o,e=[],i=0;i<l.length;i++)!function(t){var n=l[t];n.parentElement.classList.contains("vditor-wysiwyg__pre")||n.parentElement.classList.contains("vditor-ir__marker--pre")||n.getAttribute("data-math")||!(0,s.X)(n.textContent).trim()||e.push(function(e){t===l.length-1?a(n):a(n,e)})}(i);0!==(t=e).length&&(n=0,r=t[t.length-1],(o=function(){var e=t[n++];e===r?e():e(o)})())})))}},554:(e,t,n)=>{n.d(t,{Y:()=>r});var f=n(835),r=function(e){e&&e.querySelectorAll("a").forEach(function(e){var n,r,o,t,i,a,l,s,d,c,p,u,m=e.getAttribute("href");m&&(m.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?((u=e).insertAdjacentHTML("afterend",'<video controls="controls" src="'+m+'"></video>'),u.remove()):m.match(/^.+.(mp3|wav|flac)$/)?((u=e).insertAdjacentHTML("afterend",'<audio controls="controls" src="'+m+'"></audio>'),u.remove()):(e=e,t=(m=m).match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),i=m.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),a=m.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),l=m.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),s=m.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),d=m.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),c=m.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),p=m.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/),t&&11===t[1].length?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'+t[1]+(t[2]?"?start="+t[2]:"")+'"></iframe>'),e.remove()):i&&i[1]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'+i[1]+'"></iframe>'),e.remove()):a&&a[1]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='+a[1]+'"></iframe>'),e.remove()):l&&l[1]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video"\n src="//coub.com/embed/'+l[1]+'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>'),e.remove()):s&&s[0]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video"\n src="https://www.facebook.com/plugins/video.php?href='+encodeURIComponent(s[0])+'"></iframe>'),e.remove()):d&&d[2]?(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video"\n src="https://www.dailymotion.com/embed/video/'+d[2]+'"></iframe>'),e.remove()):-1<m.indexOf("bilibili.com")&&(-1<m.indexOf("bvid=")||c&&c[1])?(n={bvid:(0,f.o)("bvid",m)||c&&c[1],page:"1",high_quality:"1",as_wide:"1",allowfullscreen:"true",autoplay:"0"},new URL(m.startsWith("http")?m:"https:"+m).search.split("&").forEach(function(e,t){e&&(t=(e=0===t?e.substr(1):e).split("="),n[t[0]]=t[1])}),r="https://player.bilibili.com/player.html?",(o=Object.keys(n)).forEach(function(e,t){r+=e+"="+n[e],t<o.length-1&&(r+="&")}),e.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="'+r+'"></iframe>'),e.remove()):p&&p[1]&&(e.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'+p[1]+'"></iframe>'),e.remove())))})}},40:(e,t,n)=>{n.d(t,{i:()=>r});var o=n(54),i=n(526),u=n(156),m=n(835),r=function(e,t,n){void 0===t&&(t=o.g.CDN);var r=u.mermaidRenderAdapter.getElements(e);0!==r.length&&(0,i.G)(t+"/dist/js/mermaid/mermaid.min.js","vditorMermaidScript").then(function(){var e={securityLevel:"loose",altFontFamily:"sans-serif",fontFamily:"sans-serif",startOnLoad:!1,flowchart:{htmlLabels:!0,useMaxWidth:!0},sequence:{useMaxWidth:!0,diagramMarginX:8,diagramMarginY:8,boxMargin:8,showSequenceNumbers:!0},gantt:{leftPadding:75,rightPadding:20}};"dark"===n&&(e.theme="dark"),mermaid.initialize(e),r.forEach(function(p){return l=function(){var t,n,r,o,i,a,l,s,d,e;return o=this,i=function(e){switch(e.label){case 0:if(t=u.mermaidRenderAdapter.getCode(p),"true"===p.getAttribute("data-processed")||""===t.trim())return[2];t="mermaid"+(0,m.W)(),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,mermaid.render(t,p.textContent)];case 2:return n=e.sent(),p.innerHTML=n.svg,[3,4];case 3:return n=e.sent(),r=document.querySelector("#"+t),p.innerHTML=r.outerHTML+'<br>\n<div style="text-align: left"><small>'+n.message.replace(/\n/,"<br>")+"</small></div>",r.parentElement.remove(),[3,4];case 4:return p.setAttribute("data-processed","true"),[2]}},d={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function c(n){return function(e){var t=[n,e];if(a)throw new TypeError("Generator is already executing.");for(;d;)try{if(a=1,l&&(s=2&t[0]?l.return:t[0]?l.throw||((s=l.return)&&s.call(l),0):l.next)&&!(s=s.call(l,t[1])).done)return s;switch(l=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return d.label++,{value:t[1],done:!1};case 5:d.label++,l=t[1],t=[0];continue;case 7:t=d.ops.pop(),d.trys.pop();continue;default:if(!((s=0<(s=d.trys).length&&s[s.length-1])||6!==t[0]&&2!==t[0])){d=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))d.label=t[1];else if(6===t[0]&&d.label<s[1])d.label=s[1],s=t;else{if(!(s&&d.label<s[2])){s[2]&&d.ops.pop(),d.trys.pop();continue}d.label=s[2],d.ops.push(t)}}t=i.call(o,d)}catch(e){t=[6,e],l=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},new(a=(a=void 0)||Promise)(function(n,t){function r(e){try{i(l.next(e))}catch(e){t(e)}}function o(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((l=l.apply(void 0,[])).next())});var a,l})})}},749:(e,t,n)=>{n.d(t,{P:()=>r});var o=n(54),i=n(526),a=n(156),r=function(e,t,n){void 0===e&&(e=document),void 0===t&&(t=o.g.CDN);var r=a.mindmapRenderAdapter.getElements(e);0<r.length&&(0,i.G)(t+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){r.forEach(function(e){if(!e.parentElement.classList.contains("vditor-wysiwyg__pre")&&!e.parentElement.classList.contains("vditor-ir__marker--pre")){var t=a.mindmapRenderAdapter.getCode(e);if(t)try{"true"!==e.getAttribute("data-processed")&&(echarts.init(e,"dark"===n?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(t))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(e,t){return null!=(t=null==t?void 0:t.data)&&t.children?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),e.setAttribute("data-processed","true"))}catch(t){e.className="vditor-reset--error",e.innerHTML="mindmap render error: <br>"+t}}})})}},818:(e,t,n)=>{n.d(t,{k:()=>r});var s=n(64),d=n(466),r=function(o,i,a){var e,t,r="",l=[];return Array.from(o.children).forEach(function(e,t){var n;(0,s.W)(e)&&(a&&(n=e.id.lastIndexOf("_"),e.id=e.id.substring(0,-1===n?void 0:n)+"_"+t),l.push(e.id),r+=e.outerHTML.replace("<wbr>",""))}),""===r?i.innerHTML="":(e=document.createElement("div"),a?(a.lute.SetToC(!0),"wysiwyg"!==a.currentMode||a.preview.element.contains(o)?"ir"!==a.currentMode||a.preview.element.contains(o)?e.innerHTML=a.lute.HTML2VditorDOM("<p>[ToC]</p>"+r):e.innerHTML=a.lute.SpinVditorIRDOM("<p>[ToC]</p>"+r):e.innerHTML=a.lute.SpinVditorDOM("<p>[ToC]</p>"+r),a.lute.SetToC(a.options.preview.markdown.toc)):(i.classList.add("vditor-outline"),(t=Lute.New()).SetToC(!0),e.innerHTML=t.HTML2VditorDOM("<p>[ToC]</p>"+r)),(t=e.firstElementChild.querySelectorAll("li > span[data-target-id]")).forEach(function(e,t){var n;e.nextElementSibling&&"UL"===e.nextElementSibling.tagName?(n="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg>",document.getElementById("vditorIconScript")||(n='<svg class="vditor-outline__action" viewBox="0 0 32 32"><path d="M3.76 6.12l12.24 12.213 12.24-12.213 3.76 3.76-16 16-16-16 3.76-3.76z"></path></svg>'),e.innerHTML=n+"<span>"+e.innerHTML+"</span>"):e.innerHTML="<svg></svg><span>"+e.innerHTML+"</span>",e.setAttribute("data-target-id",l[t])}),r=e.firstElementChild.innerHTML,0===t.length?i.innerHTML="":(i.innerHTML=r,a&&(0,d.H)(i,{cdn:a.options.cdn,math:a.options.preview.math}),i.firstElementChild.addEventListener("click",function(e){for(var t=e.target;t&&!t.isEqualNode(i);){if(t.classList.contains("vditor-outline__action")){t.classList.contains("vditor-outline__action--close")?(t.classList.remove("vditor-outline__action--close"),t.parentElement.nextElementSibling.setAttribute("style","display:block")):(t.classList.add("vditor-outline__action--close"),t.parentElement.nextElementSibling.setAttribute("style","display:none")),e.preventDefault(),e.stopPropagation();break}if(t.getAttribute("data-target-id")){e.preventDefault(),e.stopPropagation();var n,r=document.getElementById(t.getAttribute("data-target-id"));if(!r)return;a?"auto"===a.options.height?(n=r.offsetTop+a.element.offsetTop,a.options.toolbarConfig.pin||(n+=a.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,n)):(a.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,a.element.offsetTop),a.preview.element.contains(o)?o.parentElement.scrollTop=r.offsetTop:o.scrollTop=r.offsetTop):window.scrollTo(window.scrollX,r.offsetTop);break}t=t.parentElement}})),r)}},408:(e,t,n)=>{n.d(t,{B:()=>a});var r=n(54),o=n(526),i=n(156),a=function(e,t){void 0===e&&(e=document),void 0===t&&(t=r.g.CDN);var n=i.plantumlRenderAdapter.getElements(e);0!==n.length&&(0,o.G)(t+"/dist/js/plantuml/plantuml-encoder.min.js","vditorPlantumlScript").then(function(){n.forEach(function(e){if(!e.parentElement.classList.contains("vditor-wysiwyg__pre")&&!e.parentElement.classList.contains("vditor-ir__marker--pre")){var t=i.plantumlRenderAdapter.getCode(e).trim();if(t)try{e.innerHTML='<object type="image/svg+xml" data="https://www.plantuml.com/plantuml/svg/~1'+plantumlEncoder.encode(t)+'"/>'}catch(t){e.className="vditor-reset--error",e.innerHTML="plantuml render error: <br>"+t}}})})}},895:(e,t,n)=>{n.d(t,{X:()=>r});var r=function(e){var t=Lute.New();return t.PutEmojis(e.emojis),t.SetEmojiSite(e.emojiSite),t.SetHeadingAnchor(e.headingAnchor),t.SetInlineMathAllowDigitAfterOpenMarker(e.inlineMathDigit),t.SetAutoSpace(e.autoSpace),t.SetToC(e.toc),t.SetFootnotes(e.footnotes),t.SetFixTermTypo(e.fixTermTypo),t.SetVditorCodeBlockPreview(e.codeBlockPreview),t.SetVditorMathBlockPreview(e.mathBlockPreview),t.SetSanitize(e.sanitize),t.SetChineseParagraphBeginningSpace(e.paragraphBeginningSpace),t.SetRenderListStyle(e.listStyle),t.SetLinkBase(e.linkBase),t.SetLinkPrefix(e.linkPrefix),t.SetMark(e.mark),t.SetGFMAutoLink(e.gfmAutoLink),e.lazyLoadImage&&t.SetImageLazyLoading(e.lazyLoadImage),t}},863:(e,t,n)=>{n.d(t,{E:()=>r});var r=function(t,e,n){void 0===e&&(e="zh_CN"),void 0===n&&(n="classic");var e=t.getBoundingClientRect(),r=(document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'+("dark"===n?" vditor--dark":"")+'">\n    <div class="vditor-img__bar">\n      <span class="vditor-img__btn" data-deg="0">\n        <svg><use xlink:href="#vditor-icon-redo"></use></svg>\n        '+window.VditorI18n.spin+"\n      </span>\n      <span class=\"vditor-img__btn\"  onclick=\"this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''\">\n        X &nbsp;"+window.VditorI18n.close+'\n      </span>\n    </div>\n    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = \'\';document.body.style.overflow = \'\'">\n      <img style="width: '+t.width+"px;height:"+t.height+"px;transform: translate3d("+e.left+"px, "+(e.top-36)+'px, 0)" src="'+t.getAttribute("src")+'">\n    </div>\n</div>'),document.body.style.overflow="hidden",document.querySelector(".vditor-img img")),o="translate3d("+Math.max(0,window.innerWidth-t.naturalWidth)/2+"px, "+Math.max(0,window.innerHeight-36-t.naturalHeight)/2+"px, 0)",i=(setTimeout(function(){r.setAttribute("style","transition: transform .3s ease-in-out;transform: "+o),setTimeout(function(){r.parentElement.scrollTo((r.parentElement.scrollWidth-r.parentElement.clientWidth)/2,(r.parentElement.scrollHeight-r.parentElement.clientHeight)/2)},400)}),document.querySelector(".vditor-img__btn"));i.addEventListener("click",function(){var e=parseInt(i.getAttribute("data-deg"),10)+90;e/90%2==1&&t.naturalWidth>r.parentElement.clientHeight?r.style.transform="translate3d("+Math.max(0,window.innerWidth-t.naturalWidth)/2+"px, "+(t.naturalWidth/2-t.naturalHeight/2)+"px, 0) rotateZ("+e+"deg)":r.style.transform=o+" rotateZ("+e+"deg)",i.setAttribute("data-deg",e.toString()),setTimeout(function(){r.parentElement.scrollTo((r.parentElement.scrollWidth-r.parentElement.clientWidth)/2,(r.parentElement.scrollHeight-r.parentElement.clientHeight)/2)},400)})}},312:(e,t,n)=>{n.d(t,{Y:()=>i});var r=n(54),o=n(578),i=function(e,t){void 0===t&&(t=r.g.CDN),r.g.CODE_THEME.includes(e)||(e="github");var n=document.getElementById("vditorHljsStyle"),t=t+"/dist/js/highlight.js/styles/"+e+".css";n?n.getAttribute("href")!==t&&(n.remove(),(0,o.c)(t,"vditorHljsStyle")):(0,o.c)(t,"vditorHljsStyle")}},227:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(578),o=function(e,t){e&&t&&(t=t+"/"+e+".css",(e=document.getElementById("vditorContentTheme"))?e.getAttribute("href")!==t&&(e.remove(),(0,r.c)(t,"vditorContentTheme")):(0,r.c)(t,"vditorContentTheme"))}},526:(e,t,n)=>{n.d(t,{G:()=>o,J:()=>r});var r=function(e,t){if(document.getElementById(t))return!1;var n=new XMLHttpRequest,e=(n.open("GET",e,!1),n.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),n.send(""),document.createElement("script"));e.type="text/javascript",e.text=n.responseText,e.id=t,document.head.appendChild(e)},o=function(r,o){return new Promise(function(e,t){if(document.getElementById(o))return e(),!1;var n=document.createElement("script");n.src=r,n.async=!0,document.head.appendChild(n),n.onerror=function(e){t(e)},n.onload=function(){if(document.getElementById(o))return n.remove(),e(),!1;n.id=o,e()}})}},578:(e,t,n)=>{n.d(t,{c:()=>r});var r=function(e,t){var n;document.getElementById(t)||((n=document.createElement("link")).id=t,n.rel="stylesheet",n.type="text/css",n.href=e,document.getElementsByTagName("head")[0].appendChild(n))}},51:(e,t,n)=>{n.d(t,{X:()=>r});var r=function(e){return e.replace(/\u00a0/g," ")}},794:(e,t,n)=>{n.d(t,{G6:()=>r,Le:()=>a,i7:()=>d,ns:()=>s,pK:()=>i,vU:()=>o,yl:()=>l});var r=function(){return-1<navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")},o=function(){return-1<navigator.userAgent.toLowerCase().indexOf("firefox")},i=function(){try{return"undefined"!=typeof localStorage}catch(e){return!1}},a=function(){return-1<navigator.userAgent.indexOf("iPhone")?"touchstart":"click"},l=function(e){return 0<=navigator.platform.toUpperCase().indexOf("MAC")?!(!e.metaKey||e.ctrlKey):!(e.metaKey||!e.ctrlKey)},s=function(e){return/Mac/.test(navigator.platform)||"iPhone"===navigator.platform?-1<e.indexOf("⇧")&&o()&&(e=e.replace(";",":").replace("=","+").replace("-","_")):-1<(e=(e=e.startsWith("⌘")?e.replace("⌘","⌘+"):e.startsWith("⌥")&&"⌘"!==e.substr(1,1)?e.replace("⌥","⌥+"):e.replace("⇧⌘","⌘+⇧+").replace("⌥⌘","⌥+⌘+")).replace("⌘","Ctrl").replace("⇧","Shift").replace("⌥","Alt")).indexOf("Shift")&&(e=e.replace(";",":").replace("=","+").replace("-","_")),e},d=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}},835:(e,t,n)=>{n.d(t,{W:()=>r,o:()=>o});var r=function(){return([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(parseInt(e,10)^window.crypto.getRandomValues(new Uint32Array(1))[0]&15>>parseInt(e,10)/4).toString(16)})},o=function(e,t){var t=(t=void 0===t?window.location.search:t).substring(t.indexOf("?")),n=t.indexOf("#");return new URLSearchParams(t.substring(0,0<=n?n:void 0)).get(e)}},827:(e,t,n)=>{n.d(t,{DX:()=>p,E2:()=>o,F9:()=>s,JQ:()=>r,O9:()=>a,a1:()=>l,fb:()=>c,lG:()=>d});var i=n(64),r=function(e,t){for(var n,r=c(e,t),o=!1;r&&!r.classList.contains("vditor-reset")&&!o;)(n=c(r.parentElement,t))?r=n:o=!0;return r||!1},o=function(e,t){for(var n,r=(0,i.S)(e,t),o=!1;r&&!r.classList.contains("vditor-reset")&&!o;)(n=(0,i.S)(r.parentElement,t))?r=n:o=!0;return r||!1},a=function(e){var t=o(e,"UL"),e=o(e,"OL"),n=t;return n=!e||t&&!e.contains(t)?n:e},l=function(e,t,n){if(!e)return!1;for(var r=e=3===e.nodeType?e.parentElement:e,o=!1;r&&!o&&!r.classList.contains("vditor-reset");)r.getAttribute(t)===n?o=!0:r=r.parentElement;return o&&r},s=function(e){if(!e)return!1;var t=e=3===e.nodeType?e.parentElement:e,n=!1,e=l(e,"data-block","0");if(e)return e;for(;t&&!n&&!t.classList.contains("vditor-reset");)"H1"===t.tagName||"H2"===t.tagName||"H3"===t.tagName||"H4"===t.tagName||"H5"===t.tagName||"H6"===t.tagName||"P"===t.tagName||"BLOCKQUOTE"===t.tagName||"OL"===t.tagName||"UL"===t.tagName?n=!0:t=t.parentElement;return n&&t},d=function(e,t){if(!e)return!1;for(var n=e=3===e.nodeType?e.parentElement:e,r=!1;n&&!r&&!n.classList.contains("vditor-reset");)n.nodeName===t?r=!0:n=n.parentElement;return r&&n},c=function(e,t){if(!e)return!1;for(var n=e=3===e.nodeType?e.parentElement:e,r=!1;n&&!r&&!n.classList.contains("vditor-reset");)n.classList.contains(t)?r=!0:n=n.parentElement;return r&&n},p=function(e){for(;e&&e.lastChild;)e=e.lastChild;return e}},64:(e,t,n)=>{n.d(t,{S:()=>r,W:()=>o});var r=function(e,t){if(!e)return!1;for(var n=e=3===e.nodeType?e.parentElement:e,r=!1;n&&!r&&!n.classList.contains("vditor-reset");)0===n.nodeName.indexOf(t)?r=!0:n=n.parentElement;return r&&n},o=function(e){e=r(e,"H");return!(!e||2!==e.tagName.length||"HR"===e.tagName)&&e}},640:(e,t,n)=>{n.d(t,{T:()=>a});var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0;r<e.length;r++){i=void 0;var o=e[r];for(var i in o)o.hasOwnProperty(i)&&("[object Object]"===Object.prototype.toString.call(o[i])?n[i]=a(n[i],o[i]):n[i]=o[i])}return n}},393:(e,t,n)=>{n.d(t,{$j:()=>p,Gb:()=>s,Hc:()=>c,Ny:()=>l,ib:()=>u,im:()=>d,oC:()=>m,zh:()=>a});var r=n(54),o=n(794),i=n(827),a=function(e){var t,n=e[e.currentMode].element;return 0<getSelection().rangeCount&&(t=getSelection().getRangeAt(0),n.isEqualNode(t.startContainer)||n.contains(t.startContainer))?t:e[e.currentMode].range||(n.focus(),(t=n.ownerDocument.createRange()).setStart(n,0),t.collapse(!0),t)},l=function(e){var t=window.getSelection().getRangeAt(0);if(!e.contains(t.startContainer)&&!(0,i.fb)(t.startContainer,"vditor-panel--none"))return{left:0,top:0};e=e.parentElement.getBoundingClientRect();if(0===t.getClientRects().length)if(3===t.startContainer.nodeType){var n=t.startContainer.parentElement;if(!(n&&0<n.getClientRects().length))return{left:0,top:0};n=n.getClientRects()[0]}else{var r=t.startContainer.children;if(r[t.startOffset]&&0<r[t.startOffset].getClientRects().length?n=r[t.startOffset].getClientRects()[0]:0<t.startContainer.childNodes.length?(r=t.cloneRange(),t.selectNode(t.startContainer.childNodes[Math.max(0,t.startOffset-1)]),n=t.getClientRects()[0],t.setEnd(r.endContainer,r.endOffset),t.setStart(r.startContainer,r.startOffset)):n=t.startContainer.getClientRects()[0],!n){for(var o=t.startContainer.childNodes[t.startOffset];!o.getClientRects||o.getClientRects&&0===o.getClientRects().length;)o=o.parentElement;n=o.getClientRects()[0]}}else n=t.getClientRects()[0];return{left:n.left-e.left,top:n.top-e.top}},s=function(e,t){if(!t){if(0===getSelection().rangeCount)return!1;t=getSelection().getRangeAt(0)}t=t.commonAncestorContainer;return e.isEqualNode(t)||e.contains(t)},c=function(e){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)},d=function(e,t,n){var r={end:0,start:0};if(!n){if(0===getSelection().rangeCount)return r;n=window.getSelection().getRangeAt(0)}return s(t,n)&&(t=n.cloneRange(),e.childNodes[0]&&e.childNodes[0].childNodes[0]?t.setStart(e.childNodes[0].childNodes[0],0):t.selectNodeContents(e),t.setEnd(n.startContainer,n.startOffset),r.start=t.toString().length,r.end=r.start+n.toString().length),r},p=function(e,t,n){var r=0,o=0,i=n.childNodes[o],a=!1,l=!1,s=(e=Math.max(0,e),t=Math.max(0,t),n.ownerDocument.createRange());for(s.setStart(i||n,0),s.collapse(!0);!l&&i;){var d=r+i.textContent.length;if(!a&&r<=e&&e<=d&&(0===e?s.setStart(i,0):3===i.childNodes[0].nodeType?s.setStart(i.childNodes[0],e-r):i.nextSibling?s.setStartBefore(i.nextSibling):s.setStartAfter(i),a=!0,e===t)){l=!0;break}a&&r<=t&&t<=d&&(0===t?s.setEnd(i,0):3===i.childNodes[0].nodeType?s.setEnd(i.childNodes[0],t-r):i.nextSibling?s.setEndBefore(i.nextSibling):s.setEndAfter(i),l=!0),r=d,i=n.childNodes[++o]}return!l&&n.childNodes[o-1]&&s.setStartBefore(n.childNodes[o-1]),c(s),s},u=function(e,t){e=e.querySelector("wbr");if(e){if(e.previousElementSibling)if(e.previousElementSibling.isSameNode(e.previousSibling)){if(e.previousElementSibling.lastChild)return t.setStartBefore(e),t.collapse(!0),c(t),!(0,o.i7)()||"EM"!==e.previousElementSibling.tagName&&"STRONG"!==e.previousElementSibling.tagName&&"S"!==e.previousElementSibling.tagName||(t.insertNode(document.createTextNode(r.g.ZWSP)),t.collapse(!1)),void e.remove();t.setStartAfter(e.previousElementSibling)}else t.setStart(e.previousSibling,e.previousSibling.textContent.length);else e.previousSibling?t.setStart(e.previousSibling,e.previousSibling.textContent.length):e.nextSibling?3===e.nextSibling.nodeType?t.setStart(e.nextSibling,0):t.setStartBefore(e.nextSibling):t.setStart(e.parentElement,0);t.collapse(!0),e.remove(),c(t)}},m=function(e,t){var n,r=document.createElement("div"),o=(r.innerHTML=e,r.querySelectorAll("p")),r=(1===o.length&&!o[0].previousSibling&&!o[0].nextSibling&&0<t[t.currentMode].element.children.length&&"P"===r.firstElementChild.tagName&&(e=o[0].innerHTML.trim()),document.createElement("div")),o=(r.innerHTML=e,a(t));""!==o.toString()&&(t[t.currentMode].preventInput=!0,document.execCommand("delete",!1,"")),r.firstElementChild&&"0"===r.firstElementChild.getAttribute("data-block")?(r.lastElementChild.insertAdjacentHTML("beforeend","<wbr>"),(n=(0,i.F9)(o.startContainer))?n.insertAdjacentHTML("afterend",r.innerHTML):t[t.currentMode].element.insertAdjacentHTML("beforeend",r.innerHTML),u(t[t.currentMode].element,o)):((n=document.createElement("template")).innerHTML=e,o.insertNode(n.content.cloneNode(!0)),o.collapse(!1),c(o))}}},y={};function r(e){var t=y[e];return void 0!==t||(t=y[e]={exports:{}},b[e](t,t.exports,r)),t.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var w={};{function k(e,t){var n;(e=(0,B.lG)(e.target,"SPAN"))&&(0,B.fb)(e,"vditor-toc")&&(e=t[t.currentMode].element.querySelector("#"+e.getAttribute("data-target-id")))&&("auto"===t.options.height?(n=e.offsetTop+t.element.offsetTop,t.options.toolbarConfig.pin||(n+=t.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,n)):(t.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,t.element.offsetTop),t[t.currentMode].element.scrollTop=e.offsetTop))}function E(e){"dark"===e.options.theme?e.element.classList.add("vditor--dark"):e.element.classList.remove("vditor--dark")}r.d(w,{default:()=>e});var x,L=r(872),O=r(54),T=r(51),D=function(e){return"sv"===e.currentMode?(0,T.X)((e.sv.element.textContent+"\n").replace(/\n\n$/,"\n")):"wysiwyg"===e.currentMode?e.lute.VditorDOM2Md(e.wysiwyg.element.innerHTML):"ir"===e.currentMode?e.lute.VditorIRDOM2Md(e.ir.element.innerHTML):""},C=r(526),M=(fe.prototype.renderEchart=function(e){var t=this;"block"===e.devtools.element.style.display&&(0,C.G)(e.options.cdn+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){t.ASTChart||(t.ASTChart=echarts.init(e.devtools.element.lastElementChild));try{t.element.lastElementChild.style.display="block",t.element.firstElementChild.innerHTML="",t.ASTChart.setOption({series:[{data:JSON.parse(e.lute.RenderEChartsJSON(D(e))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),t.ASTChart.resize()}catch(e){t.element.lastElementChild.style.display="none",t.element.firstElementChild.innerHTML=e}})},fe),I=r(794),j=function(t,e){e.forEach(function(e){t[e]&&(e=t[e].children[0])&&e.classList.contains("vditor-menu--current")&&e.classList.remove("vditor-menu--current")})},R=function(t,e){e.forEach(function(e){t[e]&&(e=t[e].children[0])&&!e.classList.contains("vditor-menu--current")&&e.classList.add("vditor-menu--current")})},P=function(t,e){e.forEach(function(e){t[e]&&(e=t[e].children[0])&&e.classList.contains(O.g.CLASS_MENU_DISABLED)&&e.classList.remove(O.g.CLASS_MENU_DISABLED)})},q=function(t,e){e.forEach(function(e){t[e]&&(e=t[e].children[0])&&!e.classList.contains(O.g.CLASS_MENU_DISABLED)&&e.classList.add(O.g.CLASS_MENU_DISABLED)})},A=function(t,e){e.forEach(function(e){t[e]&&t[e]&&(t[e].style.display="none")})},N=function(t,e){e.forEach(function(e){t[e]&&t[e]&&(t[e].style.display="block")})},s=function(e,t,n){t.includes("subToolbar")&&(e.toolbar.element.querySelectorAll(".vditor-hint").forEach(function(e){n&&e.isEqualNode(n)||(e.style.display="none")}),e.toolbar.elements.emoji)&&(e.toolbar.elements.emoji.lastElementChild.style.display="none"),t.includes("hint")&&(e.hint.element.style.display="none"),e.wysiwyg.popover&&t.includes("popover")&&(e.wysiwyg.popover.style.display="none")},a=function(t,n,r,e){r.addEventListener((0,I.Le)(),function(e){e.preventDefault(),e.stopPropagation(),r.classList.contains(O.g.CLASS_MENU_DISABLED)||(t.toolbar.element.querySelectorAll(".vditor-hint--current").forEach(function(e){e.classList.remove("vditor-hint--current")}),"block"===n.style.display?n.style.display="none":(s(t,["subToolbar","hint","popover"],r.parentElement.parentElement),r.classList.contains("vditor-tooltipped")||r.classList.add("vditor-hint--current"),n.style.display="block",t.toolbar.element.getBoundingClientRect().right-r.getBoundingClientRect().right<250?n.classList.add("vditor-panel--left"):n.classList.remove("vditor-panel--left")))})},B=r(827),z=r(64),J=function(e,t,n,r){r&&console.log(e+" - "+n+": "+t)},X=r(478),Y=r(314),Q=r(730),$=r(66),ee=r(218),te=r(702),ne=r(466),re=r(40),oe=r(563),ie=r(749),ae=r(408),U=function(t,n){var r;t&&("html-block"!==t.parentElement.getAttribute("data-type")&&("abc"===(r=t.firstElementChild.className.replace("language-",""))?(0,X.Q)(t,n.options.cdn):"mermaid"===r?(0,re.i)(t,n.options.cdn,n.options.theme):"markmap"===r?(0,oe.K)(t,n.options.cdn,n.options.theme):"flowchart"===r?(0,$.P)(t,n.options.cdn):"echarts"===r?(0,Y.p)(t,n.options.cdn,n.options.theme):"mindmap"===r?(0,ie.P)(t,n.options.cdn,n.options.theme):"plantuml"===r?(0,ae.B)(t,n.options.cdn):"graphviz"===r?(0,ee.v)(t,n.options.cdn):"math"===r?(0,ne.H)(t,{cdn:n.options.cdn,math:n.options.preview.math}):n.options.customRenders.find(function(e){if(e.language===r)return e.render(t,n),!0})||((0,te.s)(Object.assign({},n.options.preview.hljs),t,n.options.cdn),(0,Q.O)(t,n.options.preview.hljs))),t.setAttribute("data-render","1"))},V=r(393),h=function(t){var e,n;"sv"!==t.currentMode&&(e=t[t.currentMode].element,""===(n=t.outline.render(t))&&(n="[ToC]"),e.querySelectorAll('[data-type="toc-block"]').forEach(function(e){e.innerHTML=n,(0,ne.H)(e,{cdn:t.options.cdn,math:t.options.preview.math})}))},le=function(e,t,n,r){if(e.previousElementSibling&&e.previousElementSibling.classList.contains("vditor-toc")){if("Backspace"===n.key&&0===(0,V.im)(e,t[t.currentMode].element,r).start)return e.previousElementSibling.remove(),S(t),!0;if(at(t,n,r,e,e.previousElementSibling))return!0}if(e.nextElementSibling&&e.nextElementSibling.classList.contains("vditor-toc")){if("Delete"===n.key&&(0,V.im)(e,t[t.currentMode].element,r).start>=e.textContent.trimRight().length)return e.nextElementSibling.remove(),S(t),!0;if(it(t,n,r,e,e.nextElementSibling))return!0}if("Backspace"===n.key||"Delete"===n.key){e=(0,B.fb)(r.startContainer,"vditor-toc");if(e)return e.remove(),S(t),!0}},se=function(t,e,n,r){void 0===n&&(n=!1);var o=(0,B.F9)(e.startContainer);if(o&&!n&&"code-block"!==o.getAttribute("data-type")){if(pt(o.innerHTML)&&o.previousElementSibling||ut(o.innerHTML))return;for(var i=(0,V.im)(o,t.ir.element,e).start,a=!0,l=i-1;l>o.textContent.substr(0,i).lastIndexOf("\n");l--)if(" "!==o.textContent.charAt(l)&&"\t"!==o.textContent.charAt(l)){a=!1;break}0===i&&(a=!1);for(var s=!0,l=i-1;l<o.textContent.length;l++)if(" "!==o.textContent.charAt(l)&&"\n"!==o.textContent.charAt(l)){s=!1;break}if(a)return void("function"==typeof t.options.input&&t.options.input(D(t)));if(s&&!(0,B.fb)(e.startContainer,"vditor-ir__marker"))return(n=e.startContainer.previousSibling)&&3!==n.nodeType&&n.classList.contains("vditor-ir__node--expand")&&n.classList.remove("vditor-ir__node--expand"),void("function"==typeof t.options.input&&t.options.input(D(t)))}t.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(e){e.classList.remove("vditor-ir__node--expand")}),(o=o||t.ir.element).querySelector("wbr")||((n=(0,B.fb)(e.startContainer,"vditor-ir__preview"))?n.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>"):e.insertNode(document.createElement("wbr"))),o.querySelectorAll("[style]").forEach(function(e){e.removeAttribute("style")});var d,c,n=(o="link-ref-defs-block"===o.getAttribute("data-type")?t.ir.element:o).isEqualNode(t.ir.element),p=(0,B.a1)(o,"data-type","footnotes-block"),u="";n?u=o.innerHTML:(c=(0,z.S)(e.startContainer,"BLOCKQUOTE"),(f=(0,B.O9)(e.startContainer))&&(o=f),!c||f&&c.contains(f)||(o=c),u=(o=p?p:o).outerHTML,"UL"===o.tagName||"OL"===o.tagName?(f=o.previousElementSibling,c=o.nextElementSibling,!f||"UL"!==f.tagName&&"OL"!==f.tagName||(u=f.outerHTML+u,f.remove()),!c||"UL"!==c.tagName&&"OL"!==c.tagName||(u+=c.outerHTML,c.remove()),u=u.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")):o.previousElementSibling&&""!==o.previousElementSibling.textContent.replace(O.g.ZWSP,"")&&r&&"insertParagraph"===r.inputType&&(u=o.previousElementSibling.outerHTML+u,o.previousElementSibling.remove()),o.innerText.startsWith("```")||(t.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(e){e&&!o.isEqualNode(e)&&(u+=e.outerHTML,e.remove())}),t.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(e){e&&!o.isEqualNode(e)&&(u+=e.outerHTML,e.remove())}))),J("SpinVditorIRDOM",u,"argument",t.options.debugger),u=t.lute.SpinVditorIRDOM(u),J("SpinVditorIRDOM",u,"result",t.options.debugger),n?o.innerHTML=u:(o.outerHTML=u,p&&(f=(0,B.a1)(t.ir.element.querySelector("wbr"),"data-type","footnotes-def"))&&(r=(c=f.textContent).substring(1,c.indexOf("]:")),n=t.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+r+'"]'))&&n.setAttribute("aria-label",c.substr(r.length+3).trim().substr(0,24)));var m,p=t.ir.element.querySelectorAll("[data-type='link-ref-defs-block']"),f=(p.forEach(function(e,t){0===t?d=e:(d.insertAdjacentHTML("beforeend",e.innerHTML),e.remove())}),0<p.length&&t.ir.element.insertAdjacentElement("beforeend",p[0]),t.ir.element.querySelectorAll("[data-type='footnotes-block']"));f.forEach(function(e,t){0===t?m=e:(m.insertAdjacentHTML("beforeend",e.innerHTML),e.remove())}),0<f.length&&t.ir.element.insertAdjacentElement("beforeend",f[0]),(0,V.ib)(t.ir.element,e),t.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(e){U(e,t)}),h(t),v(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},p=function(e,t){var n,r;return!(""===e||(-1===e.indexOf("⇧")&&-1===e.indexOf("⌘")&&-1===e.indexOf("⌥")?(0,I.yl)(t)||t.altKey||t.shiftKey||t.code!==e:"⇧Tab"===e?(0,I.yl)(t)||t.altKey||!t.shiftKey||"Tab"!==t.code:(n=e.split(""),e.startsWith("⌥")?(r=3===n.length?n[2]:n[1],(3===n.length?!(0,I.yl)(t):(0,I.yl)(t))||!t.altKey||t.shiftKey||t.code!==(/^[0-9]$/.test(r)?"Digit":"Key")+r):(e=(r=2<(n="⌘Enter"===e?["⌘","Enter"]:n).length&&"⇧"===n[0])?n[2]:n[1],!r||!(0,I.vU)()&&/Mac/.test(navigator.platform)||("-"===e?e="_":"="===e&&(e="+")),!(0,I.yl)(t)||t.key.toLowerCase()!==e.toLowerCase()||t.altKey||!(!r&&!t.shiftKey||r&&t.shiftKey)))))},de=function(r,e){e.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(e){e.classList.remove("vditor-ir__node--expand")});var t,e=(0,B.JQ)(r.startContainer,"vditor-ir__node"),n=!r.collapsed&&(0,B.JQ)(r.endContainer,"vditor-ir__node");if(r.collapsed||e&&e===n){e&&(e.classList.add("vditor-ir__node--expand"),e.classList.remove("vditor-ir__node--hidden"),(0,V.Hc)(r));n=function(){var e=r.startContainer;if(3!==e.nodeType||e.nodeValue.length===r.startOffset){for(var t=e.nextSibling;t&&""===t.textContent;)t=t.nextSibling;if(t)return!(!t||3===t.nodeType||!t.classList.contains("vditor-ir__node")||t.getAttribute("data-block"))&&t;var n=(0,B.fb)(e,"vditor-ir__marker");if(n&&!n.nextSibling){n=e.parentElement.parentElement.nextSibling;if(n&&3!==n.nodeType&&n.classList.contains("vditor-ir__node"))return n}}return!1}();if(!n)return e=r.startContainer,t=e.previousSibling,(e=!(3!==e.nodeType||0!==r.startOffset||!t||3===t.nodeType||!t.classList.contains("vditor-ir__node")||t.getAttribute("data-block"))&&t)?(e.classList.add("vditor-ir__node--expand"),void e.classList.remove("vditor-ir__node--hidden")):void 0;n.classList.add("vditor-ir__node--expand"),n.classList.remove("vditor-ir__node--hidden")}},ce=r(863),pe=function(e,o){e.querySelectorAll("[data-type=footnotes-link]").forEach(function(e){for(var t=e.parentElement,n=t.nextSibling;n&&n.textContent.startsWith("    ");){var r=n;r.childNodes.forEach(function(e){t.append(e.cloneNode(!0))}),n=n.nextSibling,r.remove()}o&&o(t)})},d=function(t,e){var n,r=getSelection().getRangeAt(0).cloneRange(),o=r.startContainer,i=(3!==r.startContainer.nodeType&&"DIV"===r.startContainer.tagName&&(o=r.startContainer.childNodes[r.startOffset-1]),(0,B.a1)(o,"data-block","0"));if(i&&e&&("deleteContentBackward"===e.inputType||" "===e.data)){for(var a=(0,V.im)(i,t.sv.element,r).start,l=!0,s=a-1;s>i.textContent.substr(0,a).lastIndexOf("\n");s--)if(" "!==i.textContent.charAt(s)&&"\t"!==i.textContent.charAt(s)){l=!1;break}if(l=0===a?!1:l)return void u(t);if("deleteContentBackward"===e.inputType){var d=(0,B.a1)(o,"data-type","code-block-open-marker")||(0,B.a1)(o,"data-type","code-block-close-marker");if(d){if("code-block-close-marker"===d.getAttribute("data-type")&&(c=Ue(o,"code-block-open-marker")))return c.textContent=d.textContent,void u(t);if("code-block-open-marker"===d.getAttribute("data-type")&&(c=Ue(o,"code-block-close-marker",!1)))return c.textContent=d.textContent,void u(t)}var c=(0,B.a1)(o,"data-type","math-block-open-marker");if(c)return void((d=c.nextElementSibling.nextElementSibling)&&"math-block-close-marker"===d.getAttribute("data-type")&&(d.remove(),u(t)));i.querySelectorAll('[data-type="code-block-open-marker"]').forEach(function(e){1===e.textContent.length&&e.remove()}),i.querySelectorAll('[data-type="code-block-close-marker"]').forEach(function(e){1===e.textContent.length&&e.remove()});var c=(0,B.a1)(o,"data-type","heading-marker");if(c&&-1===c.textContent.indexOf("#"))return void u(t)}if((" "===e.data||"deleteContentBackward"===e.inputType)&&((0,B.a1)(o,"data-type","padding")||(0,B.a1)(o,"data-type","li-marker")||(0,B.a1)(o,"data-type","task-marker")||(0,B.a1)(o,"data-type","blockquote-marker")))return void u(t)}i&&"$$"===i.textContent.trimRight()?u(t):("link-ref-defs-block"===(null==(d=(i=i||t.sv.element).firstElementChild)?void 0:d.getAttribute("data-type"))&&(i=t.sv.element),-1===(i=(0,B.a1)(o,"data-type","footnotes-link")?t.sv.element:i).textContent.indexOf(Lute.Caret)&&r.insertNode(document.createTextNode(Lute.Caret)),i.querySelectorAll("[style]").forEach(function(e){e.removeAttribute("style")}),i.querySelectorAll("font").forEach(function(e){e.outerHTML=e.innerHTML}),c=i.textContent,c=(e=i.isEqualNode(t.sv.element))?i.textContent:(i.previousElementSibling&&(c=i.previousElementSibling.textContent+c,i.previousElementSibling.remove()),i.previousElementSibling&&0===c.indexOf("---\n")&&(c=i.previousElementSibling.textContent+c,i.previousElementSibling.remove()),n="",t.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(e,t){e&&!i.isEqualNode(e.parentElement)&&(n+=e.parentElement.textContent+"\n",e.parentElement.remove())}),t.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach(function(e,t){e&&!i.isEqualNode(e.parentElement)&&(n+=e.parentElement.textContent+"\n",e.parentElement.remove())}),n+c),c=Ve(c,t),e?i.innerHTML=c:i.outerHTML=c,t.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(e){t.sv.element.insertAdjacentElement("beforeend",e.parentElement)}),pe(t.sv.element,function(e){t.sv.element.insertAdjacentElement("beforeend",e)}),(0,V.ib)(t.sv.element,r),_(t),u(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0}))},ue=r(227),l=function(e){var t,n=window.innerWidth<=O.g.MOBILE_WIDTH?10:35;"none"!==e.wysiwyg.element.parentElement.style.display&&(t=(e.wysiwyg.element.parentElement.clientWidth-e.options.preview.maxWidth)/2,e.wysiwyg.element.style.padding="10px "+Math.max(n,t)+"px"),"none"!==e.ir.element.parentElement.style.display&&(t=(e.ir.element.parentElement.clientWidth-e.options.preview.maxWidth)/2,e.ir.element.style.padding="10px "+Math.max(n,t)+"px"),"block"!==e.preview.element.style.display?e.toolbar.element.style.paddingLeft=Math.max(5,parseInt(e[e.currentMode].element.style.paddingLeft||"0",10)+("left"===e.options.outline.position?e.outline.element.offsetWidth:0))+"px":e.toolbar.element.style.paddingLeft=5+("left"===e.options.outline.position?e.outline.element.offsetWidth:0)+"px"},me=function(e){var t;e.options.typewriterMode&&(t=window.innerHeight,t="number"==typeof e.options.height?(t=e.options.height,"number"==typeof e.options.minHeight&&(t=Math.max(t,e.options.minHeight)),Math.min(window.innerHeight,t)):e.element.clientHeight,e.element.classList.contains("vditor--fullscreen")&&(t=window.innerHeight),e[e.currentMode].element.style.setProperty("--editor-bottom",(t-e.toolbar.element.offsetHeight)/2+"px"))};function fe(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}function he(){window.removeEventListener("resize",x)}var ve,ge=function(n){clearTimeout(n[n.currentMode].hlToolbarTimeoutId),n[n.currentMode].hlToolbarTimeoutId=window.setTimeout(function(){var e,t;"false"!==n[n.currentMode].element.getAttribute("contenteditable")&&(0,V.Gb)(n[n.currentMode].element)&&(j(n.toolbar.elements,O.g.EDIT_TOOLBARS),P(n.toolbar.elements,O.g.EDIT_TOOLBARS),e=(t=(0,V.zh)(n)).startContainer,(e=3===t.startContainer.nodeType?t.startContainer.parentElement:e).classList.contains("vditor-reset")&&(e=e.childNodes[t.startOffset]),("sv"===n.currentMode?(0,B.a1)(e,"data-type","heading"):(0,z.W)(e))&&R(n.toolbar.elements,["headings"]),("sv"===n.currentMode?(0,B.a1)(e,"data-type","blockquote"):(0,B.lG)(e,"BLOCKQUOTE"))&&R(n.toolbar.elements,["quote"]),(0,B.a1)(e,"data-type","strong")&&R(n.toolbar.elements,["bold"]),(0,B.a1)(e,"data-type","em")&&R(n.toolbar.elements,["italic"]),(0,B.a1)(e,"data-type","s")&&R(n.toolbar.elements,["strike"]),(0,B.a1)(e,"data-type","a")&&R(n.toolbar.elements,["link"]),((t=(0,B.lG)(e,"LI"))?(t.classList.contains("vditor-task")?R(n.toolbar.elements,["check"]):"OL"===t.parentElement.tagName?R(n.toolbar.elements,["ordered-list"]):"UL"===t.parentElement.tagName&&R(n.toolbar.elements,["list"]),P):q)(n.toolbar.elements,["outdent","indent"]),(0,B.a1)(e,"data-type","code-block")&&(q(n.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),R(n.toolbar.elements,["code"])),(0,B.a1)(e,"data-type","code")&&(q(n.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),R(n.toolbar.elements,["inline-code"])),(0,B.a1)(e,"data-type","table"))&&q(n.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])},200)},W=function(t,n){(n=void 0===n?{enableAddUndoStack:!0,enableHint:!1,enableInput:!0}:n).enableHint&&t.hint.render(t),clearTimeout(t.wysiwyg.afterRenderTimeoutId),t.wysiwyg.afterRenderTimeoutId=window.setTimeout(function(){var e;t.wysiwyg.composingLock||(e=D(t),"function"==typeof t.options.input&&n.enableInput&&t.options.input(e),t.options.counter.enable&&t.counter.render(t,e),t.options.cache.enable&&(0,I.pK)()&&(localStorage.setItem(t.options.cache.id,e),t.options.cache.after)&&t.options.cache.after(e),t.devtools&&t.devtools.renderEchart(t),n.enableAddUndoStack&&t.undo.addToUndoStack(t))},t.options.undoDelay)},be=function(e){for(var t="",n=e.nextSibling;n;)3===n.nodeType?t+=n.textContent:t+=n.outerHTML,n=n.nextSibling;return t},ye=function(e){for(var t="",n=e.previousSibling;n;)t=3===n.nodeType?n.textContent+t:n.outerHTML+t,n=n.previousSibling;return t},we=function(r,o){Array.from(r.wysiwyg.element.childNodes).find(function(e){var t,n;return 3===e.nodeType?((t=document.createElement("p")).setAttribute("data-block","0"),t.textContent=e.textContent,n=3===o.startContainer.nodeType?o.startOffset:e.textContent.length,e.parentNode.insertBefore(t,e),e.remove(),o.setStart(t.firstChild,Math.min(t.firstChild.textContent.length,n)),o.collapse(!0),(0,V.Hc)(o),!0):e.getAttribute("data-block")?void 0:("P"===e.tagName?e.remove():("DIV"===e.tagName?(o.insertNode(document.createElement("wbr")),e.outerHTML='<p data-block="0">'+e.innerHTML+"</p>"):"BR"===e.tagName?e.outerHTML='<p data-block="0">'+e.outerHTML+"<wbr></p>":(o.insertNode(document.createElement("wbr")),e.outerHTML='<p data-block="0">'+e.outerHTML+"</p>"),(0,V.ib)(r.wysiwyg.element,o),o=getSelection().getRangeAt(0)),!0)})},ke=function(e,t){var n=(0,V.zh)(e),r=(0,B.F9)(n.startContainer);(r=(r=r||n.startContainer.childNodes[n.startOffset])||0!==e.wysiwyg.element.children.length?r:e.wysiwyg.element)&&!r.classList.contains("vditor-wysiwyg__block")&&(n.insertNode(document.createElement("wbr")),"<wbr>"===r.innerHTML.trim()&&(r.innerHTML="<wbr><br>"),"BLOCKQUOTE"===r.tagName||r.classList.contains("vditor-reset")?r.innerHTML="<"+t+' data-block="0">'+r.innerHTML.trim()+"</"+t+">":r.outerHTML="<"+t+' data-block="0">'+r.innerHTML.trim()+"</"+t+">",(0,V.ib)(e.wysiwyg.element,n),h(e))},Ee=function(e){var t=getSelection().getRangeAt(0),n=(0,B.F9)(t.startContainer);(n=n||t.startContainer.childNodes[t.startOffset])&&(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.innerHTML+"</p>",(0,V.ib)(e.wysiwyg.element,t)),e.wysiwyg.popover.style.display="none"},xe=function(e,t,n){void 0===n&&(n=!0);var r=e.previousElementSibling,o=r.ownerDocument.createRange();"CODE"===r.tagName?(r.style.display="inline-block",n?o.setStart(r.firstChild,1):o.selectNodeContents(r)):(r.style.display="block",r.firstChild.firstChild||r.firstChild.appendChild(document.createTextNode("")),o.selectNodeContents(r.firstChild)),n?o.collapse(!0):o.collapse(!1),(0,V.Hc)(o),e.firstElementChild.classList.contains("language-mindmap")||_(t)},G=function(e,t){if(p("⇧⌘X",t))return(e=e.wysiwyg.popover.querySelector('[data-type="remove"]'))&&e.click(),t.preventDefault(),!0},H=function(N){clearTimeout(N.wysiwyg.hlToolbarTimeoutId),N.wysiwyg.hlToolbarTimeoutId=window.setTimeout(function(){var t,e,n,r,o,i,u,a,l,s,d,c,p,m,f,h,v,g,b,y,w,k,E,x,_,S,L,T,C,M,A,H;"false"!==N.wysiwyg.element.getAttribute("contenteditable")&&(0,V.Gb)(N.wysiwyg.element)&&(j(N.toolbar.elements,O.g.EDIT_TOOLBARS),P(N.toolbar.elements,O.g.EDIT_TOOLBARS),e=(t=getSelection().getRangeAt(0)).startContainer,e=3===t.startContainer.nodeType?t.startContainer.parentElement:e.childNodes[t.startOffset>=e.childNodes.length?e.childNodes.length-1:t.startOffset],(n=(0,B.a1)(e,"data-type","footnotes-block"))?(N.wysiwyg.popover.innerHTML="",K(n,N),F(N,n)):(((n=(0,B.lG)(e,"LI"))?(n.classList.contains("vditor-task")?R(N.toolbar.elements,["check"]):"OL"===n.parentElement.tagName?R(N.toolbar.elements,["ordered-list"]):"UL"===n.parentElement.tagName&&R(N.toolbar.elements,["list"]),P):q)(N.toolbar.elements,["outdent","indent"]),(0,B.lG)(e,"BLOCKQUOTE")&&R(N.toolbar.elements,["quote"]),((0,B.lG)(e,"B")||(0,B.lG)(e,"STRONG"))&&R(N.toolbar.elements,["bold"]),((0,B.lG)(e,"I")||(0,B.lG)(e,"EM"))&&R(N.toolbar.elements,["italic"]),((0,B.lG)(e,"STRIKE")||(0,B.lG)(e,"S"))&&R(N.toolbar.elements,["strike"]),N.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach(function(e){e.classList.remove("vditor-comment--focus")}),(i=(0,B.fb)(e,"vditor-comment"))&&(1<(r=i.getAttribute("data-cmtids").split(" ")).length&&i.nextSibling.isSameNode(i.nextElementSibling)&&(o=i.nextElementSibling.getAttribute("data-cmtids").split(" "),r.find(function(e){if(o.includes(e))return r=[e],!0})),N.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(e){-1<e.getAttribute("data-cmtids").indexOf(r[0])&&e.classList.add("vditor-comment--focus")})),(i=(0,B.lG)(e,"A"))&&R(N.toolbar.elements,["link"]),u=(0,B.lG)(e,"TABLE"),a=(0,z.W)(e),(0,B.lG)(e,"CODE")?(0,B.lG)(e,"PRE")?(q(N.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),R(N.toolbar.elements,["code"])):(q(N.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),R(N.toolbar.elements,["inline-code"])):a?(q(N.toolbar.elements,["bold"]),R(N.toolbar.elements,["headings"])):u&&q(N.toolbar.elements,["table"]),(l=(0,B.fb)(e,"vditor-toc"))?(N.wysiwyg.popover.innerHTML="",K(l,N),F(N,l)):((s=(0,z.S)(e,"BLOCKQUOTE"))&&(N.wysiwyg.popover.innerHTML="",Se(t,s,N),Le(t,s,N),K(s,N),F(N,s)),n&&(N.wysiwyg.popover.innerHTML="",Se(t,n,N),Le(t,n,N),K(n,N),F(N,n)),u&&(N.options.lang,N.options,N.wysiwyg.popover.innerHTML="",d=function(){var e=u.rows.length,t=u.rows[0].cells.length,n=parseInt(g.value,10)||e,r=parseInt(y.value,10)||t;if(n!==e||t!==r){if(t!==r)for(var o=r-t,i=0;i<u.rows.length;i++)if(0<o)for(var a=0;a<o;a++)0===i?u.rows[i].lastElementChild.insertAdjacentHTML("afterend","<th> </th>"):u.rows[i].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var l=t-1;r<=l;l--)u.rows[i].cells[l].remove();if(e!==n){var s=n-e;if(0<s){for(var d="<tr>",c=0;c<r;c++)d+="<td> </td>";for(var p=0;p<s;p++)u.querySelector("tbody")?u.querySelector("tbody").insertAdjacentHTML("beforeend",d):u.querySelector("thead").insertAdjacentHTML("afterend",d+"</tr>")}else for(c=e-1;n<=c;c--)u.rows[c].remove(),1===u.rows.length&&u.querySelector("tbody").remove()}"function"==typeof N.options.input&&N.options.input(D(N))}},c=function(e){ct(u,e),("right"===e?(p.classList.remove("vditor-icon--current"),m.classList.remove("vditor-icon--current"),f):"center"===e?(p.classList.remove("vditor-icon--current"),f.classList.remove("vditor-icon--current"),m):(m.classList.remove("vditor-icon--current"),f.classList.remove("vditor-icon--current"),p)).classList.add("vditor-icon--current"),(0,V.Hc)(t),W(N)},S=(0,B.lG)(e,"TD"),w=(0,B.lG)(e,"TH"),H="left",S?H=S.getAttribute("align")||"left":w&&(H=w.getAttribute("align")||"center"),(p=document.createElement("button")).setAttribute("type","button"),p.setAttribute("aria-label",window.VditorI18n.alignLeft+"<"+(0,I.ns)("⇧⌘L")+">"),p.setAttribute("data-type","left"),p.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',p.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+("left"===H?" vditor-icon--current":""),p.onclick=function(){c("left")},(m=document.createElement("button")).setAttribute("type","button"),m.setAttribute("aria-label",window.VditorI18n.alignCenter+"<"+(0,I.ns)("⇧⌘C")+">"),m.setAttribute("data-type","center"),m.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',m.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+("center"===H?" vditor-icon--current":""),m.onclick=function(){c("center")},(f=document.createElement("button")).setAttribute("type","button"),f.setAttribute("aria-label",window.VditorI18n.alignRight+"<"+(0,I.ns)("⇧⌘R")+">"),f.setAttribute("data-type","right"),f.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',f.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+("right"===H?" vditor-icon--current":""),f.onclick=function(){c("right")},(S=document.createElement("button")).setAttribute("type","button"),S.setAttribute("aria-label",window.VditorI18n.insertRowBelow+"<"+(0,I.ns)("⌘=")+">"),S.setAttribute("data-type","insertRow"),S.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',S.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",S.onclick=function(){var e=getSelection().getRangeAt(0).startContainer,e=(0,B.lG)(e,"TD")||(0,B.lG)(e,"TH");e&&vt(N,t,e)},(w=document.createElement("button")).setAttribute("type","button"),w.setAttribute("aria-label",window.VditorI18n.insertRowAbove+"<"+(0,I.ns)("⇧⌘F")+">"),w.setAttribute("data-type","insertRow"),w.innerHTML='<svg><use xlink:href="#vditor-icon-insert-rowb"></use></svg>',w.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",w.onclick=function(){var e=getSelection().getRangeAt(0).startContainer,e=(0,B.lG)(e,"TD")||(0,B.lG)(e,"TH");e&&gt(N,t,e)},(H=document.createElement("button")).setAttribute("type","button"),H.setAttribute("aria-label",window.VditorI18n.insertColumnRight+"<"+(0,I.ns)("⇧⌘=")+">"),H.setAttribute("data-type","insertColumn"),H.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',H.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",H.onclick=function(){var e=getSelection().getRangeAt(0).startContainer,e=(0,B.lG)(e,"TD")||(0,B.lG)(e,"TH");e&&bt(N,u,e)},(A=document.createElement("button")).setAttribute("type","button"),A.setAttribute("aria-label",window.VditorI18n.insertColumnLeft+"<"+(0,I.ns)("⇧⌘G")+">"),A.setAttribute("data-type","insertColumn"),A.innerHTML='<svg><use xlink:href="#vditor-icon-insert-columnb"></use></svg>',A.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",A.onclick=function(){var e=getSelection().getRangeAt(0).startContainer,e=(0,B.lG)(e,"TD")||(0,B.lG)(e,"TH");e&&bt(N,u,e,"beforebegin")},(h=document.createElement("button")).setAttribute("type","button"),h.setAttribute("aria-label",window.VditorI18n["delete-row"]+"<"+(0,I.ns)("⌘-")+">"),h.setAttribute("data-type","deleteRow"),h.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',h.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",h.onclick=function(){var e=getSelection().getRangeAt(0).startContainer,e=(0,B.lG)(e,"TD")||(0,B.lG)(e,"TH");e&&yt(N,t,e)},(v=document.createElement("button")).setAttribute("type","button"),v.setAttribute("aria-label",window.VditorI18n["delete-column"]+"<"+(0,I.ns)("⇧⌘-")+">"),v.setAttribute("data-type","deleteColumn"),v.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',v.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",v.onclick=function(){var e=getSelection().getRangeAt(0).startContainer,e=(0,B.lG)(e,"TD")||(0,B.lG)(e,"TH");e&&wt(N,t,u,e)},(C=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.row),C.className="vditor-tooltipped vditor-tooltipped__n",g=document.createElement("input"),C.appendChild(g),g.type="number",g.min="1",g.className="vditor-input",g.style.width="42px",g.style.textAlign="center",g.setAttribute("placeholder",window.VditorI18n.row),g.value=u.rows.length.toString(),g.oninput=function(){d()},g.onkeydown=function(e){if(!e.isComposing)return"Tab"===e.key?(y.focus(),y.select(),void e.preventDefault()):void(G(N,e)||Z(e,t))},(b=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.column),b.className="vditor-tooltipped vditor-tooltipped__n",y=document.createElement("input"),b.appendChild(y),y.type="number",y.min="1",y.className="vditor-input",y.style.width="42px",y.style.textAlign="center",y.setAttribute("placeholder",window.VditorI18n.column),y.value=u.rows[0].cells.length.toString(),y.oninput=function(){d()},y.onkeydown=function(e){if(!e.isComposing)return"Tab"===e.key?(g.focus(),g.select(),void e.preventDefault()):void(G(N,e)||Z(e,t))},Se(t,u,N),Le(t,u,N),K(u,N),N.wysiwyg.popover.insertAdjacentElement("beforeend",p),N.wysiwyg.popover.insertAdjacentElement("beforeend",m),N.wysiwyg.popover.insertAdjacentElement("beforeend",f),N.wysiwyg.popover.insertAdjacentElement("beforeend",w),N.wysiwyg.popover.insertAdjacentElement("beforeend",S),N.wysiwyg.popover.insertAdjacentElement("beforeend",A),N.wysiwyg.popover.insertAdjacentElement("beforeend",H),N.wysiwyg.popover.insertAdjacentElement("beforeend",h),N.wysiwyg.popover.insertAdjacentElement("beforeend",v),N.wysiwyg.popover.insertAdjacentElement("beforeend",C),N.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),N.wysiwyg.popover.insertAdjacentElement("beforeend",b),F(N,u)),(w=(0,B.a1)(e,"data-type","link-ref"))&&_e(N,w,t),(k=(0,B.a1)(e,"data-type","footnotes-ref"))&&(N.options.lang,N.options,N.wysiwyg.popover.innerHTML="",(C=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.footnoteRef+"<"+(0,I.ns)("⌥Enter")+">"),C.className="vditor-tooltipped vditor-tooltipped__n",E=document.createElement("input"),C.appendChild(E),E.className="vditor-input",E.setAttribute("placeholder",window.VditorI18n.footnoteRef+"<"+(0,I.ns)("⌥Enter")+">"),E.style.width="120px",E.value=k.getAttribute("data-footnotes-label"),E.oninput=function(){""!==E.value.trim()&&k.setAttribute("data-footnotes-label",E.value),"function"==typeof N.options.input&&N.options.input(D(N))},E.onkeydown=function(e){e.isComposing||G(N,e)||Z(e,t)},K(k,N),N.wysiwyg.popover.insertAdjacentElement("beforeend",C),F(N,k)),x=(0,B.fb)(e,"vditor-wysiwyg__block"),_=!!x&&-1<x.getAttribute("data-type").indexOf("block"),N.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(e){x&&(!_||x.contains(e))||(e.previousElementSibling.style.display="none")}),x&&_?(N.wysiwyg.popover.innerHTML="",Se(t,x,N),Le(t,x,N),K(x,N),"code-block"===x.getAttribute("data-type")&&((S=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.language+"<"+(0,I.ns)("⌥Enter")+">"),S.className="vditor-tooltipped vditor-tooltipped__n",L=document.createElement("input"),S.appendChild(L),T=x.firstElementChild.firstElementChild,L.className="vditor-input",L.setAttribute("placeholder",window.VditorI18n.language+"<"+(0,I.ns)("⌥Enter")+">"),L.value=-1<T.className.indexOf("language-")?T.className.split("-")[1].split(" ")[0]:"",L.oninput=function(e){""!==L.value.trim()?T.className="language-"+L.value:(T.className="",N.hint.recentLanguage=""),x.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(x.lastElementChild.innerHTML=x.firstElementChild.innerHTML,U(x.lastElementChild,N)),W(N),1===e.detail&&(t.setStart(T.firstChild,0),t.collapse(!0),(0,V.Hc)(t))},L.onkeydown=function(e){e.isComposing||G(N,e)||("Escape"===e.key&&"block"===N.hint.element.style.display?(N.hint.element.style.display="none",e.preventDefault()):(N.hint.select(e,N),Z(e,t)))},L.onkeyup=function(e){var t,n;e.isComposing||"Enter"===e.key||"ArrowUp"===e.key||"Escape"===e.key||"ArrowDown"===e.key||(t=[],n=L.value.substring(0,L.selectionStart),(N.options.preview.hljs.langs||O.g.CODE_LANGUAGES).forEach(function(e){-1<e.indexOf(n.toLowerCase())&&t.push({html:e,value:e})}),N.hint.genHTML(t,n,N),e.preventDefault())},N.wysiwyg.popover.insertAdjacentElement("beforeend",S)),F(N,x)):x=void 0,a&&(N.wysiwyg.popover.innerHTML="",(C=document.createElement("span")).setAttribute("aria-label","ID<"+(0,I.ns)("⌥Enter")+">"),C.className="vditor-tooltipped vditor-tooltipped__n",M=document.createElement("input"),C.appendChild(M),M.className="vditor-input",M.setAttribute("placeholder","ID<"+(0,I.ns)("⌥Enter")+">"),M.style.width="120px",M.value=a.getAttribute("data-id")||"",M.oninput=function(){a.setAttribute("data-id",M.value),"function"==typeof N.options.input&&N.options.input(D(N))},M.onkeydown=function(e){e.isComposing||G(N,e)||Z(e,t)},Se(t,a,N),Le(t,a,N),K(a,N),N.wysiwyg.popover.insertAdjacentElement("beforeend",C),F(N,a)),i&&Ce(N,i,t),s||n||u||x||i||w||k||a||l||((A=(0,B.a1)(e,"data-block","0"))&&A.parentElement.isEqualNode(N.wysiwyg.element)?(N.wysiwyg.popover.innerHTML="",Se(t,A,N),Le(t,A,N),K(A,N),F(N,A)):N.wysiwyg.popover.style.display="none"),N.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach(function(e){e.style.display="none"}),(H=(0,B.a1)(t.startContainer,"data-type","backslash"))&&(H.querySelector("span").style.display="inline"))))},200)},F=function(e,t){var n=t,t=(0,B.lG)(t,"TABLE");t&&(n=t),e.wysiwyg.popover.style.left="0",e.wysiwyg.popover.style.display="block",e.wysiwyg.popover.style.top=Math.max(-8,n.offsetTop-21-e.wysiwyg.element.scrollTop)+"px",e.wysiwyg.popover.style.left=Math.min(n.offsetLeft,e.wysiwyg.element.clientWidth-e.wysiwyg.popover.clientWidth)+"px",e.wysiwyg.popover.setAttribute("data-top",(n.offsetTop-21).toString())},_e=function(t,n,r){void 0===r&&(r=getSelection().getRangeAt(0)),t.wysiwyg.popover.innerHTML="";function e(){""!==i.value.trim()&&("IMG"===n.tagName?n.setAttribute("alt",i.value):n.textContent=i.value),""!==l.value.trim()&&n.setAttribute("data-link-label",l.value),"function"==typeof t.options.input&&t.options.input(D(t))}var o=document.createElement("span"),i=(o.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),o.className="vditor-tooltipped vditor-tooltipped__n",document.createElement("input")),a=(o.appendChild(i),i.className="vditor-input",i.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),i.style.width="120px",i.value=n.getAttribute("alt")||n.textContent,i.oninput=function(){e()},i.onkeydown=function(e){G(t,e)||Z(e,r)||Te(t,n,e,l)},document.createElement("span")),l=(a.setAttribute("aria-label",window.VditorI18n.linkRef),a.className="vditor-tooltipped vditor-tooltipped__n",document.createElement("input"));a.appendChild(l),l.className="vditor-input",l.setAttribute("placeholder",window.VditorI18n.linkRef),l.value=n.getAttribute("data-link-label"),l.oninput=function(){e()},l.onkeydown=function(e){G(t,e)||Z(e,r)||Te(t,n,e,i)},K(n,t),t.wysiwyg.popover.insertAdjacentElement("beforeend",o),t.wysiwyg.popover.insertAdjacentElement("beforeend",a),F(t,n)},Se=function(e,t,n){var r,o=t.previousElementSibling;o&&(t.parentElement.isEqualNode(n.wysiwyg.element)||"LI"===t.tagName)&&((r=document.createElement("button")).setAttribute("type","button"),r.setAttribute("data-type","up"),r.setAttribute("aria-label",window.VditorI18n.up+"<"+(0,I.ns)("⇧⌘U")+">"),r.innerHTML='<svg><use xlink:href="#vditor-icon-up"></use></svg>',r.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",r.onclick=function(){e.insertNode(document.createElement("wbr")),o.insertAdjacentElement("beforebegin",t),(0,V.ib)(n.wysiwyg.element,e),W(n),H(n),_(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",r))},Le=function(e,t,n){var r,o=t.nextElementSibling;o&&(t.parentElement.isEqualNode(n.wysiwyg.element)||"LI"===t.tagName)&&((r=document.createElement("button")).setAttribute("type","button"),r.setAttribute("data-type","down"),r.setAttribute("aria-label",window.VditorI18n.down+"<"+(0,I.ns)("⇧⌘D")+">"),r.innerHTML='<svg><use xlink:href="#vditor-icon-down"></use></svg>',r.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",r.onclick=function(){e.insertNode(document.createElement("wbr")),o.insertAdjacentElement("afterend",t),(0,V.ib)(n.wysiwyg.element,e),W(n),H(n),_(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",r))},K=function(t,n){var e=document.createElement("button");e.setAttribute("type","button"),e.setAttribute("data-type","remove"),e.setAttribute("aria-label",window.VditorI18n.remove+"<"+(0,I.ns)("⇧⌘X")+">"),e.innerHTML='<svg><use xlink:href="#vditor-icon-trashcan"></use></svg>',e.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",e.onclick=function(){var e=(0,V.zh)(n);e.setStartAfter(t),(0,V.Hc)(e),t.remove(),W(n),H(n),["H1","H2","H3","H4","H5","H6"].includes(t.tagName)&&h(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",e)},Te=function(e,t,n,r){n.isComposing||("Tab"===n.key?(r.focus(),r.select(),n.preventDefault()):(0,I.yl)(n)||n.shiftKey||!n.altKey||"Enter"!==n.key||(r=(0,V.zh)(e),t.insertAdjacentHTML("afterend",O.g.ZWSP),r.setStartAfter(t.nextSibling),r.collapse(!0),(0,V.Hc)(r),n.preventDefault()))},Ce=function(t,n,r){t.wysiwyg.popover.innerHTML="";function e(){""!==i.value.trim()&&(n.innerHTML=i.value),n.setAttribute("href",l.value),n.setAttribute("title",d.value),W(t)}n.querySelectorAll("[data-marker]").forEach(function(e){e.removeAttribute("data-marker")});var o=document.createElement("span"),i=(o.setAttribute("aria-label",window.VditorI18n.textIsNotEmpty),o.className="vditor-tooltipped vditor-tooltipped__n",document.createElement("input")),a=(o.appendChild(i),i.className="vditor-input",i.setAttribute("placeholder",window.VditorI18n.textIsNotEmpty),i.style.width="120px",i.value=n.innerHTML||"",i.oninput=function(){e()},i.onkeydown=function(e){G(t,e)||Z(e,r)||Te(t,n,e,l)},document.createElement("span")),l=(a.setAttribute("aria-label",window.VditorI18n.link),a.className="vditor-tooltipped vditor-tooltipped__n",document.createElement("input")),s=(a.appendChild(l),l.className="vditor-input",l.setAttribute("placeholder",window.VditorI18n.link),l.value=n.getAttribute("href")||"",l.oninput=function(){e()},l.onkeydown=function(e){G(t,e)||Z(e,r)||Te(t,n,e,d)},document.createElement("span")),d=(s.setAttribute("aria-label",window.VditorI18n.tooltipText),s.className="vditor-tooltipped vditor-tooltipped__n",document.createElement("input"));s.appendChild(d),d.className="vditor-input",d.setAttribute("placeholder",window.VditorI18n.tooltipText),d.style.width="60px",d.value=n.getAttribute("title")||"",d.oninput=function(){e()},d.onkeydown=function(e){G(t,e)||Z(e,r)||Te(t,n,e,i)},K(n,t),t.wysiwyg.popover.insertAdjacentElement("beforeend",o),t.wysiwyg.popover.insertAdjacentElement("beforeend",a),t.wysiwyg.popover.insertAdjacentElement("beforeend",s),F(t,n)},Z=function(e,t){if(!(0,I.yl)(e)&&!e.shiftKey&&"Enter"===e.key||"Escape"===e.key)return t&&(0,V.Hc)(t),e.preventDefault(),e.stopPropagation(),!0},Me=function(e){"wysiwyg"===e.currentMode?H(e):"ir"===e.currentMode&&ge(e)},Ae=function(t,e,n){void 0===n&&(n={enableAddUndoStack:!0,enableHint:!1,enableInput:!0});var r=t.wysiwyg.element;r.innerHTML=t.lute.Md2VditorDOM(e),r.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(e){U(e,t),e.previousElementSibling.setAttribute("style","display:none")}),W(t,n)},i=function(C,M){var A=this,e=(this.element=document.createElement("div"),M.className&&(e=this.element.classList).add.apply(e,M.className.split(" ")),M.hotkey?" <"+(0,I.ns)(M.hotkey)+">":""),e=(2===M.level&&(e=M.hotkey?" &lt;"+(0,I.ns)(M.hotkey)+"&gt;":""),M.tip?M.tip+e:""+window.VditorI18n[M.name]+e),t="upload"===M.name?"div":"button";2===M.level?this.element.innerHTML="<"+t+' data-type="'+M.name+'">'+e+"</"+t+">":(this.element.classList.add("vditor-toolbar__item"),(t=document.createElement(t)).setAttribute("data-type",M.name),t.className="vditor-tooltipped vditor-tooltipped__"+M.tipPosition,t.setAttribute("aria-label",e),t.innerHTML=M.icon,this.element.appendChild(t)),M.prefix&&this.element.children[0].addEventListener((0,I.Le)(),function(e){if(e.preventDefault(),!A.element.firstElementChild.classList.contains(O.g.CLASS_MENU_DISABLED))if("wysiwyg"!==C.currentMode)("ir"===C.currentMode?Nt:Fe)(C,A.element.children[0],M.prefix||"",M.suffix||"");else{var t=C,n=A.element.children[0];if(!(t.wysiwyg.composingLock&&e instanceof CustomEvent)){var e=!0,r=!0,o=(t.wysiwyg.element.querySelector("wbr")&&t.wysiwyg.element.querySelector("wbr").remove(),(0,V.zh)(t)),i=n.getAttribute("data-type");if(n.classList.contains("vditor-menu--current"))if("quote"===(i="strike"===i?"strikeThrough":i)){var a=(0,B.lG)(o.startContainer,"BLOCKQUOTE");(a=a||o.startContainer.childNodes[o.startOffset])&&(e=!1,n.classList.remove("vditor-menu--current"),o.insertNode(document.createElement("wbr")),a.outerHTML=""===a.innerHTML.trim()?'<p data-block="0">'+a.innerHTML+"</p>":a.innerHTML,(0,V.ib)(t.wysiwyg.element,o))}else if("inline-code"===i)(a=(a=(0,B.lG)(o.startContainer,"CODE"))||o.startContainer.childNodes[o.startOffset])&&(a.outerHTML=a.innerHTML.replace(O.g.ZWSP,"")+"<wbr>",(0,V.ib)(t.wysiwyg.element,o));else if("link"===i)o.collapsed&&o.selectNode(o.startContainer.parentElement),document.execCommand("unlink",!1,"");else if("check"===i||"list"===i||"ordered-list"===i)lt(t,o,i),(0,V.ib)(t.wysiwyg.element,o),e=!1,n.classList.remove("vditor-menu--current");else if(e=!1,n.classList.remove("vditor-menu--current"),""===o.toString()){for(var a=o,l=t,s=i,d=a.startContainer.parentElement,c=!1,p="",u="",m=(m=ye((w=a).startContainer),E=be(w.startContainer),T=w.startContainer.textContent,w=w.startOffset,((x=_="")!==T.substr(0,w)&&T.substr(0,w)!==O.g.ZWSP||m)&&(_=""+m+T.substr(0,w)),{afterHTML:x=""!==T.substr(w)&&T.substr(w)!==O.g.ZWSP||E?""+T.substr(w)+E:x,beforeHTML:_}),f=m.beforeHTML,h=m.afterHTML;d&&!c;){var v,g,b,y=d.tagName;"S"===(y="B"===(y="I"===(y="STRIKE"===y?"S":y)?"EM":y)?"STRONG":y)||"STRONG"===y||"EM"===y?(b=g=v="","0"!==d.parentElement.getAttribute("data-block")&&(g=ye(d),b=be(d)),(f||g)&&(f=v=g+"<"+y+">"+f+"</"+y+">"),("bold"===s&&"STRONG"===y||"italic"===s&&"EM"===y||"strikeThrough"===s&&"S"===y)&&(v+=""+p+O.g.ZWSP+"<wbr>"+u,c=!0),(h||b)&&(v+=h="<"+y+">"+h+"</"+y+">"+b),"0"!==d.parentElement.getAttribute("data-block")?(d=d.parentElement).innerHTML=v:(d.outerHTML=v,d=d.parentElement),p="<"+y+">"+p,u="</"+y+">"+u):c=!0}(0,V.ib)(l.wysiwyg.element,a)}else document.execCommand(i,!1,"");else{0===t.wysiwyg.element.childNodes.length&&(t.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',(0,V.ib)(t.wysiwyg.element,o));var w,k,E,x,_,S,L,T=(0,B.F9)(o.startContainer);"quote"===i?(T=T||o.startContainer.childNodes[o.startOffset])&&(e=!1,n.classList.add("vditor-menu--current"),o.insertNode(document.createElement("wbr")),(w=(0,B.lG)(o.startContainer,"LI"))&&T.contains(w)?w.innerHTML='<blockquote data-block="0">'+w.innerHTML+"</blockquote>":T.outerHTML='<blockquote data-block="0">'+T.outerHTML+"</blockquote>",(0,V.ib)(t.wysiwyg.element,o)):"check"===i||"list"===i||"ordered-list"===i?(lt(t,o,i,!1),(0,V.ib)(t.wysiwyg.element,o),e=!1,j(t.toolbar.elements,["check","list","ordered-list"]),n.classList.add("vditor-menu--current")):"inline-code"===i?(""===o.toString()?((k=document.createElement("code")).textContent=O.g.ZWSP,o.insertNode(k),o.setStart(k.firstChild,1),o.collapse(!0),(0,V.Hc)(o)):3===o.startContainer.nodeType&&(k=document.createElement("code"),o.surroundContents(k),o.insertNode(k),(0,V.Hc)(o)),n.classList.add("vditor-menu--current")):"code"===i?((k=document.createElement("div")).className="vditor-wysiwyg__block",k.setAttribute("data-type","code-block"),k.setAttribute("data-block","0"),k.setAttribute("data-marker","```"),""===o.toString()?k.innerHTML="<pre><code><wbr>\n</code></pre>":(k.innerHTML="<pre><code>"+o.toString()+"<wbr></code></pre>",o.deleteContents()),o.insertNode(k),T&&(T.outerHTML=t.lute.SpinVditorDOM(T.outerHTML)),(0,V.ib)(t.wysiwyg.element,o),t.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(e){U(e,t)}),n.classList.add("vditor-menu--disabled")):"link"===i?(""===o.toString()?((E=document.createElement("a")).innerText=O.g.ZWSP,o.insertNode(E),o.setStart(E.firstChild,1),o.collapse(!0),Ce(t,E,o),(x=t.wysiwyg.popover.querySelector("input")).value="",x.focus(),r=!1):((k=document.createElement("a")).setAttribute("href",""),k.innerHTML=o.toString(),o.surroundContents(k),o.insertNode(k),(0,V.Hc)(o),Ce(t,k,o),(_=t.wysiwyg.popover.querySelectorAll("input"))[0].value=k.innerText,_[1].focus()),e=!1,n.classList.add("vditor-menu--current")):"table"===i?(S='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>',""===o.toString().trim()?(T&&""===T.innerHTML.trim().replace(O.g.ZWSP,"")?T.outerHTML=S:document.execCommand("insertHTML",!1,S),o.selectNode(t.wysiwyg.element.querySelector("wbr").previousSibling),t.wysiwyg.element.querySelector("wbr").remove(),(0,V.Hc)(o)):(S='<table data-block="0"><thead><tr>',m=o.toString().split("\n"),L=m[0].split(",").length>m[0].split("\t").length?",":"\t",m.forEach(function(e,t){0===t?(e.split(L).forEach(function(e,t){S+=0===t?"<th>"+e+"<wbr></th>":"<th>"+e+"</th>"}),S+="</tr></thead>"):(S+=1===t?"<tbody><tr>":"<tr>",e.split(L).forEach(function(e){S+="<td>"+e+"</td>"}),S+="</tr>")}),S+="</tbody></table>",document.execCommand("insertHTML",!1,S),(0,V.ib)(t.wysiwyg.element,o)),e=!1,n.classList.add("vditor-menu--disabled")):"line"===i?T&&(l='<hr data-block="0"><p data-block="0"><wbr>\n</p>',""===T.innerHTML.trim()?T.outerHTML=l:T.insertAdjacentHTML("afterend",l),(0,V.ib)(t.wysiwyg.element,o)):(e=!1,n.classList.add("vditor-menu--current"),"strike"===i&&(i="strikeThrough"),""!==o.toString()||"bold"!==i&&"italic"!==i&&"strikeThrough"!==i?document.execCommand(i,!1,""):(n="strong","italic"===i?n="em":"strikeThrough"===i&&(n="s"),(k=document.createElement(n)).textContent=O.g.ZWSP,o.insertNode(k),k.previousSibling&&k.previousSibling.textContent===O.g.ZWSP&&(k.previousSibling.textContent=""),o.setStart(k.firstChild,1),o.collapse(!0),(0,V.Hc)(o)))}e&&H(t),r&&W(t)}}})},c=function(t,e,n){var r="string"!=typeof n?(s(t,["subToolbar","hint"]),n.preventDefault(),D(t)):n;t.currentMode===e&&"string"!=typeof n||(t.devtools&&t.devtools.renderEchart(t),"both"===t.options.preview.mode&&"sv"===e?t.preview.element.style.display="block":t.preview.element.style.display="none",P(t.toolbar.elements,O.g.EDIT_TOOLBARS),j(t.toolbar.elements,O.g.EDIT_TOOLBARS),q(t.toolbar.elements,["outdent","indent"]),"ir"===e?(A(t.toolbar.elements,["both"]),N(t.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),t.sv.element.style.display="none",t.wysiwyg.element.parentElement.style.display="none",t.ir.element.parentElement.style.display="block",t.lute.SetVditorIR(!0),t.lute.SetVditorWYSIWYG(!1),t.lute.SetVditorSV(!1),t.currentMode="ir",t.ir.element.innerHTML=t.lute.Md2VditorIRDOM(r),v(t,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),l(t),t.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(e){U(e,t)}),t.ir.element.querySelectorAll(".vditor-toc").forEach(function(e){(0,ne.H)(e,{cdn:t.options.cdn,math:t.options.preview.math})})):"wysiwyg"===e?(A(t.toolbar.elements,["both"]),N(t.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),t.sv.element.style.display="none",t.wysiwyg.element.parentElement.style.display="block",t.ir.element.parentElement.style.display="none",t.lute.SetVditorIR(!1),t.lute.SetVditorWYSIWYG(!0),t.lute.SetVditorSV(!1),t.currentMode="wysiwyg",l(t),Ae(t,r,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),t.wysiwyg.element.querySelectorAll(".vditor-toc").forEach(function(e){(0,ne.H)(e,{cdn:t.options.cdn,math:t.options.preview.math})}),t.wysiwyg.popover.style.display="none"):"sv"===e&&(N(t.toolbar.elements,["both"]),A(t.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),t.wysiwyg.element.parentElement.style.display="none",t.ir.element.parentElement.style.display="none","both"!==t.options.preview.mode&&"editor"!==t.options.preview.mode||(t.sv.element.style.display="block"),t.lute.SetVditorIR(!1),t.lute.SetVditorWYSIWYG(!1),t.lute.SetVditorSV(!0),t.currentMode="sv",e=Ve(r,t),t.sv.element.innerHTML=e="<div data-block='0'></div>"===e?"":e,pe(t.sv.element),u(t,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),l(t)),t.undo.resetIcon(t),"string"!=typeof n&&(t[t.currentMode].element.focus(),Me(t)),h(t),me(t),t.toolbar.elements["edit-mode"]&&(t.toolbar.elements["edit-mode"].querySelectorAll("button").forEach(function(e){e.classList.remove("vditor-menu--current")}),t.toolbar.elements["edit-mode"].querySelector('button[data-mode="'+t.currentMode+'"]').classList.add("vditor-menu--current")),t.outline.toggle(t,"sv"!==t.currentMode&&t.options.outline.enable,"string"!=typeof n))},He=(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)}(yr=io,n=br=i),yr.prototype=null===n?Object.create(n):(ao.prototype=n.prototype,new ao),io.prototype._bindEvent=function(t,e,n){var r=this.element.children[0];a(t,e,r,n.level),e.children.item(0).addEventListener((0,I.Le)(),function(e){c(t,"wysiwyg",e),e.preventDefault(),e.stopPropagation()}),e.children.item(1).addEventListener((0,I.Le)(),function(e){c(t,"ir",e),e.preventDefault(),e.stopPropagation()}),e.children.item(2).addEventListener((0,I.Le)(),function(e){c(t,"sv",e),e.preventDefault(),e.stopPropagation()})},io),Ne=function(e,t){return(0,V.Gb)(e,t)?getSelection().toString():""},Oe=function(e,t){t.addEventListener("focus",function(){e.options.focus&&e.options.focus(D(e)),s(e,["subToolbar","hint"])})},De=function(t,e){e.addEventListener("dblclick",function(e){"IMG"===e.target.tagName&&(t.options.image.preview?t.options.image.preview(e.target):t.options.image.isPreview&&(0,ce.E)(e.target,t.options.lang,t.options.theme))})},Ie=function(n,e){e.addEventListener("blur",function(e){var t;"ir"===n.currentMode?(t=n.ir.element.querySelector(".vditor-ir__node--expand"))&&t.classList.remove("vditor-ir__node--expand"):"wysiwyg"!==n.currentMode||n.wysiwyg.selectPopover.contains(e.relatedTarget)||n.wysiwyg.hideComment(),n[n.currentMode].range=(0,V.zh)(n),n.options.blur&&n.options.blur(D(n))})},je=function(t,e){e.addEventListener("dragstart",function(e){e.dataTransfer.setData(O.g.DROP_EDITOR,O.g.DROP_EDITOR)}),e.addEventListener("drop",function(e){e.dataTransfer.getData(O.g.DROP_EDITOR)?S(t):(e.dataTransfer.types.includes("Files")||e.dataTransfer.types.includes("text/html"))&&Ct(t,e,{pasteCode:function(e){document.execCommand("insertHTML",!1,e)}})})},Re=function(t,e,n){e.addEventListener("copy",function(e){return n(e,t)})},Pe=function(t,e,n){e.addEventListener("cut",function(e){n(e,t),t.options.comment.enable&&"wysiwyg"===t.currentMode&&t.wysiwyg.getComments(t),document.execCommand("delete")})},_=function(e){var t,n;"wysiwyg"===e.currentMode&&e.options.comment.enable&&e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)),e.options.typewriterMode&&(t=e[e.currentMode].element,n=(0,V.Ny)(t).top,"auto"!==e.options.height||e.element.classList.contains("vditor--fullscreen")||window.scrollTo(window.scrollX,n+e.element.offsetTop+e.toolbar.element.offsetHeight-window.innerHeight/2+10),"auto"===e.options.height&&!e.element.classList.contains("vditor--fullscreen")||(t.scrollTop=n+t.scrollTop-t.clientHeight/2+10))},qe=function(n,e){e.addEventListener("keydown",function(t){if(!t.isComposing&&n.options.keydown&&n.options.keydown(t),!(1<n.options.hint.extend.length||n.toolbar.elements.emoji)||!n.hint.select(t,n)){if(n.options.comment.enable&&"wysiwyg"===n.currentMode&&("Backspace"===t.key||p("⌘X",t))&&n.wysiwyg.getComments(n),"sv"===n.currentMode){if(function(e,t){if(e.sv.composingLock=t.isComposing,!t.isComposing&&(-1!==t.key.indexOf("Arrow")||"Meta"===t.key||"Control"===t.key||"Alt"===t.key||"Shift"===t.key||"CapsLock"===t.key||"Escape"===t.key||/^F\d{1,2}$/.test(t.key)||e.undo.recordFirstPosition(e,t),"Enter"===t.key||"Tab"===t.key||"Backspace"===t.key||-1!==t.key.indexOf("Arrow")||(0,I.yl)(t)||"Escape"===t.key)){var n=(0,V.zh)(e),r=n.startContainer,o=(3!==n.startContainer.nodeType&&"DIV"===n.startContainer.tagName&&(r=n.startContainer.childNodes[n.startOffset-1]),(0,B.a1)(r,"data-type","text")),i=(0,B.a1)(r,"data-type","blockquote-marker");if((i=!i&&0===n.startOffset&&o&&o.previousElementSibling&&"blockquote-marker"===o.previousElementSibling.getAttribute("data-type")?o.previousElementSibling:i)&&"Enter"===t.key&&!(0,I.yl)(t)&&!t.altKey&&""===i.nextElementSibling.textContent.trim()&&(0,V.im)(i,e.sv.element,n).start===i.textContent.length)return"padding"===(null==(a=i.previousElementSibling)?void 0:a.getAttribute("data-type"))&&i.previousElementSibling.setAttribute("data-action","enter-remove"),i.remove(),u(e),t.preventDefault(),1;var a=(0,B.a1)(r,"data-type","li-marker"),i=(0,B.a1)(r,"data-type","task-marker");if(a||i&&"task-marker"!==i.nextElementSibling.getAttribute("data-type")&&(a=i),a=a||0!==n.startOffset||!o||!o.previousElementSibling||"li-marker"!==o.previousElementSibling.getAttribute("data-type")&&"task-marker"!==o.previousElementSibling.getAttribute("data-type")?a:o.previousElementSibling){var i=(0,V.im)(a,e.sv.element,n).start,o="task-marker"===a.getAttribute("data-type"),l=a;if(o&&(l=a.previousElementSibling.previousElementSibling.previousElementSibling),i===a.textContent.length){if("Enter"===t.key&&!(0,I.yl)(t)&&!t.altKey&&!t.shiftKey&&""===a.nextElementSibling.textContent.trim())return("padding"===(null==(i=l.previousElementSibling)?void 0:i.getAttribute("data-type"))?(l.previousElementSibling.remove(),d):(o&&(l.remove(),a.previousElementSibling.previousElementSibling.remove(),a.previousElementSibling.remove()),a.nextElementSibling.remove(),a.remove(),u))(e),t.preventDefault(),1;if("Tab"===t.key)return l.insertAdjacentHTML("beforebegin",'<span data-type="padding">'+l.textContent.replace(/\S/g," ")+"</span>"),/^\d/.test(l.textContent)&&(l.textContent=l.textContent.replace(/^\d{1,}/,"1"),n.selectNodeContents(a.firstChild),n.collapse(!1)),d(e),t.preventDefault(),1}}if(ft(e,n,t))return 1;i=(0,B.a1)(r,"data-block","0"),o=(0,z.S)(r,"SPAN");if("Enter"===t.key&&!(0,I.yl)(t)&&!t.altKey&&!t.shiftKey&&i){var l=!1,a=i.textContent.match(/^\n+/),r=((0,V.im)(i,e.sv.element).start<=(a?a[0].length:0)&&(l=!0),"\n");if(o){if("enter-remove"===(null==(a=o.previousElementSibling)?void 0:a.getAttribute("data-action")))return o.previousElementSibling.remove(),u(e),t.preventDefault(),1;r+=We(o)}return n.insertNode(document.createTextNode(r)),n.collapse(!1),(i&&""!==i.textContent.trim()&&!l?d:u)(e),t.preventDefault(),1}if("Backspace"===t.key&&!(0,I.yl)(t)&&!t.altKey&&!t.shiftKey){if(o&&"newline"===(null==(a=o.previousElementSibling)?void 0:a.getAttribute("data-type"))&&1===(0,V.im)(o,e.sv.element,n).start&&-1===o.getAttribute("data-type").indexOf("code-block-"))return n.setStart(o,0),n.extractContents(),(""!==o.textContent.trim()?d:u)(e),t.preventDefault(),1;if(i&&0===(0,V.im)(i,e.sv.element,n).start&&i.previousElementSibling)return n.extractContents(),"newline"===(r=i.previousElementSibling.lastElementChild).getAttribute("data-type")&&(r.remove(),r=i.previousElementSibling.lastElementChild),"newline"!==r.getAttribute("data-type")&&(r.insertAdjacentHTML("afterend",i.innerHTML),i.remove()),(""===i.textContent.trim()||null!=(l=i.previousElementSibling)&&l.querySelector('[data-type="code-block-open-marker"]')?("newline"!==r.getAttribute("data-type")&&(n.selectNodeContents(r.lastChild),n.collapse(!1)),u):d)(e),t.preventDefault(),1}}}(n,t))return}else if("wysiwyg"===n.currentMode){if(function(e,t){if(e.wysiwyg.composingLock=t.isComposing,!t.isComposing){-1!==t.key.indexOf("Arrow")||"Meta"===t.key||"Control"===t.key||"Alt"===t.key||"Shift"===t.key||"CapsLock"===t.key||"Escape"===t.key||/^F\d{1,2}$/.test(t.key)||e.undo.recordFirstPosition(e,t);var n=(0,V.zh)(e),r=n.startContainer;if(Qe(t,e,r)&&($e(n,e,t),Lt(n),"Enter"===t.key||"Tab"===t.key||"Backspace"===t.key||-1!==t.key.indexOf("Arrow")||(0,I.yl)(t)||"Escape"===t.key||"Delete"===t.key)){var o=(0,B.F9)(r),i=(0,B.lG)(r,"P");if(ht(t,e,i,n))return 1;if(mt(n,e,i,t))return 1;if(kt(e,t,n))return 1;var a=(0,B.fb)(r,"vditor-wysiwyg__block");if(a){if("Escape"===t.key&&2===a.children.length)return e.wysiwyg.popover.style.display="none",a.firstElementChild.style.display="none",e.wysiwyg.element.blur(),t.preventDefault(),1;if(!(0,I.yl)(t)&&!t.shiftKey&&t.altKey&&"Enter"===t.key&&"code-block"===a.getAttribute("data-type"))return(l=e.wysiwyg.popover.querySelector(".vditor-input")).focus(),l.select(),t.preventDefault(),1;if("0"===a.getAttribute("data-block")){if(Et(e,t,a.firstElementChild,n))return 1;if(it(e,t,n,a.firstElementChild,a))return 1;if("yaml-front-matter"!==a.getAttribute("data-type")&&at(e,t,n,a.firstElementChild,a))return 1}}if(xt(e,n,t,i))return 1;var l=(0,B.E2)(r,"BLOCKQUOTE");if(l&&!t.shiftKey&&t.altKey&&"Enter"===t.key)return(0,I.yl)(t)?n.setStartBefore(l):n.setStartAfter(l),(0,V.Hc)(n),(a=document.createElement("p")).setAttribute("data-block","0"),a.innerHTML="\n",n.insertNode(a),n.collapse(!0),(0,V.Hc)(n),W(e),_(e),t.preventDefault(),1;var s,l=(0,z.W)(r);if(l){if("H6"===l.tagName&&r.textContent.length===n.startOffset&&!(0,I.yl)(t)&&!t.shiftKey&&!t.altKey&&"Enter"===t.key)return(a=document.createElement("p")).textContent="\n",a.setAttribute("data-block","0"),r.parentElement.insertAdjacentElement("afterend",a),n.setStart(a,0),(0,V.Hc)(n),W(e),_(e),t.preventDefault(),1;if(p("⌘=",t))return 0<(d=parseInt(l.tagName.substr(1),10)-1)&&(ke(e,"h"+d),W(e)),t.preventDefault(),1;if(p("⌘-",t))return(d=parseInt(l.tagName.substr(1),10)+1)<7&&(ke(e,"h"+d),W(e)),t.preventDefault(),1;"Backspace"!==t.key||(0,I.yl)(t)||t.shiftKey||t.altKey||1!==l.textContent.length||Ee(e)}if(_t(e,n,t))return 1;if(t.altKey&&"Enter"===t.key&&!(0,I.yl)(t)&&!t.shiftKey&&(a=(0,B.lG)(r,"A"),d=(0,B.a1)(r,"data-type","link-ref"),c=(0,B.a1)(r,"data-type","footnotes-ref"),a||d||c||l&&2===l.tagName.length)&&((a=e.wysiwyg.popover.querySelector("input")).focus(),a.select()),G(e,t))return 1;if(p("⇧⌘U",t)&&(s=e.wysiwyg.popover.querySelector('[data-type="up"]')))return s.click(),t.preventDefault(),1;if(p("⇧⌘D",t)&&(s=e.wysiwyg.popover.querySelector('[data-type="down"]')))return s.click(),t.preventDefault(),1;if(ft(e,n,t))return 1;if(!(0,I.yl)(t)&&t.shiftKey&&!t.altKey&&"Enter"===t.key&&"LI"!==r.parentElement.tagName&&"P"!==r.parentElement.tagName)return["STRONG","STRIKE","S","I","EM","B"].includes(r.parentElement.tagName)?n.insertNode(document.createTextNode("\n"+O.g.ZWSP)):n.insertNode(document.createTextNode("\n")),n.collapse(!1),(0,V.Hc)(n),W(e),_(e),t.preventDefault(),1;if("Backspace"===t.key&&!(0,I.yl)(t)&&!t.shiftKey&&!t.altKey&&""===n.toString()){if(St(e,n,t,i))return 1;if(o){if(o.previousElementSibling&&o.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&"0"===o.previousElementSibling.getAttribute("data-block")&&"UL"!==o.tagName&&"OL"!==o.tagName){var d=(0,V.im)(o,e.wysiwyg.element,n).start;if(0===d&&0===n.startOffset||1===d&&o.innerText.startsWith(O.g.ZWSP))return xe(o.previousElementSibling.lastElementChild,e,!1),""===o.innerHTML.trim().replace(O.g.ZWSP,"")&&(o.remove(),W(e)),t.preventDefault(),1}var c=n.startOffset;if(""===n.toString()&&3===r.nodeType&&"\n"===r.textContent.charAt(c-2)&&r.textContent.charAt(c-1)!==O.g.ZWSP&&["STRONG","STRIKE","S","I","EM","B"].includes(r.parentElement.tagName))return r.textContent=r.textContent.substring(0,c-1)+O.g.ZWSP,n.setStart(r,c),n.collapse(!0),W(e),t.preventDefault(),1;r.textContent===O.g.ZWSP&&1===n.startOffset&&!r.previousSibling&&function(){for(var e=n.startContainer.nextSibling;e&&""===e.textContent;)e=e.nextSibling;return e&&3!==e.nodeType&&("CODE"===e.tagName||"math-inline"===e.getAttribute("data-type")||"html-entity"===e.getAttribute("data-type")||"html-inline"===e.getAttribute("data-type"))}()&&(r.textContent=""),o.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach(function(e){e.firstElementChild.style.display="inline",e.lastElementChild.style.display="none"}),o.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach(function(e){e.firstElementChild.style.display="inline",e.lastElementChild.style.display="none"})}}return(0,I.vU)()&&1===n.startOffset&&-1<r.textContent.indexOf(O.g.ZWSP)&&r.previousSibling&&3!==r.previousSibling.nodeType&&"CODE"===r.previousSibling.tagName&&("Backspace"===t.key||"ArrowLeft"===t.key)?(n.selectNodeContents(r.previousSibling),n.collapse(!1),t.preventDefault(),1):(Tt(t,o,n)||(et(n,t.key),"ArrowDown"===t.key&&(l=r.nextSibling)&&3!==l.nodeType&&"math-inline"===l.getAttribute("data-type")&&n.setStartAfter(l),o&&le(o,e,t,n)))&&(t.preventDefault(),1)}}}(n,t))return}else if("ir"===n.currentMode&&function(e,t){if(e.ir.composingLock=t.isComposing,!t.isComposing){-1!==t.key.indexOf("Arrow")||"Meta"===t.key||"Control"===t.key||"Alt"===t.key||"Shift"===t.key||"CapsLock"===t.key||"Escape"===t.key||/^F\d{1,2}$/.test(t.key)||e.undo.recordFirstPosition(e,t);var n=(0,V.zh)(e),r=n.startContainer;if(Qe(t,e,r)&&($e(n,e,t),Lt(n),"Enter"===t.key||"Tab"===t.key||"Backspace"===t.key||-1!==t.key.indexOf("Arrow")||(0,I.yl)(t)||"Escape"===t.key||"Delete"===t.key)){var o=(0,B.a1)(r,"data-newline","1"),o=(!(0,I.yl)(t)&&!t.altKey&&!t.shiftKey&&"Enter"===t.key&&o&&n.startOffset<o.textContent.length&&((i=o.previousElementSibling)&&(n.insertNode(document.createTextNode(i.textContent)),n.collapse(!1)),i=o.nextSibling)&&(n.insertNode(document.createTextNode(i.textContent)),n.collapse(!0)),(0,B.lG)(r,"P"));if(ht(t,e,o,n))return 1;if(mt(n,e,o,t))return 1;if(xt(e,n,t,o))return 1;var i=(0,B.fb)(r,"vditor-ir__marker--pre");if(i&&"PRE"===i.tagName){var a=i.firstChild;if(Et(e,t,i,n))return 1;if(("math-block"===a.getAttribute("data-type")||"html-block"===a.getAttribute("data-type"))&&at(e,t,n,a,i.parentElement))return 1;if(it(e,t,n,a,i.parentElement))return 1}a=(0,B.a1)(r,"data-type","code-block-info");if(a){if("Enter"===t.key||"Tab"===t.key)return n.selectNodeContents(a.nextElementSibling.firstChild),n.collapse(!0),t.preventDefault(),s(e,["hint"]),1;if("Backspace"===t.key&&(1===(i=(0,V.im)(a,e.ir.element).start)&&n.setStart(r,0),2===i)&&(e.hint.recentLanguage=""),at(e,t,n,a,a.parentElement))return s(e,["hint"]),1}i=(0,B.lG)(r,"TD")||(0,B.lG)(r,"TH");if(-1<t.key.indexOf("Arrow")&&i){a=nt(i);if(a&&at(e,t,n,i,a))return 1;a=rt(i);if(a&&it(e,t,n,i,a))return 1}if(kt(e,t,n))return 1;if(_t(e,n,t))return 1;if(ft(e,n,t))return 1;i=(0,z.W)(r);if(i){if(p("⌘=",t))return(l=i.querySelector(".vditor-ir__marker--heading"))&&1<l.textContent.trim().length&&At(e,l.textContent.substr(1)),t.preventDefault(),1;if(p("⌘-",t))return(l=i.querySelector(".vditor-ir__marker--heading"))&&l.textContent.trim().length<6&&At(e,l.textContent.trim()+"# "),t.preventDefault(),1}a=(0,B.F9)(r);if("Backspace"===t.key&&!(0,I.yl)(t)&&!t.shiftKey&&!t.altKey&&""===n.toString()){if(St(e,n,t,o))return 1;if(a&&a.previousElementSibling&&"UL"!==a.tagName&&"OL"!==a.tagName&&("code-block"===a.previousElementSibling.getAttribute("data-type")||"math-block"===a.previousElementSibling.getAttribute("data-type"))){var l=(0,V.im)(a,e.ir.element,n).start;if(0===l||1===l&&a.innerText.startsWith(O.g.ZWSP))return n.selectNodeContents(a.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),n.collapse(!1),de(n,e),""===a.textContent.trim().replace(O.g.ZWSP,"")&&(a.remove(),v(e)),t.preventDefault(),1}i&&(o=i.firstElementChild.textContent.length,(0,V.im)(i,e.ir.element).start===o)&&(n.setStart(i.firstElementChild.firstChild,o-1),n.collapse(!0),(0,V.Hc)(n))}return("ArrowUp"===t.key||"ArrowDown"===t.key)&&a&&(a.querySelectorAll(".vditor-ir__node").forEach(function(e){e.contains(r)||e.classList.add("vditor-ir__node--hidden")}),Tt(t,a,n))||(et(n,t.key),a&&le(a,e,t,n)&&(t.preventDefault(),1))}}}(n,t))return;if(n.options.ctrlEnter&&p("⌘Enter",t))n.options.ctrlEnter(D(n));else if(p("⌘Z",t)&&!n.toolbar.elements.undo)n.undo.undo(n);else if(p("⌘Y",t)&&!n.toolbar.elements.redo)n.undo.redo(n);else{var e;if("Escape"!==t.key)return(0,I.yl)(t)&&t.altKey&&!t.shiftKey&&/^Digit[1-6]$/.test(t.code)?("wysiwyg"===n.currentMode?(e=t.code.replace("Digit","H"),(0,B.lG)(getSelection().getRangeAt(0).startContainer,e)?Ee(n):ke(n,e),W(n)):"sv"===n.currentMode?Ge(n,"#".repeat(parseInt(t.code.replace("Digit",""),10))+" "):"ir"===n.currentMode&&At(n,"#".repeat(parseInt(t.code.replace("Digit",""),10))+" "),t.preventDefault(),!0):(0,I.yl)(t)&&t.altKey&&!t.shiftKey&&/^Digit[7-9]$/.test(t.code)?("Digit7"===t.code?c(n,"wysiwyg",t):"Digit8"===t.code?c(n,"ir",t):"Digit9"===t.code&&c(n,"sv",t),!0):void n.options.toolbar.find(function(e){return!e.hotkey||e.toolbar?!!e.toolbar&&!!e.toolbar.find(function(e){return!!e.hotkey&&(p(e.hotkey,t)?(n.toolbar.elements[e.name].children[0].dispatchEvent(new CustomEvent((0,I.Le)())),t.preventDefault(),!0):void 0)}):p(e.hotkey,t)?(n.toolbar.elements[e.name].children[0].dispatchEvent(new CustomEvent((0,I.Le)())),t.preventDefault(),!0):void 0});"block"===n.hint.element.style.display?n.hint.element.style.display="none":n.options.esc&&!t.isComposing&&n.options.esc(D(n))}t.preventDefault()}})},Be=function(n,e){e.addEventListener("selectstart",function(t){e.onmouseup=function(){setTimeout(function(){var e=Ne(n[n.currentMode].element);e.trim()?("wysiwyg"===n.currentMode&&n.options.comment.enable&&((0,B.a1)(t.target,"data-type","footnotes-block")||(0,B.a1)(t.target,"data-type","link-ref-defs-block")?n.wysiwyg.hideComment():n.wysiwyg.showComment()),n.options.select&&n.options.select(e)):"wysiwyg"===n.currentMode&&n.options.comment.enable&&n.wysiwyg.hideComment()})}})},ze=function(e,t){var n=(0,V.zh)(e);n.extractContents(),n.insertNode(document.createTextNode(Lute.Caret)),n.insertNode(document.createTextNode(t));var t=(t=(0,B.a1)(n.startContainer,"data-block","0"))||e.sv.element,r="<div data-block='0'>"+(r=e.lute.SpinVditorSVDOM(t.textContent)).replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,'<span data-type="newline"><br /><span style="display: none">\n</span></span><span data-type="newline"><br /><span style="display: none">\n</span></span></div><div data-block="0"><')+"</div>";t.isEqualNode(e.sv.element)?t.innerHTML=r:t.outerHTML=r,pe(e.sv.element),(0,V.ib)(e.sv.element,n),_(e)},Ue=function(e,t,n){void 0===n&&(n=!0);var r=e;for(3===r.nodeType&&(r=r.parentElement);r;){if(r.getAttribute("data-type")===t)return r;r=n?r.previousElementSibling:r.nextElementSibling}return!1},Ve=function(e,t){return J("SpinVditorSVDOM",e,"argument",t.options.debugger),e="<div data-block='0'>"+t.lute.SpinVditorSVDOM(e).replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,'<span data-type="newline"><br /><span style="display: none">\n</span></span><span data-type="newline"><br /><span style="display: none">\n</span></span></div><div data-block="0"><')+"</div>",J("SpinVditorSVDOM",e,"result",t.options.debugger),e},We=function(e){var t=e.getAttribute("data-type"),n=e.previousElementSibling,r=t&&"text"!==t&&"table"!==t&&"heading-marker"!==t&&"newline"!==t&&"yaml-front-matter-open-marker"!==t&&"yaml-front-matter-close-marker"!==t&&"code-block-info"!==t&&"code-block-close-marker"!==t&&"code-block-open-marker"!==t?e.textContent:"",o=!1;for("newline"===t&&(o=!0);n&&!o;){var i,a,l=n.getAttribute("data-type");"li-marker"===l||"blockquote-marker"===l||"task-marker"===l||"padding"===l?(i=n.textContent,"li-marker"!==l||"code-block-open-marker"!==t&&"code-block-info"!==t?"code-block-close-marker"===t&&n.nextElementSibling.isSameNode(e)?(a=Ue(e,"code-block-open-marker"))&&a.previousElementSibling&&(n=a.previousElementSibling,r=i+r):r=i+r:r=i.replace(/\S/g," ")+r):"newline"===l&&(o=!0),n=n.previousElementSibling}return r},u=function(e,t){(t=void 0===t?{enableAddUndoStack:!0,enableHint:!1,enableInput:!0}:t).enableHint&&e.hint.render(e),e.preview.render(e);var n=D(e);"function"==typeof e.options.input&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&(0,I.pK)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after)&&e.options.cache.after(n),e.devtools&&e.devtools.renderEchart(e),clearTimeout(e.sv.processTimeoutId),e.sv.processTimeoutId=window.setTimeout(function(){t.enableAddUndoStack&&!e.sv.composingLock&&e.undo.addToUndoStack(e)},e.options.undoDelay)},Ge=function(e,t){var e=(0,V.zh)(e),n=(0,z.S)(e.startContainer,"SPAN");n&&""!==n.textContent.trim()&&(t="\n"+t),e.collapse(!0),document.execCommand("insertHTML",!1,t)},Fe=function(e,t,n,r){var o,i=(0,V.zh)(e),t=t.getAttribute("data-type"),a=(0===e.sv.element.childNodes.length&&(e.sv.element.innerHTML='<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">\n</span></span>',(0,V.ib)(e.sv.element,i)),(0,B.F9)(i.startContainer)),l=(0,z.S)(i.startContainer,"SPAN");a&&("link"===t?(o=void 0,o=""===i.toString()?""+n+Lute.Caret+r:""+n+i.toString()+r.replace(")",Lute.Caret+")"),document.execCommand("insertHTML",!1,o)):"italic"===t||"bold"===t||"strike"===t||"inline-code"===t||"code"===t||"table"===t||"line"===t?(o=void 0,o=""===i.toString()?""+n+Lute.Caret+("code"===t?"":r):""+n+i.toString()+Lute.Caret+("code"===t?"":r),"table"===t||"code"===t&&l&&""!==l.textContent?o="\n\n"+o:"line"===t&&(o="\n\n"+n+"\n"+Lute.Caret),document.execCommand("insertHTML",!1,o)):("check"!==t&&"list"!==t&&"ordered-list"!==t&&"quote"!==t||!l?((0,V.ib)(e.sv.element,i),u):(r="* ","check"===t?r="* [ ] ":"ordered-list"===t?r="1. ":"quote"===t&&(r="> "),(n=Ue(l,"newline"))?n.insertAdjacentText("afterend",r):a.insertAdjacentText("afterbegin",r),d))(e))},Ke=function(e){switch(e.currentMode){case"ir":return e.ir.element;case"wysiwyg":return e.wysiwyg.element;case"sv":return e.sv.element}},Ze=function(t,n){t.options.upload.setHeaders&&(t.options.upload.headers=t.options.upload.setHeaders()),t.options.upload.headers&&Object.keys(t.options.upload.headers).forEach(function(e){n.setRequestHeader(e,t.options.upload.headers[e])})},Je=function(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"},Xe=function(E,x,_){return l=function(){var t,n,r,o,l,i,a,s,d,c,p,u,m,f,h,v,g,b,y,w,e;return h=this,v=function(e){switch(e.label){case 0:for(t=[],n=!0===E.options.upload.multiple?x.length:1,u=0;u<n;u++)(r=x[u])instanceof DataTransferItem&&(r=r.getAsFile()),t.push(r);return E.options.upload.handler?[4,E.options.upload.handler(t)]:[3,2];case 1:return o=e.sent(),_&&(_.value=""),"string"==typeof o&&E.tip.show(o),[2];case 2:return E.options.upload.url&&E.upload?E.options.upload.file?[4,E.options.upload.file(t)]:[3,4]:(_&&(_.value=""),E.tip.show("please config: options.upload.url"),[2]);case 3:t=e.sent(),e.label=4;case 4:if(E.options.upload.validate&&"string"==typeof(o=E.options.upload.validate(t)))E.tip.show(o);else if(l=Ke(E),E.upload.range=(0,V.zh)(E),0===(i=function(o,i){o.tip.hide();for(var a=[],l="",s="",e=(o.options.lang,o.options,i.length),t=0;t<e;t++)!function(e){var t=i[e],e=!0,n=(t.name||(l+="<li>"+window.VditorI18n.nameEmpty+"</li>",e=!1),t.size>o.options.upload.max&&(l+="<li>"+t.name+" "+window.VditorI18n.over+" "+o.options.upload.max/1024/1024+"M</li>",e=!1),t.name.lastIndexOf(".")),r=t.name.substr(n),n=o.options.upload.filename(t.name.substr(0,n))+r;o.options.upload.accept&&!o.options.upload.accept.split(",").some(function(e){e=e.trim();if(0===e.indexOf(".")){if(r.toLowerCase()===e.toLowerCase())return!0}else if(t.type.split("/")[0]===e.split("/")[0])return!0;return!1})&&(l+="<li>"+t.name+" "+window.VditorI18n.fileTypeError+"</li>",e=!1),e&&(a.push(t),s+="<li>"+n+" "+window.VditorI18n.uploading+"</li>")}(t);return o.tip.show("<ul>"+l+s+"</ul>"),a}(E,t)).length)_&&(_.value="");else{for(a=new FormData,s=E.options.upload.extraData,d=0,c=Object.keys(s);d<c.length;d++)p=c[d],a.append(p,s[p]);for(u=0,m=i.length;u<m;u++)a.append(E.options.upload.fieldName,i[u]);(f=new XMLHttpRequest).open("POST",E.options.upload.url),E.options.upload.token&&f.setRequestHeader("X-Upload-Token",E.options.upload.token),E.options.upload.withCredentials&&(f.withCredentials=!0),Ze(E,f),E.upload.isUploading=!0,l.setAttribute("contenteditable","false"),f.onreadystatechange=function(){var e,o,i,n,a;f.readyState===XMLHttpRequest.DONE&&(E.upload.isUploading=!1,l.setAttribute("contenteditable","true"),200<=f.status&&f.status<300?E.options.upload.success?E.options.upload.success(l,f.responseText):(e=f.responseText,E.options.upload.format&&(e=E.options.upload.format(x,f.responseText)),e=e,Ke(o=E).focus(),i=JSON.parse(e),n="",1===i.code&&(n=""+i.msg),i.data.errFiles&&0<i.data.errFiles.length&&(n="<ul><li>"+n+"</li>",i.data.errFiles.forEach(function(e){var t=e.lastIndexOf("."),e=o.options.upload.filename(e.substr(0,t))+e.substr(t);n+="<li>"+e+" "+window.VditorI18n.uploadError+"</li>"}),n+="</ul>"),n?o.tip.show(n):o.tip.hide(),a="",Object.keys(i.data.succMap).forEach(function(e){var t=i.data.succMap[e],n=e.lastIndexOf("."),r=e.substr(n),e=o.options.upload.filename(e.substr(0,n))+r;0===(r=r.toLowerCase()).indexOf(".wav")||0===r.indexOf(".mp3")||0===r.indexOf(".ogg")?"wysiwyg"===o.currentMode?a+='<div class="vditor-wysiwyg__block" data-type="html-block"\n data-block="0"><pre><code>&lt;audio controls="controls" src="'+t+'"&gt;&lt;/audio&gt;</code></pre><pre class="vditor-wysiwyg__preview" data-render="1"><audio controls="controls" src="'+t+'"></audio></pre></div>\n':"ir"===o.currentMode?a+='<audio controls="controls" src="'+t+'"></audio>\n':a+="["+e+"]("+t+")\n":0===r.indexOf(".apng")||0===r.indexOf(".bmp")||0===r.indexOf(".gif")||0===r.indexOf(".ico")||0===r.indexOf(".cur")||0===r.indexOf(".jpg")||0===r.indexOf(".jpeg")||0===r.indexOf(".jfif")||0===r.indexOf(".pjp")||0===r.indexOf(".pjpeg")||0===r.indexOf(".png")||0===r.indexOf(".svg")||0===r.indexOf(".webp")?"wysiwyg"===o.currentMode?a+='<img alt="'+e+'" src="'+t+'">\n':a+="!["+e+"]("+t+")\n":"wysiwyg"===o.currentMode?a+='<a href="'+t+'">'+e+"</a>\n":a+="["+e+"]("+t+")\n"}),(0,V.Hc)(o.upload.range),document.execCommand("insertHTML",!1,a),o.upload.range=getSelection().getRangeAt(0).cloneRange()):E.options.upload.error?E.options.upload.error(f.responseText):E.tip.show(f.responseText),_&&(_.value=""),E.upload.element.style.display="none")},f.upload.onprogress=function(e){e.lengthComputable&&(e=e.loaded/e.total*100,E.upload.element.style.display="block",E.upload.element.style.width=e+"%")},f.send(a)}return[2]}},w={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]},e={next:k(0),throw:k(1),return:k(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function k(n){return function(e){var t=[n,e];if(g)throw new TypeError("Generator is already executing.");for(;w;)try{if(g=1,b&&(y=2&t[0]?b.return:t[0]?b.throw||((y=b.return)&&y.call(b),0):b.next)&&!(y=y.call(b,t[1])).done)return y;switch(b=0,(t=y?[2&t[0],y.value]:t)[0]){case 0:case 1:y=t;break;case 4:return w.label++,{value:t[1],done:!1};case 5:w.label++,b=t[1],t=[0];continue;case 7:t=w.ops.pop(),w.trys.pop();continue;default:if(!((y=0<(y=w.trys).length&&y[y.length-1])||6!==t[0]&&2!==t[0])){w=0;continue}if(3===t[0]&&(!y||t[1]>y[0]&&t[1]<y[3]))w.label=t[1];else if(6===t[0]&&w.label<y[1])w.label=y[1],y=t;else{if(!(y&&w.label<y[2])){y[2]&&w.ops.pop(),w.trys.pop();continue}w.label=y[2],w.ops.push(t)}}t=v.call(h,w)}catch(e){t=[6,e],b=0}finally{g=y=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},new(a=(a=void 0)||Promise)(function(n,t){function r(e){try{i(l.next(e))}catch(e){t(e)}}function o(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((l=l.apply(void 0,[])).next())});var a,l},Ye=function(t,n,e){var r,o,i,a,l,s,d,c=(0,B.F9)(n.startContainer);c=c||t.wysiwyg.element,(e&&"formatItalic"!==e.inputType&&"deleteByDrag"!==e.inputType&&"insertFromDrop"!==e.inputType&&"formatBold"!==e.inputType&&"formatRemove"!==e.inputType&&"formatStrikeThrough"!==e.inputType&&"insertUnorderedList"!==e.inputType&&"insertOrderedList"!==e.inputType&&"formatOutdent"!==e.inputType&&"formatIndent"!==e.inputType&&""!==e.inputType||!e)&&((s=function(){for(var e=n.startContainer.previousSibling;e;){if(3!==e.nodeType&&"A"===e.tagName&&!e.previousSibling&&""===e.innerHTML.replace(O.g.ZWSP,"")&&e.nextSibling)return e;e=e.previousSibling}return!1}())&&s.remove(),t.wysiwyg.element.querySelectorAll("wbr").forEach(function(e){e.remove()}),n.insertNode(document.createElement("wbr")),c.querySelectorAll("[style]").forEach(function(e){e.removeAttribute("style")}),c.querySelectorAll(".vditor-comment").forEach(function(e){""===e.textContent.trim()&&(e.classList.remove("vditor-comment","vditor-comment--focus"),e.removeAttribute("data-cmtids"))}),null!=(s=c.previousElementSibling)&&s.querySelectorAll(".vditor-comment").forEach(function(e){""===e.textContent.trim()&&(e.classList.remove("vditor-comment","vditor-comment--focus"),e.removeAttribute("data-cmtids"))}),o="",s=(c="link-ref-defs-block"===c.getAttribute("data-type")?t.wysiwyg.element:c).isEqualNode(t.wysiwyg.element),d=(0,B.a1)(c,"data-type","footnotes-block"),s?o=c.innerHTML:((i=(0,B.O9)(n.startContainer))&&!d&&(c=(0,z.S)(n.startContainer,"BLOCKQUOTE")?(0,B.F9)(n.startContainer)||c:i),o=(c=d?d:c).outerHTML,"UL"!==c.tagName&&"OL"!==c.tagName||(i=c.previousElementSibling,a=c.nextElementSibling,!i||"UL"!==i.tagName&&"OL"!==i.tagName||(o=i.outerHTML+o,i.remove()),!a||"UL"!==a.tagName&&"OL"!==a.tagName||(o+=a.outerHTML,a.remove()),o=o.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")),c.innerText.startsWith("```")||(t.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(e){e&&!c.isEqualNode(e)&&(o+=e.outerHTML,e.remove())}),t.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(e){e&&!c.isEqualNode(e)&&(o+=e.outerHTML,e.remove())}))),'<p data-block="0">```<wbr></p>'===(o=o.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""))&&t.hint.recentLanguage&&(o='<p data-block="0">```<wbr></p>'.replace("```","```"+t.hint.recentLanguage)),J("SpinVditorDOM",o,"argument",t.options.debugger),o=t.lute.SpinVditorDOM(o),J("SpinVditorDOM",o,"result",t.options.debugger),s?c.innerHTML=o:(c.outerHTML=o,d&&(i=(0,B.E2)(t.wysiwyg.element.querySelector("wbr"),"LI"))&&(a=t.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+i.getAttribute("data-marker")+'"]'))&&a.setAttribute("aria-label",i.textContent.trim().substr(0,24))),(s=t.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']")).forEach(function(e,t){0===t?r=e:(r.insertAdjacentHTML("beforeend",e.innerHTML),e.remove())}),0<s.length&&t.wysiwyg.element.insertAdjacentElement("beforeend",s[0]),(d=t.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']")).forEach(function(e,t){0===t?l=e:(l.insertAdjacentHTML("beforeend",e.innerHTML),e.remove())}),0<d.length&&t.wysiwyg.element.insertAdjacentElement("beforeend",d[0]),(0,V.ib)(t.wysiwyg.element,n),t.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(e){U(e,t)}),e)&&("deleteContentBackward"===e.inputType||"deleteContentForward"===e.inputType)&&t.options.comment.enable&&(t.wysiwyg.triggerRemoveComment(t),t.options.comment.adjustTop(t.wysiwyg.getComments(t,!0))),h(t),W(t,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},Qe=function(e,t,n){if(229===e.keyCode&&""===e.code&&"Unidentified"===e.key&&"sv"!==t.currentMode){e=(0,B.F9)(n);if(e&&""===e.textContent.trim())return!(t[t.currentMode].composingLock=!0)}return!0},$e=function(e,t,n){"Enter"===n.key||"Tab"===n.key||"Backspace"===n.key||-1<n.key.indexOf("Arrow")||(0,I.yl)(n)||"Escape"===n.key||n.shiftKey||n.altKey||(n=(0,B.lG)(e.startContainer,"P")||(0,B.lG)(e.startContainer,"LI"))&&0===(0,V.im)(n,t[t.currentMode].element,e).start&&(n.nodeValue&&(n.nodeValue=n.nodeValue.replace(/\u2006/g,"")),t=document.createTextNode(O.g.ZWSP),e.insertNode(t),e.setStartAfter(t))},et=function(e,t){var n;"ArrowDown"!==t&&"ArrowUp"!==t||(n=(0,B.a1)(e.startContainer,"data-type","math-inline")||(0,B.a1)(e.startContainer,"data-type","html-entity")||(0,B.a1)(e.startContainer,"data-type","html-inline"))&&("ArrowDown"===t&&e.setStartAfter(n.parentElement),"ArrowUp"===t)&&e.setStartBefore(n.parentElement)},tt=function(e,t){var n=(0,V.zh)(e),r=(0,B.F9)(n.startContainer);r&&(r.insertAdjacentHTML(t,'<p data-block="0">'+O.g.ZWSP+"<wbr>\n</p>"),(0,V.ib)(e[e.currentMode].element,n),Me(e),S(e))},nt=function(e){var t=(0,B.lG)(e,"TABLE");return!(!t||!t.rows[0].cells[0].isSameNode(e))&&t},rt=function(e){var t=(0,B.lG)(e,"TABLE");return!(!t||!t.lastElementChild.lastElementChild.lastElementChild.isSameNode(e))&&t},ot=function(e,t,n){void 0===n&&(n=!0);var r=e.previousElementSibling;return(r=r||(e.parentElement.previousElementSibling?e.parentElement.previousElementSibling.lastElementChild:"TBODY"===e.parentElement.parentElement.tagName&&e.parentElement.parentElement.previousElementSibling?e.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild:null))&&(t.selectNodeContents(r),n||t.collapse(!1),(0,V.Hc)(t)),r},it=function(e,t,n,r,o){var i=(0,V.im)(r,e[e.currentMode].element,n);return("ArrowDown"===t.key&&-1===r.textContent.trimRight().substr(i.start).indexOf("\n")||"ArrowRight"===t.key&&i.start>=r.textContent.trimRight().length)&&(!(i=o.nextElementSibling)||"TABLE"===i.tagName||i.getAttribute("data-type")?(o.insertAdjacentHTML("afterend",'<p data-block="0">'+O.g.ZWSP+"<wbr></p>"),(0,V.ib)(e[e.currentMode].element,n)):(n.selectNodeContents(i),n.collapse(!0),(0,V.Hc)(n)),t.preventDefault(),!0)},at=function(e,t,n,r,o){var i=(0,V.im)(r,e[e.currentMode].element,n);return("ArrowUp"===t.key&&-1===r.textContent.substr(0,i.start).indexOf("\n")||("ArrowLeft"===t.key||"Backspace"===t.key&&""===n.toString())&&0===i.start)&&(!(r=o.previousElementSibling)||"TABLE"===r.tagName||r.getAttribute("data-type")?(o.insertAdjacentHTML("beforebegin",'<p data-block="0">'+O.g.ZWSP+"<wbr></p>"),(0,V.ib)(e[e.currentMode].element,n)):(n.selectNodeContents(r),n.collapse(!1),(0,V.Hc)(n)),t.preventDefault(),!0)},lt=function(e,t,n,r){void 0===r&&(r=!0);var o=(0,B.lG)(t.startContainer,"LI");if(e[e.currentMode].element.querySelectorAll("wbr").forEach(function(e){e.remove()}),t.insertNode(document.createElement("wbr")),r&&o){for(var i="",a=0;a<o.parentElement.childElementCount;a++){var l=o.parentElement.children[a].querySelector("input");l&&l.remove(),i+='<p data-block="0">'+o.parentElement.children[a].innerHTML.trimLeft()+"</p>"}o.parentElement.insertAdjacentHTML("beforebegin",i),o.parentElement.remove()}else o?"check"===n?o.parentElement.querySelectorAll("li").forEach(function(e){e.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'+(0===e.textContent.indexOf(" ")?"":" ")),e.classList.add("vditor-task")}):(o.querySelector("input")&&o.parentElement.querySelectorAll("li").forEach(function(e){e.querySelector("input").remove(),e.classList.remove("vditor-task")}),r=void 0,"list"===n?(r=document.createElement("ul")).setAttribute("data-marker","*"):(r=document.createElement("ol")).setAttribute("data-marker","1."),r.setAttribute("data-block","0"),r.setAttribute("data-tight",o.parentElement.getAttribute("data-tight")),r.innerHTML=o.parentElement.innerHTML,o.parentElement.parentNode.replaceChild(r,o.parentElement)):((r=(0,B.a1)(t.startContainer,"data-block","0"))||(e[e.currentMode].element.querySelector("wbr").remove(),(r=e[e.currentMode].element.querySelector("p")).innerHTML="<wbr>"),"check"===n?(r.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '+r.innerHTML+"</li></ul>"),r.remove()):"list"===n?(r.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'+r.innerHTML+"</li></ul>"),r.remove()):"ordered-list"===n&&(r.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'+r.innerHTML+"</li></ol>"),r.remove()))},st=function(t,n,e){var r,o,i,a=n.previousElementSibling;n&&a?(r=[n],Array.from(e.cloneContents().children).forEach(function(e,t){3!==e.nodeType&&n&&""!==e.textContent.trim()&&n.getAttribute("data-node-id")===e.getAttribute("data-node-id")&&(0!==t&&r.push(n),n=n.nextElementSibling)}),t[t.currentMode].element.querySelectorAll("wbr").forEach(function(e){e.remove()}),e.insertNode(document.createElement("wbr")),o=a.parentElement,i="",r.forEach(function(e){var t=e.getAttribute("data-marker");1!==t.length&&(t="1"+t.slice(-1)),i+='<li data-node-id="'+e.getAttribute("data-node-id")+'" data-marker="'+t+'">'+e.innerHTML+"</li>",e.remove()}),a.insertAdjacentHTML("beforeend","<"+o.tagName+' data-block="0">'+i+"</"+o.tagName+">"),"wysiwyg"===t.currentMode?o.outerHTML=t.lute.SpinVditorDOM(o.outerHTML):o.outerHTML=t.lute.SpinVditorIRDOM(o.outerHTML),(0,V.ib)(t[t.currentMode].element,e),(a=(0,B.O9)(e.startContainer))&&a.querySelectorAll(".vditor-"+t.currentMode+"__preview[data-render='2']").forEach(function(e){U(e,t),"wysiwyg"===t.currentMode&&e.previousElementSibling.setAttribute("style","display:none")}),S(t),Me(t)):t[t.currentMode].element.focus()},dt=function(t,n,e,r){var o,i,a,l,s,d=(0,B.lG)(n.parentElement,"LI");d?(t[t.currentMode].element.querySelectorAll("wbr").forEach(function(e){e.remove()}),e.insertNode(document.createElement("wbr")),o=(s=n.parentElement).cloneNode(),i=[n],Array.from(e.cloneContents().children).forEach(function(e,t){3!==e.nodeType&&n&&""!==e.textContent.trim()&&n.getAttribute("data-node-id")===e.getAttribute("data-node-id")&&(0!==t&&i.push(n),n=n.nextElementSibling)}),a=!1,l="",s.querySelectorAll("li").forEach(function(e){a&&(l+=e.outerHTML,(e.nextElementSibling||e.previousElementSibling?e:e.parentElement).remove()),e.isSameNode(i[i.length-1])&&(a=!0)}),i.reverse().forEach(function(e){d.insertAdjacentElement("afterend",e)}),l&&(o.innerHTML=l,i[0].insertAdjacentElement("beforeend",o)),"wysiwyg"===t.currentMode?r.outerHTML=t.lute.SpinVditorDOM(r.outerHTML):r.outerHTML=t.lute.SpinVditorIRDOM(r.outerHTML),(0,V.ib)(t[t.currentMode].element,e),(s=(0,B.O9)(e.startContainer))&&s.querySelectorAll(".vditor-"+t.currentMode+"__preview[data-render='2']").forEach(function(e){U(e,t),"wysiwyg"===t.currentMode&&e.previousElementSibling.setAttribute("style","display:none")}),S(t),Me(t)):t[t.currentMode].element.focus()},ct=function(e,t){for(var n=getSelection().getRangeAt(0).startContainer.parentElement,r=e.rows[0].cells.length,o=e.rows.length,i=0,a=0;a<o;a++)for(var l=0;l<r;l++)if(e.rows[a].cells[l].isSameNode(n)){i=l;break}for(var s=0;s<o;s++)e.rows[s].cells[i].setAttribute("align",t)},pt=function(e){var t=e.trimRight().split("\n").pop();return""!==t&&(""===t.replace(/ |-/g,"")||""===t.replace(/ |_/g,"")||""===t.replace(/ |\*/g,""))&&2<t.replace(/ /g,"").length&&!(-1<t.indexOf("-")&&-1===t.trimLeft().indexOf(" ")&&1<e.trimRight().split("\n").length)&&0!==t.indexOf("    ")&&0!==t.indexOf("\t")},ut=function(e){var t=e.trimRight().split("\n");return 0!==(e=t.pop()).indexOf("    ")&&0!==e.indexOf("\t")&&""!==(e=e.trimLeft())&&0!==t.length&&(""===e.replace(/-/g,"")||""===e.replace(/=/g,""))},S=function(e,t){void 0===t&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),"wysiwyg"===e.currentMode?W(e,t):"ir"===e.currentMode?v(e,t):"sv"===e.currentMode&&u(e,t)},mt=function(e,t,n,r){var o=e.startContainer,i=(0,B.lG)(o,"LI");if(i){if(!(0,I.yl)(r)&&!r.altKey&&"Enter"===r.key&&!r.shiftKey&&n&&i.contains(n)&&n.nextElementSibling)return i&&!i.textContent.endsWith("\n")&&i.insertAdjacentText("beforeend","\n"),e.insertNode(document.createTextNode("\n\n")),e.collapse(!1),S(t),r.preventDefault(),!0;if(!((0,I.yl)(r)||r.shiftKey||r.altKey||"Backspace"!==r.key||i.previousElementSibling||""!==e.toString()||0!==(0,V.im)(i,t[t.currentMode].element,e).start))return i.nextElementSibling?(i.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+i.innerHTML+"</p>"),i.remove()):i.parentElement.outerHTML='<p data-block="0"><wbr>'+i.innerHTML+"</p>",(0,V.ib)(t[t.currentMode].element,e),S(t),r.preventDefault(),!0;if(!(0,I.yl)(r)&&!r.shiftKey&&!r.altKey&&"Backspace"===r.key&&""===i.textContent.trim().replace(O.g.ZWSP,"")&&""===e.toString()&&"LI"===(null==(n=i.previousElementSibling)?void 0:n.tagName))return i.previousElementSibling.insertAdjacentText("beforeend","\n\n"),e.selectNodeContents(i.previousElementSibling),e.collapse(!1),i.remove(),(0,V.ib)(t[t.currentMode].element,e),S(t),r.preventDefault(),!0;if(!(0,I.yl)(r)&&!r.altKey&&"Tab"===r.key){n=!1;if((n=0===e.startOffset&&(3===o.nodeType&&!o.previousSibling||3!==o.nodeType&&"LI"===o.nodeName)||i.classList.contains("vditor-task")&&1===e.startOffset&&3!==o.previousSibling.nodeType&&"INPUT"===o.previousSibling.tagName?!0:n)||""!==e.toString())return r.shiftKey?dt(t,i,e,i.parentElement):st(t,i,e),r.preventDefault(),!0}}return!1},ft=function(e,t,n){if(e.options.tab&&"Tab"===n.key)return n.shiftKey||(""!==t.toString()&&t.extractContents(),t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1)),(0,V.Hc)(t),S(e),n.preventDefault(),!0},ht=function(e,t,n,r){if(n){if(!(0,I.yl)(e)&&!e.altKey&&"Enter"===e.key){var o,i=String.raw(ve||(a=["",""],i=["",""],Object.defineProperty?Object.defineProperty(a,"raw",{value:i}):a.raw=i,ve=a),n.textContent).replace(/\\\|/g,"").trim(),a=i.split("|");if(i.startsWith("|")&&i.endsWith("|")&&3<a.length)return o=a.map(function(){return"---"}).join("|"),o=n.textContent+"\n"+o.substring(3,o.length-3)+"\n|<wbr>",n.outerHTML=t.lute.SpinVditorDOM(o),(0,V.ib)(t[t.currentMode].element,r),S(t),_(t),e.preventDefault(),!0;if(pt(n.innerHTML)&&n.previousElementSibling)return o="",1<(l=n.innerHTML.trimRight().split("\n")).length&&(l.pop(),o='<p data-block="0">'+l.join("\n")+"</p>"),n.insertAdjacentHTML("afterend",o+'<hr data-block="0"><p data-block="0"><wbr>\n</p>'),n.remove(),(0,V.ib)(t[t.currentMode].element,r),S(t),_(t),e.preventDefault(),!0;if(ut(n.innerHTML))return"wysiwyg"===t.currentMode?n.outerHTML=t.lute.SpinVditorDOM(n.innerHTML+'<p data-block="0"><wbr>\n</p>'):n.outerHTML=t.lute.SpinVditorIRDOM(n.innerHTML+'<p data-block="0"><wbr>\n</p>'),(0,V.ib)(t[t.currentMode].element,r),S(t),_(t),e.preventDefault(),!0}var l;return r.collapsed&&n.previousElementSibling&&"Backspace"===e.key&&!(0,I.yl)(e)&&!e.altKey&&!e.shiftKey&&1<n.textContent.trimRight().split("\n").length&&0===(0,V.im)(n,t[t.currentMode].element,r).start&&((l=(0,B.DX)(n.previousElementSibling)).textContent.endsWith("\n")||(l.textContent=l.textContent+"\n"),l.parentElement.insertAdjacentHTML("beforeend","<wbr>"+n.innerHTML),n.remove(),(0,V.ib)(t[t.currentMode].element,r)),!1}var a,i},vt=function(e,t,n){for(var r="",o=0;o<n.parentElement.childElementCount;o++)r+='<td align="'+n.parentElement.children[o].getAttribute("align")+'"> </td>';"TH"===n.tagName?n.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>"+r+"</tr></tbody>"):n.parentElement.insertAdjacentHTML("afterend","<tr>"+r+"</tr>"),S(e)},gt=function(e,t,n){for(var r,o="",i=0;i<n.parentElement.childElementCount;i++)"TH"===n.tagName?o+='<th align="'+n.parentElement.children[i].getAttribute("align")+'"> </th>':o+='<td align="'+n.parentElement.children[i].getAttribute("align")+'"> </td>';"TH"===n.tagName?(n.parentElement.parentElement.insertAdjacentHTML("beforebegin","<thead><tr>"+o+"</tr></thead>"),t.insertNode(document.createElement("wbr")),r=n.parentElement.innerHTML.replace(/<th>/g,"<td>").replace(/<\/th>/g,"</td>"),n.parentElement.parentElement.nextElementSibling.insertAdjacentHTML("afterbegin",r),n.parentElement.parentElement.remove(),(0,V.ib)(e.ir.element,t)):n.parentElement.insertAdjacentHTML("beforebegin","<tr>"+o+"</tr>"),S(e)},bt=function(e,t,n,r){void 0===r&&(r="afterend");for(var o=0,i=n.previousElementSibling;i;)o++,i=i.previousElementSibling;for(var a=0;a<t.rows.length;a++)0===a?t.rows[a].cells[o].insertAdjacentHTML(r,"<th> </th>"):t.rows[a].cells[o].insertAdjacentHTML(r,"<td> </td>");S(e)},yt=function(e,t,n){var r;"TD"===n.tagName&&(r=n.parentElement.parentElement,n.parentElement.previousElementSibling?t.selectNodeContents(n.parentElement.previousElementSibling.lastElementChild):t.selectNodeContents(r.previousElementSibling.lastElementChild.lastElementChild),(1===r.childElementCount?r:n.parentElement).remove(),t.collapse(!1),(0,V.Hc)(t),S(e))},wt=function(e,t,n,r){for(var o=0,i=r.previousElementSibling;i;)o++,i=i.previousElementSibling;(r.previousElementSibling||r.nextElementSibling)&&(t.selectNodeContents(r.previousElementSibling||r.nextElementSibling),t.collapse(!0));for(var a=0;a<n.rows.length;a++){var l=n.rows[a].cells;if(1===l.length){n.remove(),Me(e);break}l[o].remove()}(0,V.Hc)(t),S(e)},kt=function(e,t,n){var r=n.startContainer,o=(0,B.lG)(r,"TD")||(0,B.lG)(r,"TH");if(o){if(!(0,I.yl)(t)&&!t.altKey&&"Enter"===t.key)return o.lastElementChild&&(!o.lastElementChild||o.lastElementChild.isSameNode(o.lastChild)&&"BR"===o.lastElementChild.tagName)||o.insertAdjacentHTML("beforeend","<br>"),r=document.createElement("br"),n.insertNode(r),n.setStartAfter(r),S(e),_(e),t.preventDefault(),!0;if("Tab"===t.key)return t.shiftKey?ot(o,n):(i=(i=o.nextElementSibling)||(o.parentElement.nextElementSibling?o.parentElement.nextElementSibling.firstElementChild:"THEAD"===o.parentElement.parentElement.tagName&&o.parentElement.parentElement.nextElementSibling?o.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild:null))&&(n.selectNodeContents(i),(0,V.Hc)(n)),t.preventDefault(),!0;var i,a,r=o.parentElement.parentElement.parentElement;if("ArrowUp"===t.key){if(t.preventDefault(),"TH"===o.tagName)r.previousElementSibling?(n.selectNodeContents(r.previousElementSibling),n.collapse(!1),(0,V.Hc)(n)):tt(e,"beforebegin");else{for(var l=0,s=o.parentElement;l<s.cells.length&&!s.cells[l].isSameNode(o);l++);var d=(d=s.previousElementSibling)||s.parentElement.previousElementSibling.firstChild;n.selectNodeContents(d.cells[l]),n.collapse(!1),(0,V.Hc)(n)}return!0}if("ArrowDown"===t.key){if(t.preventDefault(),(s=o.parentElement).nextElementSibling||"TD"!==o.tagName){for(l=0;l<s.cells.length&&!s.cells[l].isSameNode(o);l++);i=(i=s.nextElementSibling)||s.parentElement.nextElementSibling.firstChild,n.selectNodeContents(i.cells[l]),n.collapse(!0),(0,V.Hc)(n)}else r.nextElementSibling?(n.selectNodeContents(r.nextElementSibling),n.collapse(!0),(0,V.Hc)(n)):tt(e,"afterend");return!0}if("wysiwyg"===e.currentMode&&!(0,I.yl)(t)&&"Enter"===t.key&&!t.shiftKey&&t.altKey)return(d=e.wysiwyg.popover.querySelector(".vditor-input")).focus(),d.select(),t.preventDefault(),!0;if(!(0,I.yl)(t)&&!t.shiftKey&&!t.altKey&&"Backspace"===t.key&&0===n.startOffset&&""===n.toString())return!ot(o,n,!1)&&r&&(""===r.textContent.trim()?(r.outerHTML='<p data-block="0"><wbr>\n</p>',(0,V.ib)(e[e.currentMode].element,n)):(n.setStartBefore(r),n.collapse(!0)),S(e)),t.preventDefault(),!0;if(p("⇧⌘F",t))return gt(e,n,o),t.preventDefault(),!0;if(p("⌘=",t))return vt(e,n,o),t.preventDefault(),!0;if(p("⇧⌘G",t))return bt(e,r,o,"beforebegin"),t.preventDefault(),!0;if(p("⇧⌘=",t))return bt(e,r,o),t.preventDefault(),!0;if(p("⌘-",t))return yt(e,n,o),t.preventDefault(),!0;if(p("⇧⌘-",t))return wt(e,n,r,o),t.preventDefault(),!0;if(p("⇧⌘L",t)){if("ir"===e.currentMode)return ct(r,"left"),S(e),t.preventDefault(),!0;if(a=e.wysiwyg.popover.querySelector('[data-type="left"]'))return a.click(),t.preventDefault(),!0}if(p("⇧⌘C",t)){if("ir"===e.currentMode)return ct(r,"center"),S(e),t.preventDefault(),!0;if(a=e.wysiwyg.popover.querySelector('[data-type="center"]'))return a.click(),t.preventDefault(),!0}if(p("⇧⌘R",t)){if("ir"===e.currentMode)return ct(r,"right"),S(e),t.preventDefault(),!0;if(a=e.wysiwyg.popover.querySelector('[data-type="right"]'))return a.click(),t.preventDefault(),!0}}return!1},Et=function(e,t,n,r){if("PRE"===n.tagName&&p("⌘A",t))return r.selectNodeContents(n.firstElementChild),t.preventDefault(),!0;if(e.options.tab&&"Tab"===t.key&&!t.shiftKey&&""===r.toString())return r.insertNode(document.createTextNode(e.options.tab)),r.collapse(!1),S(e),t.preventDefault(),!0;if("Backspace"===t.key&&!(0,I.yl)(t)&&!t.shiftKey&&!t.altKey){var o=(0,V.im)(n,e[e.currentMode].element,r);if((0===o.start||1===o.start&&"\n"===n.innerText)&&""===r.toString())return n.parentElement.outerHTML='<p data-block="0"><wbr>'+n.firstElementChild.innerHTML+"</p>",(0,V.ib)(e[e.currentMode].element,r),S(e),t.preventDefault(),!0}return!(0,I.yl)(t)&&!t.altKey&&"Enter"===t.key&&(n.firstElementChild.textContent.endsWith("\n")||n.firstElementChild.insertAdjacentText("beforeend","\n"),r.extractContents(),r.insertNode(document.createTextNode("\n")),r.collapse(!1),(0,V.Hc)(r),(0,I.vU)()||("wysiwyg"===e.currentMode?Ye:se)(e,r),_(e),t.preventDefault(),!0)},xt=function(e,t,n,r){var o=t.startContainer,i=(0,B.lG)(o,"BLOCKQUOTE");if(i&&""===t.toString()){if("Backspace"===n.key&&!(0,I.yl)(n)&&!n.shiftKey&&!n.altKey&&0===(0,V.im)(i,e[e.currentMode].element,t).start)return t.insertNode(document.createElement("wbr")),i.outerHTML=i.innerHTML,(0,V.ib)(e[e.currentMode].element,t),S(e),n.preventDefault(),!0;if(r&&"Enter"===n.key&&!(0,I.yl)(n)&&!n.shiftKey&&!n.altKey&&"BLOCKQUOTE"===r.parentElement.tagName){var a=!1;if("\n"===r.innerHTML.replace(O.g.ZWSP,"")||""===r.innerHTML.replace(O.g.ZWSP,"")?(a=!0,r.remove()):r.innerHTML.endsWith("\n\n")&&(0,V.im)(r,e[e.currentMode].element,t).start===r.textContent.length-1&&(r.innerHTML=r.innerHTML.substr(0,r.innerHTML.length-2),a=!0),a)return i.insertAdjacentHTML("afterend",'<p data-block="0">'+O.g.ZWSP+"<wbr>\n</p>"),(0,V.ib)(e[e.currentMode].element,t),S(e),n.preventDefault(),!0}r=(0,B.F9)(o);if("wysiwyg"===e.currentMode&&r&&p("⇧⌘;",n))return t.insertNode(document.createElement("wbr")),r.outerHTML='<blockquote data-block="0">'+r.outerHTML+"</blockquote>",(0,V.ib)(e.wysiwyg.element,t),W(e),n.preventDefault(),!0;if(it(e,n,t,i,i))return!0;if(at(e,n,t,i,i))return!0}return!1},_t=function(e,t,n){var r,o,i,a,l,s,d=t.startContainer,c=(0,B.fb)(d,"vditor-task");if(c){if(p("⇧⌘J",n))return(a=c.firstElementChild).checked?a.removeAttribute("checked"):a.setAttribute("checked","checked"),S(e),n.preventDefault(),!0;if("Backspace"===n.key&&!(0,I.yl)(n)&&!n.shiftKey&&!n.altKey&&""===t.toString()&&1===t.startOffset&&(3===d.nodeType&&d.previousSibling&&"INPUT"===d.previousSibling.tagName||3!==d.nodeType))return a=c.previousElementSibling,c.querySelector("input").remove(),(a?((0,B.DX)(a).parentElement.insertAdjacentHTML("beforeend","<wbr>"+c.innerHTML.trim()),c):(c.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+(c.innerHTML.trim()||"\n")+"</p>"),c.nextElementSibling?c:c.parentElement)).remove(),(0,V.ib)(e[e.currentMode].element,t),S(e),n.preventDefault(),!0;if("Enter"===n.key&&!(0,I.yl)(n)&&!n.shiftKey&&!n.altKey)return""===c.textContent.trim()?(0,B.fb)(c.parentElement,"vditor-task")?(a=(0,B.O9)(d))&&dt(e,c,t,a):c.nextElementSibling?(o=r="",i=!1,Array.from(c.parentElement.children).forEach(function(e){c.isSameNode(e)?i=!0:i?r+=e.outerHTML:o+=e.outerHTML}),a=c.parentElement.tagName,l="OL"===c.parentElement.tagName?"":' data-marker="'+c.parentElement.getAttribute("data-marker")+'"',s="",o&&(s="UL"===c.parentElement.tagName?"":' start="1"',o="<"+a+' data-tight="true"'+l+' data-block="0">'+o+"</"+a+">"),c.parentElement.outerHTML=o+'<p data-block="0"><wbr>\n</p><'+a+'\n data-tight="true"'+l+' data-block="0"'+s+">"+r+"</"+a+">"):(c.parentElement.insertAdjacentHTML("afterend",'<p data-block="0"><wbr>\n</p>'),(1===c.parentElement.querySelectorAll("li").length?c.parentElement:c).remove()):3!==d.nodeType&&0===t.startOffset&&"INPUT"===d.firstChild.tagName?t.setStart(d.childNodes[1],1):(t.setEndAfter(c.lastChild),c.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'+c.getAttribute("data-marker")+'"><input type="checkbox"> <wbr></li>'),document.querySelector("wbr").after(t.extractContents())),(0,V.ib)(e[e.currentMode].element,t),S(e),_(e),n.preventDefault(),!0}return!1},St=function(e,t,n,r){if(3!==t.startContainer.nodeType){var o=t.startContainer.children[t.startOffset];if(o&&"HR"===o.tagName)return t.selectNodeContents(o.previousElementSibling),t.collapse(!1),n.preventDefault(),!0}if(r){var i,o=r.previousElementSibling;if(o&&0===(0,V.im)(r,e[e.currentMode].element,t).start&&((0,I.vU)()&&"HR"===o.tagName||"TABLE"===o.tagName))return("TABLE"===o.tagName?((i=o.lastElementChild.lastElementChild.lastElementChild).innerHTML=i.innerHTML.trimLeft()+"<wbr>"+r.textContent.trim(),r):o).remove(),(0,V.ib)(e[e.currentMode].element,t),S(e),n.preventDefault(),!0}return!1},Lt=function(e){(0,I.vU)()&&3!==e.startContainer.nodeType&&"HR"===e.startContainer.tagName&&e.setStartBefore(e.startContainer)},Tt=function(e,t,n){var r;return!(!(0,I.vU)()||("ArrowUp"===e.key&&t&&"TABLE"===(null==(r=t.previousElementSibling)?void 0:r.tagName)?(r=t.previousElementSibling,n.selectNodeContents(r.rows[r.rows.length-1].lastElementChild),n.collapse(!1),e.preventDefault(),0):"ArrowDown"!==e.key||!t||"TABLE"!==(null==(r=t.nextElementSibling)?void 0:r.tagName)||(n.selectNodeContents(t.nextElementSibling.rows[0].cells[0]),n.collapse(!0),e.preventDefault(),0)))},Ct=function(k,E,x){return l=function(){var l,s,d,c,p,u,m,f,h,v,g,b,r,o,i,a,y,w,e;return r=this,o=function(e){switch(e.label){case 0:return"true"!==k[k.currentMode].element.getAttribute("contenteditable")?[2]:(E.stopPropagation(),E.preventDefault(),"clipboardData"in E?(l=E.clipboardData.getData("text/html"),s=E.clipboardData.getData("text/plain"),d=E.clipboardData.files):(l=E.dataTransfer.getData("text/html"),s=E.dataTransfer.getData("text/plain"),E.dataTransfer.types.includes("Files")&&(d=E.dataTransfer.items)),c={},p=function(e,t){var r;return t?(t=e.TokensStr(),34===e.__internal_object__.Parent.Type&&t&&-1===t.indexOf("file://")&&k.options.upload.linkToImgUrl&&((r=new XMLHttpRequest).open("POST",k.options.upload.linkToImgUrl),k.options.upload.token&&r.setRequestHeader("X-Upload-Token",k.options.upload.token),k.options.upload.withCredentials&&(r.withCredentials=!0),Ze(k,r),r.setRequestHeader("Content-Type","application/json; charset=utf-8"),r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE){if(200===r.status){var e=r.responseText,t=(k.options.upload.linkToImgFormat&&(e=k.options.upload.linkToImgFormat(r.responseText)),JSON.parse(e));if(0!==t.code)return void k.tip.show(t.msg);var n=t.data.originalURL;"sv"===k.currentMode?k.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach(function(e){e.textContent===n&&(e.textContent=t.data.url)}):((e=k[k.currentMode].element.querySelector('img[src="'+n+'"]')).src=t.data.url,"ir"===k.currentMode&&(e.previousElementSibling.previousElementSibling.innerHTML=t.data.url)),S(k)}else k.tip.show(r.responseText);k.options.upload.linkToImgCallback&&k.options.upload.linkToImgCallback(r.responseText)}},r.send(JSON.stringify({url:t}))),"ir"===k.currentMode?['<span class="vditor-ir__marker vditor-ir__marker--link">'+Lute.EscapeHTMLStr(t)+"</span>",Lute.WalkContinue]:"wysiwyg"===k.currentMode?["",Lute.WalkContinue]:['<span class="vditor-sv__marker--link">'+Lute.EscapeHTMLStr(t)+"</span>",Lute.WalkContinue]):["",Lute.WalkContinue]},l.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/gi,"").trim()!=='<a href="'+s+'">'+s+"</a>"&&l.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/gi,"").trim()!=='\x3c!--StartFragment--\x3e<a href="'+s+'">'+s+"</a>\x3c!--EndFragment--\x3e"||(l=""),(u=(new DOMParser).parseFromString(l,"text/html")).body&&(l=u.body.innerHTML),l=Lute.Sanitize(l),k.wysiwyg.getComments(k),u=k[k.currentMode].element.scrollHeight,t=l,n=s,void 0===(r=k.currentMode)&&(r="sv"),(o=document.createElement("div")).innerHTML=t,i=!1,1===o.childElementCount&&-1<o.lastElementChild.style.fontFamily.indexOf("monospace")&&(i=!0),a=o.querySelectorAll("pre"),1===o.childElementCount&&1===a.length&&"vditor-wysiwyg"!==a[0].className&&"vditor-sv"!==a[0].className&&(i=!0),0===t.indexOf('\n<p class="p1">')&&(i=!0),m=!!(i=!(1!==o.childElementCount||"TABLE"!==o.firstElementChild.tagName||!o.querySelector(".line-number")||!o.querySelector(".line-content"))||i)&&(/\n/.test(o=n||t)||1===a.length?"wysiwyg"===r?'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'+o.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"<wbr></code></pre></div>":"\n```\n"+o.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```":"wysiwyg"===r?"<code>"+o.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"</code><wbr>":"`"+o+"`"),(v="sv"===k.currentMode?(0,B.a1)(E.target,"data-type","code-block"):(0,B.lG)(E.target,"CODE"))?("sv"===k.currentMode?document.execCommand("insertHTML",!1,s.replace(/&/g,"&amp;").replace(/</g,"&lt;")):(b=(0,V.im)(E.target,k[k.currentMode].element),"PRE"!==v.parentElement.tagName&&(s+=O.g.ZWSP),v.textContent=v.textContent.substring(0,b.start)+s+v.textContent.substring(b.end),(0,V.$j)(b.start+s.length,b.start+s.length,v.parentElement),null!=(b=v.parentElement)&&b.nextElementSibling.classList.contains("vditor-"+k.currentMode+"__preview")&&(v.parentElement.nextElementSibling.innerHTML=v.outerHTML,U(v.parentElement.nextElementSibling,k))),[3,8]):[3,1]);case 1:return m?(x.pasteCode(m),[3,8]):[3,2];case 2:return""===l.trim()?[3,3]:((b=document.createElement("div")).innerHTML=l,b.querySelectorAll("[style]").forEach(function(e){e.removeAttribute("style")}),b.querySelectorAll(".vditor-copy").forEach(function(e){e.remove()}),"ir"===k.currentMode?(c.HTML2VditorIRDOM={renderLinkDest:p},k.lute.SetJSRenderers({renderers:c}),(0,V.oC)(k.lute.HTML2VditorIRDOM(b.innerHTML),k)):"wysiwyg"===k.currentMode?(c.HTML2VditorDOM={renderLinkDest:p},k.lute.SetJSRenderers({renderers:c}),(0,V.oC)(k.lute.HTML2VditorDOM(b.innerHTML),k)):(c.Md2VditorSVDOM={renderLinkDest:p},k.lute.SetJSRenderers({renderers:c}),ze(k,k.lute.HTML2Md(b.innerHTML).trimRight())),k.outline.render(k),[3,8]);case 3:return 0<d.length?k.options.upload.url||k.options.upload.handler?[4,Xe(k,d)]:[3,5]:[3,7];case 4:return e.sent(),[3,6];case 5:f=new FileReader,"clipboardData"in E?(d=E.clipboardData.files,h=d[0]):E.dataTransfer.types.includes("Files")&&(d=E.dataTransfer.items,h=d[0].getAsFile()),h&&h.type.startsWith("image")&&(f.readAsDataURL(h),f.onload=function(){var e="";"wysiwyg"===k.currentMode?e+='<img alt="'+h.name+'" src="'+f.result.toString()+'">\n':e+="!["+h.name+"]("+f.result.toString()+")\n",document.execCommand("insertHTML",!1,e)}),e.label=6;case 6:return[3,8];case 7:""!==s.trim()&&0===d.length&&(""!==(g=(0,V.zh)(k)).toString()&&k.lute.IsValidLinkDest(s)&&(s="["+g.toString()+"]("+s+")"),"ir"===k.currentMode?(c.Md2VditorIRDOM={renderLinkDest:p},k.lute.SetJSRenderers({renderers:c}),(0,V.oC)(k.lute.Md2VditorIRDOM(s),k)):"wysiwyg"===k.currentMode?(c.Md2VditorDOM={renderLinkDest:p},k.lute.SetJSRenderers({renderers:c}),(0,V.oC)(k.lute.Md2VditorDOM(s),k)):(c.Md2VditorSVDOM={renderLinkDest:p},k.lute.SetJSRenderers({renderers:c}),ze(k,s)),k.outline.render(k)),e.label=8;case 8:return"sv"!==k.currentMode&&((v=(0,B.F9)((0,V.zh)(k).startContainer))&&(g=(0,V.zh)(k),k[k.currentMode].element.querySelectorAll("wbr").forEach(function(e){e.remove()}),g.insertNode(document.createElement("wbr")),"wysiwyg"===k.currentMode?v.outerHTML=k.lute.SpinVditorDOM(v.outerHTML):v.outerHTML=k.lute.SpinVditorIRDOM(v.outerHTML),(0,V.ib)(k[k.currentMode].element,g)),k[k.currentMode].element.querySelectorAll(".vditor-"+k.currentMode+"__preview[data-render='2']").forEach(function(e){U(e,k)})),k.wysiwyg.triggerRemoveComment(k),S(k),k[k.currentMode].element.scrollHeight-u>Math.min(k[k.currentMode].element.clientHeight,window.innerHeight)/2&&_(k),[2]}var t,n,r,o,i,a},w={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(i)throw new TypeError("Generator is already executing.");for(;w;)try{if(i=1,a&&(y=2&t[0]?a.return:t[0]?a.throw||((y=a.return)&&y.call(a),0):a.next)&&!(y=y.call(a,t[1])).done)return y;switch(a=0,(t=y?[2&t[0],y.value]:t)[0]){case 0:case 1:y=t;break;case 4:return w.label++,{value:t[1],done:!1};case 5:w.label++,a=t[1],t=[0];continue;case 7:t=w.ops.pop(),w.trys.pop();continue;default:if(!((y=0<(y=w.trys).length&&y[y.length-1])||6!==t[0]&&2!==t[0])){w=0;continue}if(3===t[0]&&(!y||t[1]>y[0]&&t[1]<y[3]))w.label=t[1];else if(6===t[0]&&w.label<y[1])w.label=y[1],y=t;else{if(!(y&&w.label<y[2])){y[2]&&w.ops.pop(),w.trys.pop();continue}w.label=y[2],w.ops.push(t)}}t=o.call(r,w)}catch(e){t=[6,e],a=0}finally{i=y=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},new(a=(a=void 0)||Promise)(function(n,t){function r(e){try{i(l.next(e))}catch(e){t(e)}}function o(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((l=l.apply(void 0,[])).next())});var a,l},Mt=function(e){e.hint.render(e);var t,n,r=(0,V.zh)(e).startContainer,r=(0,B.a1)(r,"data-type","code-block-info");r&&(""===r.textContent.replace(O.g.ZWSP,"")&&e.hint.recentLanguage?(r.textContent=O.g.ZWSP+e.hint.recentLanguage,(0,V.zh)(e).selectNodeContents(r)):(t=[],n=r.textContent.substring(0,(0,V.im)(r,e.ir.element).start).replace(O.g.ZWSP,""),(e.options.preview.hljs.langs||O.g.CODE_LANGUAGES).forEach(function(e){-1<e.indexOf(n.toLowerCase())&&t.push({html:e,value:e})}),e.hint.genHTML(t,n,e)))},v=function(t,n){(n=void 0===n?{enableAddUndoStack:!0,enableHint:!1,enableInput:!0}:n).enableHint&&Mt(t),clearTimeout(t.ir.processTimeoutId),t.ir.processTimeoutId=window.setTimeout(function(){var e;t.ir.composingLock||(e=D(t),"function"==typeof t.options.input&&n.enableInput&&t.options.input(e),t.options.counter.enable&&t.counter.render(t,e),t.options.cache.enable&&(0,I.pK)()&&(localStorage.setItem(t.options.cache.id,e),t.options.cache.after)&&t.options.cache.after(e),t.devtools&&t.devtools.renderEchart(t),n.enableAddUndoStack&&t.undo.addToUndoStack(t))},t.options.undoDelay)},At=function(e,t){var n,r=(0,V.zh)(e),o=(0,B.F9)(r.startContainer)||r.startContainer;o&&((n=o.querySelector(".vditor-ir__marker--heading"))?n.innerHTML=t:(o.insertAdjacentText("afterbegin",t),r.selectNodeContents(o),r.collapse(!1)),se(e,r.cloneRange()),ge(e))},Ht=function(e,t,n){n=(0,B.a1)(e.startContainer,"data-type",n);n&&(n.firstElementChild.remove(),n.lastElementChild.remove(),e.insertNode(document.createElement("wbr")),(e=document.createElement("div")).innerHTML=t.lute.SpinVditorIRDOM(n.outerHTML),n.outerHTML=e.firstElementChild.innerHTML.trim())},Nt=function(e,t,n,r){var o,i,a=(0,V.zh)(e),l=t.getAttribute("data-type"),s=a.startContainer,d=(3===s.nodeType&&(s=s.parentElement),!0);t.classList.contains("vditor-menu--current")?"quote"===l?(s=(0,B.lG)(s,"BLOCKQUOTE"))&&(a.insertNode(document.createElement("wbr")),s.outerHTML=""===s.innerHTML.trim()?'<p data-block="0">'+s.innerHTML+"</p>":s.innerHTML):"link"===l?(s=(0,B.a1)(a.startContainer,"data-type","a"))&&((o=(0,B.fb)(a.startContainer,"vditor-ir__link"))?(a.insertNode(document.createElement("wbr")),s.outerHTML=o.innerHTML):s.outerHTML=s.querySelector(".vditor-ir__link").innerHTML+"<wbr>"):"italic"===l?Ht(a,e,"em"):"bold"===l?Ht(a,e,"strong"):"strike"===l?Ht(a,e,"s"):"inline-code"===l?Ht(a,e,"code"):"check"!==l&&"list"!==l&&"ordered-list"!==l||(lt(e,a,l),d=!1,t.classList.remove("vditor-menu--current")):(0===e.ir.element.childNodes.length&&(e.ir.element.innerHTML='<p data-block="0"><wbr></p>',(0,V.ib)(e.ir.element,a)),o=(0,B.F9)(a.startContainer),"line"===l?o&&(s='<hr data-block="0"><p data-block="0"><wbr>\n</p>',""===o.innerHTML.trim()?o.outerHTML=s:o.insertAdjacentHTML("afterend",s)):"quote"===l?o&&(a.insertNode(document.createElement("wbr")),o.outerHTML='<blockquote data-block="0">'+o.outerHTML+"</blockquote>",d=!1,t.classList.add("vditor-menu--current")):"link"===l?(i=void 0,i=""===a.toString()?n+"<wbr>"+r:""+n+a.toString()+r.replace(")","<wbr>)"),document.execCommand("insertHTML",!1,i),d=!1,t.classList.add("vditor-menu--current")):"italic"===l||"bold"===l||"strike"===l||"inline-code"===l||"code"===l||"table"===l?(i=void 0,""===a.toString()?i=n+"<wbr>"+r:(i="code"===l?n+"\n"+a.toString()+"<wbr>"+r:"table"===l?""+n+a.toString()+"<wbr>"+r:""+n+a.toString()+r+"<wbr>",a.deleteContents()),"table"!==l&&"code"!==l||(i="\n"+i+"\n\n"),(s=document.createElement("span")).innerHTML=i,a.insertNode(s),se(e,a),"table"===l&&(a.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),(0,V.Hc)(a))):"check"!==l&&"list"!==l&&"ordered-list"!==l||(lt(e,a,l,!1),d=!1,j(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current"))),(0,V.ib)(e.ir.element,a),v(e),d&&ge(e)},Ot=(oo.prototype.render=function(c){var e,p,t,n,r=this;window.getSelection().focusNode&&(e=(e=getSelection().getRangeAt(0)).startContainer.textContent.substring(0,e.startOffset)||"",void 0===(p=this.getKey(e,c.options.hint.extend))?(this.element.style.display="none",clearTimeout(this.timeId)):":"===this.splitChar?(t=""===p?c.options.hint.emoji:c.lute.GetEmojis(),n=[],Object.keys(t).forEach(function(e){0===e.indexOf(p.toLowerCase())&&(-1<t[e].indexOf(".")?n.push({html:'<img src="'+t[e]+'" title=":'+e+':"/> :'+e+":",value:":"+e+":"}):n.push({html:'<span class="vditor-hint__emoji">'+t[e]+"</span>"+e,value:t[e]}))}),this.genHTML(n,p,c)):c.options.hint.extend.forEach(function(d){d.key===r.splitChar&&(clearTimeout(r.timeId),r.timeId=window.setTimeout(function(){return e=r,l=function(){var t,r,o,i,a,l,s,e;return r=this,o=function(e){switch(e.label){case 0:return t=this.genHTML,[4,d.hint(p)];case 1:return t.apply(this,[e.sent(),p,c]),[2]}},s={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},e={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function n(n){return function(e){var t=[n,e];if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(l=2&t[0]?a.return:t[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,t[1])).done)return l;switch(a=0,(t=l?[2&t[0],l.value]:t)[0]){case 0:case 1:l=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!((l=0<(l=s.trys).length&&l[l.length-1])||6!==t[0]&&2!==t[0])){s=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3]))s.label=t[1];else if(6===t[0]&&s.label<l[1])s.label=l[1],l=t;else{if(!(l&&s.label<l[2])){l[2]&&s.ops.pop(),s.trys.pop();continue}s.label=l[2],s.ops.push(t)}}t=o.call(r,s)}catch(e){t=[6,e],a=0}finally{i=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},new(a=(a=void 0)||Promise)(function(n,t){function r(e){try{i(l.next(e))}catch(e){t(e)}}function o(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}i((l=l.apply(e,[])).next())});var e,a,l},c.options.hint.delay))}))},oo.prototype.genHTML=function(e,a,n){var t,r,o,l,i=this;0!==e.length?(t=n[n.currentMode].element,r=(o=(0,V.Ny)(t)).left+("left"===n.options.outline.position?n.outline.element.offsetWidth:0),o=o.top,l="",e.forEach(function(e,t){var n,r,o,i;7<t||(n=e.html,""!==a&&(r=n.lastIndexOf(">")+1,-1<(i=(o=n.substr(r)).toLowerCase().indexOf(a.toLowerCase())))&&(o=o.substring(0,i)+"<b>"+o.substring(i,i+a.length)+"</b>"+o.substring(i+a.length),n=n.substr(0,r)+o),l+='<button type="button" data-value="'+encodeURIComponent(e.value)+' "\n'+(0===t?"class='vditor-hint--current'":"")+"> "+n+"</button>")}),this.element.innerHTML=l,e=parseInt(document.defaultView.getComputedStyle(t,null).getPropertyValue("line-height"),10),this.element.style.top=o+(e||22)+"px",this.element.style.left=r+"px",this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach(function(t){t.addEventListener("click",function(e){i.fillEmoji(t,n),e.preventDefault()})}),this.element.getBoundingClientRect().bottom>window.innerHeight&&(this.element.style.top=o-this.element.offsetHeight+"px"),this.element.getBoundingClientRect().right>window.innerWidth&&(this.element.style.left="auto",this.element.style.right="0")):this.element.style.display="none"},oo.prototype.select=function(e,t){var n,r;return!(0===this.element.querySelectorAll("button").length||"none"===this.element.style.display||(n=this.element.querySelector(".vditor-hint--current"),"ArrowDown"===e.key?(e.preventDefault(),e.stopPropagation(),n.removeAttribute("class"),n.nextElementSibling?n.nextElementSibling.className="vditor-hint--current":this.element.children[0].className="vditor-hint--current",0):"ArrowUp"===e.key?(e.preventDefault(),e.stopPropagation(),n.removeAttribute("class"),n.previousElementSibling?n.previousElementSibling.className="vditor-hint--current":(r=this.element.children.length,this.element.children[r-1].className="vditor-hint--current"),0):(0,I.yl)(e)||e.shiftKey||e.altKey||"Enter"!==e.key||e.isComposing||(e.preventDefault(),e.stopPropagation(),this.fillEmoji(n,t),0)))},oo.prototype.getKey=function(n,e){var t,r,o=this;return this.lastIndex=-1,this.splitChar="",e.forEach(function(e){var t=n.lastIndexOf(e.key);o.lastIndex<t&&(o.splitChar=e.key,o.lastIndex=t)}),-1!==this.lastIndex&&(r=(e=n.split(this.splitChar))[e.length-1],1<e.length&&r.trim()===r)&&(2===e.length&&""===e[0]&&e[1].length<32?t=e[1]:(e=e[e.length-2].slice(-1)," "===(0,T.X)(e)&&r.length<32&&(t=r))),t},oo),Dt=(ro.prototype.copy=function(e,t){var n,r=getSelection().getRangeAt(0);""!==r.toString()&&(e.stopPropagation(),e.preventDefault(),(n=document.createElement("div")).appendChild(r.cloneContents()),e.clipboardData.setData("text/plain",t.lute.VditorIRDOM2Md(n.innerHTML).trim()),e.clipboardData.setData("text/html",""))},ro.prototype.bindEvent=function(o){var i=this;this.element.addEventListener("paste",function(e){Ct(o,e,{pasteCode:function(e){document.execCommand("insertHTML",!1,e)}})}),this.element.addEventListener("scroll",function(){s(o,["hint"])}),this.element.addEventListener("compositionstart",function(e){i.composingLock=!0}),this.element.addEventListener("compositionend",function(e){(0,I.vU)()||se(o,getSelection().getRangeAt(0).cloneRange()),i.composingLock=!1}),this.element.addEventListener("input",function(e){if("deleteByDrag"!==e.inputType&&"insertFromDrop"!==e.inputType)return i.preventInput?(i.preventInput=!1,void v(o,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})):void(i.composingLock||"‘"===e.data||"“"===e.data||"《"===e.data||se(o,getSelection().getRangeAt(0).cloneRange(),!1,e))}),this.element.addEventListener("click",function(e){var t,n,r;"INPUT"===e.target.tagName?(e.target.checked?e.target.setAttribute("checked","checked"):e.target.removeAttribute("checked"),i.preventInput=!0,v(o)):(t=(0,V.zh)(o),(n=(n=(0,B.fb)(e.target,"vditor-ir__preview"))||(0,B.fb)(t.startContainer,"vditor-ir__preview"))&&(n.previousElementSibling.firstElementChild?t.selectNodeContents(n.previousElementSibling.firstElementChild):t.selectNodeContents(n.previousElementSibling),t.collapse(!0),(0,V.Hc)(t),_(o)),"IMG"===e.target.tagName&&(n=e.target.parentElement.querySelector(".vditor-ir__marker--link"))&&(t.selectNode(n),(0,V.Hc)(t)),!(n=(0,B.a1)(e.target,"data-type","a"))||n.classList.contains("vditor-ir__node--expand")?(e.target.isEqualNode(i.element)&&i.element.lastElementChild&&t.collapsed&&(r=i.element.lastElementChild.getBoundingClientRect(),e.y>r.top+r.height)&&("P"===i.element.lastElementChild.tagName&&""===i.element.lastElementChild.textContent.trim().replace(O.g.ZWSP,"")?(t.selectNodeContents(i.element.lastElementChild),t.collapse(!1)):(i.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+O.g.ZWSP+"<wbr></p>"),(0,V.ib)(i.element,t))),""===t.toString()?de(t,o):setTimeout(function(){de((0,V.zh)(o),o)}),k(e,o),ge(o)):o.options.link.click?o.options.link.click(n.querySelector(":scope > .vditor-ir__marker--link")):o.options.link.isOpen&&window.open(n.querySelector(":scope > .vditor-ir__marker--link").textContent))}),this.element.addEventListener("keyup",function(e){if(!e.isComposing&&!(0,I.yl)(e))if("Enter"===e.key&&_(o),ge(o),"Backspace"!==e.key&&"Delete"!==e.key||""===o.ir.element.innerHTML||1!==o.ir.element.childNodes.length||!o.ir.element.firstElementChild||"P"!==o.ir.element.firstElementChild.tagName||0!==o.ir.element.firstElementChild.childElementCount||""!==o.ir.element.textContent&&"\n"!==o.ir.element.textContent){var t=(0,V.zh)(o),n=("Backspace"===e.key?((0,I.vU)()&&"\n"===t.startContainer.textContent&&1===t.startOffset&&(t.startContainer.textContent="",de(t,o)),i.element.querySelectorAll(".language-math").forEach(function(e){e=e.querySelector("br");e&&e.remove()})):-1<e.key.indexOf("Arrow")?("ArrowLeft"!==e.key&&"ArrowRight"!==e.key||Mt(o),de(t,o)):229===e.keyCode&&""===e.code&&"Unidentified"===e.key&&de(t,o),(0,B.fb)(t.startContainer,"vditor-ir__preview"));if(n)return"ArrowUp"===e.key||"ArrowLeft"===e.key?(n.previousElementSibling.firstElementChild?t.selectNodeContents(n.previousElementSibling.firstElementChild):t.selectNodeContents(n.previousElementSibling),t.collapse(!1),e.preventDefault(),!0):"SPAN"!==n.tagName||"ArrowDown"!==e.key&&"ArrowRight"!==e.key?void 0:("html-entity"===n.parentElement.getAttribute("data-type")?(n.parentElement.insertAdjacentText("afterend",O.g.ZWSP),t.setStart(n.parentElement.nextSibling,1)):t.selectNodeContents(n.parentElement.lastElementChild),t.collapse(!1),e.preventDefault(),!0)}else o.ir.element.innerHTML=""})},ro),It=function(e){return"sv"===e.currentMode?e.lute.Md2HTML(D(e)):"wysiwyg"===e.currentMode?e.lute.VditorDOM2HTML(e.wysiwyg.element.innerHTML):"ir"===e.currentMode?e.lute.VditorIRDOM2HTML(e.ir.element.innerHTML):void 0},jt=r(895),Rt=r(818),Pt=(no.prototype.render=function(e){return"block"===e.preview.element.style.display?(0,Rt.k)(e.preview.previewElement,this.element.lastElementChild,e):(0,Rt.k)(e[e.currentMode].element,this.element.lastElementChild,e)},no.prototype.toggle=function(e,t,n){void 0===n&&(n=!0);var r=null==(r=e.toolbar.elements.outline)?void 0:r.firstElementChild;(t=void 0===t?!0:t)&&window.innerWidth>=O.g.MOBILE_WIDTH?(this.element.style.display="block",this.render(e),null!=r&&r.classList.add("vditor-menu--current")):(this.element.style.display="none",null!=r&&r.classList.remove("vditor-menu--current")),n&&0<getSelection().rangeCount&&(t=getSelection().getRangeAt(0),e[e.currentMode].element.contains(t.startContainer))&&(0,V.Hc)(t),l(e)},no),qt=r(554),Bt=(to.prototype.render=function(n,e){var r,o,i=this;clearTimeout(this.mdTimeoutId),"none"!==this.element.style.display?e?this.previewElement.innerHTML=e:""!==D(n).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")?(r=(new Date).getTime(),o=D(n),this.mdTimeoutId=window.setTimeout(function(){var t,e;n.options.preview.url?((t=new XMLHttpRequest).open("POST",n.options.preview.url),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.onreadystatechange=function(){var e;t.readyState===XMLHttpRequest.DONE&&(200===t.status?0!==(e=JSON.parse(t.responseText)).code?n.tip.show(e.msg):(n.options.preview.transform&&(e.data=n.options.preview.transform(e.data)),i.previewElement.innerHTML=e.data,i.afterRender(n,r)):(e=n.lute.Md2HTML(o),n.options.preview.transform&&(e=n.options.preview.transform(e)),i.previewElement.innerHTML=e,i.afterRender(n,r)))},t.send(JSON.stringify({markdownText:o}))):(e=n.lute.Md2HTML(o),n.options.preview.transform&&(e=n.options.preview.transform(e)),i.previewElement.innerHTML=e,i.afterRender(n,r))},n.options.preview.delay)):this.previewElement.innerHTML="":"renderPerformance"===this.element.getAttribute("data-type")&&n.tip.hide()},to.prototype.afterRender=function(t,e){t.options.preview.parse&&t.options.preview.parse(this.element);var n=(new Date).getTime()-e,e=(2600<(new Date).getTime()-e?(t.tip.show(window.VditorI18n.performanceTip.replace("${x}",n.toString())),t.preview.element.setAttribute("data-type","renderPerformance")):"renderPerformance"===t.preview.element.getAttribute("data-type")&&(t.tip.hide(),t.preview.element.removeAttribute("data-type")),t.preview.element.querySelector(".vditor-comment--focus")),n=(e&&e.classList.remove("vditor-comment--focus"),(0,Q.O)(t.preview.previewElement,t.options.preview.hljs),(0,te.s)(t.options.preview.hljs,t.preview.previewElement,t.options.cdn),(0,re.i)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,oe.K)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,$.P)(t.preview.previewElement,t.options.cdn),(0,ee.v)(t.preview.previewElement,t.options.cdn),(0,Y.p)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,ie.P)(t.preview.previewElement,t.options.cdn,t.options.theme),(0,ae.B)(t.preview.previewElement,t.options.cdn),(0,X.Q)(t.preview.previewElement,t.options.cdn),t.options.preview.render.media.enable&&(0,qt.Y)(t.preview.previewElement),t.options.customRenders.forEach(function(e){e.render(t.preview.previewElement,t)}),t.preview.element),r=t.outline.render(t);""===r&&(r="[ToC]"),n.querySelectorAll('[data-type="toc-block"]').forEach(function(e){e.innerHTML=r,(0,ne.H)(e,{cdn:t.options.cdn,math:t.options.preview.math})}),(0,ne.H)(t.preview.previewElement,{cdn:t.options.cdn,math:t.options.preview.math})},to.prototype.copyToX=function(e,t,n){"zhihu"!==(n=void 0===n?"mp-wechat":n)?t.querySelectorAll(".katex-html .base").forEach(function(e){e.style.display="initial"}):t.querySelectorAll(".language-math").forEach(function(e){e.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'+e.getAttribute("data-math")+'\\" style="display: block; margin: 0 auto; max-width: 100%;">'}),t.style.backgroundColor="#fff",t.querySelectorAll("code").forEach(function(e){e.style.backgroundImage="none"}),this.element.append(t);var r=t.ownerDocument.createRange();r.selectNode(t),(0,V.Hc)(r),document.execCommand("copy"),t.remove(),e.tip.show(["zhihu","mp-wechat"].includes(n)?"已复制，可到"+("zhihu"===n?"知乎":"微信公众号平台")+"进行粘贴":"已复制到剪切板")},to),zt=(eo.prototype.bindEvent=function(i){var a=this;this.element.addEventListener("mousedown",function(e){var t=document,n=e.clientY,r=i.element.offsetHeight,o=63+i.element.querySelector(".vditor-toolbar").clientHeight;t.ondragstart=function(){return!1},window.captureEvents&&window.captureEvents(),a.element.classList.add("vditor-resize--selected"),t.onmousemove=function(e){"top"===i.options.resize.position?i.element.style.height=Math.max(o,r+(n-e.clientY))+"px":i.element.style.height=Math.max(o,r+(e.clientY-n))+"px",i.options.typewriterMode&&(i.sv.element.style.paddingBottom=i.sv.element.parentElement.offsetHeight/2+"px")},t.onmouseup=function(){i.options.resize.after&&i.options.resize.after(i.element.offsetHeight-r),window.captureEvents&&window.captureEvents(),t.onmousemove=null,t.onmouseup=null,t.ondragstart=null,t.onselectstart=null,t.onselect=null,a.element.classList.remove("vditor-resize--selected")}})},eo),Ut=($r.prototype.copy=function(e,t){e.stopPropagation(),e.preventDefault(),e.clipboardData.setData("text/plain",Ne(t[t.currentMode].element))},$r.prototype.bindEvent=function(o){var i=this;this.element.addEventListener("paste",function(e){Ct(o,e,{pasteCode:function(e){document.execCommand("insertHTML",!1,e)}})}),this.element.addEventListener("scroll",function(){var e,t,n,r;"block"===o.preview.element.style.display&&(e=i.element.scrollTop,t=i.element.clientHeight,n=i.element.scrollHeight-parseFloat(i.element.style.paddingBottom||"0"),(r=o.preview.element).scrollTop=.5<e/t?(e+t)*r.scrollHeight/n-t:e*r.scrollHeight/n)}),this.element.addEventListener("compositionstart",function(e){i.composingLock=!0}),this.element.addEventListener("compositionend",function(e){(0,I.vU)()||d(o,e),i.composingLock=!1}),this.element.addEventListener("input",function(e){if("deleteByDrag"!==e.inputType&&"insertFromDrop"!==e.inputType&&!i.composingLock&&"‘"!==e.data&&"“"!==e.data&&"《"!==e.data)return i.preventInput?(i.preventInput=!1,void u(o,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})):void d(o,e)}),this.element.addEventListener("keyup",function(e){e.isComposing||(0,I.yl)(e)||("Backspace"!==e.key&&"Delete"!==e.key||""===o.sv.element.innerHTML||1!==o.sv.element.childNodes.length||!o.sv.element.firstElementChild||"DIV"!==o.sv.element.firstElementChild.tagName||2!==o.sv.element.firstElementChild.childElementCount||""!==o.sv.element.firstElementChild.textContent&&"\n"!==o.sv.element.textContent?"Enter"===e.key&&_(o):o.sv.element.innerHTML="")})},$r),Vt=(Qr.prototype.show=function(e,t){var n=this;void 0===t&&(t=6e3),this.element.className="vditor-tip vditor-tip--show",0===t?(this.element.innerHTML='<div class="vditor-tip__content">'+e+'\n<div class="vditor-tip__close">X</div></div>',this.element.querySelector(".vditor-tip__close").addEventListener("click",function(){n.hide()})):(this.element.innerHTML='<div class="vditor-tip__content">'+e+"</div>",setTimeout(function(){n.hide()},t)),this.element.removeAttribute("style"),setTimeout(function(){n.element.getBoundingClientRect().top<46&&(n.element.style.position="fixed",n.element.style.top="46px")},150)},Qr.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},Qr),Wt=function(e,t){if(t.options.preview.mode!==e){switch(t.options.preview.mode=e){case"both":t.sv.element.style.display="block",t.preview.element.style.display="block",t.preview.render(t),R(t.toolbar.elements,["both"]);break;case"editor":t.sv.element.style.display="block",t.preview.element.style.display="none",j(t.toolbar.elements,["both"])}t.devtools&&t.devtools.renderEchart(t)}},Gt=(gr=function(e,t){return(gr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},(n=function(e,t){function n(){this.constructor=e}gr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Yr,vr=i),Yr),Ft=function(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"},Kt=r(312),Zt=(hr=function(e,t){return(hr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},(n=function(e,t){function n(){this.constructor=e}hr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Xr,fr=i),Xr),Jt=(mr=function(e,t){return(mr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},(n=function(e,t){function n(){this.constructor=e}mr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Jr,ur=i),Jr),Xt=(Zr.prototype.render=function(e,t){var n,t=t.endsWith("\n")?t.length-1:t.length;"text"===e.options.counter.type&&e[e.currentMode]&&((n=e[e.currentMode].element.cloneNode(!0)).querySelectorAll(".vditor-wysiwyg__preview").forEach(function(e){e.remove()}),t=n.textContent.length),"number"==typeof e.options.counter.max?(t>e.options.counter.max?this.element.className="vditor-counter vditor-counter--error":this.element.className="vditor-counter",this.element.innerHTML=t+"/"+e.options.counter.max):this.element.innerHTML=""+t,this.element.setAttribute("aria-label",e.options.counter.type),e.options.counter.after&&e.options.counter.after(t,{enable:e.options.counter.enable,max:e.options.counter.max,type:e.options.counter.type})},Zr),Yt=(pr=function(e,t){return(pr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},(n=function(e,t){function n(){this.constructor=e}pr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Kr,cr=i),Kr),Qt=(dr=function(e,t){return(dr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},(n=function(e,t){function n(){this.constructor=e}dr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Fr,sr=i),Fr),$t=function(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"},en=(lr=function(e,t){return(lr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},(n=function(e,t){function n(){this.constructor=e}lr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Gr,ar=i),Gr.prototype.bindEvent=function(o){var i=this;this.element.lastElementChild.addEventListener((0,I.Le)(),function(e){var t,n,r=(0,z.S)(e.target,"BUTTON");r&&(e.preventDefault(),e=r.getAttribute("data-value"),r=(0,V.zh)(o),t=e,"wysiwyg"===o.currentMode?t=o.lute.SpinVditorDOM(e):"ir"===o.currentMode&&(t=o.lute.SpinVditorIRDOM(e)),-1<e.indexOf(":")&&"sv"!==o.currentMode?((n=document.createElement("div")).innerHTML=t,t=n.firstElementChild.firstElementChild.outerHTML+" ",(0,V.oC)(t,o)):(r.extractContents(),r.insertNode(document.createTextNode(e))),r.collapse(!1),(0,V.Hc)(r),i.element.lastElementChild.style.display="none",S(o))}),this.element.lastElementChild.addEventListener("mouseover",function(e){e=(0,z.S)(e.target,"BUTTON");e&&(i.element.querySelector(".vditor-emojis__tip").innerHTML=e.getAttribute("data-key"))})},Gr),tn=function(e,t,n){var r=document.createElement("a");"download"in r?(r.download=n,r.style.display="none",r.href=URL.createObjectURL(new Blob([t])),document.body.appendChild(r),r.click(),r.remove()):e.tip.show(window.VditorI18n.downloadTip,0)},nn=(ir=function(e,t){return(ir=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},(n=function(e,t){function n(){this.constructor=e}ir(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Wr,or=i),Wr),rn=(rr=function(e,t){return(rr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},(n=function(e,t){function n(){this.constructor=e}rr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Vr,nr=i),Vr.prototype._bindEvent=function(n,t){this.element.children[0].addEventListener((0,I.Le)(),function(e){e.preventDefault(),n.element.className.includes("vditor--fullscreen")?(t.level||(this.innerHTML=t.icon),n.element.style.zIndex="",document.body.style.overflow="",n.element.classList.remove("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(e){var t=n.toolbar.elements[e].firstChild;t&&(t.className=t.className.replace("__s","__n"),n.options.toolbar.forEach(function(e){"string"!=typeof e&&e.tipPosition&&e.name===t.dataset.type&&(t.className="vditor-tooltipped vditor-tooltipped__"+e.tipPosition)}))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__s","__n"))):(t.level||(this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>'),n.element.style.zIndex=n.options.fullscreen.index.toString(),document.body.style.overflow="hidden",n.element.classList.add("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(e){e=n.toolbar.elements[e].firstChild;e&&(e.className=e.className.replace("__n","__s"))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__n","__s"))),n.devtools&&n.devtools.renderEchart(n),t.click&&t.click(e,n),l(n),me(n)})},Vr),on=(tr=function(e,t){return(tr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},(n=function(e,t){function n(){this.constructor=e}tr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(Ur,er=i),Ur.prototype._bindEvent=function(t,n){var r=this.element.children[0];r.addEventListener((0,I.Le)(),function(e){e.preventDefault(),clearTimeout(t.wysiwyg.afterRenderTimeoutId),clearTimeout(t.ir.processTimeoutId),clearTimeout(t.sv.processTimeoutId),r.classList.contains(O.g.CLASS_MENU_DISABLED)||(r.blur(),r.classList.contains("vditor-menu--current")?("wysiwyg"===t.currentMode?(Ee(t),W(t)):"ir"===t.currentMode&&At(t,""),r.classList.remove("vditor-menu--current")):(s(t,["subToolbar"]),n.style.display="block"))});for(var e=0;e<6;e++)n.children.item(e).addEventListener((0,I.Le)(),function(e){e.preventDefault(),"wysiwyg"===t.currentMode?(ke(t,e.target.getAttribute("data-tag")),W(t),r.classList.add("vditor-menu--current")):"ir"===t.currentMode?(At(t,e.target.getAttribute("data-value")),r.classList.add("vditor-menu--current")):Ge(t,e.target.getAttribute("data-value")),n.style.display="none"})},Ur),an=($n=function(e,t){return($n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},(n=function(e,t){function n(){this.constructor=e}$n(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(zr,Qn=i),zr),ln=Br,t=Yn=i;function sn(){this.constructor=ln}(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)})(ln,t),ln.prototype=null===t?Object.create(t):(sn.prototype=t.prototype,new sn);var dn=Br,cn=qr,t=Xn=i;function pn(){this.constructor=cn}(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)})(cn,t),cn.prototype=null===t?Object.create(t):(pn.prototype=t.prototype,new pn);var un=qr,mn=Pr,t=Jn=i;function fn(){this.constructor=mn}(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)})(mn,t),mn.prototype=null===t?Object.create(t):(fn.prototype=t.prototype,new fn);var hn=Pr,vn=Rr,t=Zn=i;function gn(){this.constructor=vn}(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)})(vn,t),vn.prototype=null===t?Object.create(t):(gn.prototype=t.prototype,new gn);var bn=Rr,yn=jr,t=Kn=i;function wn(){this.constructor=yn}(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)})(yn,t),yn.prototype=null===t?Object.create(t):(wn.prototype=t.prototype,new wn);var kn=jr,En=Ir,t=Fn=i;function xn(){this.constructor=En}(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)})(En,t),En.prototype=null===t?Object.create(t):(xn.prototype=t.prototype,new xn);var _n=Ir,Sn=Dr,t=Gn=i;function Ln(){this.constructor=Sn}(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)})(Sn,t),Sn.prototype=null===t?Object.create(t):(Ln.prototype=t.prototype,new Ln),Dr.prototype._bindEvent=function(n){var r=this;this.element.children[0].addEventListener((0,I.Le)(),function(e){e.preventDefault();var t,e=r.element.firstElementChild;e.classList.contains(O.g.CLASS_MENU_DISABLED)||(t=O.g.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]),e.classList.contains("vditor-menu--current")?(e.classList.remove("vditor-menu--current"),"sv"===n.currentMode?(n.sv.element.style.display="block","both"===n.options.preview.mode?n.preview.element.style.display="block":n.preview.element.style.display="none"):(n[n.currentMode].element.parentElement.style.display="block",n.preview.element.style.display="none"),P(n.toolbar.elements,t),n.outline.render(n)):(q(n.toolbar.elements,t),n.preview.element.style.display="block","sv"===n.currentMode?n.sv.element.style.display="none":n[n.currentMode].element.parentElement.style.display="none",n.preview.render(n),e.classList.add("vditor-menu--current"),s(n,["subToolbar","hint","popover"]),setTimeout(function(){n.outline.render(n)},n.options.preview.delay+10)),l(n))})};var Tn=Dr,Cn=(f.prototype.cloneChannelData=function(e,t){this.leftChannel.push(new Float32Array(e)),this.rightChannel.push(new Float32Array(t)),this.recordingLength+=2048},f.prototype.startRecordingNewWavFile=function(){this.readyFlag&&(this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0)},f.prototype.stopRecording=function(){this.isRecording=!1},f.prototype.buildWavFileBlob=function(){for(var e=this.mergeBuffers(this.leftChannel),t=this.mergeBuffers(this.rightChannel),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=.5*(e[r]+t[r]);var o=44+2*(n=this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE?this.downSampleBuffer(n,this.SAMPLE_RATE):n).length,i=new ArrayBuffer(o),a=new DataView(i),i=(this.writeUTFBytes(a,0,"RIFF"),a.setUint32(4,o,!0),this.writeUTFBytes(a,8,"WAVE"),this.writeUTFBytes(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,1,!0),a.setUint32(24,this.SAMPLE_RATE,!0),a.setUint32(28,2*this.SAMPLE_RATE,!0),a.setUint16(32,2,!0),a.setUint16(34,16,!0),2*n.length);this.writeUTFBytes(a,36,"data"),a.setUint32(40,i,!0);for(var l=n.length,s=44,d=0;d<l;d++)a.setInt16(s,32767*n[d],!0),s+=2;return new Blob([a],{type:"audio/wav"})},f.prototype.downSampleBuffer=function(e,t){if(t===this.DEFAULT_SAMPLE_RATE)return e;if(t>this.DEFAULT_SAMPLE_RATE)return e;for(var n=this.DEFAULT_SAMPLE_RATE/t,t=Math.round(e.length/n),r=new Float32Array(t),o=0,i=0;o<r.length;){for(var a=Math.round((o+1)*n),l=0,s=0,d=i;d<a&&d<e.length;d++)l+=e[d],s++;r[o]=l/s,o++,i=a}return r},f.prototype.mergeBuffers=function(e){for(var t=new Float32Array(this.recordingLength),n=0,r=e.length,o=0;o<r;++o){var i=e[o];t.set(i,n),n+=i.length}return t},f.prototype.writeUTFBytes=function(e,t,n){for(var r=n.length,o=0;o<r;o++)e.setUint8(t+o,n.charCodeAt(o))},f),Mn=Or,t=Wn=i;function An(){this.constructor=Mn}(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)})(Mn,t),Mn.prototype=null===t?Object.create(t):(An.prototype=t.prototype,new An),Or.prototype._bindEvent=function(n){var r,o=this;this.element.children[0].addEventListener((0,I.Le)(),function(e){var t;e.preventDefault(),o.element.firstElementChild.classList.contains(O.g.CLASS_MENU_DISABLED)||(t=n[n.currentMode].element,r?r.isRecording?(r.stopRecording(),n.tip.hide(),e=new File([r.buildWavFileBlob()],"record"+(new Date).getTime()+".wav",{type:"video/webm"}),Xe(n,[e]),o.element.children[0].classList.remove("vditor-menu--current")):(n.tip.show(window.VditorI18n.recording),t.setAttribute("contenteditable","false"),r.startRecordingNewWavFile(),o.element.children[0].classList.add("vditor-menu--current")):navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){(r=new Cn(e)).recorder.onaudioprocess=function(e){var t;r.isRecording&&(t=e.inputBuffer.getChannelData(0),e=e.inputBuffer.getChannelData(1),r.cloneChannelData(t,e))},r.startRecordingNewWavFile(),n.tip.show(window.VditorI18n.recording),t.setAttribute("contenteditable","false"),o.element.children[0].classList.add("vditor-menu--current")}).catch(function(){n.tip.show(window.VditorI18n["record-tip"])}))})};var Hn=Or,Nn=Nr,t=Vn=i;function On(){this.constructor=Nn}(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)})(Nn,t),Nn.prototype=null===t?Object.create(t):(On.prototype=t.prototype,new On);var Dn=Nr,In=Hr,t=Un=i;function jn(){this.constructor=In}(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)})(In,t),In.prototype=null===t?Object.create(t):(jn.prototype=t.prototype,new jn);var Rn=Hr,Pn=Ar,t=zn=i;function qn(){this.constructor=Pn}(function(e,t){return(Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)})(Pn,t),Pn.prototype=null===t?Object.create(t):(qn.prototype=t.prototype,new qn),Ar.prototype._bindEvent=function(t){var n=this;this.element.children[0].addEventListener((0,I.Le)(),function(e){n.element.firstElementChild.classList.contains(O.g.CLASS_MENU_DISABLED)&&(e.stopPropagation(),e.preventDefault())}),this.element.querySelector("input").addEventListener("change",function(e){n.element.firstElementChild.classList.contains(O.g.CLASS_MENU_DISABLED)?(e.stopPropagation(),e.preventDefault()):0!==e.target.files.length&&Xe(t,e.target.files,e.target)})};var Bn,zn,Un,Vn,Wn,Gn,Fn,Kn,Zn,Jn,Xn,Yn,Qn,$n,er,tr,nr,rr,or,ir,ar,lr,sr,dr,cr,pr,ur,mr,fr,hr,vr,gr,br,yr,wr,kr=Ar,Er=(Mr.prototype.genItem=function(e,t,n){var r,o;switch(t.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":r=new i(e,t);break;case"emoji":r=new en(e,t);break;case"headings":r=new on(e,t);break;case"|":r=new $t;break;case"br":r=new Ft;break;case"undo":r=new Rn(e,t);break;case"redo":r=new Dn(e,t);break;case"help":r=new an(e,t);break;case"both":r=new Gt(e,t);break;case"preview":r=new Tn(e,t);break;case"fullscreen":r=new rn(e,t);break;case"upload":r=new kr(e,t);break;case"record":r=new Hn(e,t);break;case"info":r=new un(e,t);break;case"edit-mode":r=new He(e,t);break;case"devtools":r=new Qt(e,t);break;case"outdent":r=new kn(e,t);break;case"indent":r=new dn(e,t);break;case"outline":r=new _n(e,t);break;case"insert-after":r=new hn(e,t);break;case"insert-before":r=new bn(e,t);break;case"code-theme":r=new Zt(e,t);break;case"content-theme":r=new Jt(e,t);break;case"export":r=new nn(e,t);break;default:r=new Yt(e,t)}if(r)return"br"!==(o=t.name)&&"|"!==o||(o+=n),this.elements[o]=r.element,r.element},Mr),xr=r(471),_r=(m.prototype.clearStack=function(e){this.resetStack(),this.resetIcon(e)},m.prototype.resetIcon=function(e){e.toolbar&&((1<this[e.currentMode].undoStack.length?P:q)(e.toolbar.elements,["undo"]),(0!==this[e.currentMode].redoStack.length?P:q)(e.toolbar.elements,["redo"]))},m.prototype.undo=function(e){var t;"false"===e[e.currentMode].element.getAttribute("contenteditable")||this[e.currentMode].undoStack.length<2||(t=this[e.currentMode].undoStack.pop())&&(this[e.currentMode].redoStack.push(t),this.renderDiff(t,e),this[e.currentMode].hasUndo=!0,s(e,["hint"]))},m.prototype.redo=function(e){var t;"false"!==e[e.currentMode].element.getAttribute("contenteditable")&&(t=this[e.currentMode].redoStack.pop())&&(this[e.currentMode].undoStack.push(t),this.renderDiff(t,e,!0))},m.prototype.recordFirstPosition=function(e,t){0===getSelection().rangeCount||1!==this[e.currentMode].undoStack.length||0===this[e.currentMode].undoStack[0].length||0<this[e.currentMode].redoStack.length||(0,I.vU)()&&"Backspace"===t.key||(0,I.G6)()||(t=this.addCaret(e)).replace("<wbr>","").replace(" vditor-ir__node--expand","")===this[e.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>","")&&(this[e.currentMode].undoStack[0][0].diffs[0][1]=t,this[e.currentMode].lastText=t)},m.prototype.addToUndoStack=function(e){var t=this.addCaret(e,!0),n=this.dmp.diff_main(t,this[e.currentMode].lastText,!0),n=this.dmp.patch_make(t,this[e.currentMode].lastText,n);0===n.length&&0<this[e.currentMode].undoStack.length||(this[e.currentMode].lastText=t,this[e.currentMode].undoStack.push(n),this[e.currentMode].undoStack.length>this.stackSize&&this[e.currentMode].undoStack.shift(),this[e.currentMode].hasUndo&&(this[e.currentMode].redoStack=[],this[e.currentMode].hasUndo=!1,q(e.toolbar.elements,["redo"])),1<this[e.currentMode].undoStack.length&&P(e.toolbar.elements,["undo"]))},m.prototype.renderDiff=function(e,t,n){n=((n=void 0!==n&&n)?((n=this.dmp.patch_deepCopy(e).reverse()).forEach(function(e){e.diffs.forEach(function(e){e[0]=-e[0]})}),this.dmp.patch_apply(n,this[t.currentMode].lastText)):this.dmp.patch_apply(e,this[t.currentMode].lastText))[0];this[t.currentMode].lastText=n,t[t.currentMode].element.innerHTML=n,"sv"!==t.currentMode&&t[t.currentMode].element.querySelectorAll(".vditor-"+t.currentMode+"__preview[data-render='2']").forEach(function(e){U(e,t)}),t[t.currentMode].element.querySelector("wbr")?((0,V.ib)(t[t.currentMode].element,t[t.currentMode].element.ownerDocument.createRange()),_(t)):((e=getSelection().getRangeAt(0)).setEndBefore(t[t.currentMode].element),e.collapse(!1)),h(t),S(t,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),Me(t),t[t.currentMode].element.querySelectorAll(".vditor-"+t.currentMode+"__preview[data-render='2']").forEach(function(e){U(e,t)}),(1<this[t.currentMode].undoStack.length?P:q)(t.toolbar.elements,["undo"]),(0!==this[t.currentMode].redoStack.length?P:q)(t.toolbar.elements,["redo"])},m.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},m.prototype.addCaret=function(e,t){void 0===t&&(t=!1),0===getSelection().rangeCount||e[e.currentMode].element.querySelector("wbr")||(o=getSelection().getRangeAt(0),e[e.currentMode].element.contains(o.startContainer)&&(n=o.cloneRange(),(r=document.createElement("span")).className="vditor-wbr",o.insertNode(r))),e.ir.element.cloneNode(!0).querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='1']").forEach(function(e){e.firstElementChild&&(e.firstElementChild.classList.contains("language-echarts")||e.firstElementChild.classList.contains("language-plantuml")||e.firstElementChild.classList.contains("language-mindmap")?(e.firstElementChild.removeAttribute("_echarts_instance_"),e.firstElementChild.removeAttribute("data-processed"),e.firstElementChild.innerHTML=e.previousElementSibling.firstElementChild.innerHTML,e.setAttribute("data-render","2")):e.firstElementChild.classList.contains("language-math")&&(e.setAttribute("data-render","2"),e.firstElementChild.textContent=e.firstElementChild.getAttribute("data-math"),e.firstElementChild.removeAttribute("data-math")))});var n,r,o=e[e.currentMode].element.innerHTML;return e[e.currentMode].element.querySelectorAll(".vditor-wbr").forEach(function(e){e.remove()}),t&&n&&(0,V.Hc)(n),o.replace('<span class="vditor-wbr"></span>',"<wbr>")},m),Sr=r(640),Lr=(Cr.prototype.merge=function(){this.options&&(this.options.toolbar?this.options.toolbar=this.mergeToolbar(this.options.toolbar):this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar),null!=(e=null==(e=this.options.preview)?void 0:e.theme)&&e.list&&(this.defaultOptions.preview.theme.list=this.options.preview.theme.list),null!=(e=null==(e=null==(e=this.options.preview)?void 0:e.render)?void 0:e.media)&&e.enable&&(this.defaultOptions.preview.render.media.enable=this.options.preview.render.media.enable),null!=(e=this.options.hint)&&e.emoji&&(this.defaultOptions.hint.emoji=this.options.hint.emoji),this.options.comment&&(this.defaultOptions.comment=this.options.comment),this.options.cdn)&&(null!=(e=null==(e=this.options.preview)?void 0:e.theme)&&e.path||(this.defaultOptions.preview.theme.path=this.options.cdn+"/dist/css/content-theme"),null!=(e=this.options.hint)&&e.emojiPath||(this.defaultOptions.hint.emojiPath=this.options.cdn+"/dist/images/emoji"));var e=(0,Sr.T)(this.defaultOptions,this.options);if(e.cache.enable&&!e.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return e},Cr.prototype.mergeToolbar=function(e){var r=this,o=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"⌘E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"⌘H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"⌘B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"⌘I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"⌘D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"⌘K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"⌘L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"⌘O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"⌘J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"⇧⌘I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"⇧⌘O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"⌘;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"⇧⌘H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"⌘U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"⌘G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"⇧⌘B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"⇧⌘E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"⌘M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:" | col2 | col3 |\n| --- | --- | --- |\n|  |  |  |\n|  |  |  |",tipPosition:"n"},{name:"|"},{hotkey:"⌘Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"⌘Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"⌘'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"⌘P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],i=[];return e.forEach(function(t){var n=t;o.forEach(function(e){"string"==typeof t&&e.name===t&&(n=e),"object"==typeof t&&e.name===t.name&&(n=Object.assign({},e,t))}),t.toolbar&&(n.toolbar=r.mergeToolbar(t.toolbar)),i.push(n)}),i},Cr),Tr=(o.prototype.getComments=function(e,t){var n=this;if(void 0===t&&(t=!1),"wysiwyg"!==e.currentMode||!e.options.comment.enable)return[];this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach(function(e){n.commentIds=n.commentIds.concat(e.getAttribute("data-cmtids").split(" "))}),this.commentIds=Array.from(new Set(this.commentIds));var r=[];return t?(this.commentIds.forEach(function(e){r.push({id:e,top:n.element.querySelector('.vditor-comment[data-cmtids="'+e+'"]').offsetTop})}),r):void 0},o.prototype.triggerRemoveComment=function(e){var t,n,r;"wysiwyg"===e.currentMode&&e.options.comment.enable&&0<e.wysiwyg.commentIds.length&&(n=JSON.parse(JSON.stringify(this.commentIds)),this.getComments(e),n=n,r=this.commentIds,t=new Set(r),0<(r=n.filter(function(e){return!t.has(e)})).length)&&e.options.comment.remove(r)},o.prototype.showComment=function(){var e=(0,V.Ny)(this.element);this.selectPopover.setAttribute("style","left:"+e.left+"px;display:block;top:"+Math.max(-8,e.top-21)+"px")},o.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},o.prototype.unbindListener=function(){window.removeEventListener("scroll",this.scrollListener)},o.prototype.copy=function(e,t){var n,r,o=getSelection().getRangeAt(0);""!==o.toString()&&(e.stopPropagation(),e.preventDefault(),r=(0,B.lG)(o.startContainer,"CODE"),n=(0,B.lG)(o.endContainer,"CODE"),r&&n&&n.isSameNode(r)?(n="PRE"===r.parentElement.tagName?o.toString():"`"+o.toString()+"`",e.clipboardData.setData("text/plain",n)):(r=(0,B.lG)(o.startContainer,"A"),n=(0,B.lG)(o.endContainer,"A"),r&&n&&n.isSameNode(r)?(n=(n=r.getAttribute("title")||"")&&' "'+n+'"',e.clipboardData.setData("text/plain","["+o.toString()+"]("+r.getAttribute("href")+n+")")):((r=document.createElement("div")).appendChild(o.cloneContents()),e.clipboardData.setData("text/plain",t.lute.VditorDOM2Md(r.innerHTML).trim()))),e.clipboardData.setData("text/html",""))},o.prototype.bindEvent=function(d){var c=this;this.unbindListener(),window.addEventListener("scroll",this.scrollListener=function(){var e,t;s(d,["hint"]),"block"===c.popover.style.display&&"block"===c.selectPopover.style.display&&(e=parseInt(c.popover.getAttribute("data-top"),10),"auto"===d.options.height?d.options.toolbarConfig.pin&&(t=Math.max(e,window.scrollY-d.element.offsetTop-8)+"px","block"===c.popover.style.display&&(c.popover.style.top=t),"block"===c.selectPopover.style.display)&&(c.selectPopover.style.top=t):d.options.toolbarConfig.pin&&0===d.toolbar.element.getBoundingClientRect().top&&(t=Math.max(window.scrollY-d.element.offsetTop-8,Math.min(e-d.wysiwyg.element.scrollTop,c.element.clientHeight-21))+"px","block"===c.popover.style.display&&(c.popover.style.top=t),"block"===c.selectPopover.style.display)&&(c.selectPopover.style.top=t))}),this.element.addEventListener("scroll",function(){var e,t;s(d,["hint"]),d.options.comment&&d.options.comment.enable&&d.options.comment.scroll&&d.options.comment.scroll(d.wysiwyg.element.scrollTop),"block"===c.popover.style.display&&(e=parseInt(c.popover.getAttribute("data-top"),10)-d.wysiwyg.element.scrollTop,t=-8,d.options.toolbarConfig.pin&&0===d.toolbar.element.getBoundingClientRect().top&&(t=window.scrollY-d.element.offsetTop+t),t=Math.max(t,Math.min(e,c.element.clientHeight-21))+"px",c.popover.style.top=t,c.selectPopover.style.top=t)}),this.element.addEventListener("paste",function(e){Ct(d,e,{pasteCode:function(e){var t=(0,V.zh)(d),n=document.createElement("template"),e=(n.innerHTML=e,t.insertNode(n.content.cloneNode(!0)),(0,B.a1)(t.startContainer,"data-block","0"));e?e.outerHTML=d.lute.SpinVditorDOM(e.outerHTML):d.wysiwyg.element.innerHTML=d.lute.SpinVditorDOM(d.wysiwyg.element.innerHTML),(0,V.ib)(d.wysiwyg.element,t)}})}),this.element.addEventListener("compositionstart",function(){c.composingLock=!0}),this.element.addEventListener("compositionend",function(e){var t=(0,z.W)(getSelection().getRangeAt(0).startContainer);t&&""===t.textContent?h(d):((0,I.vU)()||Ye(d,getSelection().getRangeAt(0).cloneRange(),e),c.composingLock=!1)}),this.element.addEventListener("input",function(e){if("deleteByDrag"!==e.inputType&&"insertFromDrop"!==e.inputType)if(c.preventInput)c.preventInput=!1,W(d);else if(c.composingLock||"‘"===e.data||"“"===e.data||"《"===e.data)W(d);else{var t=getSelection().getRangeAt(0),n=(0,B.F9)(t.startContainer);if(n||(we(d,t),n=(0,B.F9)(t.startContainer)),n){for(var r=(0,V.im)(n,d.wysiwyg.element,t).start,o=!0,i=r-1;i>n.textContent.substr(0,r).lastIndexOf("\n");i--)if(" "!==n.textContent.charAt(i)&&"\t"!==n.textContent.charAt(i)){o=!1;break}0===r&&(o=!1);for(var a=!0,i=r-1;i<n.textContent.length;i++)if(" "!==n.textContent.charAt(i)&&"\n"!==n.textContent.charAt(i)){a=!1;break}var l=(0,z.W)(getSelection().getRangeAt(0).startContainer);l&&""===l.textContent&&(h(d),l.remove()),o&&"code-block"!==n.getAttribute("data-type")||a||ut(n.innerHTML)||pt(n.innerHTML)&&n.previousElementSibling?"function"==typeof d.options.input&&d.options.input(D(d)):("insertParagraph"===e.inputType&&"<p><br></p><p><br></p>"===c.element.innerHTML&&n.previousElementSibling.remove(),Ye(d,t,e))}}}),this.element.addEventListener("click",function(e){var t,n,r,o,i,a,l;function s(){n.setAttribute("src",o.value),n.setAttribute("alt",a.value),n.setAttribute("title",l.value),"function"==typeof t.options.input&&t.options.input(D(t))}"INPUT"===e.target.tagName?((r=e.target).checked?r.setAttribute("checked","checked"):r.removeAttribute("checked"),c.preventInput=!0,W(d)):"IMG"!==e.target.tagName||e.target.parentElement.classList.contains("vditor-wysiwyg__preview")?(r=(0,B.lG)(e.target,"A"))?(d.options.link.click?d.options.link.click(r):d.options.link.isOpen&&window.open(r.getAttribute("href")),e.preventDefault()):(r=(0,V.zh)(d),e.target.isEqualNode(c.element)&&c.element.lastElementChild&&r.collapsed&&(i=c.element.lastElementChild.getBoundingClientRect(),e.y>i.top+i.height)&&("P"===c.element.lastElementChild.tagName&&""===c.element.lastElementChild.textContent.trim().replace(O.g.ZWSP,"")?(r.selectNodeContents(c.element.lastElementChild),r.collapse(!1)):(c.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+O.g.ZWSP+"<wbr></p>"),(0,V.ib)(c.element,r))),H(d),(i=(i=(0,B.fb)(e.target,"vditor-wysiwyg__preview"))||(0,B.fb)((0,V.zh)(d).startContainer,"vditor-wysiwyg__preview"))&&xe(i,d),k(e,d)):"link-ref"===e.target.getAttribute("data-type")?_e(d,e.target):(t=d,n=e.target,t.wysiwyg.popover.innerHTML="",(r=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.imageURL),r.className="vditor-tooltipped vditor-tooltipped__n",o=document.createElement("input"),r.appendChild(o),o.className="vditor-input",o.setAttribute("placeholder",window.VditorI18n.imageURL),o.value=n.getAttribute("src")||"",o.oninput=function(){s()},o.onkeydown=function(e){G(t,e)},(i=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.alternateText),i.className="vditor-tooltipped vditor-tooltipped__n",a=document.createElement("input"),i.appendChild(a),a.className="vditor-input",a.setAttribute("placeholder",window.VditorI18n.alternateText),a.style.width="52px",a.value=n.getAttribute("alt")||"",a.oninput=function(){s()},a.onkeydown=function(e){G(t,e)},(e=document.createElement("span")).setAttribute("aria-label",window.VditorI18n.title),e.className="vditor-tooltipped vditor-tooltipped__n",l=document.createElement("input"),e.appendChild(l),l.className="vditor-input",l.setAttribute("placeholder",window.VditorI18n.title),l.value=n.getAttribute("title")||"",l.oninput=function(){s()},l.onkeydown=function(e){G(t,e)},K(n,t),t.wysiwyg.popover.insertAdjacentElement("beforeend",r),t.wysiwyg.popover.insertAdjacentElement("beforeend",i),t.wysiwyg.popover.insertAdjacentElement("beforeend",e),F(t,n))}),this.element.addEventListener("keyup",function(e){if(!e.isComposing&&!(0,I.yl)(e)){"Enter"===e.key&&_(d),"Backspace"!==e.key&&"Delete"!==e.key||""===d.wysiwyg.element.innerHTML||1!==d.wysiwyg.element.childNodes.length||!d.wysiwyg.element.firstElementChild||"P"!==d.wysiwyg.element.firstElementChild.tagName||0!==d.wysiwyg.element.firstElementChild.childElementCount||""!==d.wysiwyg.element.textContent&&"\n"!==d.wysiwyg.element.textContent||(d.wysiwyg.element.innerHTML="");var t=(0,V.zh)(d);if("Backspace"===e.key&&(0,I.vU)()&&"\n"===t.startContainer.textContent&&1===t.startOffset&&(t.startContainer.textContent=""),we(d,t),H(d),"ArrowDown"===e.key||"ArrowRight"===e.key||"Backspace"===e.key||"ArrowLeft"===e.key||"ArrowUp"===e.key){"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||d.hint.render(d);var n=(0,B.fb)(t.startContainer,"vditor-wysiwyg__preview");if(n=!n&&3!==t.startContainer.nodeType&&0<t.startOffset&&(o=t.startContainer).classList.contains("vditor-wysiwyg__block")?o.lastElementChild:n)if("none"!==n.previousElementSibling.style.display){var r=n.previousElementSibling;if("PRE"===r.tagName&&(r=r.firstElementChild),"ArrowDown"===e.key||"ArrowRight"===e.key){var o,i=function(){for(var e=o;e&&!e.nextSibling;)e=e.parentElement;return e.nextSibling}(o=n.parentElement);if(i&&3!==i.nodeType){var a=i.querySelector(".vditor-wysiwyg__preview");if(a)return void xe(a,d)}if(3===i.nodeType){for(;0===i.textContent.length&&i.nextSibling;)i=i.nextSibling;t.setStart(i,1)}else t.setStart(i.firstChild,0)}else t.selectNodeContents(r),t.collapse(!1)}else"ArrowDown"===e.key||"ArrowRight"===e.key?xe(n,d):xe(n,d,!1)}}})},o),n=(Bn=function(e,t){return(Bn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}))(e,t)},function(e,t){function n(){this.constructor=e}Bn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function o(n){var c=this,e=(this.composingLock=!1,this.commentIds=[],document.createElement("div"));e.className="vditor-wysiwyg",e.innerHTML='<pre class="vditor-reset" placeholder="'+n.options.placeholder+'"\n contenteditable="true" spellcheck="false"></pre>\n<div class="vditor-panel vditor-panel--none"></div>\n<div class="vditor-panel vditor-panel--none">\n    <button type="button" aria-label="'+window.VditorI18n.comment+'" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">\n        <svg><use xlink:href="#vditor-icon-comment"></use></svg>\n    </button>\n</div>',this.element=e.firstElementChild,this.popover=e.firstElementChild.nextElementSibling,this.selectPopover=e.lastElementChild,this.bindEvent(n),Oe(n,this.element),De(n,this.element),Ie(n,this.element),qe(n,this.element),Be(n,this.element),je(n,this.element),Re(n,this.element,this.copy),Pe(n,this.element,this.copy),n.options.comment.enable&&(this.selectPopover.querySelector("button").onclick=function(){var r,o,i=Lute.NewNodeID(),e=getSelection().getRangeAt(0),a=e.cloneRange(),l=e.extractContents(),s=!1,d=!1,t=(l.childNodes.forEach(function(e,t){var n=!1;3!==e.nodeType&&e.classList.contains("vditor-comment")?e.classList.contains("vditor-comment")&&e.setAttribute("data-cmtids",e.getAttribute("data-cmtids")+" "+i):n=!0,n&&(3!==e.nodeType&&"0"===e.getAttribute("data-block")&&0===t&&0<a.startOffset?(e.innerHTML='<span class="vditor-comment" data-cmtids="'+i+'">'+e.innerHTML+"</span>",r=e):3!==e.nodeType&&"0"===e.getAttribute("data-block")&&t===l.childNodes.length-1&&a.endOffset<a.endContainer.textContent.length?(e.innerHTML='<span class="vditor-comment" data-cmtids="'+i+'">'+e.innerHTML+"</span>",o=e):3!==e.nodeType&&"0"===e.getAttribute("data-block")?(0===t?s=!0:t===l.childNodes.length-1&&(d=!0),e.innerHTML='<span class="vditor-comment" data-cmtids="'+i+'">'+e.innerHTML+"</span>"):((n=document.createElement("span")).classList.add("vditor-comment"),n.setAttribute("data-cmtids",i),e.parentNode.insertBefore(n,e),n.appendChild(e)))}),(0,B.F9)(a.startContainer)),t=(t&&(r?(t.insertAdjacentHTML("beforeend",r.innerHTML),r.remove()):""===t.textContent.trim().replace(O.g.ZWSP,"")&&s&&t.remove()),(0,B.F9)(a.endContainer));t&&(o?(t.insertAdjacentHTML("afterbegin",o.innerHTML),o.remove()):""===t.textContent.trim().replace(O.g.ZWSP,"")&&d&&t.remove()),e.insertNode(l),n.options.comment.add(i,e.toString(),c.getComments(n,!0)),W(n,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),c.hideComment()})}function Cr(e){this.defaultOptions={rtl:!1,after:void 0,cache:{enable:!0},cdn:O.g.CDN,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},customRenders:[],debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"👍","-1":"👎",confused:"😕",eyes:"👀️",heart:"❤️",rocket:"🚀️",smile:"😄",tada:"🎉️"},emojiPath:O.g.CDN+"/dist/images/emoji",extend:[],parse:!0},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1e3,hljs:O.g.HLJS_OPTIONS,markdown:O.g.MARKDOWN_OPTIONS,math:O.g.MATH_OPTIONS,maxWidth:800,mode:"both",theme:O.g.THEME_OPTIONS,render:{media:{enable:!0}}},link:{isOpen:!0},image:{isPreview:!0},resize:{enable:!1,position:"bottom"},theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(e){return e.replace(/\W/g,"")},linkToImgUrl:"",max:10485760,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=e}function m(){this.stackSize=50,this.resetStack(),this.dmp=new xr}function Mr(o){var i=this,e=o.options;this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",e.toolbar.forEach(function(e,n){var r,t=i.genItem(o,e,n);i.element.appendChild(t),e.toolbar&&((r=document.createElement("div")).className="vditor-hint vditor-panel--arrow",r.addEventListener((0,I.Le)(),function(e){r.style.display="none"}),e.toolbar.forEach(function(e,t){e.level=2,r.appendChild(i.genItem(o,e,n+t))}),t.appendChild(r),a(o,r,t.children[0]))}),o.options.toolbarConfig.hide&&this.element.classList.add("vditor-toolbar--hide"),o.options.toolbarConfig.pin&&this.element.classList.add("vditor-toolbar--pin"),o.options.counter.enable&&(o.counter=new Xt(o),this.element.appendChild(o.counter.element))}function Ar(e,t){var n=zn.call(this,e,t)||this,r='<input type="file"';return e.options.upload.multiple&&(r+=' multiple="multiple"'),e.options.upload.accept&&(r+=' accept="'+e.options.upload.accept+'"'),n.element.children[0].innerHTML=""+(t.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>')+r+">",n._bindEvent(e),n}function Hr(t,e){var n=Un.call(this,t,e)||this;return q({undo:n.element},["undo"]),n.element.children[0].addEventListener((0,I.Le)(),function(e){e.preventDefault(),n.element.firstElementChild.classList.contains(O.g.CLASS_MENU_DISABLED)||t.undo.undo(t)}),n}function Nr(t,e){var n=Vn.call(this,t,e)||this;return q({redo:n.element},["redo"]),n.element.children[0].addEventListener((0,I.Le)(),function(e){e.preventDefault(),n.element.firstElementChild.classList.contains(O.g.CLASS_MENU_DISABLED)||t.undo.redo(t)}),n}function Or(e,t){t=Wn.call(this,e,t)||this;return t._bindEvent(e),t}function f(e){var t;if(this.SAMPLE_RATE=5e3,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0,"undefined"!=typeof AudioContext)t=new AudioContext;else{if(!webkitAudioContext)return;t=new webkitAudioContext}this.DEFAULT_SAMPLE_RATE=t.sampleRate;var n=t.createGain();t.createMediaStreamSource(e).connect(n),this.recorder=t.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,n.connect(this.recorder),this.recorder.connect(t.destination),this.readyFlag=!0}function Dr(e,t){t=Gn.call(this,e,t)||this;return t._bindEvent(e),t}function Ir(t,e){var n=Fn.call(this,t,e)||this;return t.options.outline&&n.element.firstElementChild.classList.add("vditor-menu--current"),n.element.children[0].addEventListener((0,I.Le)(),function(e){e.preventDefault(),t.toolbar.elements.outline.firstElementChild.classList.contains(O.g.CLASS_MENU_DISABLED)||(t.options.outline.enable=!n.element.firstElementChild.classList.contains("vditor-menu--current"),t.outline.toggle(t,t.options.outline.enable))}),n}function jr(n,e){var r=Kn.call(this,n,e)||this;return r.element.children[0].addEventListener((0,I.Le)(),function(e){var t;e.preventDefault(),!r.element.firstElementChild.classList.contains(O.g.CLASS_MENU_DISABLED)&&"sv"!==n.currentMode&&(e=(0,V.zh)(n),t=(0,B.lG)(e.startContainer,"LI"))&&dt(n,t,e,t.parentElement)}),r}function Rr(t,e){var n=Zn.call(this,t,e)||this;return n.element.children[0].addEventListener((0,I.Le)(),function(e){e.preventDefault(),n.element.firstElementChild.classList.contains(O.g.CLASS_MENU_DISABLED)||"sv"===t.currentMode||tt(t,"beforebegin")}),n}function Pr(t,e){var n=Jn.call(this,t,e)||this;return n.element.children[0].addEventListener((0,I.Le)(),function(e){e.preventDefault(),n.element.firstElementChild.classList.contains(O.g.CLASS_MENU_DISABLED)||"sv"===t.currentMode||tt(t,"afterend")}),n}function qr(t,e){e=Xn.call(this,t,e)||this;return e.element.children[0].addEventListener((0,I.Le)(),function(e){e.preventDefault(),t.tip.show('<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">\n<p style="text-align: center;margin: 14px 0">\n    <em>下一代的 Markdown 编辑器，为未来而构建</em>\n</p>\n<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">\n    <img src="https://unpkg.com/vditor/dist/images/logo.png" style="margin: 0 auto;height: 68px"/>\n    <div>&nbsp;&nbsp;</div>\n    <div style="flex: 1;min-width: 250px">\n        Vditor 是一款浏览器端的 Markdown 编辑器，支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。\n        它使用 TypeScript 实现，支持原生 JavaScript 以及 Vue、React、Angular 和 Svelte 等框架。\n    </div>\n</div>\n<div style="display: flex;flex-wrap: wrap;">\n    <ul style="list-style: none;flex: 1;min-width:148px">\n        <li>\n        项目地址：<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>\n        </li>\n        <li>\n        开源协议：MIT\n        </li>\n    </ul>\n    <ul style="list-style: none;margin-right: 18px">\n        <li>\n        组件版本：Vditor v'+O.H+" / Lute v"+Lute.Version+'\n        </li>\n        <li>\n        赞助捐赠：<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>\n        </li>\n    </ul>\n</div>\n</div>',0)}),e}function Br(n,e){var r=Yn.call(this,n,e)||this;return r.element.children[0].addEventListener((0,I.Le)(),function(e){var t;e.preventDefault(),!r.element.firstElementChild.classList.contains(O.g.CLASS_MENU_DISABLED)&&"sv"!==n.currentMode&&(e=(0,V.zh)(n),t=(0,B.lG)(e.startContainer,"LI"))&&st(n,t,e)}),r}function zr(t,e){e=Qn.call(this,t,e)||this;return e.element.children[0].addEventListener((0,I.Le)(),function(e){e.preventDefault(),t.tip.show('<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">\n<div style="margin-top: 14px;flex: 1">\n    <div>Markdown 使用指南</div>\n    <ul style="list-style: none">\n        <li><a href="https://ld246.com/article/1583308420519" target="_blank">语法速查手册</a></li>\n        <li><a href="https://ld246.com/article/1583129520165" target="_blank">基础语法</a></li>\n        <li><a href="https://ld246.com/article/1583305480675" target="_blank">扩展语法</a></li>\n        <li><a href="https://ld246.com/article/1582778815353" target="_blank">键盘快捷键</a></li>\n    </ul>\n</div>\n<div style="margin-top: 14px;flex: 1">\n    <div>Vditor 支持</div>\n    <ul style="list-style: none">\n        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>\n        <li><a href="https://ld246.com/tag/vditor" target="_blank">官方讨论区</a></li>\n        <li><a href="https://ld246.com/article/1549638745630" target="_blank">开发手册</a></li>\n        <li><a href="https://ld246.com/guide/markdown" target="_blank">演示地址</a></li>\n    </ul>\n</div></div>',0)}),e}function Ur(e,t){var t=er.call(this,e,t)||this,n=document.createElement("div");return n.className="vditor-hint vditor-panel--arrow",n.innerHTML='<button data-tag="h1" data-value="# ">'+window.VditorI18n.heading1+" "+(0,I.ns)("&lt;⌥⌘1>")+'</button>\n<button data-tag="h2" data-value="## ">'+window.VditorI18n.heading2+" &lt;"+(0,I.ns)("⌥⌘2")+'></button>\n<button data-tag="h3" data-value="### ">'+window.VditorI18n.heading3+" &lt;"+(0,I.ns)("⌥⌘3")+'></button>\n<button data-tag="h4" data-value="#### ">'+window.VditorI18n.heading4+" &lt;"+(0,I.ns)("⌥⌘4")+'></button>\n<button data-tag="h5" data-value="##### ">'+window.VditorI18n.heading5+" &lt;"+(0,I.ns)("⌥⌘5")+'></button>\n<button data-tag="h6" data-value="###### ">'+window.VditorI18n.heading6+" &lt;"+(0,I.ns)("⌥⌘6")+"></button>",t.element.appendChild(n),t._bindEvent(e,n),t}function Vr(e,t){var n=nr.call(this,e,t)||this;return n._bindEvent(e,t),n}function Wr(l,e){var t=or.call(this,l,e)||this,n=t.element.children[0],r=document.createElement("div");return r.className="vditor-hint"+(2===e.level?"":" vditor-panel--arrow"),r.innerHTML='<button data-type="markdown">Markdown</button>\n<button data-type="pdf">PDF</button>\n<button data-type="html">HTML</button>',r.addEventListener((0,I.Le)(),function(e){var t,n,r,o,i,a=e.target;if("BUTTON"===a.tagName){switch(a.getAttribute("data-type")){case"markdown":i=D(o=l),tn(o,i,i.substr(0,10)+".md");break;case"pdf":(n=l).tip.show(window.VditorI18n.generate,3800),(r=document.querySelector("#vditorExportIframe")).contentDocument.open(),r.contentDocument.write('<link rel="stylesheet" href="'+n.options.cdn+'/dist/index.css"/>\n<script src="'+n.options.cdn+'/dist/method.min.js"><\/script>\n<div id="preview" style="width: 800px"></div>\n<script>\nwindow.addEventListener("message", (e) => {\n  if(!e.data) {\n    return;\n  }\n  Vditor.preview(document.getElementById(\'preview\'), e.data, {\n    cdn: "'+n.options.cdn+'",\n    markdown: {\n      theme: '+JSON.stringify(n.options.preview.theme)+'\n    },\n    hljs: {\n      style: "'+n.options.preview.hljs.style+'"\n    }\n  });\n  setTimeout(() => {\n        window.print();\n    }, 3600);\n}, false);\n<\/script>'),r.contentDocument.close(),setTimeout(function(){r.contentWindow.postMessage(D(n),"*")},200);break;case"html":i=It(o=l),t='<html><head><link rel="stylesheet" type="text/css" href="'+o.options.cdn+'/dist/index.css"/>\n<script src="'+o.options.cdn+"/dist/js/i18n/"+o.options.lang+'.js"><\/script>\n<script src="'+o.options.cdn+'/dist/method.min.js"><\/script></head>\n<body><div class="vditor-reset" id="preview">'+i+"</div>\n<script>\n    const previewElement = document.getElementById('preview')\n    Vditor.setContentTheme('"+o.options.preview.theme.current+"', '"+o.options.preview.theme.path+"');\n    Vditor.codeRender(previewElement);\n    Vditor.highlightRender("+JSON.stringify(o.options.preview.hljs)+", previewElement, '"+o.options.cdn+"');\n    Vditor.mathRender(previewElement, {\n        cdn: '"+o.options.cdn+"',\n        math: "+JSON.stringify(o.options.preview.math)+",\n    });\n    Vditor.mermaidRender(previewElement, '"+o.options.cdn+"', '"+o.options.theme+"');\n    Vditor.markmapRender(previewElement, '"+o.options.cdn+"', '"+o.options.theme+"');\n    Vditor.flowchartRender(previewElement, '"+o.options.cdn+"');\n    Vditor.graphvizRender(previewElement, '"+o.options.cdn+"');\n    Vditor.chartRender(previewElement, '"+o.options.cdn+"', '"+o.options.theme+"');\n    Vditor.mindmapRender(previewElement, '"+o.options.cdn+"', '"+o.options.theme+"');\n    Vditor.abcRender(previewElement, '"+o.options.cdn+"');\n    "+(o.options.preview.render.media.enable?"Vditor.mediaRender(previewElement);":"")+'\n    Vditor.speechRender(previewElement);\n<\/script>\n<script src="'+o.options.cdn+"/dist/js/icons/"+o.options.icon+'.js"><\/script></body></html>',tn(o,t,i.substr(0,10)+".html")}s(l,["subToolbar"]),e.preventDefault(),e.stopPropagation()}}),t.element.appendChild(r),a(l,r,n,e.level),t}function Gr(n,e){var t=ar.call(this,n,e)||this,r=document.createElement("div"),o=(r.className="vditor-panel vditor-panel--arrow","");return Object.keys(n.options.hint.emoji).forEach(function(e){var t=n.options.hint.emoji[e];-1<t.indexOf(".")?o+='<button data-value=":'+e+': " data-key=":'+e+':"><img\ndata-value=":'+e+': " data-key=":'+e+':" class="vditor-emojis__icon" src="'+t+'"/></button>':o+='<button data-value="'+t+' "\n data-key="'+e+'"><span class="vditor-emojis__icon">'+t+"</span></button>"}),r.innerHTML='<div class="vditor-emojis" style="max-height: '+("auto"===n.options.height?"auto":n.options.height-80)+'px">'+o+'</div><div class="vditor-emojis__tail">\n    <span class="vditor-emojis__tip"></span><span>'+(n.options.hint.emojiTail||"")+"</span>\n</div>",t.element.appendChild(r),a(n,r,t.element.firstElementChild,e.level),t.bindEvent(n),t}function Fr(n,e){var r=sr.call(this,n,e)||this;return r.element.firstElementChild.addEventListener((0,I.Le)(),function(e){var t=r.element.firstElementChild;t.classList.contains(O.g.CLASS_MENU_DISABLED)||(e.preventDefault(),t.classList.contains("vditor-menu--current")?(t.classList.remove("vditor-menu--current"),n.devtools.element.style.display="none",l(n)):(t.classList.add("vditor-menu--current"),n.devtools.element.style.display="block",l(n),n.devtools.renderEchart(n)))}),r}function Kr(t,n){var e=cr.call(this,t,n)||this;return e.element.children[0].innerHTML=n.icon,e.element.children[0].addEventListener((0,I.Le)(),function(e){e.preventDefault(),e.currentTarget.classList.contains(O.g.CLASS_MENU_DISABLED)||n.click(e,t)}),e}function Zr(e){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(e,"")}function Jr(t,e){var n=ur.call(this,t,e)||this,r=n.element.children[0],o=document.createElement("div"),i=(o.className="vditor-hint"+(2===e.level?"":" vditor-panel--arrow"),"");return Object.keys(t.options.preview.theme.list).forEach(function(e){i+='<button data-type="'+e+'">'+t.options.preview.theme.list[e]+"</button>"}),o.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+i+"</div>",o.addEventListener((0,I.Le)(),function(e){"BUTTON"===e.target.tagName&&(s(t,["subToolbar"]),t.options.preview.theme.current=e.target.getAttribute("data-type"),(0,ue.Z)(t.options.preview.theme.current,t.options.preview.theme.path),e.preventDefault(),e.stopPropagation())}),n.element.appendChild(o),a(t,o,r,e.level),n}function Xr(t,e){var n=fr.call(this,t,e)||this,r=n.element.children[0],o=document.createElement("div"),i=(o.className="vditor-hint"+(2===e.level?"":" vditor-panel--arrow"),"");return O.g.CODE_THEME.forEach(function(e){i+="<button>"+e+"</button>"}),o.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+i+"</div>",o.addEventListener((0,I.Le)(),function(e){"BUTTON"===e.target.tagName&&(s(t,["subToolbar"]),t.options.preview.hljs.style=e.target.textContent,(0,Kt.Y)(e.target.textContent,t.options.cdn),e.preventDefault(),e.stopPropagation())}),n.element.appendChild(o),a(t,o,r,e.level),n}function Yr(t,e){var n=vr.call(this,t,e)||this;return"both"===t.options.preview.mode&&n.element.children[0].classList.add("vditor-menu--current"),n.element.children[0].addEventListener((0,I.Le)(),function(e){n.element.firstElementChild.classList.contains(O.g.CLASS_MENU_DISABLED)||(e.preventDefault(),"sv"===t.currentMode&&("both"===t.options.preview.mode?Wt("editor",t):Wt("both",t)))}),n}function Qr(){this.element=document.createElement("div"),this.element.className="vditor-tip"}function $r(e){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",e.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(e),Oe(e,this.element),Ie(e,this.element),qe(e,this.element),Be(e,this.element),je(e,this.element),Re(e,this.element,this.copy),Pe(e,this.element,this.copy)}function eo(e){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--"+e.options.resize.position,this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(e)}function to(r){var o=this,i=(this.element=document.createElement("div"),this.element.className="vditor-preview",this.previewElement=document.createElement("div"),this.previewElement.className="vditor-reset",r.options.classes.preview&&this.previewElement.classList.add(r.options.classes.preview),this.previewElement.style.maxWidth=r.options.preview.maxWidth+"px",this.previewElement.addEventListener("copy",function(e){var t;"TEXTAREA"!==e.target.tagName&&((t=document.createElement("div")).className="vditor-reset",t.appendChild(getSelection().getRangeAt(0).cloneContents()),o.copyToX(r,t,"default"),e.preventDefault())}),this.previewElement.addEventListener("click",function(e){var t=(0,B.lG)(e.target,"SPAN");t&&(0,B.fb)(t,"vditor-toc")?(t=o.previewElement.querySelector("#"+t.getAttribute("data-target-id")))&&(o.element.scrollTop=t.offsetTop):"A"===e.target.tagName?(r.options.link.click?r.options.link.click(e.target):r.options.link.isOpen&&window.open(e.target.getAttribute("href")),e.preventDefault()):"IMG"===e.target.tagName&&(r.options.image.preview?r.options.image.preview(e.target):r.options.image.isPreview&&(0,ce.E)(e.target,r.options.lang,r.options.theme))}),this.element.appendChild(this.previewElement),r.options.preview.actions);if(0!==i.length){var a=document.createElement("div");a.className="vditor-preview__action";for(var e=[],t=0;t<i.length;t++){var n=i[t];if("object"!=typeof n)switch(n){case"desktop":e.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":e.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":e.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":e.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到公众号"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":e.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="复制到知乎"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>')}else e.push('<button type="button" data-type="'+n.key+'" class="'+n.className+'"'+(n.tooltip?' aria-label="'+n.tooltip+'"':"")+'">'+n.text+"</button>")}a.innerHTML=e.join(""),a.addEventListener((0,I.Le)(),function(e){var t,n,e=(0,z.S)(e.target,"BUTTON");e&&(t=e.getAttribute("data-type"),(n=i.find(function(e){return(null==e?void 0:e.key)===t}))?n.click(t):"mp-wechat"!==t&&"zhihu"!==t?(o.previewElement.style.width="desktop"===t?"auto":"tablet"===t?"780px":"360px",o.previewElement.scrollWidth>o.previewElement.parentElement.clientWidth&&(o.previewElement.style.width="auto"),o.render(r),a.querySelectorAll("button").forEach(function(e){e.classList.remove("vditor-preview__action--current")}),e.classList.add("vditor-preview__action--current")):o.copyToX(r,o.previewElement.cloneNode(!0),t))}),this.element.insertBefore(a,this.previewElement)}}function no(e){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'+e+'</div>\n<div class="vditor-outline__content"></div>'}function ro(e){this.composingLock=!1;var t=document.createElement("div");t.className="vditor-ir",t.innerHTML='<pre class="vditor-reset" placeholder="'+e.options.placeholder+'"\n contenteditable="true" spellcheck="false"></pre>',this.element=t.firstElementChild,this.bindEvent(e),Oe(e,this.element),De(e,this.element),Ie(e,this.element),qe(e,this.element),Be(e,this.element),je(e,this.element),Re(e,this.element,this.copy),Pe(e,this.element,this.copy)}function oo(e){var a=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(e,t){a.element.style.display="none";var n,r=decodeURIComponent(e.getAttribute("data-value")),e=window.getSelection().getRangeAt(0);if("ir"===t.currentMode){var o=(0,B.a1)(e.startContainer,"data-type","code-block-info");if(o)return o.textContent=O.g.ZWSP+r.trimRight(),e.selectNodeContents(o),e.collapse(!1),v(t),o.parentElement.querySelectorAll("code").forEach(function(e){e.className="language-"+r.trimRight()}),U(o.parentElement.querySelector(".vditor-ir__preview"),t),void(a.recentLanguage=r.trimRight())}if("wysiwyg"===t.currentMode&&3!==e.startContainer.nodeType){var o=e.startContainer,i=void 0;if((i=o.classList.contains("vditor-input")?o:o.firstElementChild)&&i.classList.contains("vditor-input"))return i.value=r.trimRight(),e.selectNodeContents(i),e.collapse(!1),i.dispatchEvent(new CustomEvent("input",{detail:1})),void(a.recentLanguage=r.trimRight())}e.setStart(e.startContainer,a.lastIndex),e.deleteContents(),t.options.hint.parse?"sv"===t.currentMode?(0,V.oC)(t.lute.SpinVditorSVDOM(r),t):"wysiwyg"===t.currentMode?(0,V.oC)(t.lute.SpinVditorDOM(r),t):(0,V.oC)(t.lute.SpinVditorIRDOM(r),t):(0,V.oC)(r,t),":"===a.splitChar&&-1<r.indexOf(":")&&"sv"!==t.currentMode&&e.insertNode(document.createTextNode(" ")),e.collapse(!1),(0,V.Hc)(e),"wysiwyg"===t.currentMode?(n=(0,B.fb)(e.startContainer,"vditor-wysiwyg__block"))&&n.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(n.lastElementChild.innerHTML=n.firstElementChild.innerHTML,U(n.lastElementChild,t)):"ir"===t.currentMode&&(n=(0,B.fb)(e.startContainer,"vditor-ir__marker--pre"))&&n.nextElementSibling.classList.contains("vditor-ir__preview")&&(n.nextElementSibling.innerHTML=n.innerHTML,U(n.nextElementSibling,t)),S(t)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",e.push({key:":"})}function io(e,t){var n=br.call(this,e,t)||this,r=document.createElement("div");return r.className="vditor-hint"+(2===t.level?"":" vditor-panel--arrow"),r.innerHTML='<button data-mode="wysiwyg">'+window.VditorI18n.wysiwyg+" &lt;"+(0,I.ns)("⌥⌘7")+'></button>\n<button data-mode="ir">'+window.VditorI18n.instantRendering+" &lt;"+(0,I.ns)("⌥⌘8")+'></button>\n<button data-mode="sv">'+window.VditorI18n.splitView+" &lt;"+(0,I.ns)("⌥⌘9")+"></button>",n.element.appendChild(r),n._bindEvent(e,r,t),n}function ao(){this.constructor=yr}wr=L.default,n(g,wr),g.prototype.showErrorTip=function(e){var t=new Vt;document.body.appendChild(t.element),t.show(e,0)},g.prototype.setTheme=function(e,t,n,r){this.vditor.options.theme=e,E(this.vditor),t&&(this.vditor.options.preview.theme.current=t,(0,ue.Z)(t,r||this.vditor.options.preview.theme.path)),n&&(this.vditor.options.preview.hljs.style=n,(0,Kt.Y)(n,this.vditor.options.cdn))},g.prototype.getValue=function(){return D(this.vditor)},g.prototype.getCurrentMode=function(){return this.vditor.currentMode},g.prototype.focus=function(){"sv"===this.vditor.currentMode?this.vditor.sv.element.focus():"wysiwyg"===this.vditor.currentMode?this.vditor.wysiwyg.element.focus():"ir"===this.vditor.currentMode&&this.vditor.ir.element.focus()},g.prototype.blur=function(){"sv"===this.vditor.currentMode?this.vditor.sv.element.blur():"wysiwyg"===this.vditor.currentMode?this.vditor.wysiwyg.element.blur():"ir"===this.vditor.currentMode&&this.vditor.ir.element.blur()},g.prototype.disabled=function(){s(this.vditor,["subToolbar","hint","popover"]),q(this.vditor.toolbar.elements,O.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},g.prototype.enable=function(){P(this.vditor.toolbar.elements,O.g.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},g.prototype.getSelection=function(){return"wysiwyg"===this.vditor.currentMode?Ne(this.vditor.wysiwyg.element):"sv"===this.vditor.currentMode?Ne(this.vditor.sv.element):"ir"===this.vditor.currentMode?Ne(this.vditor.ir.element):void 0},g.prototype.renderPreview=function(e){this.vditor.preview.render(this.vditor,e)},g.prototype.getCursorPosition=function(){return(0,V.Ny)(this.vditor[this.vditor.currentMode].element)},g.prototype.isUploading=function(){return this.vditor.upload.isUploading},g.prototype.clearCache=function(){localStorage.removeItem(this.vditor.options.cache.id)},g.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},g.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},g.prototype.html2md=function(e){return this.vditor.lute.HTML2Md(e)},g.prototype.exportJSON=function(e){return this.vditor.lute.RenderJSON(e)},g.prototype.getHTML=function(){return It(this.vditor)},g.prototype.tip=function(e,t){this.vditor.tip.show(e,t)},g.prototype.setPreviewMode=function(e){Wt(e,this.vditor)},g.prototype.deleteValue=function(){window.getSelection().isCollapsed||document.execCommand("delete",!1)},g.prototype.updateValue=function(e){document.execCommand("insertHTML",!1,e)},g.prototype.insertValue=function(e,t){void 0===t&&(t=!0);var n=(0,V.zh)(this.vditor),r=(n.collapse(!0),document.createElement("template"));r.innerHTML=e,n.insertNode(r.content.cloneNode(!0)),n.collapse(!1),"sv"===this.vditor.currentMode?(this.vditor.sv.preventInput=!0,t&&d(this.vditor)):"wysiwyg"===this.vditor.currentMode?t&&Ye(this.vditor,getSelection().getRangeAt(0)):"ir"===this.vditor.currentMode&&(this.vditor.ir.preventInput=!0,t)&&se(this.vditor,getSelection().getRangeAt(0),!0)},g.prototype.setValue=function(e,t){var n=this;void 0===t&&(t=!1),"sv"===this.vditor.currentMode?(this.vditor.sv.element.innerHTML="<div data-block='0'>"+this.vditor.lute.SpinVditorSVDOM(e)+"</div>",u(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})):"wysiwyg"===this.vditor.currentMode?Ae(this.vditor,e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}):(this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(e),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(e){U(e,n.vditor)}),v(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})),this.vditor.outline.render(this.vditor),e||(s(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover&&(this.vditor.wysiwyg.popover.style.display="none"),this.clearCache()),t&&this.clearStack()},g.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},g.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style");var e=document.getElementById("vditorIconScript");e&&e.remove(),this.clearCache(),he(),this.vditor.wysiwyg.unbindListener()},g.prototype.getCommentIds=function(){return"wysiwyg"!==this.vditor.currentMode?[]:this.vditor.wysiwyg.getComments(this.vditor,!0)},g.prototype.hlCommentIds=function(e){var t;"wysiwyg"===this.vditor.currentMode&&(t=function(t){t.classList.remove("vditor-comment--hover"),e.forEach(function(e){-1<t.getAttribute("data-cmtids").indexOf(e)&&t.classList.add("vditor-comment--hover")})},this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(e){t(e)}),"none"!==this.vditor.preview.element.style.display)&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(e){t(e)})},g.prototype.unHlCommentIds=function(e){var t;"wysiwyg"===this.vditor.currentMode&&(t=function(t){e.forEach(function(e){-1<t.getAttribute("data-cmtids").indexOf(e)&&t.classList.remove("vditor-comment--hover")})},this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(e){t(e)}),"none"!==this.vditor.preview.element.style.display)&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(e){t(e)})},g.prototype.removeCommentIds=function(e){var n,o=this;"wysiwyg"===this.vditor.currentMode&&(n=function(e,n){var r=e.getAttribute("data-cmtids").split(" ");r.find(function(e,t){if(e===n)return r.splice(t,1),!0}),0===r.length?(e.outerHTML=e.innerHTML,(0,V.zh)(o.vditor).collapse(!0)):e.setAttribute("data-cmtids",r.join(" "))},e.forEach(function(t){o.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(e){n(e,t)}),"none"!==o.vditor.preview.element.style.display&&o.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(e){n(e,t)})}),W(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}))},g.prototype.init=function(e,o){var i=this;this.vditor={currentMode:o.mode,element:e,hint:new Ot(o.hint.extend),lute:void 0,options:o,originalInnerHTML:e.innerHTML,outline:new Pt(window.VditorI18n.outline),tip:new Vt},this.vditor.sv=new Ut(this.vditor),this.vditor.undo=new _r,this.vditor.wysiwyg=new Tr(this.vditor),this.vditor.ir=new Dt(this.vditor),this.vditor.toolbar=new Er(this.vditor),o.resize.enable&&(this.vditor.resize=new zt(this.vditor)),this.vditor.toolbar.elements.devtools&&(this.vditor.devtools=new M),(o.upload.url||o.upload.handler)&&(this.vditor.upload=new Je),(0,C.G)(o._lutePath||o.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then(function(){var t,n,e,r;i.vditor.lute=(0,jt.X)({autoSpace:i.vditor.options.preview.markdown.autoSpace,gfmAutoLink:i.vditor.options.preview.markdown.gfmAutoLink,codeBlockPreview:i.vditor.options.preview.markdown.codeBlockPreview,emojiSite:i.vditor.options.hint.emojiPath,emojis:i.vditor.options.hint.emoji,fixTermTypo:i.vditor.options.preview.markdown.fixTermTypo,footnotes:i.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:i.vditor.options.preview.math.inlineDigit,linkBase:i.vditor.options.preview.markdown.linkBase,linkPrefix:i.vditor.options.preview.markdown.linkPrefix,listStyle:i.vditor.options.preview.markdown.listStyle,mark:i.vditor.options.preview.markdown.mark,mathBlockPreview:i.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:i.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:i.vditor.options.preview.markdown.sanitize,toc:i.vditor.options.preview.markdown.toc}),i.vditor.preview=new Bt(i.vditor),(t=i.vditor).element.innerHTML="",t.element.classList.add("vditor"),t.options.rtl&&t.element.setAttribute("dir","rtl"),E(t),(0,ue.Z)(t.options.preview.theme.current,t.options.preview.theme.path),"number"==typeof t.options.height?t.element.style.height=t.options.height+"px":t.element.style.height=t.options.height,"number"==typeof t.options.minHeight&&(t.element.style.minHeight=t.options.minHeight+"px"),"number"==typeof t.options.width?t.element.style.width=t.options.width+"px":t.element.style.width=t.options.width,t.element.appendChild(t.toolbar.element),(r=document.createElement("div")).className="vditor-content","left"===t.options.outline.position&&r.appendChild(t.outline.element),r.appendChild(t.wysiwyg.element.parentElement),r.appendChild(t.sv.element),r.appendChild(t.ir.element.parentElement),r.appendChild(t.preview.element),t.toolbar.elements.devtools&&r.appendChild(t.devtools.element),"right"===t.options.outline.position&&(t.outline.element.classList.add("vditor-outline--right"),r.appendChild(t.outline.element)),t.upload&&r.appendChild(t.upload.element),t.options.resize.enable&&r.appendChild(t.resize.element),r.appendChild(t.hint.element),r.appendChild(t.tip.element),t.element.appendChild(r),r.addEventListener("click",function(){s(t,["subToolbar"])}),t.toolbar.elements.export&&t.element.insertAdjacentHTML("beforeend",'<iframe id="vditorExportIframe" style="width: 100%;height: 0;border: 0"></iframe>'),c(t,t.options.mode,(me(e=t),he(),window.addEventListener("resize",x=function(){l(e),me(e)}),r=(0,I.pK)()&&localStorage.getItem(e.options.cache.id),e.options.cache.enable&&r||(e.options.value?r=e.options.value:e.originalInnerHTML?r=e.lute.HTML2Md(e.originalInnerHTML):e.options.cache.enable||(r="")),r||"")),document.execCommand("DefaultParagraphSeparator",!1,"p"),-1<navigator.userAgent.indexOf("iPhone")&&void 0!==window.visualViewport&&(n=!1,r=function(e){n||(n=!0,requestAnimationFrame(function(){n=!1;var e=t.toolbar.element;e.style.transform="none",e.getBoundingClientRect().top<0&&(e.style.transform="translate(0, "+-e.getBoundingClientRect().top+"px)")}))},window.visualViewport.addEventListener("scroll",r),window.visualViewport.addEventListener("resize",r)),o.after&&o.after(),o.icon&&(0,C.J)(o.cdn+"/dist/js/icons/"+o.icon+".js","vditorIconScript")})};let e=g;function g(e,t){var n=wr.call(this)||this;if(n.version=O.H,"string"==typeof e){if(t?t.cache?t.cache.id||(t.cache.id="vditor"+e):t.cache={id:"vditor"+e}:t={cache:{id:"vditor"+e}},!document.getElementById(e))return n.showErrorTip("Failed to get element by id: "+e),n;e=document.getElementById(e)}var r=new Lr(t).merge();if(r.i18n)window.VditorI18n=r.i18n,n.init(e,r);else{if(!["en_US","fr_FR","pt_BR","ja_JP","ko_KR","ru_RU","sv_SE","zh_CN","zh_TW"].includes(r.lang))throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");var o="vditorI18nScript"+r.lang;document.querySelectorAll('head script[id^="vditorI18nScript"]').forEach(function(e){e.id!==o&&document.head.removeChild(e)}),(0,C.G)(r.cdn+"/dist/js/i18n/"+r.lang+".js",o).then(function(){n.init(e,r)}).catch(function(e){n.showErrorTip("GET "+r.cdn+"/dist/js/i18n/"+r.lang+".js net::ERR_ABORTED 404 (Not Found)")})}return n}}return w.default})()},911:function(e,t,n){var r=n(912);"string"==typeof r&&(r=[[e.i,r,""]]);n(91)(r,{insertAt:"top",hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},912:function(e,t,n){(t=n(90)(!1)).push([e.i,'/*!\n * Vditor v3.10.4 - A markdown editor written in TypeScript.\n *\n * MIT License\n *\n * Copyright (c) 2018-present B3log 开源, b3log.org\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the "Software"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n.vditor {\n  --border-color: #d1d5da;\n  --second-color: rgba(88, 96, 105, 0.36);\n  --panel-background-color: #fff;\n  --panel-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n  --toolbar-background-color: #f6f8fa;\n  --toolbar-icon-color: #586069;\n  --toolbar-icon-hover-color: #4285f4;\n  --toolbar-height: 35px;\n  --toolbar-divider-margin-top: 8px;\n  --textarea-background-color: #fafbfc;\n  --textarea-text-color: #24292e;\n  --resize-icon-color: var(--toolbar-icon-color);\n  --resize-background-color: var(--toolbar-background-color);\n  --resize-hover-icon-color: var(--panel-background-color);\n  --resize-hover-background-color: var(--toolbar-icon-hover-color);\n  --count-background-color: rgba(27, 31, 35, 0.05);\n  --heading-border-color: #eaecef;\n  --blockquote-color: #6a737d;\n  --ir-heading-color: #660e7a;\n  --ir-title-color: #808080;\n  --ir-bi-color: #0033b3;\n  --ir-link-color: #008000;\n  --ir-bracket-color: #0000ff;\n  --ir-paren-color: #008000;\n}\n.vditor--dark {\n  --border-color: #141414;\n  --second-color: rgba(185, 185, 185, 0.36);\n  --panel-background-color: #24292e;\n  --panel-shadow: 0 1px 2px rgba(255, 255, 255, 0.2);\n  --toolbar-background-color: #1d2125;\n  --toolbar-icon-color: #b9b9b9;\n  --toolbar-icon-hover-color: #fff;\n  --textarea-background-color: #2f363d;\n  --textarea-text-color: #d1d5da;\n  --resize-icon-color: var(--border-color);\n  --resize-background-color: var(--second-color);\n  --resize-hover-icon-color: var(--toolbar-icon-hover-color);\n  --resize-hover-background-color: rgba(185, 185, 185, 0.86);\n  --count-background-color: rgba(66, 133, 244, 0.36);\n  --heading-border-color: var(--textarea-text-color);\n  --blockquote-color: var(--toolbar-icon-color);\n  --ir-heading-color: #9876aa;\n  --ir-title-color: #808080;\n  --ir-bi-color: #cc7832;\n  --ir-link-color: #ffc66d;\n  --ir-bracket-color: #287bde;\n  --ir-paren-color: #6a8759;\n}\n/**\n * tool tip.\n *\n * @author <a href="http://vanessa.b3log.org">Liyuan Li</a>\n * @version 0.1.0.0, Jan 25, 2019\n */\n@-webkit-keyframes tooltip-appear {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n@keyframes tooltip-appear {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n.vditor-tooltipped {\n  position: relative;\n  cursor: pointer;\n}\n.vditor-tooltipped::after {\n  position: absolute;\n  z-index: 1000000;\n  display: none;\n  padding: 5px 8px;\n  font-size: 11px;\n  font-weight: normal;\n  -webkit-font-smoothing: subpixel-antialiased;\n  color: #fff;\n  text-align: center;\n  text-decoration: none;\n  text-shadow: none;\n  text-transform: none;\n  letter-spacing: normal;\n  word-wrap: break-word;\n  white-space: pre;\n  pointer-events: none;\n  content: attr(aria-label);\n  background: #3b3e43;\n  border-radius: 3px;\n  line-height: 16px;\n  opacity: 0;\n}\n.vditor-tooltipped::before {\n  position: absolute;\n  z-index: 1000001;\n  display: none;\n  width: 0;\n  height: 0;\n  color: #3b3e43;\n  pointer-events: none;\n  content: "";\n  border: 5px solid transparent;\n  opacity: 0;\n}\n.vditor-tooltipped--hover::before,\n.vditor-tooltipped--hover::after,\n.vditor-tooltipped:hover::before,\n.vditor-tooltipped:hover::after,\n.vditor-tooltipped:active::before,\n.vditor-tooltipped:active::after,\n.vditor-tooltipped:focus::before,\n.vditor-tooltipped:focus::after {\n  display: inline-block;\n  text-decoration: none;\n  -webkit-animation-name: tooltip-appear;\n  animation-name: tooltip-appear;\n  -webkit-animation-duration: 0.15s;\n  animation-duration: 0.15s;\n  -webkit-animation-fill-mode: forwards;\n  animation-fill-mode: forwards;\n  -webkit-animation-timing-function: ease-in;\n  animation-timing-function: ease-in;\n}\n.vditor-tooltipped__s::after,\n.vditor-tooltipped__se::after,\n.vditor-tooltipped__sw::after {\n  top: 100%;\n  right: 50%;\n  margin-top: 5px;\n}\n.vditor-tooltipped__s::before,\n.vditor-tooltipped__se::before,\n.vditor-tooltipped__sw::before {\n  top: auto;\n  right: 50%;\n  bottom: -5px;\n  margin-right: -5px;\n  border-bottom-color: #3b3e43;\n}\n.vditor-tooltipped__se::after {\n  right: auto;\n  left: 50%;\n  margin-left: -15px;\n}\n.vditor-tooltipped__sw::after {\n  margin-right: -15px;\n}\n.vditor-tooltipped__n::after,\n.vditor-tooltipped__ne::after,\n.vditor-tooltipped__nw::after {\n  right: 50%;\n  bottom: 100%;\n  margin-bottom: 5px;\n}\n.vditor-tooltipped__n::before,\n.vditor-tooltipped__ne::before,\n.vditor-tooltipped__nw::before {\n  top: -5px;\n  right: 50%;\n  bottom: auto;\n  margin-right: -5px;\n  border-top-color: #3b3e43;\n}\n.vditor-tooltipped__ne::after {\n  right: auto;\n  left: 50%;\n  margin-left: -15px;\n}\n.vditor-tooltipped__nw::after {\n  margin-right: -15px;\n}\n.vditor-tooltipped__s::after,\n.vditor-tooltipped__n::after {\n  transform: translateX(50%);\n}\n.vditor-tooltipped__w::after {\n  right: 100%;\n  bottom: 50%;\n  margin-right: 5px;\n  transform: translateY(50%);\n}\n.vditor-tooltipped__w::before {\n  top: 50%;\n  bottom: 50%;\n  left: -5px;\n  margin-top: -5px;\n  border-left-color: #3b3e43;\n}\n.vditor-tooltipped__e::after {\n  bottom: 50%;\n  left: 100%;\n  margin-left: 5px;\n  transform: translateY(50%);\n}\n.vditor-tooltipped__e::before {\n  top: 50%;\n  right: -5px;\n  bottom: 50%;\n  margin-top: -5px;\n  border-right-color: #3b3e43;\n}\n@media screen and (max-width: 520px) {\n  .vditor-tooltipped:before,\n  .vditor-tooltipped:after {\n    content: none;\n  }\n}\n/**\n * panel.\n *\n * @author <a href="http://vanessa.b3log.org">Liyuan Li</a>\n * @version 1.0.0.0, Jan 22, 2020\n */\n@-webkit-keyframes scale-in {\n  0% {\n    opacity: 0;\n    transform: scale(0.5);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n@keyframes scale-in {\n  0% {\n    opacity: 0;\n    transform: scale(0.5);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n.vditor-panel {\n  background-color: var(--panel-background-color);\n  position: absolute;\n  box-shadow: var(--panel-shadow);\n  border-radius: 3px;\n  padding: 5px;\n  z-index: 3;\n  font-size: 14px;\n  display: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  max-width: 320px;\n  min-width: 80px;\n  -webkit-animation-duration: 0.15s;\n  animation-duration: 0.15s;\n  -webkit-animation-name: scale-in;\n  animation-name: scale-in;\n  -webkit-animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n  color: var(--toolbar-icon-color);\n}\n.vditor-panel--none {\n  padding: 0;\n  -webkit-animation: none;\n  animation: none;\n  min-width: auto;\n  max-width: none;\n  white-space: nowrap;\n  opacity: 0.86;\n}\n.vditor-panel--arrow:before {\n  position: absolute;\n  width: 0;\n  height: 0;\n  pointer-events: none;\n  content: " ";\n  border: 7px solid transparent;\n  top: -14px;\n  left: 5px;\n  border-bottom-color: var(--panel-background-color);\n}\n.vditor-panel--left {\n  right: 0;\n}\n.vditor-panel--left.vditor-panel--arrow:before {\n  right: 5px;\n  left: auto;\n}\n.vditor-input {\n  border: 0;\n  padding: 3px 5px;\n  background-color: var(--panel-background-color);\n  font-size: 12px;\n  color: var(--textarea-text-color);\n}\n.vditor-input:focus {\n  background-color: var(--toolbar-background-color);\n  outline: none;\n}\n.vditor-icon {\n  color: var(--toolbar-icon-color);\n  cursor: pointer;\n  float: left;\n  padding: 4px 5px;\n  height: 21px;\n  width: 23px;\n  background-color: transparent;\n  border: 0;\n  box-sizing: border-box;\n}\n.vditor-icon:hover,\n.vditor-icon--current {\n  color: var(--toolbar-icon-hover-color);\n  background-color: transparent;\n}\n.vditor-icon:focus {\n  outline: none;\n}\n.vditor-icon svg {\n  height: 13px !important;\n  width: 13px !important;\n  float: left;\n  fill: currentColor;\n  pointer-events: none;\n}\n.vditor-toolbar {\n  background-color: var(--toolbar-background-color);\n  border-bottom: 1px solid var(--border-color);\n  padding: 0 5px;\n  line-height: 1;\n}\n.vditor-toolbar--pin {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n}\n.vditor-toolbar--hide {\n  transition: all 0.15s ease-in-out;\n  height: 5px;\n  overflow: hidden;\n}\n.vditor-toolbar--hide:hover {\n  background-color: var(--toolbar-background-color);\n  height: auto;\n  overflow: visible;\n}\n.vditor-toolbar__item {\n  float: left;\n  position: relative;\n}\n.vditor-toolbar__item .vditor-tooltipped {\n  color: var(--toolbar-icon-color);\n  border: 0;\n  padding: 10px 5px;\n  background-color: transparent;\n  height: var(--toolbar-height);\n  width: 25px;\n  box-sizing: border-box;\n  font-size: 0;\n}\n.vditor-toolbar__item .vditor-tooltipped:focus {\n  outline: none;\n}\n.vditor-toolbar__item .vditor-tooltipped:focus {\n  cursor: pointer;\n  color: var(--toolbar-icon-hover-color);\n}\n.vditor-toolbar__item svg {\n  fill: currentColor;\n  display: inline-block;\n  stroke-width: 0;\n  stroke: currentColor;\n  width: 15px;\n  height: 15px;\n}\n.vditor-toolbar__item input {\n  position: absolute;\n  width: 25px;\n  height: var(--toolbar-height);\n  top: 0;\n  left: 0;\n  cursor: pointer;\n  opacity: 0.001;\n  overflow: hidden;\n}\n.vditor-toolbar__divider {\n  float: left;\n  height: calc(var(--toolbar-height) - (var(--toolbar-divider-margin-top) * 2));\n  border-left: 1px solid var(--second-color);\n  margin: var(--toolbar-divider-margin-top) 8px;\n}\n.vditor-toolbar__br {\n  width: 100%;\n  padding: 0 !important;\n  height: 0 !important;\n}\n.vditor-menu--current {\n  color: var(--toolbar-icon-hover-color) !important;\n}\n.vditor-menu--disabled {\n  color: var(--second-color) !important;\n  cursor: not-allowed !important;\n}\n.vditor-emojis {\n  display: inline-block;\n  overflow: auto;\n}\n.vditor-emojis::-webkit-scrollbar {\n  display: none;\n}\n.vditor-emojis__tip {\n  flex: 1;\n  min-width: 1px;\n  width: 200px;\n  margin-right: 10px;\n  color: var(--toolbar-icon-color);\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.vditor-emojis__tail {\n  margin-top: 5px;\n  font-size: 12px;\n  color: var(--toolbar-icon-color);\n  display: flex;\n}\n.vditor-emojis__tail a {\n  text-decoration: none;\n  color: var(--toolbar-icon-color);\n}\n.vditor-emojis__tail a:hover {\n  color: var(--toolbar-icon-hover-color);\n}\n.vditor-emojis button {\n  cursor: pointer;\n  border-radius: 3px;\n  float: left;\n  height: 30px;\n  width: 30px;\n  text-align: center;\n  line-height: 26px;\n  padding: 3px;\n  box-sizing: border-box;\n  font-size: 16px;\n  transition: all 0.15s ease-in-out;\n  border: 0;\n  margin: 0;\n  background-color: transparent;\n  overflow: hidden;\n}\n.vditor-emojis button:focus {\n  outline: none;\n}\n.vditor-emojis button:hover .vditor-emojis__icon {\n  display: inline-block;\n  transform: scale(1.2);\n}\n.vditor-emojis img {\n  height: 20px;\n  width: 20px;\n  float: left;\n  margin: 3px 0 0 3px;\n}\n@media screen and (max-width: 520px) {\n  .vditor-toolbar__item {\n    padding: 0 12px;\n  }\n  .vditor-panel--left.vditor-panel--arrow:before {\n    right: 17px;\n  }\n}\n@media (hover: hover) and (pointer: fine) {\n  .vditor-toolbar__item .vditor-tooltipped:hover {\n    color: var(--toolbar-icon-hover-color);\n  }\n}\n@-webkit-keyframes slideInDown {\n  from {\n    transform: translate3d(0, -100%, 0);\n    visibility: visible;\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes slideInDown {\n  from {\n    transform: translate3d(0, -100%, 0);\n    visibility: visible;\n  }\n  to {\n    transform: translate3d(0, 0, 0);\n  }\n}\n.vditor {\n  display: flex;\n  flex-direction: column;\n  border: 1px solid var(--border-color);\n  border-radius: 3px;\n  box-sizing: border-box;\n  font-family: "Helvetica Neue", "Luxi Sans", "DejaVu Sans", "Hiragino Sans GB", "Microsoft Yahei", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", "Android Emoji", "EmojiSymbols";\n}\n.vditor--fullscreen {\n  position: fixed;\n  top: 0;\n  width: 100% !important;\n  left: 0;\n  height: 100vh !important;\n  z-index: 90;\n  border-radius: 0;\n}\n.vditor-content {\n  display: flex;\n  min-height: 60px;\n  flex: 1;\n  min-width: 1px;\n  position: relative;\n}\n.vditor-preview {\n  flex: 1;\n  min-width: 1px;\n  overflow: auto;\n  margin-left: -1px;\n  border-left: 1px solid var(--border-color);\n  box-sizing: border-box;\n  border-radius: 0 0 3px 0;\n  background-color: var(--textarea-background-color);\n}\n.vditor-preview::-webkit-scrollbar {\n  display: none;\n}\n.vditor-preview__action {\n  text-align: center;\n  padding: 10px;\n  background-color: var(--toolbar-background-color);\n}\n.vditor-preview__action button {\n  background-color: var(--toolbar-background-color);\n  color: var(--toolbar-icon-color);\n  line-height: 20px;\n  border: 0;\n  margin: 0 10px;\n  cursor: pointer;\n  padding: 0 7px;\n  font-size: 12px;\n}\n.vditor-preview__action button.vditor-preview__action--current,\n.vditor-preview__action button:hover {\n  color: var(--toolbar-icon-hover-color);\n  background-color: var(--toolbar-background-color);\n}\n.vditor-preview__action button:focus {\n  outline: none;\n}\n.vditor-preview__action button svg {\n  fill: currentColor;\n  height: 15px;\n  width: 15px;\n  vertical-align: middle;\n}\n.vditor-preview > .vditor-reset {\n  padding: 10px;\n  margin: 0 auto;\n}\n.vditor-preview img:not(.emoji) {\n  cursor: pointer;\n}\n.vditor-devtools {\n  display: none;\n  background-color: var(--textarea-background-color);\n  overflow: auto;\n  flex: 1;\n  min-width: 1px;\n  box-shadow: inset 1px 0 var(--border-color);\n  box-sizing: border-box;\n  border-radius: 0 0 3px 0;\n  padding: 10px;\n}\n.vditor-counter {\n  padding: 3px;\n  color: var(--toolbar-icon-color);\n  background-color: var(--count-background-color);\n  border-radius: 3px;\n  font-size: 12px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  float: right;\n  margin: 8px 3px 0 0;\n}\n.vditor-counter--error {\n  color: #d23f31;\n  background-color: rgba(210, 63, 49, 0.1);\n}\n.vditor-resize {\n  padding: 3px 0;\n  cursor: row-resize;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n}\n.vditor-resize--top {\n  top: -3px;\n}\n.vditor-resize--bottom {\n  bottom: -3px;\n}\n.vditor-resize > div {\n  height: 3px;\n  background-color: var(--resize-background-color);\n  transition: all 0.15s ease-in-out;\n}\n.vditor-resize:hover > div,\n.vditor-resize--selected > div {\n  background-color: var(--resize-hover-background-color);\n}\n.vditor-resize:hover svg,\n.vditor-resize--selected svg {\n  color: var(--resize-hover-icon-color);\n}\n.vditor-resize svg {\n  fill: currentColor;\n  stroke-width: 0;\n  stroke: currentColor;\n  width: 13px;\n  height: 3px;\n  display: block;\n  margin: 0 auto;\n  color: var(--resize-icon-color);\n}\n.vditor-upload {\n  position: absolute;\n  height: 3px;\n  left: 0;\n  top: -2px;\n  transition: all 0.15s ease-in-out;\n  background-color: #4285f4;\n}\n.vditor-tip {\n  position: absolute;\n  font-size: 12px;\n  top: 10px;\n  -webkit-animation-duration: 0.15s;\n  animation-duration: 0.15s;\n  -webkit-animation-fill-mode: both;\n  animation-fill-mode: both;\n  left: 50%;\n  z-index: 5;\n}\n.vditor-tip--show {\n  display: block;\n  -webkit-animation-name: slideInDown;\n  animation-name: slideInDown;\n}\n.vditor-tip__content {\n  text-align: left;\n  display: inline-block;\n  line-height: 16px;\n  padding: 3px 10px;\n  border-radius: 3px;\n  background: var(--toolbar-background-color);\n  position: relative;\n  margin-left: -50%;\n  color: var(--toolbar-icon-color);\n  max-width: 100%;\n  box-shadow: var(--panel-shadow);\n}\n.vditor-tip__content ul {\n  margin: 2px 0;\n  padding: 0 0 0 18px;\n}\n.vditor-tip__content a {\n  color: #4285f4;\n}\n.vditor-tip__close {\n  position: absolute;\n  color: var(--toolbar-icon-color);\n  top: -7px;\n  right: -15px;\n  font-weight: bold;\n  cursor: pointer;\n}\n.vditor-tip__close:hover {\n  color: var(--toolbar-icon-hover-color);\n}\n.vditor-img {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  z-index: 100;\n}\n.vditor-img__bar {\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--toolbar-background-color);\n  text-align: center;\n  height: 36px;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.vditor-img__btn {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  margin-left: 24px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  color: var(--toolbar-icon-color);\n}\n.vditor-img__btn:hover {\n  color: var(--toolbar-icon-hover-color);\n}\n.vditor-img__btn svg {\n  height: 14px;\n  width: 14px;\n  margin-right: 8px;\n  fill: currentColor;\n}\n.vditor-img__img {\n  flex: 1;\n  background-color: var(--textarea-background-color);\n  overflow: auto;\n  cursor: zoom-out;\n}\n.vditor-img__img img {\n  max-width: none;\n}\n.vditor-hint {\n  background-color: var(--panel-background-color);\n  position: absolute;\n  box-shadow: var(--panel-shadow);\n  border-radius: 3px;\n  padding: 5px 0;\n  z-index: 4;\n  line-height: 20px;\n  list-style: none;\n  font-size: 12px;\n  margin: 0;\n  max-width: 250px;\n  min-width: 80px;\n  display: none;\n}\n.vditor-hint .vditor-hint {\n  margin-top: -31px;\n  left: 100%;\n  right: auto;\n}\n.vditor-hint .vditor-hint.vditor-panel--left {\n  right: 100%;\n  left: auto;\n}\n.vditor-hint button {\n  color: var(--toolbar-icon-color);\n  display: block;\n  padding: 3px 10px;\n  border: 0;\n  border-radius: 0;\n  line-height: 20px;\n  width: 100%;\n  box-sizing: border-box;\n  text-align: left;\n  margin: 0;\n  background-color: transparent;\n  cursor: pointer;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.vditor-hint button:focus {\n  outline: none;\n}\n.vditor-hint--current,\n.vditor-hint button:not(.vditor-menu--disabled):hover {\n  background-color: var(--toolbar-background-color) !important;\n  color: var(--toolbar-icon-hover-color) !important;\n}\n.vditor-hint__emoji {\n  font-size: 16px;\n  float: left;\n  margin-right: 3px;\n}\n.vditor-hint img {\n  height: 20px;\n  width: 20px;\n  float: left;\n  margin-right: 3px;\n}\n.vditor-reset {\n  color: #24292e;\n  font-variant-ligatures: no-common-ligatures;\n  font-family: "Helvetica Neue", "Luxi Sans", "DejaVu Sans", "Hiragino Sans GB", "Microsoft Yahei", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", "Android Emoji", "EmojiSymbols";\n  word-wrap: break-word;\n  overflow: auto;\n  line-height: 1.5;\n  font-size: 16px;\n  word-break: break-word;\n}\n.vditor-reset--anchor {\n  padding-left: 20px;\n}\n.vditor-reset--error {\n  color: #d23f31;\n  font-size: 12px;\n  display: block;\n  line-height: 16px;\n}\n.vditor-reset ul ul ul {\n  list-style-type: square;\n}\n.vditor-reset ul ul {\n  list-style-type: circle;\n}\n.vditor-reset ul {\n  list-style-type: disc;\n}\n.vditor-reset ul,\n.vditor-reset ol {\n  padding-left: 2em;\n  margin-top: 0;\n  margin-bottom: 16px;\n}\n.vditor-reset li + li {\n  margin-top: 0.25em;\n}\n.vditor-reset li p {\n  margin-top: 16px;\n}\n.vditor-reset audio {\n  max-width: 100%;\n}\n.vditor-reset audio:focus {\n  outline: none;\n}\n.vditor-reset video {\n  max-height: 90vh;\n  max-width: 100%;\n}\n.vditor-reset img {\n  max-width: 100%;\n}\n.vditor-reset img.emoji {\n  cursor: auto;\n  max-width: 20px;\n  vertical-align: sub;\n}\n.vditor-reset h1,\n.vditor-reset h2,\n.vditor-reset h3,\n.vditor-reset h4,\n.vditor-reset h5,\n.vditor-reset h6 {\n  margin-top: 24px;\n  margin-bottom: 16px;\n  font-weight: 600;\n  line-height: 1.25;\n}\n.vditor-reset h1:hover .vditor-anchor svg,\n.vditor-reset h2:hover .vditor-anchor svg,\n.vditor-reset h3:hover .vditor-anchor svg,\n.vditor-reset h4:hover .vditor-anchor svg,\n.vditor-reset h5:hover .vditor-anchor svg,\n.vditor-reset h6:hover .vditor-anchor svg {\n  visibility: visible;\n}\n.vditor-reset h1 {\n  font-size: 1.75em;\n}\n.vditor-reset h2 {\n  font-size: 1.55em;\n}\n.vditor-reset h3 {\n  font-size: 1.38em;\n}\n.vditor-reset h4 {\n  font-size: 1.25em;\n}\n.vditor-reset h5 {\n  font-size: 1.13em;\n}\n.vditor-reset h6 {\n  font-size: 1em;\n}\n.vditor-reset hr {\n  height: 2px;\n  padding: 0;\n  margin: 24px 0;\n  background-color: #eaecef;\n  border: 0;\n}\n.vditor-reset p {\n  margin-top: 0;\n  margin-bottom: 16px;\n}\n.vditor-reset blockquote {\n  padding: 0 1em;\n  color: #6a737d;\n  border-left: 0.25em solid #eaecef;\n  margin: 0 0 16px 0;\n}\n.vditor-reset blockquote > :first-child {\n  margin-top: 0;\n}\n.vditor-reset blockquote > :last-child {\n  margin-bottom: 0;\n}\n.vditor-reset ins > iframe {\n  border: 0;\n}\n.vditor-reset iframe {\n  border: 1px solid #d1d5da;\n  max-width: 100%;\n  box-sizing: border-box;\n}\n.vditor-reset iframe.iframe__video {\n  min-width: 80%;\n  min-height: 36vh;\n}\n.vditor-reset table {\n  border-collapse: collapse;\n  empty-cells: show;\n  margin-bottom: 16px;\n  overflow: auto;\n  border-spacing: 0;\n  display: block;\n  word-break: keep-all;\n  width: 100%;\n}\n.vditor-reset table tr {\n  background-color: #fafbfc;\n  border-top: 1px solid #c6cbd1;\n}\n.vditor-reset table td,\n.vditor-reset table th {\n  padding: 6px 13px;\n  border: 1px solid #dfe2e5;\n  word-break: normal;\n  white-space: nowrap;\n}\n.vditor-reset table td:first-child::after,\n.vditor-reset table th:first-child::after {\n  content: "";\n  display: inline-block;\n  vertical-align: top;\n  min-height: 24px;\n}\n.vditor-reset table th {\n  font-weight: 600;\n}\n.vditor-reset table tbody tr:nth-child(2n) {\n  background-color: #fff;\n}\n.vditor-reset code:not(.hljs):not(.highlight-chroma) {\n  padding: 0.2em 0.4em;\n  margin: 0;\n  font-size: 85%;\n  border-radius: 3px;\n  font-family: mononoki, Consolas, "Liberation Mono", Menlo, Courier, monospace, "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", "Android Emoji", "EmojiSymbols";\n  word-break: break-word;\n  background-size: 20px 20px;\n  white-space: pre-wrap;\n}\n.vditor-reset pre {\n  margin: 1em 0;\n}\n.vditor-reset pre > code {\n  margin: 0;\n  font-size: 85%;\n  padding: 0.5em;\n  border-radius: 5px;\n  display: block;\n  overflow: auto;\n  white-space: pre;\n  font-family: mononoki, Consolas, "Liberation Mono", Menlo, Courier, monospace, "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", "Android Emoji", "EmojiSymbols";\n  background-size: 20px 20px;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AgMAAABHkjHhAAAACVBMVEWAgIBaWlo+Pj7rTFvWAAAAA3RSTlMHCAw+VhR4AAAA+klEQVQoz4WSMW7EQAhFPxKWNh2FCx+HkaZI6RRb5DYbyVfIJXLKDCFoMbaTKSw/8ZnPAPjaH2xgZcUNUDADD7D9LtDBCLZ45fbkvo/30K8yeI64pPwl6znd/3n/Oe93P3ho9qeh72btTFzqkz0rsJle8Zr81OLEwZ1dv/713uWqvu2pl+k0fy7MWtj9r/tN5q/02z89qa/L4Dc2LvM93kezPfXlME/O86EbY/V9GB9ePX8G1/6W+/9h1dq/HGfTfzT3j/xNo7522Bfnqe5jO/fvhVthlfk434v3iO9zG/UOphyPeinPl1J8Gtaa7xPTa/Dk+RIs4deMvwGvcGsmsCvJ0AAAAABJRU5ErkJggg==);\n  word-break: initial;\n  word-wrap: normal;\n}\n.vditor-reset pre:hover div.vditor-copy {\n  display: block;\n}\n.vditor-reset .language-math,\n.vditor-reset .language-echarts,\n.vditor-reset .language-mindmap,\n.vditor-reset .language-plantuml,\n.vditor-reset .language-mermaid,\n.vditor-reset .language-markmap,\n.vditor-reset .language-abc,\n.vditor-reset .language-flowchart,\n.vditor-reset .language-graphviz {\n  margin-bottom: 16px;\n}\n.vditor-reset .language-math mjx-container:focus {\n  outline: none;\n  cursor: context-menu;\n}\n.vditor-reset .language-echarts,\n.vditor-reset .language-mindmap {\n  overflow: hidden;\n  height: 420px;\n}\n.vditor-reset .language-mermaid,\n.vditor-reset .language-markmap,\n.vditor-reset .language-flowchart,\n.vditor-reset .language-graphviz {\n  text-align: center;\n}\n.vditor-reset .language-graphviz parsererror {\n  overflow: auto;\n}\n.vditor-reset kbd {\n  display: inline-block;\n  padding: 3px 5px;\n  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;\n  line-height: 10px;\n  color: #24292e;\n  vertical-align: middle;\n  background-color: #fafbfc;\n  border: solid 1px #d1d5da;\n  border-radius: 3px;\n  box-shadow: inset 0 -1px 0 #d1d5da;\n}\n.vditor-reset summary {\n  cursor: pointer;\n}\n.vditor-reset summary:focus {\n  outline: none;\n}\n.vditor-reset svg {\n  height: auto;\n  width: auto;\n  stroke-width: initial;\n}\n.vditor-reset p:last-child,\n.vditor-reset blockquote:last-child,\n.vditor-reset pre:last-child,\n.vditor-reset ul:last-child,\n.vditor-reset ol:last-child,\n.vditor-reset hr:last-child {\n  margin-bottom: 0;\n}\n.vditor-comment {\n  border-bottom: 2px solid #f8e6ab;\n}\n.vditor-comment--focus,\n.vditor-comment--hover {\n  background-color: #faf1d1;\n  border-bottom: 2px solid #ffc60a;\n}\n.vditor-comment--focus .vditor-comment,\n.vditor-comment--hover .vditor-comment {\n  border-bottom: 2px solid #ffc60a;\n}\n.vditor-task {\n  list-style: none !important;\n  word-break: break-all;\n}\n.vditor-task input {\n  margin: 0 0.2em 0.25em -1.6em;\n  font-size: 12px;\n  vertical-align: middle;\n}\n.vditor-copy {\n  position: relative;\n  display: none;\n  z-index: 1;\n}\n.vditor-copy textarea {\n  position: absolute;\n  left: -100000px;\n  height: 10px;\n}\n.vditor-copy span {\n  cursor: pointer;\n  position: absolute;\n  right: 15px;\n  top: 0.5em;\n}\n.vditor-copy svg {\n  color: #586069;\n  height: 14px;\n  width: 14px !important;\n  display: block;\n  fill: currentColor;\n}\n.vditor-linenumber {\n  padding-left: 4em !important;\n  position: relative;\n}\n.vditor-linenumber__rows {\n  position: absolute;\n  pointer-events: none;\n  top: 0.5em;\n  left: 0;\n  width: 3em;\n  /* works for line-numbers below 1000 lines */\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  counter-reset: linenumber;\n}\n.vditor-linenumber__rows > span {\n  pointer-events: none;\n  display: block;\n}\n.vditor-linenumber__rows > span::before {\n  counter-increment: linenumber;\n  content: counter(linenumber);\n  color: rgba(158, 150, 150, 0.38);\n  display: block;\n  padding-right: 1em;\n  text-align: right;\n}\n.vditor-speech {\n  position: absolute;\n  display: none;\n  background-color: #f6f8fa;\n  border: 1px solid #d1d5da;\n  border-radius: 3px;\n  padding: 3px;\n  cursor: pointer;\n  color: #586069;\n}\n.vditor-speech:hover,\n.vditor-speech--current {\n  color: #4285f4;\n}\n.vditor-speech svg {\n  height: 14px;\n  width: 14px;\n  fill: currentColor;\n  display: block;\n  stroke-width: 0;\n  stroke: currentColor;\n}\n.vditor-anchor {\n  margin-left: 5px;\n}\n.vditor-anchor--left {\n  float: left;\n  padding-right: 4px;\n  margin-left: -20px;\n}\n.vditor-anchor svg {\n  visibility: hidden;\n}\n.vditor-anchor:hover svg {\n  visibility: visible;\n}\n.vditor-anchor:focus {\n  outline: none;\n}\n.vditor-linkcard {\n  margin: 31px auto 16px;\n  transition: all 0.15s ease-in-out;\n  cursor: pointer;\n  max-width: 768px;\n  padding: 0 10px;\n}\n.vditor-linkcard a {\n  border-radius: 3px;\n  background-color: #f6f8fa;\n  overflow: hidden;\n  max-height: 250px;\n  display: flex;\n  text-decoration: none;\n  flex-wrap: wrap-reverse;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n}\n.vditor-linkcard a:hover {\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.13), 0 3px 6px rgba(0, 0, 0, 0.26);\n  text-decoration: none;\n}\n.vditor-linkcard a:visited .vditor-linkcard__abstract {\n  color: rgba(88, 96, 105, 0.36);\n}\n.vditor-linkcard__info {\n  padding: 10px;\n  min-width: 200px;\n  box-sizing: border-box;\n  flex: 1;\n}\n.vditor-linkcard__title {\n  font-size: 14px;\n  font-weight: 400;\n  color: #24292e;\n  display: flex;\n  align-items: center;\n}\n.vditor-linkcard__title img {\n  cursor: pointer;\n  height: 20px;\n  width: 20px;\n  border-radius: 3px;\n  flex-shrink: 0;\n  margin-right: 5px;\n}\n.vditor-linkcard__abstract {\n  word-wrap: break-word;\n  word-break: break-all;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  -webkit-box-orient: vertical;\n  display: -webkit-box;\n  font-size: 13px;\n  color: #586069;\n  margin: 5px 0;\n}\n.vditor-linkcard__site {\n  font-size: 12px;\n  color: #4285f4;\n}\n.vditor-linkcard__image {\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center center;\n  max-width: 250px;\n  min-width: 126px;\n  cursor: pointer;\n  background-color: rgba(88, 96, 105, 0.36);\n}\n.vditor-footnotes__goto-ref {\n  text-decoration: none;\n}\n.vditor-toc {\n  margin-bottom: 16px;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n  user-select: text;\n  color: #4285f4;\n}\n.vditor-toc .vditor-outline__action {\n  display: none;\n}\n.vditor-toc ul {\n  list-style: none !important;\n  padding-left: 1em;\n}\n.vditor-toc > ul {\n  padding-left: 0;\n}\n.vditor-toc span {\n  cursor: pointer;\n}\n.vditor-toc li > span > svg {\n  width: 0;\n  height: 0;\n}\n.vditor-outline {\n  width: 250px;\n  border-right: 1px solid var(--border-color);\n  background-color: var(--panel-background-color);\n  display: none;\n  overflow: auto;\n}\n.vditor-outline--right {\n  border-right: 0;\n  border-left: 1px solid var(--border-color);\n}\n.vditor-outline::-webkit-scrollbar {\n  display: none;\n}\n.vditor-outline ul {\n  list-style: none !important;\n  padding-left: 1em;\n  margin: 0;\n}\n.vditor-outline__content > ul {\n  padding-left: 0;\n}\n.vditor-outline li > span {\n  display: flex;\n  align-items: center;\n  padding: 5px 10px;\n  cursor: pointer;\n  color: var(--textarea-text-color);\n}\n.vditor-outline li > span > svg {\n  height: 10px;\n  width: 10px;\n  flex-shrink: 0;\n}\n.vditor-outline li > span:hover {\n  color: var(--toolbar-icon-hover-color);\n}\n.vditor-outline li > span > span {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.vditor-outline__title {\n  border-bottom: 1px dashed var(--border-color);\n  padding: 5px 10px;\n  color: var(--toolbar-icon-color);\n  font-size: 12px;\n}\n.vditor-outline__action {\n  transition: all 0.15s ease-in-out;\n  fill: currentColor;\n  margin-right: 5px;\n  flex-shrink: 0;\n}\n.vditor-outline__action--close {\n  transform: rotate(-90deg);\n}\n.vditor-wysiwyg {\n  box-sizing: border-box;\n  flex: 1;\n  position: relative;\n  width: 100%;\n  min-width: 1px;\n}\n.vditor-wysiwyg pre.vditor-reset {\n  background-color: var(--panel-background-color);\n  margin: 0;\n  white-space: pre-wrap;\n  height: 100%;\n  box-sizing: border-box;\n}\n.vditor-wysiwyg pre.vditor-reset[contenteditable="false"] {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.vditor-wysiwyg pre.vditor-reset:empty::before {\n  content: attr(placeholder);\n  color: var(--second-color);\n}\n.vditor-wysiwyg pre.vditor-reset:focus {\n  outline: none;\n  background-color: var(--textarea-background-color);\n}\n.vditor-wysiwyg pre.vditor-reset:after {\n  content: "";\n  height: var(--editor-bottom);\n  display: block;\n}\n.vditor-wysiwyg blockquote:empty::before,\n.vditor-wysiwyg pre > code:empty::before,\n.vditor-wysiwyg p:empty::before,\n.vditor-wysiwyg h1:empty::after,\n.vditor-wysiwyg h2:empty::after,\n.vditor-wysiwyg h3:empty::after,\n.vditor-wysiwyg h4:empty::after,\n.vditor-wysiwyg h5:empty::after,\n.vditor-wysiwyg h6:empty::after {\n  content: \' \';\n}\n.vditor-wysiwyg code[data-marker="`"] {\n  padding-left: 0 !important;\n  padding-right: 0 !important;\n}\n.vditor-wysiwyg__block pre:first-child {\n  margin-bottom: -1em;\n}\n.vditor-wysiwyg__block pre:first-child code {\n  color: var(--textarea-text-color);\n  height: auto;\n  text-align: left;\n}\n.vditor-wysiwyg__block pre:last-child {\n  margin-bottom: 1em;\n}\n.vditor-wysiwyg__preview {\n  cursor: pointer;\n  white-space: initial;\n  min-height: 27px;\n}\n.vditor-wysiwyg > .vditor-reset > h1:before,\n.vditor-wysiwyg > .vditor-reset > h2:before,\n.vditor-wysiwyg > .vditor-reset > h3:before,\n.vditor-wysiwyg > .vditor-reset > h4:before,\n.vditor-wysiwyg > .vditor-reset > h5:before,\n.vditor-wysiwyg > .vditor-reset > h6:before,\n.vditor-wysiwyg div.vditor-wysiwyg__block:before,\n.vditor-wysiwyg div[data-type="link-ref-defs-block"]:before,\n.vditor-wysiwyg div[data-type="footnotes-block"]:before,\n.vditor-wysiwyg .vditor-toc:before {\n  float: left;\n  padding-right: 4px;\n  margin-left: -29px;\n  content: \'H1\';\n  font-size: 0.85rem;\n  font-weight: normal;\n  color: var(--second-color);\n}\n.vditor-wysiwyg > .vditor-reset > h2:before {\n  content: \'H2\';\n}\n.vditor-wysiwyg > .vditor-reset > h3:before {\n  content: \'H3\';\n}\n.vditor-wysiwyg > .vditor-reset > h4:before {\n  content: \'H4\';\n}\n.vditor-wysiwyg > .vditor-reset > h5:before {\n  content: \'H5\';\n}\n.vditor-wysiwyg > .vditor-reset > h6:before {\n  content: \'H6\';\n}\n.vditor-wysiwyg div[data-type="link-ref-defs-block"]:before {\n  content: \'"A"\';\n}\n.vditor-wysiwyg div[data-type="footnotes-block"]:before {\n  content: \'^F\';\n}\n.vditor-wysiwyg div.vditor-wysiwyg__block:before {\n  content: "</>";\n}\n.vditor-wysiwyg div.vditor-wysiwyg__block[data-type="yaml-front-matter"]:before {\n  content: "F";\n}\n.vditor-wysiwyg div.vditor-wysiwyg__block[data-type="math-block"]:before {\n  content: "$$";\n}\n.vditor-wysiwyg .vditor-toc:before {\n  content: "ToC";\n}\n.vditor-wysiwyg hr {\n  display: inline-block;\n  margin: 12px 0;\n  width: 100%;\n}\n.vditor-wysiwyg details {\n  white-space: initial;\n}\n.vditor-wysiwyg a {\n  cursor: pointer;\n}\n.vditor-wysiwyg span[data-type="backslash"] > span {\n  display: none;\n  color: var(--second-color);\n}\n.vditor-wysiwyg span[data-type="link-ref"],\n.vditor-wysiwyg sup[data-type="footnotes-ref"] {\n  color: #4285f4;\n}\n.vditor-wysiwyg span[data-type="toc-h"] {\n  color: #4285f4;\n  text-decoration: underline;\n}\n.vditor-wysiwyg div[data-type="footnotes-block"] {\n  border-top: 2px solid var(--heading-border-color);\n  padding-top: 24px;\n  margin-top: 24px;\n}\n.vditor-wysiwyg div[data-type="link-ref-defs-block"] {\n  color: var(--blockquote-color);\n}\n@media screen and (max-width: 520px) {\n  .vditor-wysiwyg h1:before,\n  .vditor-wysiwyg h2:before,\n  .vditor-wysiwyg h3:before,\n  .vditor-wysiwyg h4:before,\n  .vditor-wysiwyg h5:before,\n  .vditor-wysiwyg h6:before,\n  .vditor-wysiwyg div.vditor-wysiwyg__block:before,\n  .vditor-wysiwyg div[data-type="link-ref-defs-block"]:before,\n  .vditor-wysiwyg div[data-type="footnotes-block"]:before,\n  .vditor-wysiwyg .vditor-toc:before {\n    content: none;\n  }\n}\n.vditor-ir {\n  box-sizing: border-box;\n  flex: 1;\n  min-width: 1px;\n  position: relative;\n  width: 100%;\n}\n.vditor-ir__node[data-type="code-block"]:before,\n.vditor-ir__node[data-type="code-block"]:after,\n.vditor-ir__node[data-type="yaml-front-matter"]:before,\n.vditor-ir__node[data-type="yaml-front-matter"]:after,\n.vditor-ir__node[data-type="math-block"]:before,\n.vditor-ir__node[data-type="math-block"]:after {\n  content: \' \';\n  color: var(--second-color);\n}\n.vditor-ir__node:not(.vditor-ir__node--expand) .vditor-ir__marker {\n  padding: 0 !important;\n}\n.vditor-ir__node:not(.vditor-ir__node--expand)[data-type="a"] {\n  cursor: pointer;\n}\n.vditor-ir__node[data-type="link-ref"],\n.vditor-ir__node[data-type="footnotes-ref"] {\n  color: #4285f4;\n}\n.vditor-ir__node[data-type="html-block"] {\n  margin-bottom: 1em;\n}\n.vditor-ir__node .vditor-ir__marker {\n  width: 0;\n  overflow: hidden;\n  display: inline-block;\n  height: 0;\n  transition: all 0.15s ease-in-out;\n}\n.vditor-ir__node--hidden .vditor-ir__marker {\n  visibility: hidden;\n}\n.vditor-ir__node--expand .vditor-ir__marker {\n  color: var(--second-color);\n  display: inline;\n  height: auto;\n  width: auto;\n}\n.vditor-ir__node--expand .vditor-ir__marker--hide {\n  display: none;\n}\n.vditor-ir__node--expand .vditor-ir__marker--heading {\n  color: var(--ir-heading-color);\n}\n.vditor-ir__node--expand .vditor-ir__marker--bi {\n  color: var(--ir-bi-color);\n}\n.vditor-ir__node--expand .vditor-ir__marker--link {\n  color: var(--ir-link-color);\n}\n.vditor-ir__node--expand .vditor-ir__marker--title {\n  color: var(--ir-title-color);\n}\n.vditor-ir__node--expand .vditor-ir__marker--bracket {\n  color: var(--ir-bracket-color);\n  text-decoration: underline;\n}\n.vditor-ir__node--expand .vditor-ir__marker--paren {\n  color: var(--ir-paren-color);\n}\n.vditor-ir__node--expand .vditor-ir__marker--info {\n  color: var(--ir-heading-color);\n}\n.vditor-ir__node--expand .vditor-ir__marker--pre code {\n  color: var(--textarea-text-color);\n  height: auto;\n  text-align: left;\n}\n.vditor-ir__node--expand[data-type="code-block"]:before,\n.vditor-ir__node--expand[data-type="code-block"]:after {\n  content: \'```\';\n}\n.vditor-ir__node--expand[data-type="yaml-front-matter"]:before,\n.vditor-ir__node--expand[data-type="yaml-front-matter"]:after {\n  content: \'---\';\n}\n.vditor-ir__node--expand[data-type="math-block"]:before,\n.vditor-ir__node--expand[data-type="math-block"]:after {\n  content: \'$$\';\n}\n.vditor-ir__node span[data-type="code-block-open-marker"],\n.vditor-ir__node span[data-type="code-block-close-marker"],\n.vditor-ir__node span[data-type="yaml-front-matter-open-marker"],\n.vditor-ir__node span[data-type="yaml-front-matter-close-marker"],\n.vditor-ir__node span[data-type="math-block-open-marker"],\n.vditor-ir__node span[data-type="math-block-close-marker"] {\n  display: none;\n}\n.vditor-ir__preview {\n  cursor: pointer;\n  white-space: initial;\n  min-height: 27px;\n}\n.vditor-ir__link {\n  color: var(--ir-bracket-color);\n  text-decoration: underline;\n}\n.vditor-ir pre.vditor-reset {\n  background-color: var(--panel-background-color);\n  margin: 0;\n  white-space: pre-wrap;\n  height: 100%;\n  box-sizing: border-box;\n}\n.vditor-ir pre.vditor-reset[contenteditable="false"] {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.vditor-ir pre.vditor-reset:empty::before {\n  content: attr(placeholder);\n  color: var(--second-color);\n}\n.vditor-ir pre.vditor-reset:focus {\n  outline: none;\n  background-color: var(--textarea-background-color);\n}\n.vditor-ir pre.vditor-reset:after {\n  content: "";\n  height: var(--editor-bottom);\n  display: block;\n}\n.vditor-ir pre.vditor-reset pre {\n  margin: 0;\n}\n.vditor-ir hr {\n  display: inline-block;\n  margin: 12px 0;\n  width: 100%;\n}\n.vditor-ir blockquote:empty::before,\n.vditor-ir pre > code:empty::before,\n.vditor-ir p:empty::before,\n.vditor-ir h1:empty::after,\n.vditor-ir h2:empty::after,\n.vditor-ir h3:empty::after,\n.vditor-ir h4:empty::after,\n.vditor-ir h5:empty::after,\n.vditor-ir h6:empty::after {\n  content: \' \';\n}\n.vditor-ir .vditor-reset > h1:before,\n.vditor-ir .vditor-reset > h2:before,\n.vditor-ir .vditor-reset > h3:before,\n.vditor-ir .vditor-reset > h4:before,\n.vditor-ir .vditor-reset > h5:before,\n.vditor-ir .vditor-reset > h6:before,\n.vditor-ir div[data-type="link-ref-defs-block"]:before,\n.vditor-ir div[data-type="footnotes-block"]:before,\n.vditor-ir .vditor-toc:before {\n  float: left;\n  padding-right: 4px;\n  margin-left: -29px;\n  content: \'H1\';\n  font-size: 0.85rem;\n  font-weight: normal;\n  color: var(--second-color);\n}\n.vditor-ir .vditor-reset > h2:before {\n  content: \'H2\';\n}\n.vditor-ir .vditor-reset > h3:before {\n  content: \'H3\';\n}\n.vditor-ir .vditor-reset > h4:before {\n  content: \'H4\';\n}\n.vditor-ir .vditor-reset > h5:before {\n  content: \'H5\';\n}\n.vditor-ir .vditor-reset > h6:before {\n  content: \'H6\';\n}\n.vditor-ir div[data-type="link-ref-defs-block"] {\n  color: var(--blockquote-color);\n}\n.vditor-ir div[data-type="link-ref-defs-block"]:before {\n  content: \'"A"\';\n}\n.vditor-ir div[data-type="footnotes-block"] {\n  border-top: 2px solid var(--heading-border-color);\n  padding-top: 24px;\n  margin-top: 24px;\n}\n.vditor-ir div[data-type="footnotes-block"]:before {\n  content: \'^F\';\n}\n.vditor-ir div[data-type="footnotes-block"] > div[data-type="footnotes-def"] > ul,\n.vditor-ir div[data-type="footnotes-block"] > div[data-type="footnotes-def"] > ol,\n.vditor-ir div[data-type="footnotes-block"] > div[data-type="footnotes-def"] > p,\n.vditor-ir div[data-type="footnotes-block"] > div[data-type="footnotes-def"] > blockquote,\n.vditor-ir div[data-type="footnotes-block"] > div[data-type="footnotes-def"] > pre,\n.vditor-ir div[data-type="footnotes-block"] > div[data-type="footnotes-def"] > table,\n.vditor-ir div[data-type="footnotes-block"] > div[data-type="footnotes-def"] > hr {\n  margin-left: 8px;\n}\n.vditor-ir .vditor-toc:before {\n  content: "ToC";\n}\n.vditor-ir .vditor-toc span[data-type="toc-h"] {\n  color: #4285f4;\n  text-decoration: underline;\n}\n@media screen and (max-width: 520px) {\n  .vditor-ir h1:before,\n  .vditor-ir h2:before,\n  .vditor-ir h3:before,\n  .vditor-ir h4:before,\n  .vditor-ir h5:before,\n  .vditor-ir h6:before,\n  .vditor-ir div[data-type="link-ref-defs-block"]:before,\n  .vditor-ir div[data-type="footnotes-block"]:before,\n  .vditor-ir .vditor-toc:before {\n    content: none;\n  }\n}\n.vditor-sv {\n  font-family: "Helvetica Neue", "Luxi Sans", "DejaVu Sans", "Hiragino Sans GB", "Microsoft Yahei", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji", "Segoe UI Symbol", "Android Emoji", "EmojiSymbols";\n  margin: 0 1px 0 0;\n  overflow: auto;\n  width: 100%;\n  flex: 1;\n  min-width: 1px;\n  border: 0;\n  resize: none;\n  padding: 10px 9px 10px 10px;\n  box-sizing: border-box;\n  background-color: var(--panel-background-color);\n  outline: 0 none;\n  font-size: 16px;\n  line-height: 22px;\n  color: var(--textarea-text-color);\n  border-radius: 0 0 3px 3px;\n  font-variant-ligatures: no-common-ligatures;\n  white-space: pre-wrap;\n  word-break: break-word;\n  word-wrap: break-word;\n}\n.vditor-sv[contenteditable="false"] {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.vditor-sv:empty::before {\n  content: attr(placeholder);\n  color: var(--second-color);\n}\n.vditor-sv:focus {\n  background-color: var(--textarea-background-color);\n}\n.vditor-sv:after {\n  content: "";\n  height: var(--editor-bottom);\n  display: block;\n}\n.vditor-sv span[data-type="newline"] + span[data-type="text"]:empty {\n  display: inherit;\n}\n.vditor-sv .sup {\n  vertical-align: super;\n  font-size: smaller;\n}\n.vditor-sv .strong {\n  font-weight: bold;\n}\n.vditor-sv .em {\n  font-style: italic;\n}\n.vditor-sv .s {\n  text-decoration: line-through;\n}\n.vditor-sv .mark:not(.vditor-sv__marker) {\n  background-color: yellow;\n  color: black;\n}\n.vditor-sv .h1 {\n  font-size: 1.75em;\n  line-height: 44px;\n}\n.vditor-sv .h2 {\n  font-size: 1.55em;\n  line-height: 38px;\n}\n.vditor-sv .h3 {\n  font-size: 1.38em;\n  line-height: 27px;\n}\n.vditor-sv .h4 {\n  font-size: 1.25em;\n  line-height: 25px;\n}\n.vditor-sv .h5 {\n  font-size: 1.13em;\n}\n.vditor-sv .h6 {\n  font-size: 1em;\n}\n.vditor-sv__marker {\n  color: var(--second-color);\n}\n.vditor-sv__marker--heading {\n  color: var(--ir-heading-color);\n}\n.vditor-sv__marker--bi {\n  color: var(--ir-bi-color);\n}\n.vditor-sv__marker--link {\n  color: var(--ir-link-color);\n}\n.vditor-sv__marker--title {\n  color: var(--ir-title-color);\n}\n.vditor-sv__marker--bracket {\n  color: var(--ir-bracket-color);\n}\n.vditor-sv__marker--paren {\n  color: var(--ir-paren-color);\n}\n.vditor-sv__marker--info {\n  color: var(--ir-heading-color);\n}\n.vditor-sv__marker--strong {\n  font-weight: bold;\n}\n',""]),e.exports=t}}]);